(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({"C:\\HACKUCSC\\src\\js\\entities\\ProgressBar.js":[function(require,module,exports){
//NOTE: DON'T USE this code to create a ProgressBar. Instead, use the UIBuilder object and call buildProgressBar

var ProgressBar = function(setType, setMaxValue, setGraphics, setRenderables) {
	this.type = setType; //Two types, "growing" (starts at 0, triggers event when full) 
						 //and "shrinking" (starts full, triggers at 0)
	this.bgBorderSize = 2;			//default size of background border
	this.bgBorderColor = 0x00000;	//default color of background border
	this.bgColor = 0xffffff;		//default color of background
	this.paddingHoriz = 10;			//default sum of padding on left and right side inner value bar
	this.paddingVert = 10;			//default sum (i.e. half on each side) of vertical padding of inner value bar
	// this.valueBorderSize = 1;		//default size of value border
	// this.valueBorderColor = 0x8888FF; //default color of value border
	this.valueColor = 0x000000;		//default color of inner value bar
	this.x = null;
	this.y = null;
	this.width = null;
	this.height = null;
	this.maxValue = setMaxValue;
	this.graphics = setGraphics; //store graphics class (used to draw bar)
	this.renderables = setRenderables;
	
	this.onEvent = function() {}; //overwrite this function to make whatever you want happen when progressBar reaches limit
	
	//switch(this.type) {
	//case 'growing' : 
	if(setType === 'growing') {
		this.value = 0;
		//tryTrigger is called automatically when you add/subtract value, and will trigger the onEvent() function
		this.tryTrigger = function() {
			if(this.value >= this.maxValue) {
				this.onEvent();
			}
		};
		//break;
	}
	else if(setType === 'shrinking') {
	//case 'shrinking' :
		this.value = this.maxValue;
		this.tryTrigger = function() {
			if(this.value <= 0) {
				this.onEvent();
			}
		};
	}
};

ProgressBar.prototype.constructor = ProgressBar;

ProgressBar.prototype.destroy = function() {
	this.graphics.clear();
	this.renderables.unsubscribe(this);
};

//To subtract value, just use negative numbers as argument i.e. foo.addValue(-5);
ProgressBar.prototype.addValue = function (addThis) {
	this.value += addThis;
	if(this.value > this.maxValue) {
		this.value = this.maxValue;
	}
	if(this.value < 0) {
		this.value = 0;
	}
	this.tryTrigger();
};

//Sets the location where progress bar is rendered
ProgressBar.prototype.setLocation = function(setX, setY) {
	this.x = setX;
	this.y = setY;
};

//Sets the size of the progress bar
ProgressBar.prototype.setSize = function(setWidth, setHeight) {
	this.width = setWidth;
	this.height = setHeight;
};

ProgressBar.prototype.setStyle = function(bgBorderSize, bgBorderColor, bgColor, paddingHoriz, paddingVert, valueBorderSize, valueBorderColor, valueColor) {
	this.bgBorderSize = bgBorderSize;
	this.bgBorderColor = bgBorderColor;
	this.bgColor = bgColor;
	this.paddingHoriz = paddingHoriz;
	this.paddingVert = paddingVert;
	this.valueBorderSize = valueBorderSize;
	this.valueBorderColor = valueBorderColor;
	this.valueColor = valueColor;
};

//update for progress bar, called just before drawing progress bar
//Overwrite this function if desired
ProgressBar.prototype.update = function() {};

//Renders progressBar
ProgressBar.prototype.render = function() {
	this.update();
	this.graphics.clear();
	//Draw background of bar
	this.graphics.lineStyle(this.bgBorderSize, this.bgBorderColor, 1); //sets border color and size
	this.graphics.beginFill(this.bgColor); //sets color of background fill
	this.graphics.drawRect(this.x-this.width/2, this.y-this.height/2, this.width, this.height);
	this.graphics.endFill();
	//Draw value of bar
	var percentage = this.value / this.maxValue;
	var barWidth = this.width - this.paddingHoriz;
	var barHeight = this.height - this.paddingVert;
	this.graphics.lineStyle(this.valueBorderSize, this.valueBorderColor, 1);
	this.graphics.beginFill(this.valueColor);
	this.graphics.drawRect(this.x-(barWidth/2), this.y-(barHeight/2), barWidth*percentage, barHeight);
	this.graphics.endFill();
};

module.exports = ProgressBar;
},{}],"C:\\HACKUCSC\\src\\js\\entities\\background.js":[function(require,module,exports){
var Group_Manager = require('./groupManager');
var Person = require('./person');

var Background = function (game, baseX, baseY, hRatio, vRatio, income, type, state) {
    Phaser.Sprite.call(this, game, (baseX * hRatio * game.width), (baseY * vRatio * game.height) + 100, 'background');
    game.add.existing(this);
    this.baseX = baseX;
    this.baseY = baseY;
    this.hRatio = hRatio;
    this.vRatio = vRatio;
    this.newHRatio = hRatio;
    this.newVRatio = vRatio;
    this.minRatio = .02;
    this.group_manager = new Group_Manager(this.game, state);
	this.group_manager.background = this;
   	this.type = type;
    this.incomeLevel = income;
	this.state = state
};

Background.prototype = Object.create(Phaser.Sprite.prototype);
Background.prototype.constructor = Background;

Background.prototype.getVars = function() {
    //return x & y and width & height of visible
    return [this.x, this.y, this.hRatio * (this.game.width), this.vRatio * (this.game.height - this.myManager.border)];
};

Background.prototype.getVarsCenter = function() {
    // //return x & y of center and width & height of visible
    var visWidth = this.hRatio * (this.game.width);
    var visHeight = this.vRatio * (this.game.height - this.myManager.border);
    return {width : visWidth, height : visHeight, center : {x : this.x + visWidth / 2, y : this.y + visHeight / 2}};
};

Background.prototype.numPeople = function() {
    var num = this.group_manager.numPeople();
    if (num === 0) return 1;
    else return num;
};

Background.prototype.update = function() {
	if (this.newHRatio < this.minRatio) this.newHRatio = this.minRatio;
    if (this.newVRatio < this.minRatio) this.newVRatio = this.minRatio;
    if (this.hRatio !== this.newHRatio) {
        if (this.hRatio + .01 < this.newHRatio) this.hRatio += .01;
        else if (this.hRatio - .01 > this.newHRatio) this.hRatio -= .01;
        else this.hRatio = this.newHRatio;
    }
    if (this.vRatio !== this.newVRatio) {
        if (this.vRatio + .01 < this.newVRatio) this.vRatio += .01;
        else if (this.vRatio - .01 > this.newVRatio) this.vRatio -= .01;
        else this.vRatio = this.newVRatio;
    }
    if (this.type === 'unemployed')
        this.hRatio = 1;
    this.group_manager.update();
};



module.exports = Background;
},{"./groupManager":"C:\\HACKUCSC\\src\\js\\entities\\groupManager.js","./person":"C:\\HACKUCSC\\src\\js\\entities\\person.js"}],"C:\\HACKUCSC\\src\\js\\entities\\background_manager.js":[function(require,module,exports){
//Controls background elements

var Background = require('./background');
var Person = require('./person');
var util = require('../utils');

var Group = require('./group');

var Background_Manager = function(game, state) {
	this.game = game;
	this.state = state;
	//Create array of backgrounds
	this.bgArray = [
		new Background(this.game, 0, 0, .33, .33, Person.EDULEVEL.low , 'work' , state),	// this.bgArray[0] == workLow
		new Background(this.game, 1, 0, .33, .33, Person.EDULEVEL.mid , 'work' , state),	// this.bgArray[1] == workMid
		new Background(this.game, 2, 0, .33, .33, Person.EDULEVEL.high, 'work' , state),	// this.bgArray[2] == workMid
		new Background(this.game, 0, 1, .33, .33, Person.EDULEVEL.low , 'house', state),	// this.bgArray[3] == houseLow
		new Background(this.game, 1, 1, .33, .33, Person.EDULEVEL.mid , 'house', state),	// this.bgArray[4] == houseMid
		new Background(this.game, 2, 1, .33, .33, Person.EDULEVEL.high, 'house', state),	// this.bgArray[5] == houseMid
		new Background(this.game, 0, 2,   1, .33, '',              'unemployed', state)		// this.bgArray[6] == unemployed
	];
	for (bg in this.bgArray) {
		this.bgArray[bg].myManager = this;
	}
	
	for (var i in this.bgArray) {
		if (this.bgArray[i].type == 'work') {
			if (this.bgArray[i].incomeLevel === Person.EDULEVEL.low) {
				this.bgArray[i].tint = 0xed5c5a;
			}
			else if (this.bgArray[i].incomeLevel === Person.EDULEVEL.mid) {
				this.bgArray[i].tint = 0x6ae246;
			}
			else if (this.bgArray[i].incomeLevel === Person.EDULEVEL.high) {
				this.bgArray[i].tint = 0x2b59e2;
			}
		}
		else if (this.bgArray[i].type == 'house') {
			if (this.bgArray[i].incomeLevel === Person.EDULEVEL.low) {
				this.bgArray[i].tint = 0xed8180;
			}
			else if (this.bgArray[i].incomeLevel === Person.EDULEVEL.mid) {
				this.bgArray[i].tint = 0x94ea79;
			}
			else if (this.bgArray[i].incomeLevel === Person.EDULEVEL.high) {
				this.bgArray[i].tint = 0x5476dd;
			}
		}
		else { // Unemployed background
			this.bgArray[i].tint = 0xe7e7e7;
		}
		this.border = 100;
	}
	
	var test = this.bgArray[6].group_manager;
	var testFlock = new Group(this.game, this.game.width / 2 + 100, (this.game.height - this.border) / 2 + 100, state);
    for (var i = 0; i < 10; i++) {
    	var testPerson = new Person(this.game, this.game.width / 2 + i * 15, (this.game.height - this.border) / 2 + i * 15, i);
    	this.game.add.existing(testPerson);
    	testFlock.addMember(testPerson);
    }
    test.addMember(testFlock);
	// testFlock = new Group(this.game, this.game.width / 2 - 100, (this.game.height - this.border) / 2 + 100, state);
	// for (var i = 0; i < 10; i++) {
    	// var testPerson = new Person(this.game, this.game.width / 2 + i * 15 - 100, (this.game.height - this.border) / 2 + i * 15 + 100, i);
    	// this.game.add.existing(testPerson);
    	// testFlock.addMember(testPerson);
    // }
    // test.addMember(testFlock);
};

Background_Manager.prototype.constructor = Background_Manager;

/*Background_Manager.BGNAMES = {
		workLow    : this.bgArray[0],
		workMid    : this.bgArray[1],
		workHigh   : this.bgArray[2],
		houseLow   : this.bgArray[3],
		houseMid   : this.bgArray[4],
		houseHigh  : this.bgArray[5],
		unemployed : this.bgArray[6]
};*/

Background_Manager.prototype.sendTo = function(source, destination, group) {
	// console.log(destination);
	if (destination === null) {
		return;
	}
	var transType = this.transferType(source, destination, group)
	if (transType.can) {	// Check if they can transfer up
		source.group_manager.transfer(destination.group_manager, group, transType.happiness);
		if (transType.educate) {
			group.startEducation();
		}
		this.updateRatios(destination);
        // console.log(transType.happinessModifier);
        for (var person in group.members) {
            group.members[person].happinessModifier = transType.happinessModifier;
        }
		// var test = destination.getVarsCenter();
		// console.log(test);
	}
};
Background_Manager.prototype.numPeople = function() {
	var count = 0;
	for (var i in this.bgArray) {
		count += this.bgArray[i].group_manager.numPeople();
	}
	return count;
};
Background_Manager.prototype.transferType = function(source, destination, group) {
    if (destination == null) {
        return;
    }
	var groupEdu = group.members[0].eduLevel;
	var can = this.canTransfer(source, destination, group);
	// console.log(destination);
	// console.log(destination.type, destination.incomeLevel);
	var educate = (destination.type === 'house' && destination.incomeLevel) > groupEdu;
    var happinessModifier = 0;
    if (destination.type == 'unemployed' && source.type != 'unemployed') {
        happinessModifier -= 1;
    }
    if (destination.incomeLevel < groupEdu) {
        happinessModifier -= groupEdu - destination.incomeLevel;
    }
    var happinessChange = happinessModifier - group.happinessModifier();
    var incomeChange = 0;
	return {can : can, educate : educate, happinessChange : happinessChange, incomeChange : incomeChange, happinessModifier : happinessModifier};
};
Background_Manager.prototype.canTransfer = function(source, destination, group) {
	// console.log(source, destination, group);
	if (source === null || destination === null) return false;
	var sourceEdu = group.members[0].eduLevel;
	if (destination.type === 'unemployed') {
		return true;
	}
	if (sourceEdu === Person.EDULEVEL.unemployed) {
		if (destination.incomeLevel === Person.EDULEVEL.low && destination.type === 'house') {
			return true;
		}
	} else if (sourceEdu === Person.EDULEVEL.low) {
		if (destination.incomeLevel === Person.EDULEVEL.low) {
			return true;
		} else if (destination.incomeLevel === Person.EDULEVEL.mid) {
			if (destination.type === 'house') {
				return true;
			}
		}
	} else if (sourceEdu === Person.EDULEVEL.mid) {
		if (destination.incomeLevel === Person.EDULEVEL.low) {
			return true;
		} else if (destination.incomeLevel === Person.EDULEVEL.mid) {
			return true;
		} else if (destination.incomeLevel === Person.EDULEVEL.high) {
			if (destination.type === 'house') {
				return true;
			}
		}
	} else if (sourceEdu === Person.EDULEVEL.high) {
		return true;
	}
	return false;
};

Background_Manager.prototype.whereClicked = function() {
	for (var i in this.bgArray) {
		var curDimensions = this.bgArray[i].getVars();
		var mouseX = this.game.input.x;
		var mouseY = this.game.input.y;
		// if(i == 6) console.log('curDimensions: ' + curDimensions);
		if (mouseX > curDimensions[0] && mouseX <= curDimensions[0] + curDimensions[2]) {
			if (mouseY > curDimensions[1] && mouseY <= curDimensions[1] + curDimensions[3]) {
				return this.bgArray[i];
			}
		}
	}
	return null;
};

Background_Manager.prototype.findOther = function(source, destination) {
	if (source.type === 'work' && destination.type === 'work') {
		if (source.incomeLevel === Person.EDULEVEL.low) {
			if (destination.incomeLevel === Person.EDULEVEL.mid) return this.bgArray[2];
			else if (destination.incomeLevel === Person.EDULEVEL.high) return this.bgArray[1];
		}
		else if (source.incomeLevel === Person.EDULEVEL.mid) {
			if (destination.incomeLevel === Person.EDULEVEL.low) return this.bgArray[2];
			else if (destination.incomeLevel === Person.EDULEVEL.high) return this.bgArray[0];
		}
		else if (source.incomeLevel === Person.EDULEVEL.high) {
			if (destination.incomeLevel === Person.EDULEVEL.low) return this.bgArray[1];
			else if (destination.incomeLevel === Person.EDULEVEL.mid) return this.bgArray[0];
		}
	}
	else if (source.type === 'house' && destination.type === 'house') {
		if (source.incomeLevel === Person.EDULEVEL.low) {
			if (destination.incomeLevel === Person.EDULEVEL.mid) return this.bgArray[5];
			else if (destination.incomeLevel === Person.EDULEVEL.high) return this.bgArray[4];
		}
		else if (source.incomeLevel === Person.EDULEVEL.mid) {
			if (destination.incomeLevel === Person.EDULEVEL.low) return this.bgArray[5];
			else if (destination.incomeLevel === Person.EDULEVEL.high) return this.bgArray[3];
		}
		else if (source.incomeLevel === Person.EDULEVEL.high) {
			if (destination.incomeLevel === Person.EDULEVEL.low) return this.bgArray[4];
			else if (destination.incomeLevel === Person.EDULEVEL.mid) return this.bgArray[3];
		}
	}
};

Background_Manager.prototype.updateRatios = function(destination) {
	if (destination.type === 'work') {
		var hRatios = util.ratio(this.bgArray[0].numPeople(), this.bgArray[1].numPeople(), this.bgArray[2].numPeople());
	}
	else{
		var hRatios = util.ratio(this.bgArray[3].numPeople(), this.bgArray[4].numPeople(), this.bgArray[5].numPeople());
	}
	var employed = 0;
	for (var j = 0; j < 6; j++)
		employed += this.bgArray[j].numPeople();
	var vRatios = util.ratio(this.bgArray[6].numPeople(), employed);
	for (var i = 0 in this.bgArray) {
		if (i !== 6) {		// If not unemployed bg
			if (i < 3) {	// If work bg
				this.bgArray[i].newHRatio = hRatios[i];
				this.bgArray[i].newVRatio = vRatios[1] / 2;
			}
			else {			// If house bg
				this.bgArray[i].newHRatio = hRatios[i - 3];
				this.bgArray[i].newVRatio = vRatios[1] / 2;
			}
		}
		else bgArray[i].newVRatio = vRatios[0]; // Unemployed bg
	}
};

Background_Manager.prototype.update = function() {
	for (var i in this.bgArray) {
    	if (this.bgArray[i].incomeLevel === Person.EDULEVEL.mid) {
    		this.bgArray[i].x = this.bgArray[0].getVars()[2];
    	}
    	else if (this.bgArray[i].incomeLevel === Person.EDULEVEL.high) {
    	    this.bgArray[i].x = this.bgArray[1].getVars()[0] + this.bgArray[1].getVars()[2];
    	}
    	this.bgArray[i].y = (this.bgArray[i].baseY * this.bgArray[i].vRatio * (this.game.height - this.border)) + this.border;
		this.bgArray[i].update();
	}
	var test = this.bgArray[3].getVarsCenter();
};

module.exports = Background_Manager;
},{"../utils":"C:\\HACKUCSC\\src\\js\\utils.js","./background":"C:\\HACKUCSC\\src\\js\\entities\\background.js","./group":"C:\\HACKUCSC\\src\\js\\entities\\group.js","./person":"C:\\HACKUCSC\\src\\js\\entities\\person.js"}],"C:\\HACKUCSC\\src\\js\\entities\\group.js":[function(require,module,exports){
//controls flocking for a group of person objects
var util = require('../utils');

var Group = function (game, centerX, centerY, state) {
	this.game = game;
	this.members = [];
	this.minDist = 20;
	//this.noise = 10;
	this.center = {x : centerX, y : centerY};
	this.clickDist = 50;
	this.selected = false;
	this.selection = this.game.add.sprite(this.center.x, this.center.y, 'selection');
	this.selection.anchor.setTo(0.5, 0.5);
	this.selection.width = 100;
	this.selection.height = 100;
	this.selection.visible = false;
	this.velocity = {x : 0, y : 0};
	this.speed = .05;
	this.state = state;
	this.book = this.game.add.sprite(this.center.x, this.center.y, 'book');
	this.book.anchor.setTo(0.5, 0.5);
	this.book.width = 25;
	this.book.height = 25;
	this.book.visible = false;
	this.learningTime = .01;
    this.hover = false;
	
	this.state.input.onDown.add(this.onInputDown, this);
    this.state.input.addMoveCallback(this.onMove, this);
}
Group.prototype.constructor = Group;
Group.prototype.update = function() {
	// console.log(this.center);
	//update center
	var newX = this.center.x + this.velocity.x * this.speed;
	var newY = this.center.y + this.velocity.y * this.speed;
	this.changeCenter({x : newX, y : newY});
	for (var member in this.members) {
		member = this.members[member];
		var velocity = {x:0, y:0};
		var diff = {x:0, y:0};
		diff.x = this.center.x - member.x;
		diff.y = this.center.y - member.y;
		velocity.x += diff.x;
		velocity.y += diff.y;
		for (var other in this.members) {
			other = this.members[other];
			//ignore self
			if (other === member) {
				continue;
			}
			var oDiff = {x:0, y:0};
			oDiff.x = other.x - member.x;
			oDiff.y = other.y - member.y;
			var totalDist = util.hypotenuse(oDiff.x, oDiff.y);
			if (totalDist <= this.minDist) {
				velocity.x = -1 * oDiff.x;
				velocity.y = -1 * oDiff.y;
				// velocity.x -= oDiff.x;
				// velocity.y -= oDiff.y;
				break;
			}
		}
		// if (util.hypotenuse(velocity.x, velocity.y) < this.minVelocity) {
			// velocity.x = velocity.y = 0;
		// }
		member.velocity = velocity;
	}
};
Group.prototype.addMember = function(member) {
	this.members.push(member);
	member.group = this;
};
Group.prototype.onInputDown = function() {
	// console.log('a');
	if (this.selected) {
		// console.log('c');
		// console.log(this.myManager, this.myManager.background);
		var bg = this.myManager.background.myManager.whereClicked();
		// console.log(bg);
		this.myManager.background.myManager.sendTo(this.myManager.background, bg, this);
		this.setSelected(false);
	} else if (this.clicked()) {
		this.click();
	}
};
Group.prototype.startEducation = function() {
	this.learning = false;
	this.book.visible = true;
	this.state.game.time.events.add(Phaser.Timer.SECOND * this.learningTime, this.endEducation, this);
};
Group.prototype.endEducation = function() {
	for (var member in this.members) {
		this.members[member].eduLevel += 1;
	}
	this.learning = false;
	this.book.visible = false;
};
Group.prototype.clicked = function() {
    if (this.members.length == 0) {
        return false;
    }
	var mouseX = this.game.input.x;
	var mouseY = this.game.input.y;
	var diffX = mouseX - this.center.x;
	var diffY = mouseY - this.center.y;
	var totalDiff = util.hypotenuse(diffX, diffY);
	if (totalDiff <= this.clickDist) {
		return true;
	}
	return false;
};
Group.prototype.click = function() {
	if (this.selected) {
        // this.state.hm.groupSelected = false;
		this.setSelected(false);
	} else {
        // this.state.hm.groupSelected = true;
		this.setSelected(true);
	}
};
/*
Group.prototype.move = function() {
	var mouseX = this.game.input.x;
	var mouseY = this.game.input.y;
	this.changeCenter({x : mouseX, y : mouseY});
	this.setSelected(false);
    this.state.hm.groupSelected = false;
};
*/
Group.prototype.setSelected = function(newSelected) {
	this.selected = newSelected;
	this.selection.visible = newSelected;
    if (newSelected == true) {
        this.state.hm.groupSelected = this;
    } else {
        if (this.state.hm.groupSelected == this) {
            this.state.hm.groupSelected = null;
        }
    }
};
Group.prototype.changeCenter = function(newCenter) {
	this.selection.x = newCenter.x;
	this.selection.y = newCenter.y;
	this.book.x = newCenter.x;
	this.book.y = newCenter.y;
	this.center = newCenter;
};
Group.prototype.numPeople = function() {
	return this.members.length;
};
Group.prototype.lowestEducation = function() {
    var lowest = 3;
    for (var member in this.members) {
        member = this.members[member];
        if (member.eduLevel < lowest) {
            lowest = member.eduLevel;
        }
    }
    return lowest;
};
Group.prototype.averageHappiness = function() {
    var happiness = 0;
    for (var member in this.members) {
        member = this.members[member];
        happiness += member.happiness;
    }
    happiness /= this.members.length;
    return happiness;
};
Group.prototype.averageFatigue = function() {
    var fatigue = 0;
    for (var member in this.members) {
        member = this.members[member];
        fatigue += member.fatigue;
    }
    fatigue /= this.members.length;
    return fatigue;
};
Group.prototype.income = function() {
    var income = 0;
    for (var member in this.members) {
        member = this.members[member];
        income += member.getTax();
    }
    return income;
};
// Group.prototype.happinessChange = function() {
    
// };
// Group.prototype.incomeChange = function() {
    
// };
// Group.prototype.mouseDown = function() {
	
// };
Group.prototype.onMove = function() {
    if (this.members.length == 0) {
        return;
    }
	var mouseX = this.game.input.x;
	var mouseY = this.game.input.y;
    var dist = util.hypotenuse(this.center.x - mouseX, this.center.y - mouseY);
    if (dist <= this.clickDist) {
        if (!this.state.hm.groupSelected && this.state.hm.groupSelected != this) {
            // console.log('a');
            this.state.hm.showStatic({people : this.numPeople(), education : this.lowestEducation(), happiness : this.averageHappiness(), fatigue : this.averageFatigue(), income : this.income()}, this.center.x, this.center.y - 50, 100);
            this.hover = true;
        }
    } else {
        if (this.hover) {
            this.hover = false;
            this.state.hm.hide();
        }
        if (this.state.hm.groupSelected == this && this.myManager.background.myManager.whereClicked() != this.myManager.background
            && this.myManager.background.myManager.canTransfer(this.myManager.background, this.myManager.background.myManager.whereClicked(), this)) {
            // console.log('a');
            var bgManager = this.myManager.background.myManager
            var transferType = bgManager.transferType(this.myManager.background, bgManager.whereClicked(), this);
            this.state.hm.showChange(transferType.can, {happinessChange : transferType.happinessChange, incomeChange : transferType.incomeChange}, mouseX, mouseY);
        } else {
            // console.log('b');
            this.state.hm.hide();
        }
    }
};
Group.prototype.happinessModifier = function() {
    return this.members[0].happinessModifier;
};

module.exports = Group;













},{"../utils":"C:\\HACKUCSC\\src\\js\\utils.js"}],"C:\\HACKUCSC\\src\\js\\entities\\groupManager.js":[function(require,module,exports){
var Util = require('../utils');

var GroupManager = function (game) {
	this.game = game;
	this.members = [];
	/*
	this.bound = {
		upper : center.y - height / 2,
		lower : center.y + height / 2,
		left : center.x - width / 2,
		right : center.x + width / 2
	};
	this.width = width;
	this.height = height;
	this.center = center;
	this.minDist = width / 2;
	*/
	/*
	Phaser.Sprite.call(this, game, x, y, 'person');
	this.velocity = {x:0, y:0};
	this.width = 10;
	this.height = 10;
	this.speed = .05;
	this.id = id;
	*/
};
GroupManager.prototype.constructor = GroupManager;
GroupManager.prototype.update = function() {
	// console.log(this.center);
	//update bounds
	if (this.background) {
		var vars = this.background.getVarsCenter();
		this.width = vars.width;
		this.height = vars.height;
		this.center = vars.center;
		// console.log(vars);
	} else {
		return;
	}
	//update member velocity
	for (var member in this.members) {
		member = this.members[member];
		var velocity = {x : 0, y : 0};
		// console.log(this.center, member.center);
		var diffX = this.center.x - member.center.x;
		var diffY = this.center.y - member.center.y;
		velocity.x = diffX;
		velocity.y = diffY;
		for (var other in this.members) {
			other = this.members[other];
			if (other === member) {
				continue;
			}
			var oDiffx = other.center.x - member.center.x;
			var oDiffy = other.center.y - member.center.y;
			var hyp = Util.hypotenuse(oDiffx, oDiffy);
			//console.log(hyp);
			if (hyp <= this.minDist) {
				// console.log('b', hyp);
				velocity.x = -1 * oDiffx;
				velocity.y = -1 * oDiffy;
				break;
			} else {
				// console.log('a');
			}
		}
		member.velocity = velocity;
	}
	//update members
	for (member in this.members) {
		this.members[member].update();
	}
};
GroupManager.prototype.transfer = function(otherGM, myMember) {
	var testVals = otherGM.background.getVarsCenter();
	// console.log('transfer to', otherGM.background.type, otherGM.background.incomeLevel, testVals.center.y, testVals.y, testVals.visHeight, testVals.vRatio);
	/*
	if (!(myMember in this.members)) {
		console.log('ERROR', myMember, 'not in', this);
		return;
	}
	*/
	var index = this.members.indexOf(myMember);
	this.members.splice(index, 1);
	otherGM.addMember(myMember);
};
GroupManager.prototype.addMember = function(member) {
	this.members.push(member);
	member.myManager = this;
	var smaller = (this.width < this.height) ? this.width : this.height;
	this.minDist = smaller / this.members.length;
	// console.log(this.minDist);
};
GroupManager.prototype.numPeople = function() {
	var count = 0;
	for (var member in this.members) {
		member = this.members[member];
		count += member.numPeople();
	}
	return count;
};

module.exports = GroupManager;












},{"../utils":"C:\\HACKUCSC\\src\\js\\utils.js"}],"C:\\HACKUCSC\\src\\js\\entities\\hoverMenu.js":[function(require,module,exports){
var HoverMenu = function (game, x, y, state) {
	Phaser.Sprite.call(this, game, x, y, 'bordered');
	game.add.existing(this);
	this.x = x;
	this.y = y;
    this.groupSelected = null;
	this.width = 265;
	this.height = 125;
    this.staticWidth = 265;
    this.staticHeight = 125;
    this.changeWidth = 150;
    this.changeHeight = 60;
    this.state = state;
	
	this.staticText = this.game.add.group();
	this.changeText = this.game.add.group();
    this.visible = false;
    
    // this.state.input.addMoveCallback(this.onInputMove, this);
	
	this.people = this.game.add.text(10, 10, 'People 0');
	this.people.font = 'VT323';
	this.people.fontSize = 24;
	this.people.fill = '#000000';
	
	this.education = this.game.add.text(10, 10, 'Education Low');
	this.education.font = 'VT323';
	this.education.fontSize = 24;
	this.education.fill = '#000000';
	
	this.happiness = this.game.add.text(10, 10, 'Happiness %100');
	this.happiness.font = 'VT323';
	this.happiness.fontSize = 24;
	this.happiness.fill = '#000000';
	
	this.fatigue = this.game.add.text(10, 10, 'Fatigue %0');
	this.fatigue.font = 'VT323';
	this.fatigue.fontSize = 24;
	this.fatigue.fill = '#000000';
	
    this.income = this.game.add.text(10, 10, 'Income $0');
	this.income.font = 'VT323';
	this.income.fontSize = 24;
	this.income.fill = '#000000';
    
	this.staticText.add(this.people);
	this.staticText.add(this.education);
    this.education.y += 20 * 1;
	this.staticText.add(this.happiness);
    this.happiness.y += 20 * 2;
	this.staticText.add(this.fatigue);
    this.fatigue.y += 20 * 3;
	this.staticText.add(this.income);
    this.income.y += 20 * 4;
    this.staticText.visible = false;
    this.staticText.x = this.x;
    this.staticText.y = this.y;
	
	this.happinessChange = this.game.add.text(10, 10, 'Happiness =');
	this.happinessChange.font = 'VT323';
	this.happinessChange.fontSize = 24;
	this.happinessChange.fill = '#000000';
	
	this.incomeChange = this.game.add.text(10, 10, 'Income =');
	this.incomeChange.font = 'VT323';
	this.incomeChange.fontSize = 24;
	this.incomeChange.fill = '#000000';
    
    this.changeText.add(this.happinessChange);
    this.changeText.add(this.incomeChange);
    this.incomeChange.y += 20 * 1;
    this.changeText.visible = false;
    this.changeText.x = this.x;
    this.changeText.y = this.y;
    
    // this.mover = this.game.add.group();
    // this.mover.add(this);
    // this.mover.add(this.staticText);
    // this.mover.add(this.changeText);
};
HoverMenu.prototype = Object.create(Phaser.Sprite.prototype);
HoverMenu.prototype.constructor = HoverMenu;
HoverMenu.prototype.update = function() {
	
};
//people, education, happiness, fatigue, income
HoverMenu.prototype.showStatic = function(state, x, y, over) {
    x -= this.width / 2;
    y -= this.height;
	this.people.text = 'People ' + state.people;
    this.education.text = 'Education ' + state.education;
    this.happiness.text = 'Happiness %' + state.happiness;
    this.fatigue.text = 'Fatigue %' + state.fatigue;
    this.income.text = 'Income $' + state.income;
    this.staticText.visible = true;
    this.visible = true;
    this.width = this.staticWidth;
    this.height = this.staticHeight;
    this.x = x;
    this.y = y;
    this.staticText.x = x;
    this.staticText.y = y;
    this.adjustStatic(over);
};
//happinessChange, incomeChange
HoverMenu.prototype.showChange = function(can, state, x, y) {
    if (!can) {
        return;
    }
	this.happinessChange.text = 'Happiness ' + state.happinessChange;
    this.incomeChange.text = 'Income ' + state.incomeChange;
    this.changeText.visible = true;
    this.visible = true;
    this.width = this.changeWidth;
    this.height = this.changeHeight;
    y -= this.height;
    this.x = x;
    this.y = y;
    this.changeText.x = x;
    this.changeText.y = y;
    this.adjustChange();
};
HoverMenu.prototype.adjustStatic = function(over) {
    var maxWidth = this.game.width;
    var maxHeight = this.game.height;
    if (this.y - this.height <= 0) { // over top of screen
        this.y += over;
        this.y += this.height;
        this.staticText.y = this.y;
        this.changeText.y = this.y;
    }
    if (this.x - this.width / 2 < 0) { // over left of screen
        this.x += this.width / 2;
        this.staticText.x = this.x;
        this.changeText.x = this.x;
    } else if (this.x + this.width / 2 > maxWidth) { // over right of screen
        this.x -= this.width / 2;
        this.staticText.x = this.x;
        this.changeText.x = this.x;
    }
};
HoverMenu.prototype.adjustChange = function() {
    var maxWidth = this.game.width;
    var maxHeight = this.game.height;
    if (this.y - this.height <= 0) { // over top of screen
        this.y += this.height;
        this.staticText.y = this.y;
        this.changeText.y = this.y;
    }
    if (this.x + this.width > maxWidth) { // over right of screen
        this.x -= this.width;
        this.staticText.x = this.x;
        this.changeText.x = this.x;
    }
};
HoverMenu.prototype.hide = function() {
	this.staticText.visible = false;
    this.changeText.visible = false;
    this.visible = false;
};
// HoverMenu.prototype.onInputMove = function() {
  // console.log('move');
  
// };

module.exports = HoverMenu;



















},{}],"C:\\HACKUCSC\\src\\js\\entities\\person.js":[function(require,module,exports){
var Person = function (game, x, y, id) {
	Phaser.Sprite.call(this, game, x, y, 'person');
	this.velocity = {x:0, y:0};
	this.width = 10;
	this.height = 10;
	this.speed = .05;
	this.id = id;
	this.eduLevel = Person.EDULEVEL.unemployed;
	this.happiness = 100;
    this.fatigue = 0;
    this.happinessModifier = 0;
};
Person.prototype = Object.create(Phaser.Sprite.prototype);
Person.prototype.constructor = Person;

Person.EDULEVEL = {
	unemployed : -1,
	low  : 0,
	mid  : 1,
	high : 2
};

Person.prototype.update = function() {
	this.x += this.velocity.x * this.speed;
	this.y += this.velocity.y * this.speed;
	//console.log(this.velocity);
};

Person.prototype.getTax = function() {
	// console.log('get tax', this.group.myManager.background.type);
	if (this.group.myManager.background.type === 'house') {
		if (this.group.myManager.background.incomeLevel === Person.EDULEVEL.low) {
			console.log(this.group.myManager.background.myManager.state.taxMod.low);
			return -10;
		} else if (this.group.myManager.background.incomeLevel === Person.EDULEVEL.mid) {
			return -20;
		} else if (this.group.myManager.background.incomeLevel === Person.EDULEVEL.high) {
			return -30;
		}
	} else if (this.group.myManager.background.type === 'work') {
		if (this.group.myManager.background.incomeLevel === Person.EDULEVEL.low) {
			return 10 * this.group.myManager.background.myManager.state.taxMod.low;
		} else if (this.group.myManager.background.incomeLevel === Person.EDULEVEL.mid) {
			return 20 * this.group.myManager.background.myManager.state.taxMod.mid;
		} else if (this.group.myManager.background.incomeLevel === Person.EDULEVEL.high) {
			return 30 * this.group.myManager.background.myManager.state.taxMod.high;
		}
	}
	return 0;
};

module.exports = Person;
},{}],"C:\\HACKUCSC\\src\\js\\entities\\player.js":[function(require,module,exports){
var Player = function (game, x, y) {
    Phaser.Sprite.call(this, game, x, y, 'testsprite');
    game.add.existing(this);
	this.speed = 0.1;
}

Player.prototype = Object.create(Phaser.Sprite.prototype);
Player.prototype.constructor = Player;

/**
 * Automatically called by World.update
 */
Player.prototype.update = function() {
	//this.x += this.velocity;
};

module.exports = Player;

},{}],"C:\\HACKUCSC\\src\\js\\entities\\uiBuilder.js":[function(require,module,exports){
var ProgressBar = require('./ProgressBar');

var UIBuilder = function(setGameState) {
	//Ensure that cannot create multiple instances of this class
	if(UIBuilder.prototype.exists) {
		return UIBuilder.prototype.existingReference;
	}
	
	this.gameState = setGameState;
	this.renderables = [];
	//Create and store a graphics object (used for stuff like drawing rectangles)
	UIBuilder.prototype.exists = true;
	UIBuilder.prototype.existingReference = this;
};

UIBuilder.prototype.constructor = UIBuilder;
//These var's help create the singleton functionality
UIBuilder.prototype.exists = false;
UIBuilder.prototype.existingReference = null;

//Use this function to create a progress bar
//Usage: type: can be "growing" or "shrinking", this will effect if bar starts at 0 and goes up or vis versa
//		 maxValue: sets the max value of the progress bar, i.e. using 100 creates a bar from 0 to 100
//		 x,y: sets location
//		 DON'T FORGET to overwrite the onEvent() function for the progress bar after creating it
//			-onEvent() is automatically called when bar fills/shrinks past limit (depending on bar type)
UIBuilder.prototype.buildProgressBar = function(type, x, y, width, height, maxValue) {
	//create and format new prog bar
	var graphics = this.gameState.game.add.graphics(0,0);
	var newProgBar = new ProgressBar(type, maxValue, graphics, this.renderables);
	newProgBar.setLocation(x,y);
	newProgBar.setSize(width, height);
	//subscribe to 'renderables' so that render() is called automatically
	// this.renderables.subscribe(newProgBar);
	this.renderables.push(newProgBar);
	return newProgBar;
};
UIBuilder.prototype.render = function() {
	for (renderable in this.renderables) {
		this.renderables[renderable].render();
	}
};

module.exports = UIBuilder;
},{"./ProgressBar":"C:\\HACKUCSC\\src\\js\\entities\\ProgressBar.js"}],"C:\\HACKUCSC\\src\\js\\main.js":[function(require,module,exports){
'use strict';

var game = new Phaser.Game(800, 600, Phaser.AUTO, '-game');

window.Utils = require('./utils');
window.playerState = {
    currentLevel: 'Game'
};


game.state.add('Boot', require('./states/boot'));
game.state.add('Splash', require('./states/splash'));
game.state.add('Preloader', require('./states/preloader'));
game.state.add('Menu', require('./states/menu'));
game.state.add('Game', require('./states/game'));
game.state.add('Game_Over', require('./states/game_over'));

game.state.start('Boot');

//game.stage.backgroundColor = "#ffffff";

},{"./states/boot":"C:\\HACKUCSC\\src\\js\\states\\boot.js","./states/game":"C:\\HACKUCSC\\src\\js\\states\\game.js","./states/game_over":"C:\\HACKUCSC\\src\\js\\states\\game_over.js","./states/menu":"C:\\HACKUCSC\\src\\js\\states\\menu.js","./states/preloader":"C:\\HACKUCSC\\src\\js\\states\\preloader.js","./states/splash":"C:\\HACKUCSC\\src\\js\\states\\splash.js","./utils":"C:\\HACKUCSC\\src\\js\\utils.js"}],"C:\\HACKUCSC\\src\\js\\states\\boot.js":[function(require,module,exports){
var Boot = function () {};

module.exports = Boot;

Boot.prototype = {

  preload: function () {
    this.load.image('preloader', 'assets/preloader.gif');
  },

  create: function () {
    this.game.input.maxPointers = 1;

    if (this.game.device.desktop) {
      this.game.stage.scale.pageAlignHorizontally = true;
    } else {
      this.game.scale.scaleMode = Phaser.ScaleManager.SHOW_ALL;
      this.game.scale.minWidth =  480;
      this.game.scale.minHeight = 260;
      this.game.scale.maxWidth = 640;
      this.game.scale.maxHeight = 480;
      this.game.scale.forceLandscape = true;
      this.game.scale.pageAlignHorizontally = true;
      this.game.scale.setScreenSize(true);
    }

    this.game.state.start('Preloader');
  }
};

},{}],"C:\\HACKUCSC\\src\\js\\states\\game.js":[function(require,module,exports){
var Player = require('../entities/player');
var Background_Manager = require('../entities/background_manager');
var Person = require('../entities/person');
var Group = require('../entities/group');
var GroupManager = require('../entities/groupManager');
var UIBuilder = require('../entities/uiBuilder');
var HoverMenu = require('../entities/hoverMenu');

var Game = function () {
  this.testentity = null;
  //this.flocks = [];
  this.bg_mg = null;
  // this.selectedGroup = null;
  this.money = null;
  this.moneyVal = 0;
  this.curMoney = 0;
  this.moneyUpdateDelay = 0.001;
  this.moneyIncrementing = false;
  this.happinessVal = 0;
  this.curHappiness = 0;
  this.happinessUpdateDelay = 0.001;
  this.happinessIncrementing = false;
  this.taxTime = 3;
  this.taxMod = {low: 1, mid: 1, high: 1};
  this.minHappiness = 50;
};

module.exports = Game;

Game.prototype = {

  create: function () {
	  // console.log(this);
    this.game.stage.backgroundColor = "#ededed";
    this.menu_bg = this.game.add.image(0, 0, 'menu_bg');  
    var x = (this.game.width / 2) - 100;
    var y = (this.game.height / 2) - 50;

    this.bg_mg = new Background_Manager(this.game, this);
	
    this.input.onDown.add(this.onInputDown, this);
	
	this.money = this.game.add.text(20, 20, '$0');
	this.money.font = "Roboto";
	this.money.fontSize = 24;
	this.money.fill = '#000000';
  this.money.text = '$0';
	this.uib = new UIBuilder(this);
	this.bar = this.uib.buildProgressBar("growing", this.game.width / 2, 25, 300, 16, 100 - this.minHappiness);
	//this.bar.addValue(100);
	this.happy = this.game.add.sprite(this.game.width * .29, 25, 'happyface');
	this.happy.anchor.setTo(0.5, 0.5);

  // Tax buttons
  this.redTaxLow   = this.game.add.button(this.bg_mg.bgArray[0].getVarsCenter().center.x - 15, 75, 'taxReduce', this.decTaxLow, this);
  this.textTaxLow  = this.game.add.text(this.bg_mg.bgArray[0].getVars()[0], 78, '$$');
  this.textTaxLow.font = "Roboto";
  this.textTaxLow.fontSize = 18;
  this.addTaxLow   = this.game.add.button(this.bg_mg.bgArray[0].getVarsCenter().center.x + 15, 75, 'taxAdd', this.incTaxLow, this);
  this.redTaxLow.anchor.setTo(.5, .5);
  this.textTaxLow.anchor.setTo(0, .5);
  this.addTaxLow.anchor.setTo(.5, .5);
  this.redTaxMid   = this.game.add.button(this.bg_mg.bgArray[1].getVarsCenter().center.x - 15, 75, 'taxReduce', this.decTaxMid, this);
  this.textTaxMid  = this.game.add.text(this.bg_mg.bgArray[1].getVarsCenter().center.x, 78, '$$');
  this.textTaxMid.font = "Roboto";
  this.textTaxMid.fontSize = 18;
  this.addTaxMid   = this.game.add.button(this.bg_mg.bgArray[1].getVarsCenter().center.x + 15, 75, 'taxAdd', this.incTaxMid, this);
  this.redTaxMid.anchor.setTo(.5, .5);
  this.textTaxMid.anchor.setTo(0, .5);
  this.addTaxMid.anchor.setTo(.5, .5);
  this.redTaxHigh  = this.game.add.button(this.bg_mg.bgArray[2].getVarsCenter().center.x - 15, 75, 'taxReduce', this.decTaxHigh, this);
  this.textTaxHigh = this.game.add.text(this.bg_mg.bgArray[1].getVarsCenter().center.x, 78, '$$');
  this.textTaxHigh.font = "Roboto";
  this.textTaxHigh.fontSize = 18;
  this.addTaxHigh  = this.game.add.button(this.bg_mg.bgArray[2].getVarsCenter().center.x + 15, 75, 'taxAdd', this.incTaxHigh, this);
  this.redTaxHigh.anchor.setTo(.5, .5);
  this.textTaxHigh.anchor.setTo(0, .5);
  this.addTaxHigh.anchor.setTo(.5, .5);

	this.game.time.events.add(Phaser.Timer.SECOND * this.taxTime, this.collectTax, this);
    this.hm = new HoverMenu(this.game, 200, 200, this);
    // this.hm.anchor.setTo(0.5, 1);
	// this.hm.visible = false;
  },

  update: function () {
	this.bg_mg.update();
	//this.gm.update();
	this.uib.render();
	var happiness = 0;
	  for (var bg in this.bg_mg.bgArray) {
		  for (var group in this.bg_mg.bgArray[bg].group_manager.members) {
			  for (var person in this.bg_mg.bgArray[bg].group_manager.members[group].members) {
				  happiness += this.bg_mg.bgArray[bg].group_manager.members[group].members[person].happiness;
			  }
		  }
	  }
	  happiness /= this.bg_mg.numPeople();
	  happiness -= this.minHappiness;
	  // console.log(happiness);
	  // console.log(happiness);
	  this.setHappiness(happiness);
    this.redTaxLow.x   = this.bg_mg.bgArray[0].getVarsCenter().center.x - 30;
    this.textTaxLow.x  = this.bg_mg.bgArray[0].getVarsCenter().center.x - 15;
    this.addTaxLow.x   = this.bg_mg.bgArray[0].getVarsCenter().center.x + 30;
    this.redTaxMid.x   = this.bg_mg.bgArray[1].getVarsCenter().center.x - 30;
    this.textTaxMid.x  = this.bg_mg.bgArray[1].getVarsCenter().center.x - 15;
    this.addTaxMid.x   = this.bg_mg.bgArray[1].getVarsCenter().center.x + 30;
    this.redTaxHigh.x  = this.bg_mg.bgArray[2].getVarsCenter().center.x - 30;
    this.textTaxHigh.x = this.bg_mg.bgArray[2].getVarsCenter().center.x - 15;
    this.addTaxHigh.x  = this.bg_mg.bgArray[2].getVarsCenter().center.x + 30;

    if (this.curHappiness < this.minHappiness)
      this.game.state.start('Game_Over');
  },

  onInputDown: function () {
	 // console.log(this.game.width, this.game.height);
  },
  collectTax: function () {
	  // console.log('collect tax');
	  var taxes = 0;
	  for (var bg in this.bg_mg.bgArray) {
		  for (var group in this.bg_mg.bgArray[bg].group_manager.members) {
			  for (var person in this.bg_mg.bgArray[bg].group_manager.members[group].members) {
				  taxes += this.bg_mg.bgArray[bg].group_manager.members[group].members[person].getTax();
			  }
		  }
	  }
	  this.addMoney(taxes);
	  this.game.time.events.add(Phaser.Timer.SECOND * this.taxTime, this.collectTax, this);
  },
  setHappiness: function (amt) {
	  this.curHappiness = amt;
	  if (!this.happinessIncrementing) {
		  this.game.time.events.add(Phaser.Timer.SECOND * this.happinessUpdateDelay, this.incrementHappiness, this);
		  this.happinessIncrementing = true;
	  }
  },
  incrementHappiness: function () {
	if (this.happinessVal === this.curHappiness) {
		this.happinessIncrementing = false;
		return;
	}
	if (this.curHappiness > this.happinessVal) {
		this.bar.addValue(1);
		this.happinessVal += 1;
	} else if (this.curHappiness < this.happinessVal) {
		this.bar.addValue(-1);
		this.happinessVal -= 1;
	}
	this.game.time.events.add(Phaser.Timer.SECOND * this.happinessUpdateDelay, this.incrementHappiness, this);
  },
  addMoney: function (amt) {
	  this.curMoney += amt;
	  //this.money.text = '$' + newMoney;
	  if (!this.moneyIncrementing) {
		this.game.time.events.add(Phaser.Timer.SECOND * this.moneyUpdateDelay, this.incrementMoney, this);
		this.moneyIncrementing = true;
	  }
  },
  incrementMoney: function () {
	if (this.moneyVal === this.curMoney) {
		this.moneyIncrementing = false;
		return;
	}
	if (this.curMoney > this.moneyVal) {
		this.moneyVal += 5;
	} else if (this.curMoney < this.moneyVal) {
		this.moneyVal -= 5;
	}
	this.money.text = '$' + this.moneyVal;
	this.game.time.events.add(Phaser.Timer.SECOND * this.moneyUpdateDelay, this.incrementMoney, this);
  },
  decTaxLow: function () {
    if (this.taxMod.low == 1) {
      this.taxMod.low = .5;
      this.textTaxLow.text = '$';
    }
    else if (this.taxMod.low == 1.5) {
      this.taxMod.low = 1;
      this.textTaxLow.text = '$$';
    }
  },
  incTaxLow: function () {
    if (this.taxMod.low == .5) {
      this.taxMod.low = 1;
      this.textTaxLow.text = '$$';
    }
    else if (this.taxMod.low == 1) {
      this.taxMod.low = 1.5;
      this.textTaxLow.text = '$$$';
    }
  },
  decTaxMid: function () {
    if (this.taxMod.mid == 1) {
      this.taxMod.mid = .5;
      this.textTaxMid.text = '$';
    }
    else if (this.taxMod.mid == 1.5) {
      this.taxMod.mid = 1;
      this.textTaxMid.text = '$$';
    }
  },
  incTaxMid: function () {
    if (this.taxMod.mid == .5) {
      this.taxMod.mid = 1;
      this.textTaxMid.text = '$$';
    }
    else if (this.taxMod.mid == 1) {
      this.taxMod.mid = 1.5;
      this.textTaxMid.text = '$$$';
    }
  },
  decTaxHigh: function () {
    if (this.taxMod.high == 1) {
      this.taxMod.high = .5;
      this.textTaxHigh.text = '$';
    }
    else if (this.taxMod.high == 1.5) {
      this.taxMod.high = 1;
      this.textTaxHigh.text = '$$';
    }
  },
  incTaxHigh: function () {
    if (this.taxMod.high == .5) {
      this.taxMod.high = 1;
      this.textTaxHigh.text = '$$';
    }
    else if (this.taxMod.high == 1) {
      this.taxMod.high = 1.5;
      this.textTaxHigh.text = '$$$';
    }
  }
};














},{"../entities/background_manager":"C:\\HACKUCSC\\src\\js\\entities\\background_manager.js","../entities/group":"C:\\HACKUCSC\\src\\js\\entities\\group.js","../entities/groupManager":"C:\\HACKUCSC\\src\\js\\entities\\groupManager.js","../entities/hoverMenu":"C:\\HACKUCSC\\src\\js\\entities\\hoverMenu.js","../entities/person":"C:\\HACKUCSC\\src\\js\\entities\\person.js","../entities/player":"C:\\HACKUCSC\\src\\js\\entities\\player.js","../entities/uiBuilder":"C:\\HACKUCSC\\src\\js\\entities\\uiBuilder.js"}],"C:\\HACKUCSC\\src\\js\\states\\game_over.js":[function(require,module,exports){
var Game_Over = function () {
  this.text = null;
  this.textSmall = null;
};

module.exports = Game_Over;

Game_Over.prototype = {

  create: function () {
    var x = this.game.width / 2;
    var y = this.game.height / 2;

    var style = { font: "65px Arial", fill: "#ffffff", align: "center" };
    var smallStyle = { font: '35px "Lucida Console"', fill: "#ffffff", align: "center" };

    this.text = this.add.text(x - 300, y - 200, "Game Over", style);
    this.textSmall = this.add.text(x - 300, y - 100, "your happiness went under 50%\n" + "click to continue", smallStyle);
    this.game.time.events.add(Phaser.Timer.SECOND * 3, this.doThing, this);
  },

  update: function () {

  },

  doThing: function() {
    this.input.onDown.add(this.onDown, this);
  },

  onDown: function () {
    this.game.state.start(playerState.currentLevel);
  }
};
},{}],"C:\\HACKUCSC\\src\\js\\states\\menu.js":[function(require,module,exports){
var Menu = function () {
  this.text = null;
};

module.exports = Menu;

Menu.prototype = {

  create: function () {
    var x = this.game.width / 2;
    var y = this.game.height / 2;

    var style = { font: "65px Arial", fill: "#ffffff", align: "center" };

    this.text = this.add.text(x - 300, y - 200, "Press to Start", style);

    this.input.onDown.add(this.onDown, this);
  },

  update: function () {
  },

  onDown: function () {
    this.game.state.start(playerState.currentLevel);
  }
};

},{}],"C:\\HACKUCSC\\src\\js\\states\\preloader.js":[function(require,module,exports){
var Preloader = function (game) {
  this.asset = null;
  this.ready = false;
};

module.exports = Preloader;

Preloader.prototype = {

  preload: function () {
    this.asset = this.add.sprite(320, 240, 'preloader');
    this.asset.anchor.setTo(0.5, 0.5);

    this.load.onLoadComplete.addOnce(this.onLoadComplete, this);
    this.load.setPreloadSprite(this.asset);
    this.load.image('testsprite', 'assets/test.png');
    this.load.image('menu_bg', 'assets/menu_bg.png');
    this.load.image('background', 'assets/sectorBG.png')
    this.load.image('person', 'assets/person.png');
    this.load.image('selection', 'assets/selection.png');
    this.load.image('book', 'assets/book.png');
    this.load.image('young', 'assets/young.png');
    this.load.image('adult', 'assets/adult.png');
    this.load.image('old', 'assets/old.png');
    this.load.image('taxReduce', 'assets/taxReduce.png');
    this.load.image('taxAdd', 'assets/taxAdd.png');
    this.load.image('happyface', 'assets/happyface_better.png');
    this.load.image('bordered', 'assets/bordered.png');
    this.load.image('low_dollar', 'assets/low_dollar.png');
    this.load.image('med_dollar', 'assets/med_dollar.png');
    this.load.image('high_dollar', 'assets/high_dollar.png');
    this.load.script('webfont', '//ajax.googleapis.com/ajax/libs/webfont/1.4.7/webfont.js');
  },

  create: function () {
    this.asset.cropEnabled = false;
  },

  update: function () {
    if (!!this.ready) {
      this.game.state.start('Game');
    }
  },

  onLoadComplete: function () {
    this.ready = true;
  }
};

},{}],"C:\\HACKUCSC\\src\\js\\states\\splash.js":[function(require,module,exports){
var Splash = function () {
};

module.exports = Splash;

Splash.prototype = {
  create: function () {
  }
};
},{}],"C:\\HACKUCSC\\src\\js\\utils.js":[function(require,module,exports){
var Utils = {
    containsObject: function(obj, list) {
        var i;
        for (i = 0; i < list.length; i++) {
            if (list[i] === obj) {
                return true;
            }
        }

        return false;
    },
	hypotenuse: function(a, b) {
		return Math.sqrt(Math.pow(a, 2) + Math.pow(b, 2));
	},
	ratio: function(a, b, c) {
		if (arguments.length === 1) {
			return [a / a];
		}
		else if (arguments.length === 2) {
			return [a / (a + b), b / (a + b)];
		}
		else if (arguments.length === 3) {
			return [a / (a + b + c), b / (a + b + c), c / (a + b + c)];
		}
		else {
			return [];
		}
	}
};


module.exports = Utils;
},{}]},{},["C:\\HACKUCSC\\src\\js\\main.js"])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvZW50aXRpZXMvUHJvZ3Jlc3NCYXIuanMiLCJzcmMvanMvZW50aXRpZXMvYmFja2dyb3VuZC5qcyIsInNyYy9qcy9lbnRpdGllcy9iYWNrZ3JvdW5kX21hbmFnZXIuanMiLCJzcmMvanMvZW50aXRpZXMvZ3JvdXAuanMiLCJzcmMvanMvZW50aXRpZXMvZ3JvdXBNYW5hZ2VyLmpzIiwic3JjL2pzL2VudGl0aWVzL2hvdmVyTWVudS5qcyIsInNyYy9qcy9lbnRpdGllcy9wZXJzb24uanMiLCJzcmMvanMvZW50aXRpZXMvcGxheWVyLmpzIiwic3JjL2pzL2VudGl0aWVzL3VpQnVpbGRlci5qcyIsInNyYy9qcy9tYWluLmpzIiwic3JjL2pzL3N0YXRlcy9ib290LmpzIiwic3JjL2pzL3N0YXRlcy9nYW1lLmpzIiwic3JjL2pzL3N0YXRlcy9nYW1lX292ZXIuanMiLCJzcmMvanMvc3RhdGVzL21lbnUuanMiLCJzcmMvanMvc3RhdGVzL3ByZWxvYWRlci5qcyIsInNyYy9qcy9zdGF0ZXMvc3BsYXNoLmpzIiwic3JjL2pzL3V0aWxzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDL0dBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDN0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMzUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDblBBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2pCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzNDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM3QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hQQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNSQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIi8vTk9URTogRE9OJ1QgVVNFIHRoaXMgY29kZSB0byBjcmVhdGUgYSBQcm9ncmVzc0Jhci4gSW5zdGVhZCwgdXNlIHRoZSBVSUJ1aWxkZXIgb2JqZWN0IGFuZCBjYWxsIGJ1aWxkUHJvZ3Jlc3NCYXJcclxuXHJcbnZhciBQcm9ncmVzc0JhciA9IGZ1bmN0aW9uKHNldFR5cGUsIHNldE1heFZhbHVlLCBzZXRHcmFwaGljcywgc2V0UmVuZGVyYWJsZXMpIHtcclxuXHR0aGlzLnR5cGUgPSBzZXRUeXBlOyAvL1R3byB0eXBlcywgXCJncm93aW5nXCIgKHN0YXJ0cyBhdCAwLCB0cmlnZ2VycyBldmVudCB3aGVuIGZ1bGwpIFxyXG5cdFx0XHRcdFx0XHQgLy9hbmQgXCJzaHJpbmtpbmdcIiAoc3RhcnRzIGZ1bGwsIHRyaWdnZXJzIGF0IDApXHJcblx0dGhpcy5iZ0JvcmRlclNpemUgPSAyO1x0XHRcdC8vZGVmYXVsdCBzaXplIG9mIGJhY2tncm91bmQgYm9yZGVyXHJcblx0dGhpcy5iZ0JvcmRlckNvbG9yID0gMHgwMDAwMDtcdC8vZGVmYXVsdCBjb2xvciBvZiBiYWNrZ3JvdW5kIGJvcmRlclxyXG5cdHRoaXMuYmdDb2xvciA9IDB4ZmZmZmZmO1x0XHQvL2RlZmF1bHQgY29sb3Igb2YgYmFja2dyb3VuZFxyXG5cdHRoaXMucGFkZGluZ0hvcml6ID0gMTA7XHRcdFx0Ly9kZWZhdWx0IHN1bSBvZiBwYWRkaW5nIG9uIGxlZnQgYW5kIHJpZ2h0IHNpZGUgaW5uZXIgdmFsdWUgYmFyXHJcblx0dGhpcy5wYWRkaW5nVmVydCA9IDEwO1x0XHRcdC8vZGVmYXVsdCBzdW0gKGkuZS4gaGFsZiBvbiBlYWNoIHNpZGUpIG9mIHZlcnRpY2FsIHBhZGRpbmcgb2YgaW5uZXIgdmFsdWUgYmFyXHJcblx0Ly8gdGhpcy52YWx1ZUJvcmRlclNpemUgPSAxO1x0XHQvL2RlZmF1bHQgc2l6ZSBvZiB2YWx1ZSBib3JkZXJcclxuXHQvLyB0aGlzLnZhbHVlQm9yZGVyQ29sb3IgPSAweDg4ODhGRjsgLy9kZWZhdWx0IGNvbG9yIG9mIHZhbHVlIGJvcmRlclxyXG5cdHRoaXMudmFsdWVDb2xvciA9IDB4MDAwMDAwO1x0XHQvL2RlZmF1bHQgY29sb3Igb2YgaW5uZXIgdmFsdWUgYmFyXHJcblx0dGhpcy54ID0gbnVsbDtcclxuXHR0aGlzLnkgPSBudWxsO1xyXG5cdHRoaXMud2lkdGggPSBudWxsO1xyXG5cdHRoaXMuaGVpZ2h0ID0gbnVsbDtcclxuXHR0aGlzLm1heFZhbHVlID0gc2V0TWF4VmFsdWU7XHJcblx0dGhpcy5ncmFwaGljcyA9IHNldEdyYXBoaWNzOyAvL3N0b3JlIGdyYXBoaWNzIGNsYXNzICh1c2VkIHRvIGRyYXcgYmFyKVxyXG5cdHRoaXMucmVuZGVyYWJsZXMgPSBzZXRSZW5kZXJhYmxlcztcclxuXHRcclxuXHR0aGlzLm9uRXZlbnQgPSBmdW5jdGlvbigpIHt9OyAvL292ZXJ3cml0ZSB0aGlzIGZ1bmN0aW9uIHRvIG1ha2Ugd2hhdGV2ZXIgeW91IHdhbnQgaGFwcGVuIHdoZW4gcHJvZ3Jlc3NCYXIgcmVhY2hlcyBsaW1pdFxyXG5cdFxyXG5cdC8vc3dpdGNoKHRoaXMudHlwZSkge1xyXG5cdC8vY2FzZSAnZ3Jvd2luZycgOiBcclxuXHRpZihzZXRUeXBlID09PSAnZ3Jvd2luZycpIHtcclxuXHRcdHRoaXMudmFsdWUgPSAwO1xyXG5cdFx0Ly90cnlUcmlnZ2VyIGlzIGNhbGxlZCBhdXRvbWF0aWNhbGx5IHdoZW4geW91IGFkZC9zdWJ0cmFjdCB2YWx1ZSwgYW5kIHdpbGwgdHJpZ2dlciB0aGUgb25FdmVudCgpIGZ1bmN0aW9uXHJcblx0XHR0aGlzLnRyeVRyaWdnZXIgPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0aWYodGhpcy52YWx1ZSA+PSB0aGlzLm1heFZhbHVlKSB7XHJcblx0XHRcdFx0dGhpcy5vbkV2ZW50KCk7XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblx0XHQvL2JyZWFrO1xyXG5cdH1cclxuXHRlbHNlIGlmKHNldFR5cGUgPT09ICdzaHJpbmtpbmcnKSB7XHJcblx0Ly9jYXNlICdzaHJpbmtpbmcnIDpcclxuXHRcdHRoaXMudmFsdWUgPSB0aGlzLm1heFZhbHVlO1xyXG5cdFx0dGhpcy50cnlUcmlnZ2VyID0gZnVuY3Rpb24oKSB7XHJcblx0XHRcdGlmKHRoaXMudmFsdWUgPD0gMCkge1xyXG5cdFx0XHRcdHRoaXMub25FdmVudCgpO1xyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cdH1cclxufTtcclxuXHJcblByb2dyZXNzQmFyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFByb2dyZXNzQmFyO1xyXG5cclxuUHJvZ3Jlc3NCYXIucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbigpIHtcclxuXHR0aGlzLmdyYXBoaWNzLmNsZWFyKCk7XHJcblx0dGhpcy5yZW5kZXJhYmxlcy51bnN1YnNjcmliZSh0aGlzKTtcclxufTtcclxuXHJcbi8vVG8gc3VidHJhY3QgdmFsdWUsIGp1c3QgdXNlIG5lZ2F0aXZlIG51bWJlcnMgYXMgYXJndW1lbnQgaS5lLiBmb28uYWRkVmFsdWUoLTUpO1xyXG5Qcm9ncmVzc0Jhci5wcm90b3R5cGUuYWRkVmFsdWUgPSBmdW5jdGlvbiAoYWRkVGhpcykge1xyXG5cdHRoaXMudmFsdWUgKz0gYWRkVGhpcztcclxuXHRpZih0aGlzLnZhbHVlID4gdGhpcy5tYXhWYWx1ZSkge1xyXG5cdFx0dGhpcy52YWx1ZSA9IHRoaXMubWF4VmFsdWU7XHJcblx0fVxyXG5cdGlmKHRoaXMudmFsdWUgPCAwKSB7XHJcblx0XHR0aGlzLnZhbHVlID0gMDtcclxuXHR9XHJcblx0dGhpcy50cnlUcmlnZ2VyKCk7XHJcbn07XHJcblxyXG4vL1NldHMgdGhlIGxvY2F0aW9uIHdoZXJlIHByb2dyZXNzIGJhciBpcyByZW5kZXJlZFxyXG5Qcm9ncmVzc0Jhci5wcm90b3R5cGUuc2V0TG9jYXRpb24gPSBmdW5jdGlvbihzZXRYLCBzZXRZKSB7XHJcblx0dGhpcy54ID0gc2V0WDtcclxuXHR0aGlzLnkgPSBzZXRZO1xyXG59O1xyXG5cclxuLy9TZXRzIHRoZSBzaXplIG9mIHRoZSBwcm9ncmVzcyBiYXJcclxuUHJvZ3Jlc3NCYXIucHJvdG90eXBlLnNldFNpemUgPSBmdW5jdGlvbihzZXRXaWR0aCwgc2V0SGVpZ2h0KSB7XHJcblx0dGhpcy53aWR0aCA9IHNldFdpZHRoO1xyXG5cdHRoaXMuaGVpZ2h0ID0gc2V0SGVpZ2h0O1xyXG59O1xyXG5cclxuUHJvZ3Jlc3NCYXIucHJvdG90eXBlLnNldFN0eWxlID0gZnVuY3Rpb24oYmdCb3JkZXJTaXplLCBiZ0JvcmRlckNvbG9yLCBiZ0NvbG9yLCBwYWRkaW5nSG9yaXosIHBhZGRpbmdWZXJ0LCB2YWx1ZUJvcmRlclNpemUsIHZhbHVlQm9yZGVyQ29sb3IsIHZhbHVlQ29sb3IpIHtcclxuXHR0aGlzLmJnQm9yZGVyU2l6ZSA9IGJnQm9yZGVyU2l6ZTtcclxuXHR0aGlzLmJnQm9yZGVyQ29sb3IgPSBiZ0JvcmRlckNvbG9yO1xyXG5cdHRoaXMuYmdDb2xvciA9IGJnQ29sb3I7XHJcblx0dGhpcy5wYWRkaW5nSG9yaXogPSBwYWRkaW5nSG9yaXo7XHJcblx0dGhpcy5wYWRkaW5nVmVydCA9IHBhZGRpbmdWZXJ0O1xyXG5cdHRoaXMudmFsdWVCb3JkZXJTaXplID0gdmFsdWVCb3JkZXJTaXplO1xyXG5cdHRoaXMudmFsdWVCb3JkZXJDb2xvciA9IHZhbHVlQm9yZGVyQ29sb3I7XHJcblx0dGhpcy52YWx1ZUNvbG9yID0gdmFsdWVDb2xvcjtcclxufTtcclxuXHJcbi8vdXBkYXRlIGZvciBwcm9ncmVzcyBiYXIsIGNhbGxlZCBqdXN0IGJlZm9yZSBkcmF3aW5nIHByb2dyZXNzIGJhclxyXG4vL092ZXJ3cml0ZSB0aGlzIGZ1bmN0aW9uIGlmIGRlc2lyZWRcclxuUHJvZ3Jlc3NCYXIucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uKCkge307XHJcblxyXG4vL1JlbmRlcnMgcHJvZ3Jlc3NCYXJcclxuUHJvZ3Jlc3NCYXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uKCkge1xyXG5cdHRoaXMudXBkYXRlKCk7XHJcblx0dGhpcy5ncmFwaGljcy5jbGVhcigpO1xyXG5cdC8vRHJhdyBiYWNrZ3JvdW5kIG9mIGJhclxyXG5cdHRoaXMuZ3JhcGhpY3MubGluZVN0eWxlKHRoaXMuYmdCb3JkZXJTaXplLCB0aGlzLmJnQm9yZGVyQ29sb3IsIDEpOyAvL3NldHMgYm9yZGVyIGNvbG9yIGFuZCBzaXplXHJcblx0dGhpcy5ncmFwaGljcy5iZWdpbkZpbGwodGhpcy5iZ0NvbG9yKTsgLy9zZXRzIGNvbG9yIG9mIGJhY2tncm91bmQgZmlsbFxyXG5cdHRoaXMuZ3JhcGhpY3MuZHJhd1JlY3QodGhpcy54LXRoaXMud2lkdGgvMiwgdGhpcy55LXRoaXMuaGVpZ2h0LzIsIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KTtcclxuXHR0aGlzLmdyYXBoaWNzLmVuZEZpbGwoKTtcclxuXHQvL0RyYXcgdmFsdWUgb2YgYmFyXHJcblx0dmFyIHBlcmNlbnRhZ2UgPSB0aGlzLnZhbHVlIC8gdGhpcy5tYXhWYWx1ZTtcclxuXHR2YXIgYmFyV2lkdGggPSB0aGlzLndpZHRoIC0gdGhpcy5wYWRkaW5nSG9yaXo7XHJcblx0dmFyIGJhckhlaWdodCA9IHRoaXMuaGVpZ2h0IC0gdGhpcy5wYWRkaW5nVmVydDtcclxuXHR0aGlzLmdyYXBoaWNzLmxpbmVTdHlsZSh0aGlzLnZhbHVlQm9yZGVyU2l6ZSwgdGhpcy52YWx1ZUJvcmRlckNvbG9yLCAxKTtcclxuXHR0aGlzLmdyYXBoaWNzLmJlZ2luRmlsbCh0aGlzLnZhbHVlQ29sb3IpO1xyXG5cdHRoaXMuZ3JhcGhpY3MuZHJhd1JlY3QodGhpcy54LShiYXJXaWR0aC8yKSwgdGhpcy55LShiYXJIZWlnaHQvMiksIGJhcldpZHRoKnBlcmNlbnRhZ2UsIGJhckhlaWdodCk7XHJcblx0dGhpcy5ncmFwaGljcy5lbmRGaWxsKCk7XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFByb2dyZXNzQmFyOyIsInZhciBHcm91cF9NYW5hZ2VyID0gcmVxdWlyZSgnLi9ncm91cE1hbmFnZXInKTtcclxudmFyIFBlcnNvbiA9IHJlcXVpcmUoJy4vcGVyc29uJyk7XHJcblxyXG52YXIgQmFja2dyb3VuZCA9IGZ1bmN0aW9uIChnYW1lLCBiYXNlWCwgYmFzZVksIGhSYXRpbywgdlJhdGlvLCBpbmNvbWUsIHR5cGUsIHN0YXRlKSB7XHJcbiAgICBQaGFzZXIuU3ByaXRlLmNhbGwodGhpcywgZ2FtZSwgKGJhc2VYICogaFJhdGlvICogZ2FtZS53aWR0aCksIChiYXNlWSAqIHZSYXRpbyAqIGdhbWUuaGVpZ2h0KSArIDEwMCwgJ2JhY2tncm91bmQnKTtcclxuICAgIGdhbWUuYWRkLmV4aXN0aW5nKHRoaXMpO1xyXG4gICAgdGhpcy5iYXNlWCA9IGJhc2VYO1xyXG4gICAgdGhpcy5iYXNlWSA9IGJhc2VZO1xyXG4gICAgdGhpcy5oUmF0aW8gPSBoUmF0aW87XHJcbiAgICB0aGlzLnZSYXRpbyA9IHZSYXRpbztcclxuICAgIHRoaXMubmV3SFJhdGlvID0gaFJhdGlvO1xyXG4gICAgdGhpcy5uZXdWUmF0aW8gPSB2UmF0aW87XHJcbiAgICB0aGlzLm1pblJhdGlvID0gLjAyO1xyXG4gICAgdGhpcy5ncm91cF9tYW5hZ2VyID0gbmV3IEdyb3VwX01hbmFnZXIodGhpcy5nYW1lLCBzdGF0ZSk7XHJcblx0dGhpcy5ncm91cF9tYW5hZ2VyLmJhY2tncm91bmQgPSB0aGlzO1xyXG4gICBcdHRoaXMudHlwZSA9IHR5cGU7XHJcbiAgICB0aGlzLmluY29tZUxldmVsID0gaW5jb21lO1xyXG5cdHRoaXMuc3RhdGUgPSBzdGF0ZVxyXG59O1xyXG5cclxuQmFja2dyb3VuZC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFBoYXNlci5TcHJpdGUucHJvdG90eXBlKTtcclxuQmFja2dyb3VuZC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBCYWNrZ3JvdW5kO1xyXG5cclxuQmFja2dyb3VuZC5wcm90b3R5cGUuZ2V0VmFycyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgLy9yZXR1cm4geCAmIHkgYW5kIHdpZHRoICYgaGVpZ2h0IG9mIHZpc2libGVcclxuICAgIHJldHVybiBbdGhpcy54LCB0aGlzLnksIHRoaXMuaFJhdGlvICogKHRoaXMuZ2FtZS53aWR0aCksIHRoaXMudlJhdGlvICogKHRoaXMuZ2FtZS5oZWlnaHQgLSB0aGlzLm15TWFuYWdlci5ib3JkZXIpXTtcclxufTtcclxuXHJcbkJhY2tncm91bmQucHJvdG90eXBlLmdldFZhcnNDZW50ZXIgPSBmdW5jdGlvbigpIHtcclxuICAgIC8vIC8vcmV0dXJuIHggJiB5IG9mIGNlbnRlciBhbmQgd2lkdGggJiBoZWlnaHQgb2YgdmlzaWJsZVxyXG4gICAgdmFyIHZpc1dpZHRoID0gdGhpcy5oUmF0aW8gKiAodGhpcy5nYW1lLndpZHRoKTtcclxuICAgIHZhciB2aXNIZWlnaHQgPSB0aGlzLnZSYXRpbyAqICh0aGlzLmdhbWUuaGVpZ2h0IC0gdGhpcy5teU1hbmFnZXIuYm9yZGVyKTtcclxuICAgIHJldHVybiB7d2lkdGggOiB2aXNXaWR0aCwgaGVpZ2h0IDogdmlzSGVpZ2h0LCBjZW50ZXIgOiB7eCA6IHRoaXMueCArIHZpc1dpZHRoIC8gMiwgeSA6IHRoaXMueSArIHZpc0hlaWdodCAvIDJ9fTtcclxufTtcclxuXHJcbkJhY2tncm91bmQucHJvdG90eXBlLm51bVBlb3BsZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIG51bSA9IHRoaXMuZ3JvdXBfbWFuYWdlci5udW1QZW9wbGUoKTtcclxuICAgIGlmIChudW0gPT09IDApIHJldHVybiAxO1xyXG4gICAgZWxzZSByZXR1cm4gbnVtO1xyXG59O1xyXG5cclxuQmFja2dyb3VuZC5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24oKSB7XHJcblx0aWYgKHRoaXMubmV3SFJhdGlvIDwgdGhpcy5taW5SYXRpbykgdGhpcy5uZXdIUmF0aW8gPSB0aGlzLm1pblJhdGlvO1xyXG4gICAgaWYgKHRoaXMubmV3VlJhdGlvIDwgdGhpcy5taW5SYXRpbykgdGhpcy5uZXdWUmF0aW8gPSB0aGlzLm1pblJhdGlvO1xyXG4gICAgaWYgKHRoaXMuaFJhdGlvICE9PSB0aGlzLm5ld0hSYXRpbykge1xyXG4gICAgICAgIGlmICh0aGlzLmhSYXRpbyArIC4wMSA8IHRoaXMubmV3SFJhdGlvKSB0aGlzLmhSYXRpbyArPSAuMDE7XHJcbiAgICAgICAgZWxzZSBpZiAodGhpcy5oUmF0aW8gLSAuMDEgPiB0aGlzLm5ld0hSYXRpbykgdGhpcy5oUmF0aW8gLT0gLjAxO1xyXG4gICAgICAgIGVsc2UgdGhpcy5oUmF0aW8gPSB0aGlzLm5ld0hSYXRpbztcclxuICAgIH1cclxuICAgIGlmICh0aGlzLnZSYXRpbyAhPT0gdGhpcy5uZXdWUmF0aW8pIHtcclxuICAgICAgICBpZiAodGhpcy52UmF0aW8gKyAuMDEgPCB0aGlzLm5ld1ZSYXRpbykgdGhpcy52UmF0aW8gKz0gLjAxO1xyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMudlJhdGlvIC0gLjAxID4gdGhpcy5uZXdWUmF0aW8pIHRoaXMudlJhdGlvIC09IC4wMTtcclxuICAgICAgICBlbHNlIHRoaXMudlJhdGlvID0gdGhpcy5uZXdWUmF0aW87XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy50eXBlID09PSAndW5lbXBsb3llZCcpXHJcbiAgICAgICAgdGhpcy5oUmF0aW8gPSAxO1xyXG4gICAgdGhpcy5ncm91cF9tYW5hZ2VyLnVwZGF0ZSgpO1xyXG59O1xyXG5cclxuXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IEJhY2tncm91bmQ7IiwiLy9Db250cm9scyBiYWNrZ3JvdW5kIGVsZW1lbnRzXHJcblxyXG52YXIgQmFja2dyb3VuZCA9IHJlcXVpcmUoJy4vYmFja2dyb3VuZCcpO1xyXG52YXIgUGVyc29uID0gcmVxdWlyZSgnLi9wZXJzb24nKTtcclxudmFyIHV0aWwgPSByZXF1aXJlKCcuLi91dGlscycpO1xyXG5cclxudmFyIEdyb3VwID0gcmVxdWlyZSgnLi9ncm91cCcpO1xyXG5cclxudmFyIEJhY2tncm91bmRfTWFuYWdlciA9IGZ1bmN0aW9uKGdhbWUsIHN0YXRlKSB7XHJcblx0dGhpcy5nYW1lID0gZ2FtZTtcclxuXHR0aGlzLnN0YXRlID0gc3RhdGU7XHJcblx0Ly9DcmVhdGUgYXJyYXkgb2YgYmFja2dyb3VuZHNcclxuXHR0aGlzLmJnQXJyYXkgPSBbXHJcblx0XHRuZXcgQmFja2dyb3VuZCh0aGlzLmdhbWUsIDAsIDAsIC4zMywgLjMzLCBQZXJzb24uRURVTEVWRUwubG93ICwgJ3dvcmsnICwgc3RhdGUpLFx0Ly8gdGhpcy5iZ0FycmF5WzBdID09IHdvcmtMb3dcclxuXHRcdG5ldyBCYWNrZ3JvdW5kKHRoaXMuZ2FtZSwgMSwgMCwgLjMzLCAuMzMsIFBlcnNvbi5FRFVMRVZFTC5taWQgLCAnd29yaycgLCBzdGF0ZSksXHQvLyB0aGlzLmJnQXJyYXlbMV0gPT0gd29ya01pZFxyXG5cdFx0bmV3IEJhY2tncm91bmQodGhpcy5nYW1lLCAyLCAwLCAuMzMsIC4zMywgUGVyc29uLkVEVUxFVkVMLmhpZ2gsICd3b3JrJyAsIHN0YXRlKSxcdC8vIHRoaXMuYmdBcnJheVsyXSA9PSB3b3JrTWlkXHJcblx0XHRuZXcgQmFja2dyb3VuZCh0aGlzLmdhbWUsIDAsIDEsIC4zMywgLjMzLCBQZXJzb24uRURVTEVWRUwubG93ICwgJ2hvdXNlJywgc3RhdGUpLFx0Ly8gdGhpcy5iZ0FycmF5WzNdID09IGhvdXNlTG93XHJcblx0XHRuZXcgQmFja2dyb3VuZCh0aGlzLmdhbWUsIDEsIDEsIC4zMywgLjMzLCBQZXJzb24uRURVTEVWRUwubWlkICwgJ2hvdXNlJywgc3RhdGUpLFx0Ly8gdGhpcy5iZ0FycmF5WzRdID09IGhvdXNlTWlkXHJcblx0XHRuZXcgQmFja2dyb3VuZCh0aGlzLmdhbWUsIDIsIDEsIC4zMywgLjMzLCBQZXJzb24uRURVTEVWRUwuaGlnaCwgJ2hvdXNlJywgc3RhdGUpLFx0Ly8gdGhpcy5iZ0FycmF5WzVdID09IGhvdXNlTWlkXHJcblx0XHRuZXcgQmFja2dyb3VuZCh0aGlzLmdhbWUsIDAsIDIsICAgMSwgLjMzLCAnJywgICAgICAgICAgICAgICd1bmVtcGxveWVkJywgc3RhdGUpXHRcdC8vIHRoaXMuYmdBcnJheVs2XSA9PSB1bmVtcGxveWVkXHJcblx0XTtcclxuXHRmb3IgKGJnIGluIHRoaXMuYmdBcnJheSkge1xyXG5cdFx0dGhpcy5iZ0FycmF5W2JnXS5teU1hbmFnZXIgPSB0aGlzO1xyXG5cdH1cclxuXHRcclxuXHRmb3IgKHZhciBpIGluIHRoaXMuYmdBcnJheSkge1xyXG5cdFx0aWYgKHRoaXMuYmdBcnJheVtpXS50eXBlID09ICd3b3JrJykge1xyXG5cdFx0XHRpZiAodGhpcy5iZ0FycmF5W2ldLmluY29tZUxldmVsID09PSBQZXJzb24uRURVTEVWRUwubG93KSB7XHJcblx0XHRcdFx0dGhpcy5iZ0FycmF5W2ldLnRpbnQgPSAweGVkNWM1YTtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIGlmICh0aGlzLmJnQXJyYXlbaV0uaW5jb21lTGV2ZWwgPT09IFBlcnNvbi5FRFVMRVZFTC5taWQpIHtcclxuXHRcdFx0XHR0aGlzLmJnQXJyYXlbaV0udGludCA9IDB4NmFlMjQ2O1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2UgaWYgKHRoaXMuYmdBcnJheVtpXS5pbmNvbWVMZXZlbCA9PT0gUGVyc29uLkVEVUxFVkVMLmhpZ2gpIHtcclxuXHRcdFx0XHR0aGlzLmJnQXJyYXlbaV0udGludCA9IDB4MmI1OWUyO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRlbHNlIGlmICh0aGlzLmJnQXJyYXlbaV0udHlwZSA9PSAnaG91c2UnKSB7XHJcblx0XHRcdGlmICh0aGlzLmJnQXJyYXlbaV0uaW5jb21lTGV2ZWwgPT09IFBlcnNvbi5FRFVMRVZFTC5sb3cpIHtcclxuXHRcdFx0XHR0aGlzLmJnQXJyYXlbaV0udGludCA9IDB4ZWQ4MTgwO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2UgaWYgKHRoaXMuYmdBcnJheVtpXS5pbmNvbWVMZXZlbCA9PT0gUGVyc29uLkVEVUxFVkVMLm1pZCkge1xyXG5cdFx0XHRcdHRoaXMuYmdBcnJheVtpXS50aW50ID0gMHg5NGVhNzk7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSBpZiAodGhpcy5iZ0FycmF5W2ldLmluY29tZUxldmVsID09PSBQZXJzb24uRURVTEVWRUwuaGlnaCkge1xyXG5cdFx0XHRcdHRoaXMuYmdBcnJheVtpXS50aW50ID0gMHg1NDc2ZGQ7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdGVsc2UgeyAvLyBVbmVtcGxveWVkIGJhY2tncm91bmRcclxuXHRcdFx0dGhpcy5iZ0FycmF5W2ldLnRpbnQgPSAweGU3ZTdlNztcclxuXHRcdH1cclxuXHRcdHRoaXMuYm9yZGVyID0gMTAwO1xyXG5cdH1cclxuXHRcclxuXHR2YXIgdGVzdCA9IHRoaXMuYmdBcnJheVs2XS5ncm91cF9tYW5hZ2VyO1xyXG5cdHZhciB0ZXN0RmxvY2sgPSBuZXcgR3JvdXAodGhpcy5nYW1lLCB0aGlzLmdhbWUud2lkdGggLyAyICsgMTAwLCAodGhpcy5nYW1lLmhlaWdodCAtIHRoaXMuYm9yZGVyKSAvIDIgKyAxMDAsIHN0YXRlKTtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMTA7IGkrKykge1xyXG4gICAgXHR2YXIgdGVzdFBlcnNvbiA9IG5ldyBQZXJzb24odGhpcy5nYW1lLCB0aGlzLmdhbWUud2lkdGggLyAyICsgaSAqIDE1LCAodGhpcy5nYW1lLmhlaWdodCAtIHRoaXMuYm9yZGVyKSAvIDIgKyBpICogMTUsIGkpO1xyXG4gICAgXHR0aGlzLmdhbWUuYWRkLmV4aXN0aW5nKHRlc3RQZXJzb24pO1xyXG4gICAgXHR0ZXN0RmxvY2suYWRkTWVtYmVyKHRlc3RQZXJzb24pO1xyXG4gICAgfVxyXG4gICAgdGVzdC5hZGRNZW1iZXIodGVzdEZsb2NrKTtcclxuXHQvLyB0ZXN0RmxvY2sgPSBuZXcgR3JvdXAodGhpcy5nYW1lLCB0aGlzLmdhbWUud2lkdGggLyAyIC0gMTAwLCAodGhpcy5nYW1lLmhlaWdodCAtIHRoaXMuYm9yZGVyKSAvIDIgKyAxMDAsIHN0YXRlKTtcclxuXHQvLyBmb3IgKHZhciBpID0gMDsgaSA8IDEwOyBpKyspIHtcclxuICAgIFx0Ly8gdmFyIHRlc3RQZXJzb24gPSBuZXcgUGVyc29uKHRoaXMuZ2FtZSwgdGhpcy5nYW1lLndpZHRoIC8gMiArIGkgKiAxNSAtIDEwMCwgKHRoaXMuZ2FtZS5oZWlnaHQgLSB0aGlzLmJvcmRlcikgLyAyICsgaSAqIDE1ICsgMTAwLCBpKTtcclxuICAgIFx0Ly8gdGhpcy5nYW1lLmFkZC5leGlzdGluZyh0ZXN0UGVyc29uKTtcclxuICAgIFx0Ly8gdGVzdEZsb2NrLmFkZE1lbWJlcih0ZXN0UGVyc29uKTtcclxuICAgIC8vIH1cclxuICAgIC8vIHRlc3QuYWRkTWVtYmVyKHRlc3RGbG9jayk7XHJcbn07XHJcblxyXG5CYWNrZ3JvdW5kX01hbmFnZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQmFja2dyb3VuZF9NYW5hZ2VyO1xyXG5cclxuLypCYWNrZ3JvdW5kX01hbmFnZXIuQkdOQU1FUyA9IHtcclxuXHRcdHdvcmtMb3cgICAgOiB0aGlzLmJnQXJyYXlbMF0sXHJcblx0XHR3b3JrTWlkICAgIDogdGhpcy5iZ0FycmF5WzFdLFxyXG5cdFx0d29ya0hpZ2ggICA6IHRoaXMuYmdBcnJheVsyXSxcclxuXHRcdGhvdXNlTG93ICAgOiB0aGlzLmJnQXJyYXlbM10sXHJcblx0XHRob3VzZU1pZCAgIDogdGhpcy5iZ0FycmF5WzRdLFxyXG5cdFx0aG91c2VIaWdoICA6IHRoaXMuYmdBcnJheVs1XSxcclxuXHRcdHVuZW1wbG95ZWQgOiB0aGlzLmJnQXJyYXlbNl1cclxufTsqL1xyXG5cclxuQmFja2dyb3VuZF9NYW5hZ2VyLnByb3RvdHlwZS5zZW5kVG8gPSBmdW5jdGlvbihzb3VyY2UsIGRlc3RpbmF0aW9uLCBncm91cCkge1xyXG5cdC8vIGNvbnNvbGUubG9nKGRlc3RpbmF0aW9uKTtcclxuXHRpZiAoZGVzdGluYXRpb24gPT09IG51bGwpIHtcclxuXHRcdHJldHVybjtcclxuXHR9XHJcblx0dmFyIHRyYW5zVHlwZSA9IHRoaXMudHJhbnNmZXJUeXBlKHNvdXJjZSwgZGVzdGluYXRpb24sIGdyb3VwKVxyXG5cdGlmICh0cmFuc1R5cGUuY2FuKSB7XHQvLyBDaGVjayBpZiB0aGV5IGNhbiB0cmFuc2ZlciB1cFxyXG5cdFx0c291cmNlLmdyb3VwX21hbmFnZXIudHJhbnNmZXIoZGVzdGluYXRpb24uZ3JvdXBfbWFuYWdlciwgZ3JvdXAsIHRyYW5zVHlwZS5oYXBwaW5lc3MpO1xyXG5cdFx0aWYgKHRyYW5zVHlwZS5lZHVjYXRlKSB7XHJcblx0XHRcdGdyb3VwLnN0YXJ0RWR1Y2F0aW9uKCk7XHJcblx0XHR9XHJcblx0XHR0aGlzLnVwZGF0ZVJhdGlvcyhkZXN0aW5hdGlvbik7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2codHJhbnNUeXBlLmhhcHBpbmVzc01vZGlmaWVyKTtcclxuICAgICAgICBmb3IgKHZhciBwZXJzb24gaW4gZ3JvdXAubWVtYmVycykge1xyXG4gICAgICAgICAgICBncm91cC5tZW1iZXJzW3BlcnNvbl0uaGFwcGluZXNzTW9kaWZpZXIgPSB0cmFuc1R5cGUuaGFwcGluZXNzTW9kaWZpZXI7XHJcbiAgICAgICAgfVxyXG5cdFx0Ly8gdmFyIHRlc3QgPSBkZXN0aW5hdGlvbi5nZXRWYXJzQ2VudGVyKCk7XHJcblx0XHQvLyBjb25zb2xlLmxvZyh0ZXN0KTtcclxuXHR9XHJcbn07XHJcbkJhY2tncm91bmRfTWFuYWdlci5wcm90b3R5cGUubnVtUGVvcGxlID0gZnVuY3Rpb24oKSB7XHJcblx0dmFyIGNvdW50ID0gMDtcclxuXHRmb3IgKHZhciBpIGluIHRoaXMuYmdBcnJheSkge1xyXG5cdFx0Y291bnQgKz0gdGhpcy5iZ0FycmF5W2ldLmdyb3VwX21hbmFnZXIubnVtUGVvcGxlKCk7XHJcblx0fVxyXG5cdHJldHVybiBjb3VudDtcclxufTtcclxuQmFja2dyb3VuZF9NYW5hZ2VyLnByb3RvdHlwZS50cmFuc2ZlclR5cGUgPSBmdW5jdGlvbihzb3VyY2UsIGRlc3RpbmF0aW9uLCBncm91cCkge1xyXG4gICAgaWYgKGRlc3RpbmF0aW9uID09IG51bGwpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblx0dmFyIGdyb3VwRWR1ID0gZ3JvdXAubWVtYmVyc1swXS5lZHVMZXZlbDtcclxuXHR2YXIgY2FuID0gdGhpcy5jYW5UcmFuc2Zlcihzb3VyY2UsIGRlc3RpbmF0aW9uLCBncm91cCk7XHJcblx0Ly8gY29uc29sZS5sb2coZGVzdGluYXRpb24pO1xyXG5cdC8vIGNvbnNvbGUubG9nKGRlc3RpbmF0aW9uLnR5cGUsIGRlc3RpbmF0aW9uLmluY29tZUxldmVsKTtcclxuXHR2YXIgZWR1Y2F0ZSA9IChkZXN0aW5hdGlvbi50eXBlID09PSAnaG91c2UnICYmIGRlc3RpbmF0aW9uLmluY29tZUxldmVsKSA+IGdyb3VwRWR1O1xyXG4gICAgdmFyIGhhcHBpbmVzc01vZGlmaWVyID0gMDtcclxuICAgIGlmIChkZXN0aW5hdGlvbi50eXBlID09ICd1bmVtcGxveWVkJyAmJiBzb3VyY2UudHlwZSAhPSAndW5lbXBsb3llZCcpIHtcclxuICAgICAgICBoYXBwaW5lc3NNb2RpZmllciAtPSAxO1xyXG4gICAgfVxyXG4gICAgaWYgKGRlc3RpbmF0aW9uLmluY29tZUxldmVsIDwgZ3JvdXBFZHUpIHtcclxuICAgICAgICBoYXBwaW5lc3NNb2RpZmllciAtPSBncm91cEVkdSAtIGRlc3RpbmF0aW9uLmluY29tZUxldmVsO1xyXG4gICAgfVxyXG4gICAgdmFyIGhhcHBpbmVzc0NoYW5nZSA9IGhhcHBpbmVzc01vZGlmaWVyIC0gZ3JvdXAuaGFwcGluZXNzTW9kaWZpZXIoKTtcclxuICAgIHZhciBpbmNvbWVDaGFuZ2UgPSAwO1xyXG5cdHJldHVybiB7Y2FuIDogY2FuLCBlZHVjYXRlIDogZWR1Y2F0ZSwgaGFwcGluZXNzQ2hhbmdlIDogaGFwcGluZXNzQ2hhbmdlLCBpbmNvbWVDaGFuZ2UgOiBpbmNvbWVDaGFuZ2UsIGhhcHBpbmVzc01vZGlmaWVyIDogaGFwcGluZXNzTW9kaWZpZXJ9O1xyXG59O1xyXG5CYWNrZ3JvdW5kX01hbmFnZXIucHJvdG90eXBlLmNhblRyYW5zZmVyID0gZnVuY3Rpb24oc291cmNlLCBkZXN0aW5hdGlvbiwgZ3JvdXApIHtcclxuXHQvLyBjb25zb2xlLmxvZyhzb3VyY2UsIGRlc3RpbmF0aW9uLCBncm91cCk7XHJcblx0aWYgKHNvdXJjZSA9PT0gbnVsbCB8fCBkZXN0aW5hdGlvbiA9PT0gbnVsbCkgcmV0dXJuIGZhbHNlO1xyXG5cdHZhciBzb3VyY2VFZHUgPSBncm91cC5tZW1iZXJzWzBdLmVkdUxldmVsO1xyXG5cdGlmIChkZXN0aW5hdGlvbi50eXBlID09PSAndW5lbXBsb3llZCcpIHtcclxuXHRcdHJldHVybiB0cnVlO1xyXG5cdH1cclxuXHRpZiAoc291cmNlRWR1ID09PSBQZXJzb24uRURVTEVWRUwudW5lbXBsb3llZCkge1xyXG5cdFx0aWYgKGRlc3RpbmF0aW9uLmluY29tZUxldmVsID09PSBQZXJzb24uRURVTEVWRUwubG93ICYmIGRlc3RpbmF0aW9uLnR5cGUgPT09ICdob3VzZScpIHtcclxuXHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHR9XHJcblx0fSBlbHNlIGlmIChzb3VyY2VFZHUgPT09IFBlcnNvbi5FRFVMRVZFTC5sb3cpIHtcclxuXHRcdGlmIChkZXN0aW5hdGlvbi5pbmNvbWVMZXZlbCA9PT0gUGVyc29uLkVEVUxFVkVMLmxvdykge1xyXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdH0gZWxzZSBpZiAoZGVzdGluYXRpb24uaW5jb21lTGV2ZWwgPT09IFBlcnNvbi5FRFVMRVZFTC5taWQpIHtcclxuXHRcdFx0aWYgKGRlc3RpbmF0aW9uLnR5cGUgPT09ICdob3VzZScpIHtcclxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH0gZWxzZSBpZiAoc291cmNlRWR1ID09PSBQZXJzb24uRURVTEVWRUwubWlkKSB7XHJcblx0XHRpZiAoZGVzdGluYXRpb24uaW5jb21lTGV2ZWwgPT09IFBlcnNvbi5FRFVMRVZFTC5sb3cpIHtcclxuXHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHR9IGVsc2UgaWYgKGRlc3RpbmF0aW9uLmluY29tZUxldmVsID09PSBQZXJzb24uRURVTEVWRUwubWlkKSB7XHJcblx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0fSBlbHNlIGlmIChkZXN0aW5hdGlvbi5pbmNvbWVMZXZlbCA9PT0gUGVyc29uLkVEVUxFVkVMLmhpZ2gpIHtcclxuXHRcdFx0aWYgKGRlc3RpbmF0aW9uLnR5cGUgPT09ICdob3VzZScpIHtcclxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH0gZWxzZSBpZiAoc291cmNlRWR1ID09PSBQZXJzb24uRURVTEVWRUwuaGlnaCkge1xyXG5cdFx0cmV0dXJuIHRydWU7XHJcblx0fVxyXG5cdHJldHVybiBmYWxzZTtcclxufTtcclxuXHJcbkJhY2tncm91bmRfTWFuYWdlci5wcm90b3R5cGUud2hlcmVDbGlja2VkID0gZnVuY3Rpb24oKSB7XHJcblx0Zm9yICh2YXIgaSBpbiB0aGlzLmJnQXJyYXkpIHtcclxuXHRcdHZhciBjdXJEaW1lbnNpb25zID0gdGhpcy5iZ0FycmF5W2ldLmdldFZhcnMoKTtcclxuXHRcdHZhciBtb3VzZVggPSB0aGlzLmdhbWUuaW5wdXQueDtcclxuXHRcdHZhciBtb3VzZVkgPSB0aGlzLmdhbWUuaW5wdXQueTtcclxuXHRcdC8vIGlmKGkgPT0gNikgY29uc29sZS5sb2coJ2N1ckRpbWVuc2lvbnM6ICcgKyBjdXJEaW1lbnNpb25zKTtcclxuXHRcdGlmIChtb3VzZVggPiBjdXJEaW1lbnNpb25zWzBdICYmIG1vdXNlWCA8PSBjdXJEaW1lbnNpb25zWzBdICsgY3VyRGltZW5zaW9uc1syXSkge1xyXG5cdFx0XHRpZiAobW91c2VZID4gY3VyRGltZW5zaW9uc1sxXSAmJiBtb3VzZVkgPD0gY3VyRGltZW5zaW9uc1sxXSArIGN1ckRpbWVuc2lvbnNbM10pIHtcclxuXHRcdFx0XHRyZXR1cm4gdGhpcy5iZ0FycmF5W2ldO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cdHJldHVybiBudWxsO1xyXG59O1xyXG5cclxuQmFja2dyb3VuZF9NYW5hZ2VyLnByb3RvdHlwZS5maW5kT3RoZXIgPSBmdW5jdGlvbihzb3VyY2UsIGRlc3RpbmF0aW9uKSB7XHJcblx0aWYgKHNvdXJjZS50eXBlID09PSAnd29yaycgJiYgZGVzdGluYXRpb24udHlwZSA9PT0gJ3dvcmsnKSB7XHJcblx0XHRpZiAoc291cmNlLmluY29tZUxldmVsID09PSBQZXJzb24uRURVTEVWRUwubG93KSB7XHJcblx0XHRcdGlmIChkZXN0aW5hdGlvbi5pbmNvbWVMZXZlbCA9PT0gUGVyc29uLkVEVUxFVkVMLm1pZCkgcmV0dXJuIHRoaXMuYmdBcnJheVsyXTtcclxuXHRcdFx0ZWxzZSBpZiAoZGVzdGluYXRpb24uaW5jb21lTGV2ZWwgPT09IFBlcnNvbi5FRFVMRVZFTC5oaWdoKSByZXR1cm4gdGhpcy5iZ0FycmF5WzFdO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSBpZiAoc291cmNlLmluY29tZUxldmVsID09PSBQZXJzb24uRURVTEVWRUwubWlkKSB7XHJcblx0XHRcdGlmIChkZXN0aW5hdGlvbi5pbmNvbWVMZXZlbCA9PT0gUGVyc29uLkVEVUxFVkVMLmxvdykgcmV0dXJuIHRoaXMuYmdBcnJheVsyXTtcclxuXHRcdFx0ZWxzZSBpZiAoZGVzdGluYXRpb24uaW5jb21lTGV2ZWwgPT09IFBlcnNvbi5FRFVMRVZFTC5oaWdoKSByZXR1cm4gdGhpcy5iZ0FycmF5WzBdO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSBpZiAoc291cmNlLmluY29tZUxldmVsID09PSBQZXJzb24uRURVTEVWRUwuaGlnaCkge1xyXG5cdFx0XHRpZiAoZGVzdGluYXRpb24uaW5jb21lTGV2ZWwgPT09IFBlcnNvbi5FRFVMRVZFTC5sb3cpIHJldHVybiB0aGlzLmJnQXJyYXlbMV07XHJcblx0XHRcdGVsc2UgaWYgKGRlc3RpbmF0aW9uLmluY29tZUxldmVsID09PSBQZXJzb24uRURVTEVWRUwubWlkKSByZXR1cm4gdGhpcy5iZ0FycmF5WzBdO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRlbHNlIGlmIChzb3VyY2UudHlwZSA9PT0gJ2hvdXNlJyAmJiBkZXN0aW5hdGlvbi50eXBlID09PSAnaG91c2UnKSB7XHJcblx0XHRpZiAoc291cmNlLmluY29tZUxldmVsID09PSBQZXJzb24uRURVTEVWRUwubG93KSB7XHJcblx0XHRcdGlmIChkZXN0aW5hdGlvbi5pbmNvbWVMZXZlbCA9PT0gUGVyc29uLkVEVUxFVkVMLm1pZCkgcmV0dXJuIHRoaXMuYmdBcnJheVs1XTtcclxuXHRcdFx0ZWxzZSBpZiAoZGVzdGluYXRpb24uaW5jb21lTGV2ZWwgPT09IFBlcnNvbi5FRFVMRVZFTC5oaWdoKSByZXR1cm4gdGhpcy5iZ0FycmF5WzRdO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSBpZiAoc291cmNlLmluY29tZUxldmVsID09PSBQZXJzb24uRURVTEVWRUwubWlkKSB7XHJcblx0XHRcdGlmIChkZXN0aW5hdGlvbi5pbmNvbWVMZXZlbCA9PT0gUGVyc29uLkVEVUxFVkVMLmxvdykgcmV0dXJuIHRoaXMuYmdBcnJheVs1XTtcclxuXHRcdFx0ZWxzZSBpZiAoZGVzdGluYXRpb24uaW5jb21lTGV2ZWwgPT09IFBlcnNvbi5FRFVMRVZFTC5oaWdoKSByZXR1cm4gdGhpcy5iZ0FycmF5WzNdO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSBpZiAoc291cmNlLmluY29tZUxldmVsID09PSBQZXJzb24uRURVTEVWRUwuaGlnaCkge1xyXG5cdFx0XHRpZiAoZGVzdGluYXRpb24uaW5jb21lTGV2ZWwgPT09IFBlcnNvbi5FRFVMRVZFTC5sb3cpIHJldHVybiB0aGlzLmJnQXJyYXlbNF07XHJcblx0XHRcdGVsc2UgaWYgKGRlc3RpbmF0aW9uLmluY29tZUxldmVsID09PSBQZXJzb24uRURVTEVWRUwubWlkKSByZXR1cm4gdGhpcy5iZ0FycmF5WzNdO1xyXG5cdFx0fVxyXG5cdH1cclxufTtcclxuXHJcbkJhY2tncm91bmRfTWFuYWdlci5wcm90b3R5cGUudXBkYXRlUmF0aW9zID0gZnVuY3Rpb24oZGVzdGluYXRpb24pIHtcclxuXHRpZiAoZGVzdGluYXRpb24udHlwZSA9PT0gJ3dvcmsnKSB7XHJcblx0XHR2YXIgaFJhdGlvcyA9IHV0aWwucmF0aW8odGhpcy5iZ0FycmF5WzBdLm51bVBlb3BsZSgpLCB0aGlzLmJnQXJyYXlbMV0ubnVtUGVvcGxlKCksIHRoaXMuYmdBcnJheVsyXS5udW1QZW9wbGUoKSk7XHJcblx0fVxyXG5cdGVsc2V7XHJcblx0XHR2YXIgaFJhdGlvcyA9IHV0aWwucmF0aW8odGhpcy5iZ0FycmF5WzNdLm51bVBlb3BsZSgpLCB0aGlzLmJnQXJyYXlbNF0ubnVtUGVvcGxlKCksIHRoaXMuYmdBcnJheVs1XS5udW1QZW9wbGUoKSk7XHJcblx0fVxyXG5cdHZhciBlbXBsb3llZCA9IDA7XHJcblx0Zm9yICh2YXIgaiA9IDA7IGogPCA2OyBqKyspXHJcblx0XHRlbXBsb3llZCArPSB0aGlzLmJnQXJyYXlbal0ubnVtUGVvcGxlKCk7XHJcblx0dmFyIHZSYXRpb3MgPSB1dGlsLnJhdGlvKHRoaXMuYmdBcnJheVs2XS5udW1QZW9wbGUoKSwgZW1wbG95ZWQpO1xyXG5cdGZvciAodmFyIGkgPSAwIGluIHRoaXMuYmdBcnJheSkge1xyXG5cdFx0aWYgKGkgIT09IDYpIHtcdFx0Ly8gSWYgbm90IHVuZW1wbG95ZWQgYmdcclxuXHRcdFx0aWYgKGkgPCAzKSB7XHQvLyBJZiB3b3JrIGJnXHJcblx0XHRcdFx0dGhpcy5iZ0FycmF5W2ldLm5ld0hSYXRpbyA9IGhSYXRpb3NbaV07XHJcblx0XHRcdFx0dGhpcy5iZ0FycmF5W2ldLm5ld1ZSYXRpbyA9IHZSYXRpb3NbMV0gLyAyO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2Uge1x0XHRcdC8vIElmIGhvdXNlIGJnXHJcblx0XHRcdFx0dGhpcy5iZ0FycmF5W2ldLm5ld0hSYXRpbyA9IGhSYXRpb3NbaSAtIDNdO1xyXG5cdFx0XHRcdHRoaXMuYmdBcnJheVtpXS5uZXdWUmF0aW8gPSB2UmF0aW9zWzFdIC8gMjtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0ZWxzZSBiZ0FycmF5W2ldLm5ld1ZSYXRpbyA9IHZSYXRpb3NbMF07IC8vIFVuZW1wbG95ZWQgYmdcclxuXHR9XHJcbn07XHJcblxyXG5CYWNrZ3JvdW5kX01hbmFnZXIucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uKCkge1xyXG5cdGZvciAodmFyIGkgaW4gdGhpcy5iZ0FycmF5KSB7XHJcbiAgICBcdGlmICh0aGlzLmJnQXJyYXlbaV0uaW5jb21lTGV2ZWwgPT09IFBlcnNvbi5FRFVMRVZFTC5taWQpIHtcclxuICAgIFx0XHR0aGlzLmJnQXJyYXlbaV0ueCA9IHRoaXMuYmdBcnJheVswXS5nZXRWYXJzKClbMl07XHJcbiAgICBcdH1cclxuICAgIFx0ZWxzZSBpZiAodGhpcy5iZ0FycmF5W2ldLmluY29tZUxldmVsID09PSBQZXJzb24uRURVTEVWRUwuaGlnaCkge1xyXG4gICAgXHQgICAgdGhpcy5iZ0FycmF5W2ldLnggPSB0aGlzLmJnQXJyYXlbMV0uZ2V0VmFycygpWzBdICsgdGhpcy5iZ0FycmF5WzFdLmdldFZhcnMoKVsyXTtcclxuICAgIFx0fVxyXG4gICAgXHR0aGlzLmJnQXJyYXlbaV0ueSA9ICh0aGlzLmJnQXJyYXlbaV0uYmFzZVkgKiB0aGlzLmJnQXJyYXlbaV0udlJhdGlvICogKHRoaXMuZ2FtZS5oZWlnaHQgLSB0aGlzLmJvcmRlcikpICsgdGhpcy5ib3JkZXI7XHJcblx0XHR0aGlzLmJnQXJyYXlbaV0udXBkYXRlKCk7XHJcblx0fVxyXG5cdHZhciB0ZXN0ID0gdGhpcy5iZ0FycmF5WzNdLmdldFZhcnNDZW50ZXIoKTtcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gQmFja2dyb3VuZF9NYW5hZ2VyOyIsIi8vY29udHJvbHMgZmxvY2tpbmcgZm9yIGEgZ3JvdXAgb2YgcGVyc29uIG9iamVjdHNcclxudmFyIHV0aWwgPSByZXF1aXJlKCcuLi91dGlscycpO1xyXG5cclxudmFyIEdyb3VwID0gZnVuY3Rpb24gKGdhbWUsIGNlbnRlclgsIGNlbnRlclksIHN0YXRlKSB7XHJcblx0dGhpcy5nYW1lID0gZ2FtZTtcclxuXHR0aGlzLm1lbWJlcnMgPSBbXTtcclxuXHR0aGlzLm1pbkRpc3QgPSAyMDtcclxuXHQvL3RoaXMubm9pc2UgPSAxMDtcclxuXHR0aGlzLmNlbnRlciA9IHt4IDogY2VudGVyWCwgeSA6IGNlbnRlcll9O1xyXG5cdHRoaXMuY2xpY2tEaXN0ID0gNTA7XHJcblx0dGhpcy5zZWxlY3RlZCA9IGZhbHNlO1xyXG5cdHRoaXMuc2VsZWN0aW9uID0gdGhpcy5nYW1lLmFkZC5zcHJpdGUodGhpcy5jZW50ZXIueCwgdGhpcy5jZW50ZXIueSwgJ3NlbGVjdGlvbicpO1xyXG5cdHRoaXMuc2VsZWN0aW9uLmFuY2hvci5zZXRUbygwLjUsIDAuNSk7XHJcblx0dGhpcy5zZWxlY3Rpb24ud2lkdGggPSAxMDA7XHJcblx0dGhpcy5zZWxlY3Rpb24uaGVpZ2h0ID0gMTAwO1xyXG5cdHRoaXMuc2VsZWN0aW9uLnZpc2libGUgPSBmYWxzZTtcclxuXHR0aGlzLnZlbG9jaXR5ID0ge3ggOiAwLCB5IDogMH07XHJcblx0dGhpcy5zcGVlZCA9IC4wNTtcclxuXHR0aGlzLnN0YXRlID0gc3RhdGU7XHJcblx0dGhpcy5ib29rID0gdGhpcy5nYW1lLmFkZC5zcHJpdGUodGhpcy5jZW50ZXIueCwgdGhpcy5jZW50ZXIueSwgJ2Jvb2snKTtcclxuXHR0aGlzLmJvb2suYW5jaG9yLnNldFRvKDAuNSwgMC41KTtcclxuXHR0aGlzLmJvb2sud2lkdGggPSAyNTtcclxuXHR0aGlzLmJvb2suaGVpZ2h0ID0gMjU7XHJcblx0dGhpcy5ib29rLnZpc2libGUgPSBmYWxzZTtcclxuXHR0aGlzLmxlYXJuaW5nVGltZSA9IC4wMTtcclxuICAgIHRoaXMuaG92ZXIgPSBmYWxzZTtcclxuXHRcclxuXHR0aGlzLnN0YXRlLmlucHV0Lm9uRG93bi5hZGQodGhpcy5vbklucHV0RG93biwgdGhpcyk7XHJcbiAgICB0aGlzLnN0YXRlLmlucHV0LmFkZE1vdmVDYWxsYmFjayh0aGlzLm9uTW92ZSwgdGhpcyk7XHJcbn1cclxuR3JvdXAucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gR3JvdXA7XHJcbkdyb3VwLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbigpIHtcclxuXHQvLyBjb25zb2xlLmxvZyh0aGlzLmNlbnRlcik7XHJcblx0Ly91cGRhdGUgY2VudGVyXHJcblx0dmFyIG5ld1ggPSB0aGlzLmNlbnRlci54ICsgdGhpcy52ZWxvY2l0eS54ICogdGhpcy5zcGVlZDtcclxuXHR2YXIgbmV3WSA9IHRoaXMuY2VudGVyLnkgKyB0aGlzLnZlbG9jaXR5LnkgKiB0aGlzLnNwZWVkO1xyXG5cdHRoaXMuY2hhbmdlQ2VudGVyKHt4IDogbmV3WCwgeSA6IG5ld1l9KTtcclxuXHRmb3IgKHZhciBtZW1iZXIgaW4gdGhpcy5tZW1iZXJzKSB7XHJcblx0XHRtZW1iZXIgPSB0aGlzLm1lbWJlcnNbbWVtYmVyXTtcclxuXHRcdHZhciB2ZWxvY2l0eSA9IHt4OjAsIHk6MH07XHJcblx0XHR2YXIgZGlmZiA9IHt4OjAsIHk6MH07XHJcblx0XHRkaWZmLnggPSB0aGlzLmNlbnRlci54IC0gbWVtYmVyLng7XHJcblx0XHRkaWZmLnkgPSB0aGlzLmNlbnRlci55IC0gbWVtYmVyLnk7XHJcblx0XHR2ZWxvY2l0eS54ICs9IGRpZmYueDtcclxuXHRcdHZlbG9jaXR5LnkgKz0gZGlmZi55O1xyXG5cdFx0Zm9yICh2YXIgb3RoZXIgaW4gdGhpcy5tZW1iZXJzKSB7XHJcblx0XHRcdG90aGVyID0gdGhpcy5tZW1iZXJzW290aGVyXTtcclxuXHRcdFx0Ly9pZ25vcmUgc2VsZlxyXG5cdFx0XHRpZiAob3RoZXIgPT09IG1lbWJlcikge1xyXG5cdFx0XHRcdGNvbnRpbnVlO1xyXG5cdFx0XHR9XHJcblx0XHRcdHZhciBvRGlmZiA9IHt4OjAsIHk6MH07XHJcblx0XHRcdG9EaWZmLnggPSBvdGhlci54IC0gbWVtYmVyLng7XHJcblx0XHRcdG9EaWZmLnkgPSBvdGhlci55IC0gbWVtYmVyLnk7XHJcblx0XHRcdHZhciB0b3RhbERpc3QgPSB1dGlsLmh5cG90ZW51c2Uob0RpZmYueCwgb0RpZmYueSk7XHJcblx0XHRcdGlmICh0b3RhbERpc3QgPD0gdGhpcy5taW5EaXN0KSB7XHJcblx0XHRcdFx0dmVsb2NpdHkueCA9IC0xICogb0RpZmYueDtcclxuXHRcdFx0XHR2ZWxvY2l0eS55ID0gLTEgKiBvRGlmZi55O1xyXG5cdFx0XHRcdC8vIHZlbG9jaXR5LnggLT0gb0RpZmYueDtcclxuXHRcdFx0XHQvLyB2ZWxvY2l0eS55IC09IG9EaWZmLnk7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdC8vIGlmICh1dGlsLmh5cG90ZW51c2UodmVsb2NpdHkueCwgdmVsb2NpdHkueSkgPCB0aGlzLm1pblZlbG9jaXR5KSB7XHJcblx0XHRcdC8vIHZlbG9jaXR5LnggPSB2ZWxvY2l0eS55ID0gMDtcclxuXHRcdC8vIH1cclxuXHRcdG1lbWJlci52ZWxvY2l0eSA9IHZlbG9jaXR5O1xyXG5cdH1cclxufTtcclxuR3JvdXAucHJvdG90eXBlLmFkZE1lbWJlciA9IGZ1bmN0aW9uKG1lbWJlcikge1xyXG5cdHRoaXMubWVtYmVycy5wdXNoKG1lbWJlcik7XHJcblx0bWVtYmVyLmdyb3VwID0gdGhpcztcclxufTtcclxuR3JvdXAucHJvdG90eXBlLm9uSW5wdXREb3duID0gZnVuY3Rpb24oKSB7XHJcblx0Ly8gY29uc29sZS5sb2coJ2EnKTtcclxuXHRpZiAodGhpcy5zZWxlY3RlZCkge1xyXG5cdFx0Ly8gY29uc29sZS5sb2coJ2MnKTtcclxuXHRcdC8vIGNvbnNvbGUubG9nKHRoaXMubXlNYW5hZ2VyLCB0aGlzLm15TWFuYWdlci5iYWNrZ3JvdW5kKTtcclxuXHRcdHZhciBiZyA9IHRoaXMubXlNYW5hZ2VyLmJhY2tncm91bmQubXlNYW5hZ2VyLndoZXJlQ2xpY2tlZCgpO1xyXG5cdFx0Ly8gY29uc29sZS5sb2coYmcpO1xyXG5cdFx0dGhpcy5teU1hbmFnZXIuYmFja2dyb3VuZC5teU1hbmFnZXIuc2VuZFRvKHRoaXMubXlNYW5hZ2VyLmJhY2tncm91bmQsIGJnLCB0aGlzKTtcclxuXHRcdHRoaXMuc2V0U2VsZWN0ZWQoZmFsc2UpO1xyXG5cdH0gZWxzZSBpZiAodGhpcy5jbGlja2VkKCkpIHtcclxuXHRcdHRoaXMuY2xpY2soKTtcclxuXHR9XHJcbn07XHJcbkdyb3VwLnByb3RvdHlwZS5zdGFydEVkdWNhdGlvbiA9IGZ1bmN0aW9uKCkge1xyXG5cdHRoaXMubGVhcm5pbmcgPSBmYWxzZTtcclxuXHR0aGlzLmJvb2sudmlzaWJsZSA9IHRydWU7XHJcblx0dGhpcy5zdGF0ZS5nYW1lLnRpbWUuZXZlbnRzLmFkZChQaGFzZXIuVGltZXIuU0VDT05EICogdGhpcy5sZWFybmluZ1RpbWUsIHRoaXMuZW5kRWR1Y2F0aW9uLCB0aGlzKTtcclxufTtcclxuR3JvdXAucHJvdG90eXBlLmVuZEVkdWNhdGlvbiA9IGZ1bmN0aW9uKCkge1xyXG5cdGZvciAodmFyIG1lbWJlciBpbiB0aGlzLm1lbWJlcnMpIHtcclxuXHRcdHRoaXMubWVtYmVyc1ttZW1iZXJdLmVkdUxldmVsICs9IDE7XHJcblx0fVxyXG5cdHRoaXMubGVhcm5pbmcgPSBmYWxzZTtcclxuXHR0aGlzLmJvb2sudmlzaWJsZSA9IGZhbHNlO1xyXG59O1xyXG5Hcm91cC5wcm90b3R5cGUuY2xpY2tlZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgaWYgKHRoaXMubWVtYmVycy5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHR2YXIgbW91c2VYID0gdGhpcy5nYW1lLmlucHV0Lng7XHJcblx0dmFyIG1vdXNlWSA9IHRoaXMuZ2FtZS5pbnB1dC55O1xyXG5cdHZhciBkaWZmWCA9IG1vdXNlWCAtIHRoaXMuY2VudGVyLng7XHJcblx0dmFyIGRpZmZZID0gbW91c2VZIC0gdGhpcy5jZW50ZXIueTtcclxuXHR2YXIgdG90YWxEaWZmID0gdXRpbC5oeXBvdGVudXNlKGRpZmZYLCBkaWZmWSk7XHJcblx0aWYgKHRvdGFsRGlmZiA8PSB0aGlzLmNsaWNrRGlzdCkge1xyXG5cdFx0cmV0dXJuIHRydWU7XHJcblx0fVxyXG5cdHJldHVybiBmYWxzZTtcclxufTtcclxuR3JvdXAucHJvdG90eXBlLmNsaWNrID0gZnVuY3Rpb24oKSB7XHJcblx0aWYgKHRoaXMuc2VsZWN0ZWQpIHtcclxuICAgICAgICAvLyB0aGlzLnN0YXRlLmhtLmdyb3VwU2VsZWN0ZWQgPSBmYWxzZTtcclxuXHRcdHRoaXMuc2V0U2VsZWN0ZWQoZmFsc2UpO1xyXG5cdH0gZWxzZSB7XHJcbiAgICAgICAgLy8gdGhpcy5zdGF0ZS5obS5ncm91cFNlbGVjdGVkID0gdHJ1ZTtcclxuXHRcdHRoaXMuc2V0U2VsZWN0ZWQodHJ1ZSk7XHJcblx0fVxyXG59O1xyXG4vKlxyXG5Hcm91cC5wcm90b3R5cGUubW92ZSA9IGZ1bmN0aW9uKCkge1xyXG5cdHZhciBtb3VzZVggPSB0aGlzLmdhbWUuaW5wdXQueDtcclxuXHR2YXIgbW91c2VZID0gdGhpcy5nYW1lLmlucHV0Lnk7XHJcblx0dGhpcy5jaGFuZ2VDZW50ZXIoe3ggOiBtb3VzZVgsIHkgOiBtb3VzZVl9KTtcclxuXHR0aGlzLnNldFNlbGVjdGVkKGZhbHNlKTtcclxuICAgIHRoaXMuc3RhdGUuaG0uZ3JvdXBTZWxlY3RlZCA9IGZhbHNlO1xyXG59O1xyXG4qL1xyXG5Hcm91cC5wcm90b3R5cGUuc2V0U2VsZWN0ZWQgPSBmdW5jdGlvbihuZXdTZWxlY3RlZCkge1xyXG5cdHRoaXMuc2VsZWN0ZWQgPSBuZXdTZWxlY3RlZDtcclxuXHR0aGlzLnNlbGVjdGlvbi52aXNpYmxlID0gbmV3U2VsZWN0ZWQ7XHJcbiAgICBpZiAobmV3U2VsZWN0ZWQgPT0gdHJ1ZSkge1xyXG4gICAgICAgIHRoaXMuc3RhdGUuaG0uZ3JvdXBTZWxlY3RlZCA9IHRoaXM7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmICh0aGlzLnN0YXRlLmhtLmdyb3VwU2VsZWN0ZWQgPT0gdGhpcykge1xyXG4gICAgICAgICAgICB0aGlzLnN0YXRlLmhtLmdyb3VwU2VsZWN0ZWQgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxuR3JvdXAucHJvdG90eXBlLmNoYW5nZUNlbnRlciA9IGZ1bmN0aW9uKG5ld0NlbnRlcikge1xyXG5cdHRoaXMuc2VsZWN0aW9uLnggPSBuZXdDZW50ZXIueDtcclxuXHR0aGlzLnNlbGVjdGlvbi55ID0gbmV3Q2VudGVyLnk7XHJcblx0dGhpcy5ib29rLnggPSBuZXdDZW50ZXIueDtcclxuXHR0aGlzLmJvb2sueSA9IG5ld0NlbnRlci55O1xyXG5cdHRoaXMuY2VudGVyID0gbmV3Q2VudGVyO1xyXG59O1xyXG5Hcm91cC5wcm90b3R5cGUubnVtUGVvcGxlID0gZnVuY3Rpb24oKSB7XHJcblx0cmV0dXJuIHRoaXMubWVtYmVycy5sZW5ndGg7XHJcbn07XHJcbkdyb3VwLnByb3RvdHlwZS5sb3dlc3RFZHVjYXRpb24gPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBsb3dlc3QgPSAzO1xyXG4gICAgZm9yICh2YXIgbWVtYmVyIGluIHRoaXMubWVtYmVycykge1xyXG4gICAgICAgIG1lbWJlciA9IHRoaXMubWVtYmVyc1ttZW1iZXJdO1xyXG4gICAgICAgIGlmIChtZW1iZXIuZWR1TGV2ZWwgPCBsb3dlc3QpIHtcclxuICAgICAgICAgICAgbG93ZXN0ID0gbWVtYmVyLmVkdUxldmVsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBsb3dlc3Q7XHJcbn07XHJcbkdyb3VwLnByb3RvdHlwZS5hdmVyYWdlSGFwcGluZXNzID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgaGFwcGluZXNzID0gMDtcclxuICAgIGZvciAodmFyIG1lbWJlciBpbiB0aGlzLm1lbWJlcnMpIHtcclxuICAgICAgICBtZW1iZXIgPSB0aGlzLm1lbWJlcnNbbWVtYmVyXTtcclxuICAgICAgICBoYXBwaW5lc3MgKz0gbWVtYmVyLmhhcHBpbmVzcztcclxuICAgIH1cclxuICAgIGhhcHBpbmVzcyAvPSB0aGlzLm1lbWJlcnMubGVuZ3RoO1xyXG4gICAgcmV0dXJuIGhhcHBpbmVzcztcclxufTtcclxuR3JvdXAucHJvdG90eXBlLmF2ZXJhZ2VGYXRpZ3VlID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgZmF0aWd1ZSA9IDA7XHJcbiAgICBmb3IgKHZhciBtZW1iZXIgaW4gdGhpcy5tZW1iZXJzKSB7XHJcbiAgICAgICAgbWVtYmVyID0gdGhpcy5tZW1iZXJzW21lbWJlcl07XHJcbiAgICAgICAgZmF0aWd1ZSArPSBtZW1iZXIuZmF0aWd1ZTtcclxuICAgIH1cclxuICAgIGZhdGlndWUgLz0gdGhpcy5tZW1iZXJzLmxlbmd0aDtcclxuICAgIHJldHVybiBmYXRpZ3VlO1xyXG59O1xyXG5Hcm91cC5wcm90b3R5cGUuaW5jb21lID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgaW5jb21lID0gMDtcclxuICAgIGZvciAodmFyIG1lbWJlciBpbiB0aGlzLm1lbWJlcnMpIHtcclxuICAgICAgICBtZW1iZXIgPSB0aGlzLm1lbWJlcnNbbWVtYmVyXTtcclxuICAgICAgICBpbmNvbWUgKz0gbWVtYmVyLmdldFRheCgpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGluY29tZTtcclxufTtcclxuLy8gR3JvdXAucHJvdG90eXBlLmhhcHBpbmVzc0NoYW5nZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgXHJcbi8vIH07XHJcbi8vIEdyb3VwLnByb3RvdHlwZS5pbmNvbWVDaGFuZ2UgPSBmdW5jdGlvbigpIHtcclxuICAgIFxyXG4vLyB9O1xyXG4vLyBHcm91cC5wcm90b3R5cGUubW91c2VEb3duID0gZnVuY3Rpb24oKSB7XHJcblx0XHJcbi8vIH07XHJcbkdyb3VwLnByb3RvdHlwZS5vbk1vdmUgPSBmdW5jdGlvbigpIHtcclxuICAgIGlmICh0aGlzLm1lbWJlcnMubGVuZ3RoID09IDApIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblx0dmFyIG1vdXNlWCA9IHRoaXMuZ2FtZS5pbnB1dC54O1xyXG5cdHZhciBtb3VzZVkgPSB0aGlzLmdhbWUuaW5wdXQueTtcclxuICAgIHZhciBkaXN0ID0gdXRpbC5oeXBvdGVudXNlKHRoaXMuY2VudGVyLnggLSBtb3VzZVgsIHRoaXMuY2VudGVyLnkgLSBtb3VzZVkpO1xyXG4gICAgaWYgKGRpc3QgPD0gdGhpcy5jbGlja0Rpc3QpIHtcclxuICAgICAgICBpZiAoIXRoaXMuc3RhdGUuaG0uZ3JvdXBTZWxlY3RlZCAmJiB0aGlzLnN0YXRlLmhtLmdyb3VwU2VsZWN0ZWQgIT0gdGhpcykge1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnYScpO1xyXG4gICAgICAgICAgICB0aGlzLnN0YXRlLmhtLnNob3dTdGF0aWMoe3Blb3BsZSA6IHRoaXMubnVtUGVvcGxlKCksIGVkdWNhdGlvbiA6IHRoaXMubG93ZXN0RWR1Y2F0aW9uKCksIGhhcHBpbmVzcyA6IHRoaXMuYXZlcmFnZUhhcHBpbmVzcygpLCBmYXRpZ3VlIDogdGhpcy5hdmVyYWdlRmF0aWd1ZSgpLCBpbmNvbWUgOiB0aGlzLmluY29tZSgpfSwgdGhpcy5jZW50ZXIueCwgdGhpcy5jZW50ZXIueSAtIDUwLCAxMDApO1xyXG4gICAgICAgICAgICB0aGlzLmhvdmVyID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmICh0aGlzLmhvdmVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaG92ZXIgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5obS5oaWRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnN0YXRlLmhtLmdyb3VwU2VsZWN0ZWQgPT0gdGhpcyAmJiB0aGlzLm15TWFuYWdlci5iYWNrZ3JvdW5kLm15TWFuYWdlci53aGVyZUNsaWNrZWQoKSAhPSB0aGlzLm15TWFuYWdlci5iYWNrZ3JvdW5kXHJcbiAgICAgICAgICAgICYmIHRoaXMubXlNYW5hZ2VyLmJhY2tncm91bmQubXlNYW5hZ2VyLmNhblRyYW5zZmVyKHRoaXMubXlNYW5hZ2VyLmJhY2tncm91bmQsIHRoaXMubXlNYW5hZ2VyLmJhY2tncm91bmQubXlNYW5hZ2VyLndoZXJlQ2xpY2tlZCgpLCB0aGlzKSkge1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnYScpO1xyXG4gICAgICAgICAgICB2YXIgYmdNYW5hZ2VyID0gdGhpcy5teU1hbmFnZXIuYmFja2dyb3VuZC5teU1hbmFnZXJcclxuICAgICAgICAgICAgdmFyIHRyYW5zZmVyVHlwZSA9IGJnTWFuYWdlci50cmFuc2ZlclR5cGUodGhpcy5teU1hbmFnZXIuYmFja2dyb3VuZCwgYmdNYW5hZ2VyLndoZXJlQ2xpY2tlZCgpLCB0aGlzKTtcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5obS5zaG93Q2hhbmdlKHRyYW5zZmVyVHlwZS5jYW4sIHtoYXBwaW5lc3NDaGFuZ2UgOiB0cmFuc2ZlclR5cGUuaGFwcGluZXNzQ2hhbmdlLCBpbmNvbWVDaGFuZ2UgOiB0cmFuc2ZlclR5cGUuaW5jb21lQ2hhbmdlfSwgbW91c2VYLCBtb3VzZVkpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdiJyk7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuaG0uaGlkZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxuR3JvdXAucHJvdG90eXBlLmhhcHBpbmVzc01vZGlmaWVyID0gZnVuY3Rpb24oKSB7XHJcbiAgICByZXR1cm4gdGhpcy5tZW1iZXJzWzBdLmhhcHBpbmVzc01vZGlmaWVyO1xyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBHcm91cDtcclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuIiwidmFyIFV0aWwgPSByZXF1aXJlKCcuLi91dGlscycpO1xyXG5cclxudmFyIEdyb3VwTWFuYWdlciA9IGZ1bmN0aW9uIChnYW1lKSB7XHJcblx0dGhpcy5nYW1lID0gZ2FtZTtcclxuXHR0aGlzLm1lbWJlcnMgPSBbXTtcclxuXHQvKlxyXG5cdHRoaXMuYm91bmQgPSB7XHJcblx0XHR1cHBlciA6IGNlbnRlci55IC0gaGVpZ2h0IC8gMixcclxuXHRcdGxvd2VyIDogY2VudGVyLnkgKyBoZWlnaHQgLyAyLFxyXG5cdFx0bGVmdCA6IGNlbnRlci54IC0gd2lkdGggLyAyLFxyXG5cdFx0cmlnaHQgOiBjZW50ZXIueCArIHdpZHRoIC8gMlxyXG5cdH07XHJcblx0dGhpcy53aWR0aCA9IHdpZHRoO1xyXG5cdHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xyXG5cdHRoaXMuY2VudGVyID0gY2VudGVyO1xyXG5cdHRoaXMubWluRGlzdCA9IHdpZHRoIC8gMjtcclxuXHQqL1xyXG5cdC8qXHJcblx0UGhhc2VyLlNwcml0ZS5jYWxsKHRoaXMsIGdhbWUsIHgsIHksICdwZXJzb24nKTtcclxuXHR0aGlzLnZlbG9jaXR5ID0ge3g6MCwgeTowfTtcclxuXHR0aGlzLndpZHRoID0gMTA7XHJcblx0dGhpcy5oZWlnaHQgPSAxMDtcclxuXHR0aGlzLnNwZWVkID0gLjA1O1xyXG5cdHRoaXMuaWQgPSBpZDtcclxuXHQqL1xyXG59O1xyXG5Hcm91cE1hbmFnZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gR3JvdXBNYW5hZ2VyO1xyXG5Hcm91cE1hbmFnZXIucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uKCkge1xyXG5cdC8vIGNvbnNvbGUubG9nKHRoaXMuY2VudGVyKTtcclxuXHQvL3VwZGF0ZSBib3VuZHNcclxuXHRpZiAodGhpcy5iYWNrZ3JvdW5kKSB7XHJcblx0XHR2YXIgdmFycyA9IHRoaXMuYmFja2dyb3VuZC5nZXRWYXJzQ2VudGVyKCk7XHJcblx0XHR0aGlzLndpZHRoID0gdmFycy53aWR0aDtcclxuXHRcdHRoaXMuaGVpZ2h0ID0gdmFycy5oZWlnaHQ7XHJcblx0XHR0aGlzLmNlbnRlciA9IHZhcnMuY2VudGVyO1xyXG5cdFx0Ly8gY29uc29sZS5sb2codmFycyk7XHJcblx0fSBlbHNlIHtcclxuXHRcdHJldHVybjtcclxuXHR9XHJcblx0Ly91cGRhdGUgbWVtYmVyIHZlbG9jaXR5XHJcblx0Zm9yICh2YXIgbWVtYmVyIGluIHRoaXMubWVtYmVycykge1xyXG5cdFx0bWVtYmVyID0gdGhpcy5tZW1iZXJzW21lbWJlcl07XHJcblx0XHR2YXIgdmVsb2NpdHkgPSB7eCA6IDAsIHkgOiAwfTtcclxuXHRcdC8vIGNvbnNvbGUubG9nKHRoaXMuY2VudGVyLCBtZW1iZXIuY2VudGVyKTtcclxuXHRcdHZhciBkaWZmWCA9IHRoaXMuY2VudGVyLnggLSBtZW1iZXIuY2VudGVyLng7XHJcblx0XHR2YXIgZGlmZlkgPSB0aGlzLmNlbnRlci55IC0gbWVtYmVyLmNlbnRlci55O1xyXG5cdFx0dmVsb2NpdHkueCA9IGRpZmZYO1xyXG5cdFx0dmVsb2NpdHkueSA9IGRpZmZZO1xyXG5cdFx0Zm9yICh2YXIgb3RoZXIgaW4gdGhpcy5tZW1iZXJzKSB7XHJcblx0XHRcdG90aGVyID0gdGhpcy5tZW1iZXJzW290aGVyXTtcclxuXHRcdFx0aWYgKG90aGVyID09PSBtZW1iZXIpIHtcclxuXHRcdFx0XHRjb250aW51ZTtcclxuXHRcdFx0fVxyXG5cdFx0XHR2YXIgb0RpZmZ4ID0gb3RoZXIuY2VudGVyLnggLSBtZW1iZXIuY2VudGVyLng7XHJcblx0XHRcdHZhciBvRGlmZnkgPSBvdGhlci5jZW50ZXIueSAtIG1lbWJlci5jZW50ZXIueTtcclxuXHRcdFx0dmFyIGh5cCA9IFV0aWwuaHlwb3RlbnVzZShvRGlmZngsIG9EaWZmeSk7XHJcblx0XHRcdC8vY29uc29sZS5sb2coaHlwKTtcclxuXHRcdFx0aWYgKGh5cCA8PSB0aGlzLm1pbkRpc3QpIHtcclxuXHRcdFx0XHQvLyBjb25zb2xlLmxvZygnYicsIGh5cCk7XHJcblx0XHRcdFx0dmVsb2NpdHkueCA9IC0xICogb0RpZmZ4O1xyXG5cdFx0XHRcdHZlbG9jaXR5LnkgPSAtMSAqIG9EaWZmeTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQvLyBjb25zb2xlLmxvZygnYScpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRtZW1iZXIudmVsb2NpdHkgPSB2ZWxvY2l0eTtcclxuXHR9XHJcblx0Ly91cGRhdGUgbWVtYmVyc1xyXG5cdGZvciAobWVtYmVyIGluIHRoaXMubWVtYmVycykge1xyXG5cdFx0dGhpcy5tZW1iZXJzW21lbWJlcl0udXBkYXRlKCk7XHJcblx0fVxyXG59O1xyXG5Hcm91cE1hbmFnZXIucHJvdG90eXBlLnRyYW5zZmVyID0gZnVuY3Rpb24ob3RoZXJHTSwgbXlNZW1iZXIpIHtcclxuXHR2YXIgdGVzdFZhbHMgPSBvdGhlckdNLmJhY2tncm91bmQuZ2V0VmFyc0NlbnRlcigpO1xyXG5cdC8vIGNvbnNvbGUubG9nKCd0cmFuc2ZlciB0bycsIG90aGVyR00uYmFja2dyb3VuZC50eXBlLCBvdGhlckdNLmJhY2tncm91bmQuaW5jb21lTGV2ZWwsIHRlc3RWYWxzLmNlbnRlci55LCB0ZXN0VmFscy55LCB0ZXN0VmFscy52aXNIZWlnaHQsIHRlc3RWYWxzLnZSYXRpbyk7XHJcblx0LypcclxuXHRpZiAoIShteU1lbWJlciBpbiB0aGlzLm1lbWJlcnMpKSB7XHJcblx0XHRjb25zb2xlLmxvZygnRVJST1InLCBteU1lbWJlciwgJ25vdCBpbicsIHRoaXMpO1xyXG5cdFx0cmV0dXJuO1xyXG5cdH1cclxuXHQqL1xyXG5cdHZhciBpbmRleCA9IHRoaXMubWVtYmVycy5pbmRleE9mKG15TWVtYmVyKTtcclxuXHR0aGlzLm1lbWJlcnMuc3BsaWNlKGluZGV4LCAxKTtcclxuXHRvdGhlckdNLmFkZE1lbWJlcihteU1lbWJlcik7XHJcbn07XHJcbkdyb3VwTWFuYWdlci5wcm90b3R5cGUuYWRkTWVtYmVyID0gZnVuY3Rpb24obWVtYmVyKSB7XHJcblx0dGhpcy5tZW1iZXJzLnB1c2gobWVtYmVyKTtcclxuXHRtZW1iZXIubXlNYW5hZ2VyID0gdGhpcztcclxuXHR2YXIgc21hbGxlciA9ICh0aGlzLndpZHRoIDwgdGhpcy5oZWlnaHQpID8gdGhpcy53aWR0aCA6IHRoaXMuaGVpZ2h0O1xyXG5cdHRoaXMubWluRGlzdCA9IHNtYWxsZXIgLyB0aGlzLm1lbWJlcnMubGVuZ3RoO1xyXG5cdC8vIGNvbnNvbGUubG9nKHRoaXMubWluRGlzdCk7XHJcbn07XHJcbkdyb3VwTWFuYWdlci5wcm90b3R5cGUubnVtUGVvcGxlID0gZnVuY3Rpb24oKSB7XHJcblx0dmFyIGNvdW50ID0gMDtcclxuXHRmb3IgKHZhciBtZW1iZXIgaW4gdGhpcy5tZW1iZXJzKSB7XHJcblx0XHRtZW1iZXIgPSB0aGlzLm1lbWJlcnNbbWVtYmVyXTtcclxuXHRcdGNvdW50ICs9IG1lbWJlci5udW1QZW9wbGUoKTtcclxuXHR9XHJcblx0cmV0dXJuIGNvdW50O1xyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBHcm91cE1hbmFnZXI7XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuIiwidmFyIEhvdmVyTWVudSA9IGZ1bmN0aW9uIChnYW1lLCB4LCB5LCBzdGF0ZSkge1xyXG5cdFBoYXNlci5TcHJpdGUuY2FsbCh0aGlzLCBnYW1lLCB4LCB5LCAnYm9yZGVyZWQnKTtcclxuXHRnYW1lLmFkZC5leGlzdGluZyh0aGlzKTtcclxuXHR0aGlzLnggPSB4O1xyXG5cdHRoaXMueSA9IHk7XHJcbiAgICB0aGlzLmdyb3VwU2VsZWN0ZWQgPSBudWxsO1xyXG5cdHRoaXMud2lkdGggPSAyNjU7XHJcblx0dGhpcy5oZWlnaHQgPSAxMjU7XHJcbiAgICB0aGlzLnN0YXRpY1dpZHRoID0gMjY1O1xyXG4gICAgdGhpcy5zdGF0aWNIZWlnaHQgPSAxMjU7XHJcbiAgICB0aGlzLmNoYW5nZVdpZHRoID0gMTUwO1xyXG4gICAgdGhpcy5jaGFuZ2VIZWlnaHQgPSA2MDtcclxuICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcclxuXHRcclxuXHR0aGlzLnN0YXRpY1RleHQgPSB0aGlzLmdhbWUuYWRkLmdyb3VwKCk7XHJcblx0dGhpcy5jaGFuZ2VUZXh0ID0gdGhpcy5nYW1lLmFkZC5ncm91cCgpO1xyXG4gICAgdGhpcy52aXNpYmxlID0gZmFsc2U7XHJcbiAgICBcclxuICAgIC8vIHRoaXMuc3RhdGUuaW5wdXQuYWRkTW92ZUNhbGxiYWNrKHRoaXMub25JbnB1dE1vdmUsIHRoaXMpO1xyXG5cdFxyXG5cdHRoaXMucGVvcGxlID0gdGhpcy5nYW1lLmFkZC50ZXh0KDEwLCAxMCwgJ1Blb3BsZSAwJyk7XHJcblx0dGhpcy5wZW9wbGUuZm9udCA9ICdWVDMyMyc7XHJcblx0dGhpcy5wZW9wbGUuZm9udFNpemUgPSAyNDtcclxuXHR0aGlzLnBlb3BsZS5maWxsID0gJyMwMDAwMDAnO1xyXG5cdFxyXG5cdHRoaXMuZWR1Y2F0aW9uID0gdGhpcy5nYW1lLmFkZC50ZXh0KDEwLCAxMCwgJ0VkdWNhdGlvbiBMb3cnKTtcclxuXHR0aGlzLmVkdWNhdGlvbi5mb250ID0gJ1ZUMzIzJztcclxuXHR0aGlzLmVkdWNhdGlvbi5mb250U2l6ZSA9IDI0O1xyXG5cdHRoaXMuZWR1Y2F0aW9uLmZpbGwgPSAnIzAwMDAwMCc7XHJcblx0XHJcblx0dGhpcy5oYXBwaW5lc3MgPSB0aGlzLmdhbWUuYWRkLnRleHQoMTAsIDEwLCAnSGFwcGluZXNzICUxMDAnKTtcclxuXHR0aGlzLmhhcHBpbmVzcy5mb250ID0gJ1ZUMzIzJztcclxuXHR0aGlzLmhhcHBpbmVzcy5mb250U2l6ZSA9IDI0O1xyXG5cdHRoaXMuaGFwcGluZXNzLmZpbGwgPSAnIzAwMDAwMCc7XHJcblx0XHJcblx0dGhpcy5mYXRpZ3VlID0gdGhpcy5nYW1lLmFkZC50ZXh0KDEwLCAxMCwgJ0ZhdGlndWUgJTAnKTtcclxuXHR0aGlzLmZhdGlndWUuZm9udCA9ICdWVDMyMyc7XHJcblx0dGhpcy5mYXRpZ3VlLmZvbnRTaXplID0gMjQ7XHJcblx0dGhpcy5mYXRpZ3VlLmZpbGwgPSAnIzAwMDAwMCc7XHJcblx0XHJcbiAgICB0aGlzLmluY29tZSA9IHRoaXMuZ2FtZS5hZGQudGV4dCgxMCwgMTAsICdJbmNvbWUgJDAnKTtcclxuXHR0aGlzLmluY29tZS5mb250ID0gJ1ZUMzIzJztcclxuXHR0aGlzLmluY29tZS5mb250U2l6ZSA9IDI0O1xyXG5cdHRoaXMuaW5jb21lLmZpbGwgPSAnIzAwMDAwMCc7XHJcbiAgICBcclxuXHR0aGlzLnN0YXRpY1RleHQuYWRkKHRoaXMucGVvcGxlKTtcclxuXHR0aGlzLnN0YXRpY1RleHQuYWRkKHRoaXMuZWR1Y2F0aW9uKTtcclxuICAgIHRoaXMuZWR1Y2F0aW9uLnkgKz0gMjAgKiAxO1xyXG5cdHRoaXMuc3RhdGljVGV4dC5hZGQodGhpcy5oYXBwaW5lc3MpO1xyXG4gICAgdGhpcy5oYXBwaW5lc3MueSArPSAyMCAqIDI7XHJcblx0dGhpcy5zdGF0aWNUZXh0LmFkZCh0aGlzLmZhdGlndWUpO1xyXG4gICAgdGhpcy5mYXRpZ3VlLnkgKz0gMjAgKiAzO1xyXG5cdHRoaXMuc3RhdGljVGV4dC5hZGQodGhpcy5pbmNvbWUpO1xyXG4gICAgdGhpcy5pbmNvbWUueSArPSAyMCAqIDQ7XHJcbiAgICB0aGlzLnN0YXRpY1RleHQudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgdGhpcy5zdGF0aWNUZXh0LnggPSB0aGlzLng7XHJcbiAgICB0aGlzLnN0YXRpY1RleHQueSA9IHRoaXMueTtcclxuXHRcclxuXHR0aGlzLmhhcHBpbmVzc0NoYW5nZSA9IHRoaXMuZ2FtZS5hZGQudGV4dCgxMCwgMTAsICdIYXBwaW5lc3MgPScpO1xyXG5cdHRoaXMuaGFwcGluZXNzQ2hhbmdlLmZvbnQgPSAnVlQzMjMnO1xyXG5cdHRoaXMuaGFwcGluZXNzQ2hhbmdlLmZvbnRTaXplID0gMjQ7XHJcblx0dGhpcy5oYXBwaW5lc3NDaGFuZ2UuZmlsbCA9ICcjMDAwMDAwJztcclxuXHRcclxuXHR0aGlzLmluY29tZUNoYW5nZSA9IHRoaXMuZ2FtZS5hZGQudGV4dCgxMCwgMTAsICdJbmNvbWUgPScpO1xyXG5cdHRoaXMuaW5jb21lQ2hhbmdlLmZvbnQgPSAnVlQzMjMnO1xyXG5cdHRoaXMuaW5jb21lQ2hhbmdlLmZvbnRTaXplID0gMjQ7XHJcblx0dGhpcy5pbmNvbWVDaGFuZ2UuZmlsbCA9ICcjMDAwMDAwJztcclxuICAgIFxyXG4gICAgdGhpcy5jaGFuZ2VUZXh0LmFkZCh0aGlzLmhhcHBpbmVzc0NoYW5nZSk7XHJcbiAgICB0aGlzLmNoYW5nZVRleHQuYWRkKHRoaXMuaW5jb21lQ2hhbmdlKTtcclxuICAgIHRoaXMuaW5jb21lQ2hhbmdlLnkgKz0gMjAgKiAxO1xyXG4gICAgdGhpcy5jaGFuZ2VUZXh0LnZpc2libGUgPSBmYWxzZTtcclxuICAgIHRoaXMuY2hhbmdlVGV4dC54ID0gdGhpcy54O1xyXG4gICAgdGhpcy5jaGFuZ2VUZXh0LnkgPSB0aGlzLnk7XHJcbiAgICBcclxuICAgIC8vIHRoaXMubW92ZXIgPSB0aGlzLmdhbWUuYWRkLmdyb3VwKCk7XHJcbiAgICAvLyB0aGlzLm1vdmVyLmFkZCh0aGlzKTtcclxuICAgIC8vIHRoaXMubW92ZXIuYWRkKHRoaXMuc3RhdGljVGV4dCk7XHJcbiAgICAvLyB0aGlzLm1vdmVyLmFkZCh0aGlzLmNoYW5nZVRleHQpO1xyXG59O1xyXG5Ib3Zlck1lbnUucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShQaGFzZXIuU3ByaXRlLnByb3RvdHlwZSk7XHJcbkhvdmVyTWVudS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBIb3Zlck1lbnU7XHJcbkhvdmVyTWVudS5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24oKSB7XHJcblx0XHJcbn07XHJcbi8vcGVvcGxlLCBlZHVjYXRpb24sIGhhcHBpbmVzcywgZmF0aWd1ZSwgaW5jb21lXHJcbkhvdmVyTWVudS5wcm90b3R5cGUuc2hvd1N0YXRpYyA9IGZ1bmN0aW9uKHN0YXRlLCB4LCB5LCBvdmVyKSB7XHJcbiAgICB4IC09IHRoaXMud2lkdGggLyAyO1xyXG4gICAgeSAtPSB0aGlzLmhlaWdodDtcclxuXHR0aGlzLnBlb3BsZS50ZXh0ID0gJ1Blb3BsZSAnICsgc3RhdGUucGVvcGxlO1xyXG4gICAgdGhpcy5lZHVjYXRpb24udGV4dCA9ICdFZHVjYXRpb24gJyArIHN0YXRlLmVkdWNhdGlvbjtcclxuICAgIHRoaXMuaGFwcGluZXNzLnRleHQgPSAnSGFwcGluZXNzICUnICsgc3RhdGUuaGFwcGluZXNzO1xyXG4gICAgdGhpcy5mYXRpZ3VlLnRleHQgPSAnRmF0aWd1ZSAlJyArIHN0YXRlLmZhdGlndWU7XHJcbiAgICB0aGlzLmluY29tZS50ZXh0ID0gJ0luY29tZSAkJyArIHN0YXRlLmluY29tZTtcclxuICAgIHRoaXMuc3RhdGljVGV4dC52aXNpYmxlID0gdHJ1ZTtcclxuICAgIHRoaXMudmlzaWJsZSA9IHRydWU7XHJcbiAgICB0aGlzLndpZHRoID0gdGhpcy5zdGF0aWNXaWR0aDtcclxuICAgIHRoaXMuaGVpZ2h0ID0gdGhpcy5zdGF0aWNIZWlnaHQ7XHJcbiAgICB0aGlzLnggPSB4O1xyXG4gICAgdGhpcy55ID0geTtcclxuICAgIHRoaXMuc3RhdGljVGV4dC54ID0geDtcclxuICAgIHRoaXMuc3RhdGljVGV4dC55ID0geTtcclxuICAgIHRoaXMuYWRqdXN0U3RhdGljKG92ZXIpO1xyXG59O1xyXG4vL2hhcHBpbmVzc0NoYW5nZSwgaW5jb21lQ2hhbmdlXHJcbkhvdmVyTWVudS5wcm90b3R5cGUuc2hvd0NoYW5nZSA9IGZ1bmN0aW9uKGNhbiwgc3RhdGUsIHgsIHkpIHtcclxuICAgIGlmICghY2FuKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cdHRoaXMuaGFwcGluZXNzQ2hhbmdlLnRleHQgPSAnSGFwcGluZXNzICcgKyBzdGF0ZS5oYXBwaW5lc3NDaGFuZ2U7XHJcbiAgICB0aGlzLmluY29tZUNoYW5nZS50ZXh0ID0gJ0luY29tZSAnICsgc3RhdGUuaW5jb21lQ2hhbmdlO1xyXG4gICAgdGhpcy5jaGFuZ2VUZXh0LnZpc2libGUgPSB0cnVlO1xyXG4gICAgdGhpcy52aXNpYmxlID0gdHJ1ZTtcclxuICAgIHRoaXMud2lkdGggPSB0aGlzLmNoYW5nZVdpZHRoO1xyXG4gICAgdGhpcy5oZWlnaHQgPSB0aGlzLmNoYW5nZUhlaWdodDtcclxuICAgIHkgLT0gdGhpcy5oZWlnaHQ7XHJcbiAgICB0aGlzLnggPSB4O1xyXG4gICAgdGhpcy55ID0geTtcclxuICAgIHRoaXMuY2hhbmdlVGV4dC54ID0geDtcclxuICAgIHRoaXMuY2hhbmdlVGV4dC55ID0geTtcclxuICAgIHRoaXMuYWRqdXN0Q2hhbmdlKCk7XHJcbn07XHJcbkhvdmVyTWVudS5wcm90b3R5cGUuYWRqdXN0U3RhdGljID0gZnVuY3Rpb24ob3Zlcikge1xyXG4gICAgdmFyIG1heFdpZHRoID0gdGhpcy5nYW1lLndpZHRoO1xyXG4gICAgdmFyIG1heEhlaWdodCA9IHRoaXMuZ2FtZS5oZWlnaHQ7XHJcbiAgICBpZiAodGhpcy55IC0gdGhpcy5oZWlnaHQgPD0gMCkgeyAvLyBvdmVyIHRvcCBvZiBzY3JlZW5cclxuICAgICAgICB0aGlzLnkgKz0gb3ZlcjtcclxuICAgICAgICB0aGlzLnkgKz0gdGhpcy5oZWlnaHQ7XHJcbiAgICAgICAgdGhpcy5zdGF0aWNUZXh0LnkgPSB0aGlzLnk7XHJcbiAgICAgICAgdGhpcy5jaGFuZ2VUZXh0LnkgPSB0aGlzLnk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy54IC0gdGhpcy53aWR0aCAvIDIgPCAwKSB7IC8vIG92ZXIgbGVmdCBvZiBzY3JlZW5cclxuICAgICAgICB0aGlzLnggKz0gdGhpcy53aWR0aCAvIDI7XHJcbiAgICAgICAgdGhpcy5zdGF0aWNUZXh0LnggPSB0aGlzLng7XHJcbiAgICAgICAgdGhpcy5jaGFuZ2VUZXh0LnggPSB0aGlzLng7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMueCArIHRoaXMud2lkdGggLyAyID4gbWF4V2lkdGgpIHsgLy8gb3ZlciByaWdodCBvZiBzY3JlZW5cclxuICAgICAgICB0aGlzLnggLT0gdGhpcy53aWR0aCAvIDI7XHJcbiAgICAgICAgdGhpcy5zdGF0aWNUZXh0LnggPSB0aGlzLng7XHJcbiAgICAgICAgdGhpcy5jaGFuZ2VUZXh0LnggPSB0aGlzLng7XHJcbiAgICB9XHJcbn07XHJcbkhvdmVyTWVudS5wcm90b3R5cGUuYWRqdXN0Q2hhbmdlID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgbWF4V2lkdGggPSB0aGlzLmdhbWUud2lkdGg7XHJcbiAgICB2YXIgbWF4SGVpZ2h0ID0gdGhpcy5nYW1lLmhlaWdodDtcclxuICAgIGlmICh0aGlzLnkgLSB0aGlzLmhlaWdodCA8PSAwKSB7IC8vIG92ZXIgdG9wIG9mIHNjcmVlblxyXG4gICAgICAgIHRoaXMueSArPSB0aGlzLmhlaWdodDtcclxuICAgICAgICB0aGlzLnN0YXRpY1RleHQueSA9IHRoaXMueTtcclxuICAgICAgICB0aGlzLmNoYW5nZVRleHQueSA9IHRoaXMueTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLnggKyB0aGlzLndpZHRoID4gbWF4V2lkdGgpIHsgLy8gb3ZlciByaWdodCBvZiBzY3JlZW5cclxuICAgICAgICB0aGlzLnggLT0gdGhpcy53aWR0aDtcclxuICAgICAgICB0aGlzLnN0YXRpY1RleHQueCA9IHRoaXMueDtcclxuICAgICAgICB0aGlzLmNoYW5nZVRleHQueCA9IHRoaXMueDtcclxuICAgIH1cclxufTtcclxuSG92ZXJNZW51LnByb3RvdHlwZS5oaWRlID0gZnVuY3Rpb24oKSB7XHJcblx0dGhpcy5zdGF0aWNUZXh0LnZpc2libGUgPSBmYWxzZTtcclxuICAgIHRoaXMuY2hhbmdlVGV4dC52aXNpYmxlID0gZmFsc2U7XHJcbiAgICB0aGlzLnZpc2libGUgPSBmYWxzZTtcclxufTtcclxuLy8gSG92ZXJNZW51LnByb3RvdHlwZS5vbklucHV0TW92ZSA9IGZ1bmN0aW9uKCkge1xyXG4gIC8vIGNvbnNvbGUubG9nKCdtb3ZlJyk7XHJcbiAgXHJcbi8vIH07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IEhvdmVyTWVudTtcclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuIiwidmFyIFBlcnNvbiA9IGZ1bmN0aW9uIChnYW1lLCB4LCB5LCBpZCkge1xyXG5cdFBoYXNlci5TcHJpdGUuY2FsbCh0aGlzLCBnYW1lLCB4LCB5LCAncGVyc29uJyk7XHJcblx0dGhpcy52ZWxvY2l0eSA9IHt4OjAsIHk6MH07XHJcblx0dGhpcy53aWR0aCA9IDEwO1xyXG5cdHRoaXMuaGVpZ2h0ID0gMTA7XHJcblx0dGhpcy5zcGVlZCA9IC4wNTtcclxuXHR0aGlzLmlkID0gaWQ7XHJcblx0dGhpcy5lZHVMZXZlbCA9IFBlcnNvbi5FRFVMRVZFTC51bmVtcGxveWVkO1xyXG5cdHRoaXMuaGFwcGluZXNzID0gMTAwO1xyXG4gICAgdGhpcy5mYXRpZ3VlID0gMDtcclxuICAgIHRoaXMuaGFwcGluZXNzTW9kaWZpZXIgPSAwO1xyXG59O1xyXG5QZXJzb24ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShQaGFzZXIuU3ByaXRlLnByb3RvdHlwZSk7XHJcblBlcnNvbi5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBQZXJzb247XHJcblxyXG5QZXJzb24uRURVTEVWRUwgPSB7XHJcblx0dW5lbXBsb3llZCA6IC0xLFxyXG5cdGxvdyAgOiAwLFxyXG5cdG1pZCAgOiAxLFxyXG5cdGhpZ2ggOiAyXHJcbn07XHJcblxyXG5QZXJzb24ucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uKCkge1xyXG5cdHRoaXMueCArPSB0aGlzLnZlbG9jaXR5LnggKiB0aGlzLnNwZWVkO1xyXG5cdHRoaXMueSArPSB0aGlzLnZlbG9jaXR5LnkgKiB0aGlzLnNwZWVkO1xyXG5cdC8vY29uc29sZS5sb2codGhpcy52ZWxvY2l0eSk7XHJcbn07XHJcblxyXG5QZXJzb24ucHJvdG90eXBlLmdldFRheCA9IGZ1bmN0aW9uKCkge1xyXG5cdC8vIGNvbnNvbGUubG9nKCdnZXQgdGF4JywgdGhpcy5ncm91cC5teU1hbmFnZXIuYmFja2dyb3VuZC50eXBlKTtcclxuXHRpZiAodGhpcy5ncm91cC5teU1hbmFnZXIuYmFja2dyb3VuZC50eXBlID09PSAnaG91c2UnKSB7XHJcblx0XHRpZiAodGhpcy5ncm91cC5teU1hbmFnZXIuYmFja2dyb3VuZC5pbmNvbWVMZXZlbCA9PT0gUGVyc29uLkVEVUxFVkVMLmxvdykge1xyXG5cdFx0XHRjb25zb2xlLmxvZyh0aGlzLmdyb3VwLm15TWFuYWdlci5iYWNrZ3JvdW5kLm15TWFuYWdlci5zdGF0ZS50YXhNb2QubG93KTtcclxuXHRcdFx0cmV0dXJuIC0xMDtcclxuXHRcdH0gZWxzZSBpZiAodGhpcy5ncm91cC5teU1hbmFnZXIuYmFja2dyb3VuZC5pbmNvbWVMZXZlbCA9PT0gUGVyc29uLkVEVUxFVkVMLm1pZCkge1xyXG5cdFx0XHRyZXR1cm4gLTIwO1xyXG5cdFx0fSBlbHNlIGlmICh0aGlzLmdyb3VwLm15TWFuYWdlci5iYWNrZ3JvdW5kLmluY29tZUxldmVsID09PSBQZXJzb24uRURVTEVWRUwuaGlnaCkge1xyXG5cdFx0XHRyZXR1cm4gLTMwO1xyXG5cdFx0fVxyXG5cdH0gZWxzZSBpZiAodGhpcy5ncm91cC5teU1hbmFnZXIuYmFja2dyb3VuZC50eXBlID09PSAnd29yaycpIHtcclxuXHRcdGlmICh0aGlzLmdyb3VwLm15TWFuYWdlci5iYWNrZ3JvdW5kLmluY29tZUxldmVsID09PSBQZXJzb24uRURVTEVWRUwubG93KSB7XHJcblx0XHRcdHJldHVybiAxMCAqIHRoaXMuZ3JvdXAubXlNYW5hZ2VyLmJhY2tncm91bmQubXlNYW5hZ2VyLnN0YXRlLnRheE1vZC5sb3c7XHJcblx0XHR9IGVsc2UgaWYgKHRoaXMuZ3JvdXAubXlNYW5hZ2VyLmJhY2tncm91bmQuaW5jb21lTGV2ZWwgPT09IFBlcnNvbi5FRFVMRVZFTC5taWQpIHtcclxuXHRcdFx0cmV0dXJuIDIwICogdGhpcy5ncm91cC5teU1hbmFnZXIuYmFja2dyb3VuZC5teU1hbmFnZXIuc3RhdGUudGF4TW9kLm1pZDtcclxuXHRcdH0gZWxzZSBpZiAodGhpcy5ncm91cC5teU1hbmFnZXIuYmFja2dyb3VuZC5pbmNvbWVMZXZlbCA9PT0gUGVyc29uLkVEVUxFVkVMLmhpZ2gpIHtcclxuXHRcdFx0cmV0dXJuIDMwICogdGhpcy5ncm91cC5teU1hbmFnZXIuYmFja2dyb3VuZC5teU1hbmFnZXIuc3RhdGUudGF4TW9kLmhpZ2g7XHJcblx0XHR9XHJcblx0fVxyXG5cdHJldHVybiAwO1xyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBQZXJzb247IiwidmFyIFBsYXllciA9IGZ1bmN0aW9uIChnYW1lLCB4LCB5KSB7XHJcbiAgICBQaGFzZXIuU3ByaXRlLmNhbGwodGhpcywgZ2FtZSwgeCwgeSwgJ3Rlc3RzcHJpdGUnKTtcclxuICAgIGdhbWUuYWRkLmV4aXN0aW5nKHRoaXMpO1xyXG5cdHRoaXMuc3BlZWQgPSAwLjE7XHJcbn1cclxuXHJcblBsYXllci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFBoYXNlci5TcHJpdGUucHJvdG90eXBlKTtcclxuUGxheWVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFBsYXllcjtcclxuXHJcbi8qKlxyXG4gKiBBdXRvbWF0aWNhbGx5IGNhbGxlZCBieSBXb3JsZC51cGRhdGVcclxuICovXHJcblBsYXllci5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24oKSB7XHJcblx0Ly90aGlzLnggKz0gdGhpcy52ZWxvY2l0eTtcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gUGxheWVyO1xyXG4iLCJ2YXIgUHJvZ3Jlc3NCYXIgPSByZXF1aXJlKCcuL1Byb2dyZXNzQmFyJyk7XHJcblxyXG52YXIgVUlCdWlsZGVyID0gZnVuY3Rpb24oc2V0R2FtZVN0YXRlKSB7XHJcblx0Ly9FbnN1cmUgdGhhdCBjYW5ub3QgY3JlYXRlIG11bHRpcGxlIGluc3RhbmNlcyBvZiB0aGlzIGNsYXNzXHJcblx0aWYoVUlCdWlsZGVyLnByb3RvdHlwZS5leGlzdHMpIHtcclxuXHRcdHJldHVybiBVSUJ1aWxkZXIucHJvdG90eXBlLmV4aXN0aW5nUmVmZXJlbmNlO1xyXG5cdH1cclxuXHRcclxuXHR0aGlzLmdhbWVTdGF0ZSA9IHNldEdhbWVTdGF0ZTtcclxuXHR0aGlzLnJlbmRlcmFibGVzID0gW107XHJcblx0Ly9DcmVhdGUgYW5kIHN0b3JlIGEgZ3JhcGhpY3Mgb2JqZWN0ICh1c2VkIGZvciBzdHVmZiBsaWtlIGRyYXdpbmcgcmVjdGFuZ2xlcylcclxuXHRVSUJ1aWxkZXIucHJvdG90eXBlLmV4aXN0cyA9IHRydWU7XHJcblx0VUlCdWlsZGVyLnByb3RvdHlwZS5leGlzdGluZ1JlZmVyZW5jZSA9IHRoaXM7XHJcbn07XHJcblxyXG5VSUJ1aWxkZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gVUlCdWlsZGVyO1xyXG4vL1RoZXNlIHZhcidzIGhlbHAgY3JlYXRlIHRoZSBzaW5nbGV0b24gZnVuY3Rpb25hbGl0eVxyXG5VSUJ1aWxkZXIucHJvdG90eXBlLmV4aXN0cyA9IGZhbHNlO1xyXG5VSUJ1aWxkZXIucHJvdG90eXBlLmV4aXN0aW5nUmVmZXJlbmNlID0gbnVsbDtcclxuXHJcbi8vVXNlIHRoaXMgZnVuY3Rpb24gdG8gY3JlYXRlIGEgcHJvZ3Jlc3MgYmFyXHJcbi8vVXNhZ2U6IHR5cGU6IGNhbiBiZSBcImdyb3dpbmdcIiBvciBcInNocmlua2luZ1wiLCB0aGlzIHdpbGwgZWZmZWN0IGlmIGJhciBzdGFydHMgYXQgMCBhbmQgZ29lcyB1cCBvciB2aXMgdmVyc2FcclxuLy9cdFx0IG1heFZhbHVlOiBzZXRzIHRoZSBtYXggdmFsdWUgb2YgdGhlIHByb2dyZXNzIGJhciwgaS5lLiB1c2luZyAxMDAgY3JlYXRlcyBhIGJhciBmcm9tIDAgdG8gMTAwXHJcbi8vXHRcdCB4LHk6IHNldHMgbG9jYXRpb25cclxuLy9cdFx0IERPTidUIEZPUkdFVCB0byBvdmVyd3JpdGUgdGhlIG9uRXZlbnQoKSBmdW5jdGlvbiBmb3IgdGhlIHByb2dyZXNzIGJhciBhZnRlciBjcmVhdGluZyBpdFxyXG4vL1x0XHRcdC1vbkV2ZW50KCkgaXMgYXV0b21hdGljYWxseSBjYWxsZWQgd2hlbiBiYXIgZmlsbHMvc2hyaW5rcyBwYXN0IGxpbWl0IChkZXBlbmRpbmcgb24gYmFyIHR5cGUpXHJcblVJQnVpbGRlci5wcm90b3R5cGUuYnVpbGRQcm9ncmVzc0JhciA9IGZ1bmN0aW9uKHR5cGUsIHgsIHksIHdpZHRoLCBoZWlnaHQsIG1heFZhbHVlKSB7XHJcblx0Ly9jcmVhdGUgYW5kIGZvcm1hdCBuZXcgcHJvZyBiYXJcclxuXHR2YXIgZ3JhcGhpY3MgPSB0aGlzLmdhbWVTdGF0ZS5nYW1lLmFkZC5ncmFwaGljcygwLDApO1xyXG5cdHZhciBuZXdQcm9nQmFyID0gbmV3IFByb2dyZXNzQmFyKHR5cGUsIG1heFZhbHVlLCBncmFwaGljcywgdGhpcy5yZW5kZXJhYmxlcyk7XHJcblx0bmV3UHJvZ0Jhci5zZXRMb2NhdGlvbih4LHkpO1xyXG5cdG5ld1Byb2dCYXIuc2V0U2l6ZSh3aWR0aCwgaGVpZ2h0KTtcclxuXHQvL3N1YnNjcmliZSB0byAncmVuZGVyYWJsZXMnIHNvIHRoYXQgcmVuZGVyKCkgaXMgY2FsbGVkIGF1dG9tYXRpY2FsbHlcclxuXHQvLyB0aGlzLnJlbmRlcmFibGVzLnN1YnNjcmliZShuZXdQcm9nQmFyKTtcclxuXHR0aGlzLnJlbmRlcmFibGVzLnB1c2gobmV3UHJvZ0Jhcik7XHJcblx0cmV0dXJuIG5ld1Byb2dCYXI7XHJcbn07XHJcblVJQnVpbGRlci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24oKSB7XHJcblx0Zm9yIChyZW5kZXJhYmxlIGluIHRoaXMucmVuZGVyYWJsZXMpIHtcclxuXHRcdHRoaXMucmVuZGVyYWJsZXNbcmVuZGVyYWJsZV0ucmVuZGVyKCk7XHJcblx0fVxyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBVSUJ1aWxkZXI7IiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxudmFyIGdhbWUgPSBuZXcgUGhhc2VyLkdhbWUoODAwLCA2MDAsIFBoYXNlci5BVVRPLCAnLWdhbWUnKTtcclxuXHJcbndpbmRvdy5VdGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcclxud2luZG93LnBsYXllclN0YXRlID0ge1xyXG4gICAgY3VycmVudExldmVsOiAnR2FtZSdcclxufTtcclxuXHJcblxyXG5nYW1lLnN0YXRlLmFkZCgnQm9vdCcsIHJlcXVpcmUoJy4vc3RhdGVzL2Jvb3QnKSk7XHJcbmdhbWUuc3RhdGUuYWRkKCdTcGxhc2gnLCByZXF1aXJlKCcuL3N0YXRlcy9zcGxhc2gnKSk7XHJcbmdhbWUuc3RhdGUuYWRkKCdQcmVsb2FkZXInLCByZXF1aXJlKCcuL3N0YXRlcy9wcmVsb2FkZXInKSk7XHJcbmdhbWUuc3RhdGUuYWRkKCdNZW51JywgcmVxdWlyZSgnLi9zdGF0ZXMvbWVudScpKTtcclxuZ2FtZS5zdGF0ZS5hZGQoJ0dhbWUnLCByZXF1aXJlKCcuL3N0YXRlcy9nYW1lJykpO1xyXG5nYW1lLnN0YXRlLmFkZCgnR2FtZV9PdmVyJywgcmVxdWlyZSgnLi9zdGF0ZXMvZ2FtZV9vdmVyJykpO1xyXG5cclxuZ2FtZS5zdGF0ZS5zdGFydCgnQm9vdCcpO1xyXG5cclxuLy9nYW1lLnN0YWdlLmJhY2tncm91bmRDb2xvciA9IFwiI2ZmZmZmZlwiO1xyXG4iLCJ2YXIgQm9vdCA9IGZ1bmN0aW9uICgpIHt9O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBCb290O1xyXG5cclxuQm9vdC5wcm90b3R5cGUgPSB7XHJcblxyXG4gIHByZWxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMubG9hZC5pbWFnZSgncHJlbG9hZGVyJywgJ2Fzc2V0cy9wcmVsb2FkZXIuZ2lmJyk7XHJcbiAgfSxcclxuXHJcbiAgY3JlYXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLmdhbWUuaW5wdXQubWF4UG9pbnRlcnMgPSAxO1xyXG5cclxuICAgIGlmICh0aGlzLmdhbWUuZGV2aWNlLmRlc2t0b3ApIHtcclxuICAgICAgdGhpcy5nYW1lLnN0YWdlLnNjYWxlLnBhZ2VBbGlnbkhvcml6b250YWxseSA9IHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmdhbWUuc2NhbGUuc2NhbGVNb2RlID0gUGhhc2VyLlNjYWxlTWFuYWdlci5TSE9XX0FMTDtcclxuICAgICAgdGhpcy5nYW1lLnNjYWxlLm1pbldpZHRoID0gIDQ4MDtcclxuICAgICAgdGhpcy5nYW1lLnNjYWxlLm1pbkhlaWdodCA9IDI2MDtcclxuICAgICAgdGhpcy5nYW1lLnNjYWxlLm1heFdpZHRoID0gNjQwO1xyXG4gICAgICB0aGlzLmdhbWUuc2NhbGUubWF4SGVpZ2h0ID0gNDgwO1xyXG4gICAgICB0aGlzLmdhbWUuc2NhbGUuZm9yY2VMYW5kc2NhcGUgPSB0cnVlO1xyXG4gICAgICB0aGlzLmdhbWUuc2NhbGUucGFnZUFsaWduSG9yaXpvbnRhbGx5ID0gdHJ1ZTtcclxuICAgICAgdGhpcy5nYW1lLnNjYWxlLnNldFNjcmVlblNpemUodHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5nYW1lLnN0YXRlLnN0YXJ0KCdQcmVsb2FkZXInKTtcclxuICB9XHJcbn07XHJcbiIsInZhciBQbGF5ZXIgPSByZXF1aXJlKCcuLi9lbnRpdGllcy9wbGF5ZXInKTtcclxudmFyIEJhY2tncm91bmRfTWFuYWdlciA9IHJlcXVpcmUoJy4uL2VudGl0aWVzL2JhY2tncm91bmRfbWFuYWdlcicpO1xyXG52YXIgUGVyc29uID0gcmVxdWlyZSgnLi4vZW50aXRpZXMvcGVyc29uJyk7XHJcbnZhciBHcm91cCA9IHJlcXVpcmUoJy4uL2VudGl0aWVzL2dyb3VwJyk7XHJcbnZhciBHcm91cE1hbmFnZXIgPSByZXF1aXJlKCcuLi9lbnRpdGllcy9ncm91cE1hbmFnZXInKTtcclxudmFyIFVJQnVpbGRlciA9IHJlcXVpcmUoJy4uL2VudGl0aWVzL3VpQnVpbGRlcicpO1xyXG52YXIgSG92ZXJNZW51ID0gcmVxdWlyZSgnLi4vZW50aXRpZXMvaG92ZXJNZW51Jyk7XHJcblxyXG52YXIgR2FtZSA9IGZ1bmN0aW9uICgpIHtcclxuICB0aGlzLnRlc3RlbnRpdHkgPSBudWxsO1xyXG4gIC8vdGhpcy5mbG9ja3MgPSBbXTtcclxuICB0aGlzLmJnX21nID0gbnVsbDtcclxuICAvLyB0aGlzLnNlbGVjdGVkR3JvdXAgPSBudWxsO1xyXG4gIHRoaXMubW9uZXkgPSBudWxsO1xyXG4gIHRoaXMubW9uZXlWYWwgPSAwO1xyXG4gIHRoaXMuY3VyTW9uZXkgPSAwO1xyXG4gIHRoaXMubW9uZXlVcGRhdGVEZWxheSA9IDAuMDAxO1xyXG4gIHRoaXMubW9uZXlJbmNyZW1lbnRpbmcgPSBmYWxzZTtcclxuICB0aGlzLmhhcHBpbmVzc1ZhbCA9IDA7XHJcbiAgdGhpcy5jdXJIYXBwaW5lc3MgPSAwO1xyXG4gIHRoaXMuaGFwcGluZXNzVXBkYXRlRGVsYXkgPSAwLjAwMTtcclxuICB0aGlzLmhhcHBpbmVzc0luY3JlbWVudGluZyA9IGZhbHNlO1xyXG4gIHRoaXMudGF4VGltZSA9IDM7XHJcbiAgdGhpcy50YXhNb2QgPSB7bG93OiAxLCBtaWQ6IDEsIGhpZ2g6IDF9O1xyXG4gIHRoaXMubWluSGFwcGluZXNzID0gNTA7XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IEdhbWU7XHJcblxyXG5HYW1lLnByb3RvdHlwZSA9IHtcclxuXHJcbiAgY3JlYXRlOiBmdW5jdGlvbiAoKSB7XHJcblx0ICAvLyBjb25zb2xlLmxvZyh0aGlzKTtcclxuICAgIHRoaXMuZ2FtZS5zdGFnZS5iYWNrZ3JvdW5kQ29sb3IgPSBcIiNlZGVkZWRcIjtcclxuICAgIHRoaXMubWVudV9iZyA9IHRoaXMuZ2FtZS5hZGQuaW1hZ2UoMCwgMCwgJ21lbnVfYmcnKTsgIFxyXG4gICAgdmFyIHggPSAodGhpcy5nYW1lLndpZHRoIC8gMikgLSAxMDA7XHJcbiAgICB2YXIgeSA9ICh0aGlzLmdhbWUuaGVpZ2h0IC8gMikgLSA1MDtcclxuXHJcbiAgICB0aGlzLmJnX21nID0gbmV3IEJhY2tncm91bmRfTWFuYWdlcih0aGlzLmdhbWUsIHRoaXMpO1xyXG5cdFxyXG4gICAgdGhpcy5pbnB1dC5vbkRvd24uYWRkKHRoaXMub25JbnB1dERvd24sIHRoaXMpO1xyXG5cdFxyXG5cdHRoaXMubW9uZXkgPSB0aGlzLmdhbWUuYWRkLnRleHQoMjAsIDIwLCAnJDAnKTtcclxuXHR0aGlzLm1vbmV5LmZvbnQgPSBcIlJvYm90b1wiO1xyXG5cdHRoaXMubW9uZXkuZm9udFNpemUgPSAyNDtcclxuXHR0aGlzLm1vbmV5LmZpbGwgPSAnIzAwMDAwMCc7XHJcbiAgdGhpcy5tb25leS50ZXh0ID0gJyQwJztcclxuXHR0aGlzLnVpYiA9IG5ldyBVSUJ1aWxkZXIodGhpcyk7XHJcblx0dGhpcy5iYXIgPSB0aGlzLnVpYi5idWlsZFByb2dyZXNzQmFyKFwiZ3Jvd2luZ1wiLCB0aGlzLmdhbWUud2lkdGggLyAyLCAyNSwgMzAwLCAxNiwgMTAwIC0gdGhpcy5taW5IYXBwaW5lc3MpO1xyXG5cdC8vdGhpcy5iYXIuYWRkVmFsdWUoMTAwKTtcclxuXHR0aGlzLmhhcHB5ID0gdGhpcy5nYW1lLmFkZC5zcHJpdGUodGhpcy5nYW1lLndpZHRoICogLjI5LCAyNSwgJ2hhcHB5ZmFjZScpO1xyXG5cdHRoaXMuaGFwcHkuYW5jaG9yLnNldFRvKDAuNSwgMC41KTtcclxuXHJcbiAgLy8gVGF4IGJ1dHRvbnNcclxuICB0aGlzLnJlZFRheExvdyAgID0gdGhpcy5nYW1lLmFkZC5idXR0b24odGhpcy5iZ19tZy5iZ0FycmF5WzBdLmdldFZhcnNDZW50ZXIoKS5jZW50ZXIueCAtIDE1LCA3NSwgJ3RheFJlZHVjZScsIHRoaXMuZGVjVGF4TG93LCB0aGlzKTtcclxuICB0aGlzLnRleHRUYXhMb3cgID0gdGhpcy5nYW1lLmFkZC50ZXh0KHRoaXMuYmdfbWcuYmdBcnJheVswXS5nZXRWYXJzKClbMF0sIDc4LCAnJCQnKTtcclxuICB0aGlzLnRleHRUYXhMb3cuZm9udCA9IFwiUm9ib3RvXCI7XHJcbiAgdGhpcy50ZXh0VGF4TG93LmZvbnRTaXplID0gMTg7XHJcbiAgdGhpcy5hZGRUYXhMb3cgICA9IHRoaXMuZ2FtZS5hZGQuYnV0dG9uKHRoaXMuYmdfbWcuYmdBcnJheVswXS5nZXRWYXJzQ2VudGVyKCkuY2VudGVyLnggKyAxNSwgNzUsICd0YXhBZGQnLCB0aGlzLmluY1RheExvdywgdGhpcyk7XHJcbiAgdGhpcy5yZWRUYXhMb3cuYW5jaG9yLnNldFRvKC41LCAuNSk7XHJcbiAgdGhpcy50ZXh0VGF4TG93LmFuY2hvci5zZXRUbygwLCAuNSk7XHJcbiAgdGhpcy5hZGRUYXhMb3cuYW5jaG9yLnNldFRvKC41LCAuNSk7XHJcbiAgdGhpcy5yZWRUYXhNaWQgICA9IHRoaXMuZ2FtZS5hZGQuYnV0dG9uKHRoaXMuYmdfbWcuYmdBcnJheVsxXS5nZXRWYXJzQ2VudGVyKCkuY2VudGVyLnggLSAxNSwgNzUsICd0YXhSZWR1Y2UnLCB0aGlzLmRlY1RheE1pZCwgdGhpcyk7XHJcbiAgdGhpcy50ZXh0VGF4TWlkICA9IHRoaXMuZ2FtZS5hZGQudGV4dCh0aGlzLmJnX21nLmJnQXJyYXlbMV0uZ2V0VmFyc0NlbnRlcigpLmNlbnRlci54LCA3OCwgJyQkJyk7XHJcbiAgdGhpcy50ZXh0VGF4TWlkLmZvbnQgPSBcIlJvYm90b1wiO1xyXG4gIHRoaXMudGV4dFRheE1pZC5mb250U2l6ZSA9IDE4O1xyXG4gIHRoaXMuYWRkVGF4TWlkICAgPSB0aGlzLmdhbWUuYWRkLmJ1dHRvbih0aGlzLmJnX21nLmJnQXJyYXlbMV0uZ2V0VmFyc0NlbnRlcigpLmNlbnRlci54ICsgMTUsIDc1LCAndGF4QWRkJywgdGhpcy5pbmNUYXhNaWQsIHRoaXMpO1xyXG4gIHRoaXMucmVkVGF4TWlkLmFuY2hvci5zZXRUbyguNSwgLjUpO1xyXG4gIHRoaXMudGV4dFRheE1pZC5hbmNob3Iuc2V0VG8oMCwgLjUpO1xyXG4gIHRoaXMuYWRkVGF4TWlkLmFuY2hvci5zZXRUbyguNSwgLjUpO1xyXG4gIHRoaXMucmVkVGF4SGlnaCAgPSB0aGlzLmdhbWUuYWRkLmJ1dHRvbih0aGlzLmJnX21nLmJnQXJyYXlbMl0uZ2V0VmFyc0NlbnRlcigpLmNlbnRlci54IC0gMTUsIDc1LCAndGF4UmVkdWNlJywgdGhpcy5kZWNUYXhIaWdoLCB0aGlzKTtcclxuICB0aGlzLnRleHRUYXhIaWdoID0gdGhpcy5nYW1lLmFkZC50ZXh0KHRoaXMuYmdfbWcuYmdBcnJheVsxXS5nZXRWYXJzQ2VudGVyKCkuY2VudGVyLngsIDc4LCAnJCQnKTtcclxuICB0aGlzLnRleHRUYXhIaWdoLmZvbnQgPSBcIlJvYm90b1wiO1xyXG4gIHRoaXMudGV4dFRheEhpZ2guZm9udFNpemUgPSAxODtcclxuICB0aGlzLmFkZFRheEhpZ2ggID0gdGhpcy5nYW1lLmFkZC5idXR0b24odGhpcy5iZ19tZy5iZ0FycmF5WzJdLmdldFZhcnNDZW50ZXIoKS5jZW50ZXIueCArIDE1LCA3NSwgJ3RheEFkZCcsIHRoaXMuaW5jVGF4SGlnaCwgdGhpcyk7XHJcbiAgdGhpcy5yZWRUYXhIaWdoLmFuY2hvci5zZXRUbyguNSwgLjUpO1xyXG4gIHRoaXMudGV4dFRheEhpZ2guYW5jaG9yLnNldFRvKDAsIC41KTtcclxuICB0aGlzLmFkZFRheEhpZ2guYW5jaG9yLnNldFRvKC41LCAuNSk7XHJcblxyXG5cdHRoaXMuZ2FtZS50aW1lLmV2ZW50cy5hZGQoUGhhc2VyLlRpbWVyLlNFQ09ORCAqIHRoaXMudGF4VGltZSwgdGhpcy5jb2xsZWN0VGF4LCB0aGlzKTtcclxuICAgIHRoaXMuaG0gPSBuZXcgSG92ZXJNZW51KHRoaXMuZ2FtZSwgMjAwLCAyMDAsIHRoaXMpO1xyXG4gICAgLy8gdGhpcy5obS5hbmNob3Iuc2V0VG8oMC41LCAxKTtcclxuXHQvLyB0aGlzLmhtLnZpc2libGUgPSBmYWxzZTtcclxuICB9LFxyXG5cclxuICB1cGRhdGU6IGZ1bmN0aW9uICgpIHtcclxuXHR0aGlzLmJnX21nLnVwZGF0ZSgpO1xyXG5cdC8vdGhpcy5nbS51cGRhdGUoKTtcclxuXHR0aGlzLnVpYi5yZW5kZXIoKTtcclxuXHR2YXIgaGFwcGluZXNzID0gMDtcclxuXHQgIGZvciAodmFyIGJnIGluIHRoaXMuYmdfbWcuYmdBcnJheSkge1xyXG5cdFx0ICBmb3IgKHZhciBncm91cCBpbiB0aGlzLmJnX21nLmJnQXJyYXlbYmddLmdyb3VwX21hbmFnZXIubWVtYmVycykge1xyXG5cdFx0XHQgIGZvciAodmFyIHBlcnNvbiBpbiB0aGlzLmJnX21nLmJnQXJyYXlbYmddLmdyb3VwX21hbmFnZXIubWVtYmVyc1tncm91cF0ubWVtYmVycykge1xyXG5cdFx0XHRcdCAgaGFwcGluZXNzICs9IHRoaXMuYmdfbWcuYmdBcnJheVtiZ10uZ3JvdXBfbWFuYWdlci5tZW1iZXJzW2dyb3VwXS5tZW1iZXJzW3BlcnNvbl0uaGFwcGluZXNzO1xyXG5cdFx0XHQgIH1cclxuXHRcdCAgfVxyXG5cdCAgfVxyXG5cdCAgaGFwcGluZXNzIC89IHRoaXMuYmdfbWcubnVtUGVvcGxlKCk7XHJcblx0ICBoYXBwaW5lc3MgLT0gdGhpcy5taW5IYXBwaW5lc3M7XHJcblx0ICAvLyBjb25zb2xlLmxvZyhoYXBwaW5lc3MpO1xyXG5cdCAgLy8gY29uc29sZS5sb2coaGFwcGluZXNzKTtcclxuXHQgIHRoaXMuc2V0SGFwcGluZXNzKGhhcHBpbmVzcyk7XHJcbiAgICB0aGlzLnJlZFRheExvdy54ICAgPSB0aGlzLmJnX21nLmJnQXJyYXlbMF0uZ2V0VmFyc0NlbnRlcigpLmNlbnRlci54IC0gMzA7XHJcbiAgICB0aGlzLnRleHRUYXhMb3cueCAgPSB0aGlzLmJnX21nLmJnQXJyYXlbMF0uZ2V0VmFyc0NlbnRlcigpLmNlbnRlci54IC0gMTU7XHJcbiAgICB0aGlzLmFkZFRheExvdy54ICAgPSB0aGlzLmJnX21nLmJnQXJyYXlbMF0uZ2V0VmFyc0NlbnRlcigpLmNlbnRlci54ICsgMzA7XHJcbiAgICB0aGlzLnJlZFRheE1pZC54ICAgPSB0aGlzLmJnX21nLmJnQXJyYXlbMV0uZ2V0VmFyc0NlbnRlcigpLmNlbnRlci54IC0gMzA7XHJcbiAgICB0aGlzLnRleHRUYXhNaWQueCAgPSB0aGlzLmJnX21nLmJnQXJyYXlbMV0uZ2V0VmFyc0NlbnRlcigpLmNlbnRlci54IC0gMTU7XHJcbiAgICB0aGlzLmFkZFRheE1pZC54ICAgPSB0aGlzLmJnX21nLmJnQXJyYXlbMV0uZ2V0VmFyc0NlbnRlcigpLmNlbnRlci54ICsgMzA7XHJcbiAgICB0aGlzLnJlZFRheEhpZ2gueCAgPSB0aGlzLmJnX21nLmJnQXJyYXlbMl0uZ2V0VmFyc0NlbnRlcigpLmNlbnRlci54IC0gMzA7XHJcbiAgICB0aGlzLnRleHRUYXhIaWdoLnggPSB0aGlzLmJnX21nLmJnQXJyYXlbMl0uZ2V0VmFyc0NlbnRlcigpLmNlbnRlci54IC0gMTU7XHJcbiAgICB0aGlzLmFkZFRheEhpZ2gueCAgPSB0aGlzLmJnX21nLmJnQXJyYXlbMl0uZ2V0VmFyc0NlbnRlcigpLmNlbnRlci54ICsgMzA7XHJcblxyXG4gICAgaWYgKHRoaXMuY3VySGFwcGluZXNzIDwgdGhpcy5taW5IYXBwaW5lc3MpXHJcbiAgICAgIHRoaXMuZ2FtZS5zdGF0ZS5zdGFydCgnR2FtZV9PdmVyJyk7XHJcbiAgfSxcclxuXHJcbiAgb25JbnB1dERvd246IGZ1bmN0aW9uICgpIHtcclxuXHQgLy8gY29uc29sZS5sb2codGhpcy5nYW1lLndpZHRoLCB0aGlzLmdhbWUuaGVpZ2h0KTtcclxuICB9LFxyXG4gIGNvbGxlY3RUYXg6IGZ1bmN0aW9uICgpIHtcclxuXHQgIC8vIGNvbnNvbGUubG9nKCdjb2xsZWN0IHRheCcpO1xyXG5cdCAgdmFyIHRheGVzID0gMDtcclxuXHQgIGZvciAodmFyIGJnIGluIHRoaXMuYmdfbWcuYmdBcnJheSkge1xyXG5cdFx0ICBmb3IgKHZhciBncm91cCBpbiB0aGlzLmJnX21nLmJnQXJyYXlbYmddLmdyb3VwX21hbmFnZXIubWVtYmVycykge1xyXG5cdFx0XHQgIGZvciAodmFyIHBlcnNvbiBpbiB0aGlzLmJnX21nLmJnQXJyYXlbYmddLmdyb3VwX21hbmFnZXIubWVtYmVyc1tncm91cF0ubWVtYmVycykge1xyXG5cdFx0XHRcdCAgdGF4ZXMgKz0gdGhpcy5iZ19tZy5iZ0FycmF5W2JnXS5ncm91cF9tYW5hZ2VyLm1lbWJlcnNbZ3JvdXBdLm1lbWJlcnNbcGVyc29uXS5nZXRUYXgoKTtcclxuXHRcdFx0ICB9XHJcblx0XHQgIH1cclxuXHQgIH1cclxuXHQgIHRoaXMuYWRkTW9uZXkodGF4ZXMpO1xyXG5cdCAgdGhpcy5nYW1lLnRpbWUuZXZlbnRzLmFkZChQaGFzZXIuVGltZXIuU0VDT05EICogdGhpcy50YXhUaW1lLCB0aGlzLmNvbGxlY3RUYXgsIHRoaXMpO1xyXG4gIH0sXHJcbiAgc2V0SGFwcGluZXNzOiBmdW5jdGlvbiAoYW10KSB7XHJcblx0ICB0aGlzLmN1ckhhcHBpbmVzcyA9IGFtdDtcclxuXHQgIGlmICghdGhpcy5oYXBwaW5lc3NJbmNyZW1lbnRpbmcpIHtcclxuXHRcdCAgdGhpcy5nYW1lLnRpbWUuZXZlbnRzLmFkZChQaGFzZXIuVGltZXIuU0VDT05EICogdGhpcy5oYXBwaW5lc3NVcGRhdGVEZWxheSwgdGhpcy5pbmNyZW1lbnRIYXBwaW5lc3MsIHRoaXMpO1xyXG5cdFx0ICB0aGlzLmhhcHBpbmVzc0luY3JlbWVudGluZyA9IHRydWU7XHJcblx0ICB9XHJcbiAgfSxcclxuICBpbmNyZW1lbnRIYXBwaW5lc3M6IGZ1bmN0aW9uICgpIHtcclxuXHRpZiAodGhpcy5oYXBwaW5lc3NWYWwgPT09IHRoaXMuY3VySGFwcGluZXNzKSB7XHJcblx0XHR0aGlzLmhhcHBpbmVzc0luY3JlbWVudGluZyA9IGZhbHNlO1xyXG5cdFx0cmV0dXJuO1xyXG5cdH1cclxuXHRpZiAodGhpcy5jdXJIYXBwaW5lc3MgPiB0aGlzLmhhcHBpbmVzc1ZhbCkge1xyXG5cdFx0dGhpcy5iYXIuYWRkVmFsdWUoMSk7XHJcblx0XHR0aGlzLmhhcHBpbmVzc1ZhbCArPSAxO1xyXG5cdH0gZWxzZSBpZiAodGhpcy5jdXJIYXBwaW5lc3MgPCB0aGlzLmhhcHBpbmVzc1ZhbCkge1xyXG5cdFx0dGhpcy5iYXIuYWRkVmFsdWUoLTEpO1xyXG5cdFx0dGhpcy5oYXBwaW5lc3NWYWwgLT0gMTtcclxuXHR9XHJcblx0dGhpcy5nYW1lLnRpbWUuZXZlbnRzLmFkZChQaGFzZXIuVGltZXIuU0VDT05EICogdGhpcy5oYXBwaW5lc3NVcGRhdGVEZWxheSwgdGhpcy5pbmNyZW1lbnRIYXBwaW5lc3MsIHRoaXMpO1xyXG4gIH0sXHJcbiAgYWRkTW9uZXk6IGZ1bmN0aW9uIChhbXQpIHtcclxuXHQgIHRoaXMuY3VyTW9uZXkgKz0gYW10O1xyXG5cdCAgLy90aGlzLm1vbmV5LnRleHQgPSAnJCcgKyBuZXdNb25leTtcclxuXHQgIGlmICghdGhpcy5tb25leUluY3JlbWVudGluZykge1xyXG5cdFx0dGhpcy5nYW1lLnRpbWUuZXZlbnRzLmFkZChQaGFzZXIuVGltZXIuU0VDT05EICogdGhpcy5tb25leVVwZGF0ZURlbGF5LCB0aGlzLmluY3JlbWVudE1vbmV5LCB0aGlzKTtcclxuXHRcdHRoaXMubW9uZXlJbmNyZW1lbnRpbmcgPSB0cnVlO1xyXG5cdCAgfVxyXG4gIH0sXHJcbiAgaW5jcmVtZW50TW9uZXk6IGZ1bmN0aW9uICgpIHtcclxuXHRpZiAodGhpcy5tb25leVZhbCA9PT0gdGhpcy5jdXJNb25leSkge1xyXG5cdFx0dGhpcy5tb25leUluY3JlbWVudGluZyA9IGZhbHNlO1xyXG5cdFx0cmV0dXJuO1xyXG5cdH1cclxuXHRpZiAodGhpcy5jdXJNb25leSA+IHRoaXMubW9uZXlWYWwpIHtcclxuXHRcdHRoaXMubW9uZXlWYWwgKz0gNTtcclxuXHR9IGVsc2UgaWYgKHRoaXMuY3VyTW9uZXkgPCB0aGlzLm1vbmV5VmFsKSB7XHJcblx0XHR0aGlzLm1vbmV5VmFsIC09IDU7XHJcblx0fVxyXG5cdHRoaXMubW9uZXkudGV4dCA9ICckJyArIHRoaXMubW9uZXlWYWw7XHJcblx0dGhpcy5nYW1lLnRpbWUuZXZlbnRzLmFkZChQaGFzZXIuVGltZXIuU0VDT05EICogdGhpcy5tb25leVVwZGF0ZURlbGF5LCB0aGlzLmluY3JlbWVudE1vbmV5LCB0aGlzKTtcclxuICB9LFxyXG4gIGRlY1RheExvdzogZnVuY3Rpb24gKCkge1xyXG4gICAgaWYgKHRoaXMudGF4TW9kLmxvdyA9PSAxKSB7XHJcbiAgICAgIHRoaXMudGF4TW9kLmxvdyA9IC41O1xyXG4gICAgICB0aGlzLnRleHRUYXhMb3cudGV4dCA9ICckJztcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHRoaXMudGF4TW9kLmxvdyA9PSAxLjUpIHtcclxuICAgICAgdGhpcy50YXhNb2QubG93ID0gMTtcclxuICAgICAgdGhpcy50ZXh0VGF4TG93LnRleHQgPSAnJCQnO1xyXG4gICAgfVxyXG4gIH0sXHJcbiAgaW5jVGF4TG93OiBmdW5jdGlvbiAoKSB7XHJcbiAgICBpZiAodGhpcy50YXhNb2QubG93ID09IC41KSB7XHJcbiAgICAgIHRoaXMudGF4TW9kLmxvdyA9IDE7XHJcbiAgICAgIHRoaXMudGV4dFRheExvdy50ZXh0ID0gJyQkJztcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHRoaXMudGF4TW9kLmxvdyA9PSAxKSB7XHJcbiAgICAgIHRoaXMudGF4TW9kLmxvdyA9IDEuNTtcclxuICAgICAgdGhpcy50ZXh0VGF4TG93LnRleHQgPSAnJCQkJztcclxuICAgIH1cclxuICB9LFxyXG4gIGRlY1RheE1pZDogZnVuY3Rpb24gKCkge1xyXG4gICAgaWYgKHRoaXMudGF4TW9kLm1pZCA9PSAxKSB7XHJcbiAgICAgIHRoaXMudGF4TW9kLm1pZCA9IC41O1xyXG4gICAgICB0aGlzLnRleHRUYXhNaWQudGV4dCA9ICckJztcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHRoaXMudGF4TW9kLm1pZCA9PSAxLjUpIHtcclxuICAgICAgdGhpcy50YXhNb2QubWlkID0gMTtcclxuICAgICAgdGhpcy50ZXh0VGF4TWlkLnRleHQgPSAnJCQnO1xyXG4gICAgfVxyXG4gIH0sXHJcbiAgaW5jVGF4TWlkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICBpZiAodGhpcy50YXhNb2QubWlkID09IC41KSB7XHJcbiAgICAgIHRoaXMudGF4TW9kLm1pZCA9IDE7XHJcbiAgICAgIHRoaXMudGV4dFRheE1pZC50ZXh0ID0gJyQkJztcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHRoaXMudGF4TW9kLm1pZCA9PSAxKSB7XHJcbiAgICAgIHRoaXMudGF4TW9kLm1pZCA9IDEuNTtcclxuICAgICAgdGhpcy50ZXh0VGF4TWlkLnRleHQgPSAnJCQkJztcclxuICAgIH1cclxuICB9LFxyXG4gIGRlY1RheEhpZ2g6IGZ1bmN0aW9uICgpIHtcclxuICAgIGlmICh0aGlzLnRheE1vZC5oaWdoID09IDEpIHtcclxuICAgICAgdGhpcy50YXhNb2QuaGlnaCA9IC41O1xyXG4gICAgICB0aGlzLnRleHRUYXhIaWdoLnRleHQgPSAnJCc7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICh0aGlzLnRheE1vZC5oaWdoID09IDEuNSkge1xyXG4gICAgICB0aGlzLnRheE1vZC5oaWdoID0gMTtcclxuICAgICAgdGhpcy50ZXh0VGF4SGlnaC50ZXh0ID0gJyQkJztcclxuICAgIH1cclxuICB9LFxyXG4gIGluY1RheEhpZ2g6IGZ1bmN0aW9uICgpIHtcclxuICAgIGlmICh0aGlzLnRheE1vZC5oaWdoID09IC41KSB7XHJcbiAgICAgIHRoaXMudGF4TW9kLmhpZ2ggPSAxO1xyXG4gICAgICB0aGlzLnRleHRUYXhIaWdoLnRleHQgPSAnJCQnO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodGhpcy50YXhNb2QuaGlnaCA9PSAxKSB7XHJcbiAgICAgIHRoaXMudGF4TW9kLmhpZ2ggPSAxLjU7XHJcbiAgICAgIHRoaXMudGV4dFRheEhpZ2gudGV4dCA9ICckJCQnO1xyXG4gICAgfVxyXG4gIH1cclxufTtcclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbiIsInZhciBHYW1lX092ZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgdGhpcy50ZXh0ID0gbnVsbDtcclxuICB0aGlzLnRleHRTbWFsbCA9IG51bGw7XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IEdhbWVfT3ZlcjtcclxuXHJcbkdhbWVfT3Zlci5wcm90b3R5cGUgPSB7XHJcblxyXG4gIGNyZWF0ZTogZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHggPSB0aGlzLmdhbWUud2lkdGggLyAyO1xyXG4gICAgdmFyIHkgPSB0aGlzLmdhbWUuaGVpZ2h0IC8gMjtcclxuXHJcbiAgICB2YXIgc3R5bGUgPSB7IGZvbnQ6IFwiNjVweCBBcmlhbFwiLCBmaWxsOiBcIiNmZmZmZmZcIiwgYWxpZ246IFwiY2VudGVyXCIgfTtcclxuICAgIHZhciBzbWFsbFN0eWxlID0geyBmb250OiAnMzVweCBcIkx1Y2lkYSBDb25zb2xlXCInLCBmaWxsOiBcIiNmZmZmZmZcIiwgYWxpZ246IFwiY2VudGVyXCIgfTtcclxuXHJcbiAgICB0aGlzLnRleHQgPSB0aGlzLmFkZC50ZXh0KHggLSAzMDAsIHkgLSAyMDAsIFwiR2FtZSBPdmVyXCIsIHN0eWxlKTtcclxuICAgIHRoaXMudGV4dFNtYWxsID0gdGhpcy5hZGQudGV4dCh4IC0gMzAwLCB5IC0gMTAwLCBcInlvdXIgaGFwcGluZXNzIHdlbnQgdW5kZXIgNTAlXFxuXCIgKyBcImNsaWNrIHRvIGNvbnRpbnVlXCIsIHNtYWxsU3R5bGUpO1xyXG4gICAgdGhpcy5nYW1lLnRpbWUuZXZlbnRzLmFkZChQaGFzZXIuVGltZXIuU0VDT05EICogMywgdGhpcy5kb1RoaW5nLCB0aGlzKTtcclxuICB9LFxyXG5cclxuICB1cGRhdGU6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgfSxcclxuXHJcbiAgZG9UaGluZzogZnVuY3Rpb24oKSB7XHJcbiAgICB0aGlzLmlucHV0Lm9uRG93bi5hZGQodGhpcy5vbkRvd24sIHRoaXMpO1xyXG4gIH0sXHJcblxyXG4gIG9uRG93bjogZnVuY3Rpb24gKCkge1xyXG4gICAgdGhpcy5nYW1lLnN0YXRlLnN0YXJ0KHBsYXllclN0YXRlLmN1cnJlbnRMZXZlbCk7XHJcbiAgfVxyXG59OyIsInZhciBNZW51ID0gZnVuY3Rpb24gKCkge1xyXG4gIHRoaXMudGV4dCA9IG51bGw7XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IE1lbnU7XHJcblxyXG5NZW51LnByb3RvdHlwZSA9IHtcclxuXHJcbiAgY3JlYXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgeCA9IHRoaXMuZ2FtZS53aWR0aCAvIDI7XHJcbiAgICB2YXIgeSA9IHRoaXMuZ2FtZS5oZWlnaHQgLyAyO1xyXG5cclxuICAgIHZhciBzdHlsZSA9IHsgZm9udDogXCI2NXB4IEFyaWFsXCIsIGZpbGw6IFwiI2ZmZmZmZlwiLCBhbGlnbjogXCJjZW50ZXJcIiB9O1xyXG5cclxuICAgIHRoaXMudGV4dCA9IHRoaXMuYWRkLnRleHQoeCAtIDMwMCwgeSAtIDIwMCwgXCJQcmVzcyB0byBTdGFydFwiLCBzdHlsZSk7XHJcblxyXG4gICAgdGhpcy5pbnB1dC5vbkRvd24uYWRkKHRoaXMub25Eb3duLCB0aGlzKTtcclxuICB9LFxyXG5cclxuICB1cGRhdGU6IGZ1bmN0aW9uICgpIHtcclxuICB9LFxyXG5cclxuICBvbkRvd246IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMuZ2FtZS5zdGF0ZS5zdGFydChwbGF5ZXJTdGF0ZS5jdXJyZW50TGV2ZWwpO1xyXG4gIH1cclxufTtcclxuIiwidmFyIFByZWxvYWRlciA9IGZ1bmN0aW9uIChnYW1lKSB7XHJcbiAgdGhpcy5hc3NldCA9IG51bGw7XHJcbiAgdGhpcy5yZWFkeSA9IGZhbHNlO1xyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBQcmVsb2FkZXI7XHJcblxyXG5QcmVsb2FkZXIucHJvdG90eXBlID0ge1xyXG5cclxuICBwcmVsb2FkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLmFzc2V0ID0gdGhpcy5hZGQuc3ByaXRlKDMyMCwgMjQwLCAncHJlbG9hZGVyJyk7XHJcbiAgICB0aGlzLmFzc2V0LmFuY2hvci5zZXRUbygwLjUsIDAuNSk7XHJcblxyXG4gICAgdGhpcy5sb2FkLm9uTG9hZENvbXBsZXRlLmFkZE9uY2UodGhpcy5vbkxvYWRDb21wbGV0ZSwgdGhpcyk7XHJcbiAgICB0aGlzLmxvYWQuc2V0UHJlbG9hZFNwcml0ZSh0aGlzLmFzc2V0KTtcclxuICAgIHRoaXMubG9hZC5pbWFnZSgndGVzdHNwcml0ZScsICdhc3NldHMvdGVzdC5wbmcnKTtcclxuICAgIHRoaXMubG9hZC5pbWFnZSgnbWVudV9iZycsICdhc3NldHMvbWVudV9iZy5wbmcnKTtcclxuICAgIHRoaXMubG9hZC5pbWFnZSgnYmFja2dyb3VuZCcsICdhc3NldHMvc2VjdG9yQkcucG5nJylcclxuICAgIHRoaXMubG9hZC5pbWFnZSgncGVyc29uJywgJ2Fzc2V0cy9wZXJzb24ucG5nJyk7XHJcbiAgICB0aGlzLmxvYWQuaW1hZ2UoJ3NlbGVjdGlvbicsICdhc3NldHMvc2VsZWN0aW9uLnBuZycpO1xyXG4gICAgdGhpcy5sb2FkLmltYWdlKCdib29rJywgJ2Fzc2V0cy9ib29rLnBuZycpO1xyXG4gICAgdGhpcy5sb2FkLmltYWdlKCd5b3VuZycsICdhc3NldHMveW91bmcucG5nJyk7XHJcbiAgICB0aGlzLmxvYWQuaW1hZ2UoJ2FkdWx0JywgJ2Fzc2V0cy9hZHVsdC5wbmcnKTtcclxuICAgIHRoaXMubG9hZC5pbWFnZSgnb2xkJywgJ2Fzc2V0cy9vbGQucG5nJyk7XHJcbiAgICB0aGlzLmxvYWQuaW1hZ2UoJ3RheFJlZHVjZScsICdhc3NldHMvdGF4UmVkdWNlLnBuZycpO1xyXG4gICAgdGhpcy5sb2FkLmltYWdlKCd0YXhBZGQnLCAnYXNzZXRzL3RheEFkZC5wbmcnKTtcclxuICAgIHRoaXMubG9hZC5pbWFnZSgnaGFwcHlmYWNlJywgJ2Fzc2V0cy9oYXBweWZhY2VfYmV0dGVyLnBuZycpO1xyXG4gICAgdGhpcy5sb2FkLmltYWdlKCdib3JkZXJlZCcsICdhc3NldHMvYm9yZGVyZWQucG5nJyk7XHJcbiAgICB0aGlzLmxvYWQuaW1hZ2UoJ2xvd19kb2xsYXInLCAnYXNzZXRzL2xvd19kb2xsYXIucG5nJyk7XHJcbiAgICB0aGlzLmxvYWQuaW1hZ2UoJ21lZF9kb2xsYXInLCAnYXNzZXRzL21lZF9kb2xsYXIucG5nJyk7XHJcbiAgICB0aGlzLmxvYWQuaW1hZ2UoJ2hpZ2hfZG9sbGFyJywgJ2Fzc2V0cy9oaWdoX2RvbGxhci5wbmcnKTtcclxuICAgIHRoaXMubG9hZC5zY3JpcHQoJ3dlYmZvbnQnLCAnLy9hamF4Lmdvb2dsZWFwaXMuY29tL2FqYXgvbGlicy93ZWJmb250LzEuNC43L3dlYmZvbnQuanMnKTtcclxuICB9LFxyXG5cclxuICBjcmVhdGU6IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMuYXNzZXQuY3JvcEVuYWJsZWQgPSBmYWxzZTtcclxuICB9LFxyXG5cclxuICB1cGRhdGU6IGZ1bmN0aW9uICgpIHtcclxuICAgIGlmICghIXRoaXMucmVhZHkpIHtcclxuICAgICAgdGhpcy5nYW1lLnN0YXRlLnN0YXJ0KCdHYW1lJyk7XHJcbiAgICB9XHJcbiAgfSxcclxuXHJcbiAgb25Mb2FkQ29tcGxldGU6IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMucmVhZHkgPSB0cnVlO1xyXG4gIH1cclxufTtcclxuIiwidmFyIFNwbGFzaCA9IGZ1bmN0aW9uICgpIHtcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gU3BsYXNoO1xyXG5cclxuU3BsYXNoLnByb3RvdHlwZSA9IHtcclxuICBjcmVhdGU6IGZ1bmN0aW9uICgpIHtcclxuICB9XHJcbn07IiwidmFyIFV0aWxzID0ge1xyXG4gICAgY29udGFpbnNPYmplY3Q6IGZ1bmN0aW9uKG9iaiwgbGlzdCkge1xyXG4gICAgICAgIHZhciBpO1xyXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChsaXN0W2ldID09PSBvYmopIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9LFxyXG5cdGh5cG90ZW51c2U6IGZ1bmN0aW9uKGEsIGIpIHtcclxuXHRcdHJldHVybiBNYXRoLnNxcnQoTWF0aC5wb3coYSwgMikgKyBNYXRoLnBvdyhiLCAyKSk7XHJcblx0fSxcclxuXHRyYXRpbzogZnVuY3Rpb24oYSwgYiwgYykge1xyXG5cdFx0aWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHtcclxuXHRcdFx0cmV0dXJuIFthIC8gYV07XHJcblx0XHR9XHJcblx0XHRlbHNlIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAyKSB7XHJcblx0XHRcdHJldHVybiBbYSAvIChhICsgYiksIGIgLyAoYSArIGIpXTtcclxuXHRcdH1cclxuXHRcdGVsc2UgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDMpIHtcclxuXHRcdFx0cmV0dXJuIFthIC8gKGEgKyBiICsgYyksIGIgLyAoYSArIGIgKyBjKSwgYyAvIChhICsgYiArIGMpXTtcclxuXHRcdH1cclxuXHRcdGVsc2Uge1xyXG5cdFx0XHRyZXR1cm4gW107XHJcblx0XHR9XHJcblx0fVxyXG59O1xyXG5cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gVXRpbHM7Il19
