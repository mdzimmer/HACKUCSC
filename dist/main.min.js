(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({"C:\\Users\\Matthew D Zimmerman\\Work\\Hackathon\\first_build\\src\\js\\entities\\group.js":[function(require,module,exports){
//controls flocking for a group of person objects
var util = require('../utils');

var Group = function (game, centerX, centerY) {
	this.game = game;
	this.members = [];
	this.minDist = 20;
	//this.noise = 10;
	this.center = {x : centerX, y : centerY};
	this.clickDist = 50;
	this.selected = false;
	this.selection = this.game.add.sprite(this.center.x, this.center.y, 'selection');
	this.selection.anchor.setTo(0.5, 0.5);
	this.selection.width = 100;
	this.selection.height = 100;
	this.selection.visible = false;
}
Group.prototype.constructor = Group;
Group.prototype.update = function() {
	//console.log('update');
	//calculate center point
	/*
	var centerPoint = {x:0, y:0};
	for (var member in this.members) {
		member = this.members[member];
		centerPoint.x += member.x;
		centerPoint.y += member.y;
	}
	centerPoint.x /= this.members.length;
	centerPoint.y /= this.members.length;
	*/
	// aim towards center then push
	for (var member in this.members) {
		member = this.members[member];
		//if (member.id == '1') { console.log('1', member.velocity); };
		var velocity = {x:0, y:0};
		var diff = {x:0, y:0};
		/*
		diff.x = centerPoint.x - member.x;
		diff.y = centerPoint.y - member.y;
		*/
		diff.x = this.center.x - member.x;
		diff.y = this.center.y - member.y;
		velocity.x += diff.x;
		velocity.y += diff.y;
		//if (member.id == '1') { console.log('2', member.velocity); };
		for (var other in this.members) {
			other = this.members[other];
			//ignore self
			if (other === member) {
				continue;
			}
			var oDiff = {x:0, y:0};
			oDiff.x = other.x - member.x;
			oDiff.y = other.y - member.y;
			var totalDist = util.hypotenuse(oDiff.x, oDiff.y);
			if (totalDist <= this.minDist) {
				//if (member.id == '1') { console.log(oDiff, totalDist); };
				velocity.x = -1 * oDiff.x;
				velocity.y = -1 * oDiff.y;
				continue;
				//if (member.id == '1') { console.log('3', member.velocity); };
			}
		}
		//add noise
		/*
		velocity.x += Math.random() * this.noise - this.noise / 2;
		velocity.y += Math.random() * this.noise - this.noise / 2;
		*/
		//set new velocity
		//if (member.id == '1') { console.log(member.velocity); };
		member.velocity = velocity;
		//console.log(velocity);
	}
};
Group.prototype.addMember = function(member) {
	this.members.push(member);
};
Group.prototype.click = function(member) {
	var mouseX = this.game.input.x;
	var mouseY = this.game.input.y;
	var diffX = mouseX - this.center.x;
	var diffY = mouseY - this.center.y;
	var totalDiff = util.hypotenuse(diffX, diffY);
	//console.log(totalDiff);
	if (totalDiff <= this.clickDist) {
		//this.setSelected(true);
		if (this.selected) {
			this.setSelected(false);
		} else {
			this.setSelected(true);
		}
	} else {
		//this.setSelected(false);
		if (this.selected) {
			this.changeCenter({x : mouseX, y : mouseY});
			this.setSelected(false);
		} else {
			
		}
	}
};
Group.prototype.setSelected = function(newSelected) {
	this.selected = newSelected;
	this.selection.visible = newSelected;
};
Group.prototype.changeCenter = function(newCenter) {
	this.selection.x = newCenter.x;
	this.selection.y = newCenter.y;
	this.center = newCenter;
};
/*
Group.prototype.tryMove = function() {
	if (!this.selected) {
		return;
	}
	var newCenter = {x : this.game.input.x, y : this.game.input.y};
	this.changeCenter(newCenter);
};
*/

module.exports = Group;













},{"../utils":"C:\\Users\\Matthew D Zimmerman\\Work\\Hackathon\\first_build\\src\\js\\utils.js"}],"C:\\Users\\Matthew D Zimmerman\\Work\\Hackathon\\first_build\\src\\js\\entities\\groupManager.js":[function(require,module,exports){
var GroupManager = function (game) {
	this.game = game;
	this.members = [];
	/*
	Phaser.Sprite.call(this, game, x, y, 'person');
	this.velocity = {x:0, y:0};
	this.width = 10;
	this.height = 10;
	this.speed = .05;
	this.id = id;
	*/
};
GroupManager.prototype.constructor = GroupManager;
GroupManager.prototype.update = function() {
	for (var member in members) {
		member = members[member];
		
	}
	/*
	this.x += this.velocity.x * this.speed;
	this.y += this.velocity.y * this.speed;
	//console.log(this.velocity);
	*/
};
GroupManager.prototype.addMember = function(member) {
	this.members.push(member);
};

module.exports = GroupManager;
},{}],"C:\\Users\\Matthew D Zimmerman\\Work\\Hackathon\\first_build\\src\\js\\entities\\person.js":[function(require,module,exports){
var Person = function (game, x, y, id) {
	Phaser.Sprite.call(this, game, x, y, 'person');
	this.velocity = {x:0, y:0};
	this.width = 10;
	this.height = 10;
	this.speed = .05;
	this.id = id;
};
Person.prototype = Object.create(Phaser.Sprite.prototype);
Person.prototype.constructor = Person;
Person.prototype.update = function() {
	this.x += this.velocity.x * this.speed;
	this.y += this.velocity.y * this.speed;
	//console.log(this.velocity);
};

module.exports = Person;
},{}],"C:\\Users\\Matthew D Zimmerman\\Work\\Hackathon\\first_build\\src\\js\\entities\\player.js":[function(require,module,exports){
var Player = function (game, x, y) {
    Phaser.Sprite.call(this, game, x, y, 'testsprite');
    game.add.existing(this);
	this.speed = 0.1;
}

Player.prototype = Object.create(Phaser.Sprite.prototype);
Player.prototype.constructor = Player;

/**
 * Automatically called by World.update
 */
Player.prototype.update = function() {
	//this.x += this.velocity;
};

module.exports = Player;

},{}],"C:\\Users\\Matthew D Zimmerman\\Work\\Hackathon\\first_build\\src\\js\\main.js":[function(require,module,exports){
'use strict';

var game = new Phaser.Game(800, 600, Phaser.AUTO, '-game');

window.Utils = require('./utils');
window.playerState = {
    currentLevel: 'Game'
}

game.state.add('Boot', require('./states/boot'));
game.state.add('Splash', require('./states/splash'));
game.state.add('Preloader', require('./states/preloader'));
game.state.add('Menu', require('./states/menu'));
game.state.add('Game', require('./states/game'));

game.state.start('Boot');

//game.stage.backgroundColor = "#ffffff";

},{"./states/boot":"C:\\Users\\Matthew D Zimmerman\\Work\\Hackathon\\first_build\\src\\js\\states\\boot.js","./states/game":"C:\\Users\\Matthew D Zimmerman\\Work\\Hackathon\\first_build\\src\\js\\states\\game.js","./states/menu":"C:\\Users\\Matthew D Zimmerman\\Work\\Hackathon\\first_build\\src\\js\\states\\menu.js","./states/preloader":"C:\\Users\\Matthew D Zimmerman\\Work\\Hackathon\\first_build\\src\\js\\states\\preloader.js","./states/splash":"C:\\Users\\Matthew D Zimmerman\\Work\\Hackathon\\first_build\\src\\js\\states\\splash.js","./utils":"C:\\Users\\Matthew D Zimmerman\\Work\\Hackathon\\first_build\\src\\js\\utils.js"}],"C:\\Users\\Matthew D Zimmerman\\Work\\Hackathon\\first_build\\src\\js\\states\\boot.js":[function(require,module,exports){
var Boot = function () {};

module.exports = Boot;

Boot.prototype = {

  preload: function () {
    this.load.image('preloader', 'assets/preloader.gif');
  },

  create: function () {
    this.game.input.maxPointers = 1;

    if (this.game.device.desktop) {
      this.game.stage.scale.pageAlignHorizontally = true;
    } else {
      this.game.scale.scaleMode = Phaser.ScaleManager.SHOW_ALL;
      this.game.scale.minWidth =  480;
      this.game.scale.minHeight = 260;
      this.game.scale.maxWidth = 640;
      this.game.scale.maxHeight = 480;
      this.game.scale.forceLandscape = true;
      this.game.scale.pageAlignHorizontally = true;
      this.game.scale.setScreenSize(true);
    }

    this.game.state.start('Preloader');
  }
};

},{}],"C:\\Users\\Matthew D Zimmerman\\Work\\Hackathon\\first_build\\src\\js\\states\\game.js":[function(require,module,exports){
var Player = require('../entities/player');
var Person = require('../entities/person');
var Group = require('../entities/group');
var GroupManager = require('../entities/groupManager');

var Game = function () {
  this.testentity = null;
  this.flocks = [];
};

module.exports = Game;

Game.prototype = {

  create: function () {
	this.game.stage.backgroundColor = "#ffffff";
	  
    var x = (this.game.width / 2) - 100;
    var y = (this.game.height / 2) - 50;
	
	/*
    this.testentity = new Player(this.game, x, y);
    this.testentity.anchor.setTo(0.5, 0.5);
	*/
	
    this.input.onDown.add(this.onInputDown, this);
	
	var testFlock = new Group(this.game, this.game.width / 2 + 100, this.game.height / 2 + 100);
	this.flocks.push(testFlock);
	
	for (var i = 0; i < 10; i++) {
		var testPerson = new Person(this.game, this.game.width/2 + i * 15, this.game.height/2 + i * 15, i);
		this.game.add.existing(testPerson);
		testFlock.addMember(testPerson);
	}
	var groupManager = new GroupManager(this.game);
	groupManager.addMember(testFlock);
  },

  update: function () {
	/*
    var x, y, cx, cy, dx, dy, angle, scale;

    x = this.input.position.x;
    y = this.input.position.y;
    cx = this.world.centerX;
    cy = this.world.centerY;

    angle = Math.atan2(y - cy, x - cx) * (180 / Math.PI);
    this.testentity.angle = angle;

    dx = x - cx;
    dy = y - cy;
    scale = Math.sqrt(dx * dx + dy * dy) / 100;

    this.testentity.scale.x = scale * 0.6;
    this.testentity.scale.y = scale * 0.6;
	*/
	
	this.flocks[0].update();
  },

  onInputDown: function () {
    //this.game.state.start('Menu');
	//console.log(this.game.input.x, this.game.input.y);
	if (this.game.input.activePointer.leftButton.isDown) {
		this.flocks[0].click();
	}
  }
};

},{"../entities/group":"C:\\Users\\Matthew D Zimmerman\\Work\\Hackathon\\first_build\\src\\js\\entities\\group.js","../entities/groupManager":"C:\\Users\\Matthew D Zimmerman\\Work\\Hackathon\\first_build\\src\\js\\entities\\groupManager.js","../entities/person":"C:\\Users\\Matthew D Zimmerman\\Work\\Hackathon\\first_build\\src\\js\\entities\\person.js","../entities/player":"C:\\Users\\Matthew D Zimmerman\\Work\\Hackathon\\first_build\\src\\js\\entities\\player.js"}],"C:\\Users\\Matthew D Zimmerman\\Work\\Hackathon\\first_build\\src\\js\\states\\menu.js":[function(require,module,exports){
var Menu = function () {
  this.text = null;
};

module.exports = Menu;

Menu.prototype = {

  create: function () {
    var x = this.game.width / 2;
    var y = this.game.height / 2;

    var style = { font: "65px Arial", fill: "#ffffff", align: "center" };

    this.text = this.add.text(x - 300, y - 200, "Press to Start", style);

    this.input.onDown.add(this.onDown, this);
  },

  update: function () {
  },

  onDown: function () {
    this.game.state.start(playerState.currentLevel);
  }
};

},{}],"C:\\Users\\Matthew D Zimmerman\\Work\\Hackathon\\first_build\\src\\js\\states\\preloader.js":[function(require,module,exports){
var Preloader = function (game) {
  this.asset = null;
  this.ready = false;
};

module.exports = Preloader;

Preloader.prototype = {

  preload: function () {
    this.asset = this.add.sprite(320, 240, 'preloader');
    this.asset.anchor.setTo(0.5, 0.5);

    this.load.onLoadComplete.addOnce(this.onLoadComplete, this);
    this.load.setPreloadSprite(this.asset);
    this.load.image('testsprite', 'assets/test.png');
	this.load.image('person', 'assets/person.png');
	this.load.image('selection', 'assets/selection.png');
  },

  create: function () {
    this.asset.cropEnabled = false;
  },

  update: function () {
    if (!!this.ready) {
      this.game.state.start('Game');
    }
  },

  onLoadComplete: function () {
    this.ready = true;
  }
};

},{}],"C:\\Users\\Matthew D Zimmerman\\Work\\Hackathon\\first_build\\src\\js\\states\\splash.js":[function(require,module,exports){
var Splash = function () {
};

module.exports = Splash;

Splash.prototype = {
  create: function () {
  }
};
},{}],"C:\\Users\\Matthew D Zimmerman\\Work\\Hackathon\\first_build\\src\\js\\utils.js":[function(require,module,exports){
var Utils = {
    containsObject: function(obj, list) {
        var i;
        for (i = 0; i < list.length; i++) {
            if (list[i] === obj) {
                return true;
            }
        }

        return false;
    },
	hypotenuse: function(a, b) {
		return Math.sqrt(Math.pow(a, 2) + Math.pow(b, 2));
	}
};

module.exports = Utils;
},{}]},{},["C:\\Users\\Matthew D Zimmerman\\Work\\Hackathon\\first_build\\src\\js\\main.js"])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvZW50aXRpZXMvZ3JvdXAuanMiLCJzcmMvanMvZW50aXRpZXMvZ3JvdXBNYW5hZ2VyLmpzIiwic3JjL2pzL2VudGl0aWVzL3BlcnNvbi5qcyIsInNyYy9qcy9lbnRpdGllcy9wbGF5ZXIuanMiLCJzcmMvanMvbWFpbi5qcyIsInNyYy9qcy9zdGF0ZXMvYm9vdC5qcyIsInNyYy9qcy9zdGF0ZXMvZ2FtZS5qcyIsInNyYy9qcy9zdGF0ZXMvbWVudS5qcyIsInNyYy9qcy9zdGF0ZXMvcHJlbG9hZGVyLmpzIiwic3JjL2pzL3N0YXRlcy9zcGxhc2guanMiLCJzcmMvanMvdXRpbHMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdElBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDNUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM3QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN0RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCIvL2NvbnRyb2xzIGZsb2NraW5nIGZvciBhIGdyb3VwIG9mIHBlcnNvbiBvYmplY3RzXHJcbnZhciB1dGlsID0gcmVxdWlyZSgnLi4vdXRpbHMnKTtcclxuXHJcbnZhciBHcm91cCA9IGZ1bmN0aW9uIChnYW1lLCBjZW50ZXJYLCBjZW50ZXJZKSB7XHJcblx0dGhpcy5nYW1lID0gZ2FtZTtcclxuXHR0aGlzLm1lbWJlcnMgPSBbXTtcclxuXHR0aGlzLm1pbkRpc3QgPSAyMDtcclxuXHQvL3RoaXMubm9pc2UgPSAxMDtcclxuXHR0aGlzLmNlbnRlciA9IHt4IDogY2VudGVyWCwgeSA6IGNlbnRlcll9O1xyXG5cdHRoaXMuY2xpY2tEaXN0ID0gNTA7XHJcblx0dGhpcy5zZWxlY3RlZCA9IGZhbHNlO1xyXG5cdHRoaXMuc2VsZWN0aW9uID0gdGhpcy5nYW1lLmFkZC5zcHJpdGUodGhpcy5jZW50ZXIueCwgdGhpcy5jZW50ZXIueSwgJ3NlbGVjdGlvbicpO1xyXG5cdHRoaXMuc2VsZWN0aW9uLmFuY2hvci5zZXRUbygwLjUsIDAuNSk7XHJcblx0dGhpcy5zZWxlY3Rpb24ud2lkdGggPSAxMDA7XHJcblx0dGhpcy5zZWxlY3Rpb24uaGVpZ2h0ID0gMTAwO1xyXG5cdHRoaXMuc2VsZWN0aW9uLnZpc2libGUgPSBmYWxzZTtcclxufVxyXG5Hcm91cC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBHcm91cDtcclxuR3JvdXAucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uKCkge1xyXG5cdC8vY29uc29sZS5sb2coJ3VwZGF0ZScpO1xyXG5cdC8vY2FsY3VsYXRlIGNlbnRlciBwb2ludFxyXG5cdC8qXHJcblx0dmFyIGNlbnRlclBvaW50ID0ge3g6MCwgeTowfTtcclxuXHRmb3IgKHZhciBtZW1iZXIgaW4gdGhpcy5tZW1iZXJzKSB7XHJcblx0XHRtZW1iZXIgPSB0aGlzLm1lbWJlcnNbbWVtYmVyXTtcclxuXHRcdGNlbnRlclBvaW50LnggKz0gbWVtYmVyLng7XHJcblx0XHRjZW50ZXJQb2ludC55ICs9IG1lbWJlci55O1xyXG5cdH1cclxuXHRjZW50ZXJQb2ludC54IC89IHRoaXMubWVtYmVycy5sZW5ndGg7XHJcblx0Y2VudGVyUG9pbnQueSAvPSB0aGlzLm1lbWJlcnMubGVuZ3RoO1xyXG5cdCovXHJcblx0Ly8gYWltIHRvd2FyZHMgY2VudGVyIHRoZW4gcHVzaFxyXG5cdGZvciAodmFyIG1lbWJlciBpbiB0aGlzLm1lbWJlcnMpIHtcclxuXHRcdG1lbWJlciA9IHRoaXMubWVtYmVyc1ttZW1iZXJdO1xyXG5cdFx0Ly9pZiAobWVtYmVyLmlkID09ICcxJykgeyBjb25zb2xlLmxvZygnMScsIG1lbWJlci52ZWxvY2l0eSk7IH07XHJcblx0XHR2YXIgdmVsb2NpdHkgPSB7eDowLCB5OjB9O1xyXG5cdFx0dmFyIGRpZmYgPSB7eDowLCB5OjB9O1xyXG5cdFx0LypcclxuXHRcdGRpZmYueCA9IGNlbnRlclBvaW50LnggLSBtZW1iZXIueDtcclxuXHRcdGRpZmYueSA9IGNlbnRlclBvaW50LnkgLSBtZW1iZXIueTtcclxuXHRcdCovXHJcblx0XHRkaWZmLnggPSB0aGlzLmNlbnRlci54IC0gbWVtYmVyLng7XHJcblx0XHRkaWZmLnkgPSB0aGlzLmNlbnRlci55IC0gbWVtYmVyLnk7XHJcblx0XHR2ZWxvY2l0eS54ICs9IGRpZmYueDtcclxuXHRcdHZlbG9jaXR5LnkgKz0gZGlmZi55O1xyXG5cdFx0Ly9pZiAobWVtYmVyLmlkID09ICcxJykgeyBjb25zb2xlLmxvZygnMicsIG1lbWJlci52ZWxvY2l0eSk7IH07XHJcblx0XHRmb3IgKHZhciBvdGhlciBpbiB0aGlzLm1lbWJlcnMpIHtcclxuXHRcdFx0b3RoZXIgPSB0aGlzLm1lbWJlcnNbb3RoZXJdO1xyXG5cdFx0XHQvL2lnbm9yZSBzZWxmXHJcblx0XHRcdGlmIChvdGhlciA9PT0gbWVtYmVyKSB7XHJcblx0XHRcdFx0Y29udGludWU7XHJcblx0XHRcdH1cclxuXHRcdFx0dmFyIG9EaWZmID0ge3g6MCwgeTowfTtcclxuXHRcdFx0b0RpZmYueCA9IG90aGVyLnggLSBtZW1iZXIueDtcclxuXHRcdFx0b0RpZmYueSA9IG90aGVyLnkgLSBtZW1iZXIueTtcclxuXHRcdFx0dmFyIHRvdGFsRGlzdCA9IHV0aWwuaHlwb3RlbnVzZShvRGlmZi54LCBvRGlmZi55KTtcclxuXHRcdFx0aWYgKHRvdGFsRGlzdCA8PSB0aGlzLm1pbkRpc3QpIHtcclxuXHRcdFx0XHQvL2lmIChtZW1iZXIuaWQgPT0gJzEnKSB7IGNvbnNvbGUubG9nKG9EaWZmLCB0b3RhbERpc3QpOyB9O1xyXG5cdFx0XHRcdHZlbG9jaXR5LnggPSAtMSAqIG9EaWZmLng7XHJcblx0XHRcdFx0dmVsb2NpdHkueSA9IC0xICogb0RpZmYueTtcclxuXHRcdFx0XHRjb250aW51ZTtcclxuXHRcdFx0XHQvL2lmIChtZW1iZXIuaWQgPT0gJzEnKSB7IGNvbnNvbGUubG9nKCczJywgbWVtYmVyLnZlbG9jaXR5KTsgfTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0Ly9hZGQgbm9pc2VcclxuXHRcdC8qXHJcblx0XHR2ZWxvY2l0eS54ICs9IE1hdGgucmFuZG9tKCkgKiB0aGlzLm5vaXNlIC0gdGhpcy5ub2lzZSAvIDI7XHJcblx0XHR2ZWxvY2l0eS55ICs9IE1hdGgucmFuZG9tKCkgKiB0aGlzLm5vaXNlIC0gdGhpcy5ub2lzZSAvIDI7XHJcblx0XHQqL1xyXG5cdFx0Ly9zZXQgbmV3IHZlbG9jaXR5XHJcblx0XHQvL2lmIChtZW1iZXIuaWQgPT0gJzEnKSB7IGNvbnNvbGUubG9nKG1lbWJlci52ZWxvY2l0eSk7IH07XHJcblx0XHRtZW1iZXIudmVsb2NpdHkgPSB2ZWxvY2l0eTtcclxuXHRcdC8vY29uc29sZS5sb2codmVsb2NpdHkpO1xyXG5cdH1cclxufTtcclxuR3JvdXAucHJvdG90eXBlLmFkZE1lbWJlciA9IGZ1bmN0aW9uKG1lbWJlcikge1xyXG5cdHRoaXMubWVtYmVycy5wdXNoKG1lbWJlcik7XHJcbn07XHJcbkdyb3VwLnByb3RvdHlwZS5jbGljayA9IGZ1bmN0aW9uKG1lbWJlcikge1xyXG5cdHZhciBtb3VzZVggPSB0aGlzLmdhbWUuaW5wdXQueDtcclxuXHR2YXIgbW91c2VZID0gdGhpcy5nYW1lLmlucHV0Lnk7XHJcblx0dmFyIGRpZmZYID0gbW91c2VYIC0gdGhpcy5jZW50ZXIueDtcclxuXHR2YXIgZGlmZlkgPSBtb3VzZVkgLSB0aGlzLmNlbnRlci55O1xyXG5cdHZhciB0b3RhbERpZmYgPSB1dGlsLmh5cG90ZW51c2UoZGlmZlgsIGRpZmZZKTtcclxuXHQvL2NvbnNvbGUubG9nKHRvdGFsRGlmZik7XHJcblx0aWYgKHRvdGFsRGlmZiA8PSB0aGlzLmNsaWNrRGlzdCkge1xyXG5cdFx0Ly90aGlzLnNldFNlbGVjdGVkKHRydWUpO1xyXG5cdFx0aWYgKHRoaXMuc2VsZWN0ZWQpIHtcclxuXHRcdFx0dGhpcy5zZXRTZWxlY3RlZChmYWxzZSk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLnNldFNlbGVjdGVkKHRydWUpO1xyXG5cdFx0fVxyXG5cdH0gZWxzZSB7XHJcblx0XHQvL3RoaXMuc2V0U2VsZWN0ZWQoZmFsc2UpO1xyXG5cdFx0aWYgKHRoaXMuc2VsZWN0ZWQpIHtcclxuXHRcdFx0dGhpcy5jaGFuZ2VDZW50ZXIoe3ggOiBtb3VzZVgsIHkgOiBtb3VzZVl9KTtcclxuXHRcdFx0dGhpcy5zZXRTZWxlY3RlZChmYWxzZSk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcclxuXHRcdH1cclxuXHR9XHJcbn07XHJcbkdyb3VwLnByb3RvdHlwZS5zZXRTZWxlY3RlZCA9IGZ1bmN0aW9uKG5ld1NlbGVjdGVkKSB7XHJcblx0dGhpcy5zZWxlY3RlZCA9IG5ld1NlbGVjdGVkO1xyXG5cdHRoaXMuc2VsZWN0aW9uLnZpc2libGUgPSBuZXdTZWxlY3RlZDtcclxufTtcclxuR3JvdXAucHJvdG90eXBlLmNoYW5nZUNlbnRlciA9IGZ1bmN0aW9uKG5ld0NlbnRlcikge1xyXG5cdHRoaXMuc2VsZWN0aW9uLnggPSBuZXdDZW50ZXIueDtcclxuXHR0aGlzLnNlbGVjdGlvbi55ID0gbmV3Q2VudGVyLnk7XHJcblx0dGhpcy5jZW50ZXIgPSBuZXdDZW50ZXI7XHJcbn07XHJcbi8qXHJcbkdyb3VwLnByb3RvdHlwZS50cnlNb3ZlID0gZnVuY3Rpb24oKSB7XHJcblx0aWYgKCF0aGlzLnNlbGVjdGVkKSB7XHJcblx0XHRyZXR1cm47XHJcblx0fVxyXG5cdHZhciBuZXdDZW50ZXIgPSB7eCA6IHRoaXMuZ2FtZS5pbnB1dC54LCB5IDogdGhpcy5nYW1lLmlucHV0Lnl9O1xyXG5cdHRoaXMuY2hhbmdlQ2VudGVyKG5ld0NlbnRlcik7XHJcbn07XHJcbiovXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IEdyb3VwO1xyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG4iLCJ2YXIgR3JvdXBNYW5hZ2VyID0gZnVuY3Rpb24gKGdhbWUpIHtcclxuXHR0aGlzLmdhbWUgPSBnYW1lO1xyXG5cdHRoaXMubWVtYmVycyA9IFtdO1xyXG5cdC8qXHJcblx0UGhhc2VyLlNwcml0ZS5jYWxsKHRoaXMsIGdhbWUsIHgsIHksICdwZXJzb24nKTtcclxuXHR0aGlzLnZlbG9jaXR5ID0ge3g6MCwgeTowfTtcclxuXHR0aGlzLndpZHRoID0gMTA7XHJcblx0dGhpcy5oZWlnaHQgPSAxMDtcclxuXHR0aGlzLnNwZWVkID0gLjA1O1xyXG5cdHRoaXMuaWQgPSBpZDtcclxuXHQqL1xyXG59O1xyXG5Hcm91cE1hbmFnZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gR3JvdXBNYW5hZ2VyO1xyXG5Hcm91cE1hbmFnZXIucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uKCkge1xyXG5cdGZvciAodmFyIG1lbWJlciBpbiBtZW1iZXJzKSB7XHJcblx0XHRtZW1iZXIgPSBtZW1iZXJzW21lbWJlcl07XHJcblx0XHRcclxuXHR9XHJcblx0LypcclxuXHR0aGlzLnggKz0gdGhpcy52ZWxvY2l0eS54ICogdGhpcy5zcGVlZDtcclxuXHR0aGlzLnkgKz0gdGhpcy52ZWxvY2l0eS55ICogdGhpcy5zcGVlZDtcclxuXHQvL2NvbnNvbGUubG9nKHRoaXMudmVsb2NpdHkpO1xyXG5cdCovXHJcbn07XHJcbkdyb3VwTWFuYWdlci5wcm90b3R5cGUuYWRkTWVtYmVyID0gZnVuY3Rpb24obWVtYmVyKSB7XHJcblx0dGhpcy5tZW1iZXJzLnB1c2gobWVtYmVyKTtcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gR3JvdXBNYW5hZ2VyOyIsInZhciBQZXJzb24gPSBmdW5jdGlvbiAoZ2FtZSwgeCwgeSwgaWQpIHtcclxuXHRQaGFzZXIuU3ByaXRlLmNhbGwodGhpcywgZ2FtZSwgeCwgeSwgJ3BlcnNvbicpO1xyXG5cdHRoaXMudmVsb2NpdHkgPSB7eDowLCB5OjB9O1xyXG5cdHRoaXMud2lkdGggPSAxMDtcclxuXHR0aGlzLmhlaWdodCA9IDEwO1xyXG5cdHRoaXMuc3BlZWQgPSAuMDU7XHJcblx0dGhpcy5pZCA9IGlkO1xyXG59O1xyXG5QZXJzb24ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShQaGFzZXIuU3ByaXRlLnByb3RvdHlwZSk7XHJcblBlcnNvbi5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBQZXJzb247XHJcblBlcnNvbi5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24oKSB7XHJcblx0dGhpcy54ICs9IHRoaXMudmVsb2NpdHkueCAqIHRoaXMuc3BlZWQ7XHJcblx0dGhpcy55ICs9IHRoaXMudmVsb2NpdHkueSAqIHRoaXMuc3BlZWQ7XHJcblx0Ly9jb25zb2xlLmxvZyh0aGlzLnZlbG9jaXR5KTtcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gUGVyc29uOyIsInZhciBQbGF5ZXIgPSBmdW5jdGlvbiAoZ2FtZSwgeCwgeSkge1xuICAgIFBoYXNlci5TcHJpdGUuY2FsbCh0aGlzLCBnYW1lLCB4LCB5LCAndGVzdHNwcml0ZScpO1xuICAgIGdhbWUuYWRkLmV4aXN0aW5nKHRoaXMpO1xuXHR0aGlzLnNwZWVkID0gMC4xO1xufVxuXG5QbGF5ZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShQaGFzZXIuU3ByaXRlLnByb3RvdHlwZSk7XG5QbGF5ZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gUGxheWVyO1xuXG4vKipcbiAqIEF1dG9tYXRpY2FsbHkgY2FsbGVkIGJ5IFdvcmxkLnVwZGF0ZVxuICovXG5QbGF5ZXIucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uKCkge1xuXHQvL3RoaXMueCArPSB0aGlzLnZlbG9jaXR5O1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBQbGF5ZXI7XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBnYW1lID0gbmV3IFBoYXNlci5HYW1lKDgwMCwgNjAwLCBQaGFzZXIuQVVUTywgJy1nYW1lJyk7XG5cbndpbmRvdy5VdGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcbndpbmRvdy5wbGF5ZXJTdGF0ZSA9IHtcbiAgICBjdXJyZW50TGV2ZWw6ICdHYW1lJ1xufVxuXG5nYW1lLnN0YXRlLmFkZCgnQm9vdCcsIHJlcXVpcmUoJy4vc3RhdGVzL2Jvb3QnKSk7XG5nYW1lLnN0YXRlLmFkZCgnU3BsYXNoJywgcmVxdWlyZSgnLi9zdGF0ZXMvc3BsYXNoJykpO1xuZ2FtZS5zdGF0ZS5hZGQoJ1ByZWxvYWRlcicsIHJlcXVpcmUoJy4vc3RhdGVzL3ByZWxvYWRlcicpKTtcbmdhbWUuc3RhdGUuYWRkKCdNZW51JywgcmVxdWlyZSgnLi9zdGF0ZXMvbWVudScpKTtcbmdhbWUuc3RhdGUuYWRkKCdHYW1lJywgcmVxdWlyZSgnLi9zdGF0ZXMvZ2FtZScpKTtcblxuZ2FtZS5zdGF0ZS5zdGFydCgnQm9vdCcpO1xuXG4vL2dhbWUuc3RhZ2UuYmFja2dyb3VuZENvbG9yID0gXCIjZmZmZmZmXCI7XG4iLCJ2YXIgQm9vdCA9IGZ1bmN0aW9uICgpIHt9O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEJvb3Q7XG5cbkJvb3QucHJvdG90eXBlID0ge1xuXG4gIHByZWxvYWQ6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmxvYWQuaW1hZ2UoJ3ByZWxvYWRlcicsICdhc3NldHMvcHJlbG9hZGVyLmdpZicpO1xuICB9LFxuXG4gIGNyZWF0ZTogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZ2FtZS5pbnB1dC5tYXhQb2ludGVycyA9IDE7XG5cbiAgICBpZiAodGhpcy5nYW1lLmRldmljZS5kZXNrdG9wKSB7XG4gICAgICB0aGlzLmdhbWUuc3RhZ2Uuc2NhbGUucGFnZUFsaWduSG9yaXpvbnRhbGx5ID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5nYW1lLnNjYWxlLnNjYWxlTW9kZSA9IFBoYXNlci5TY2FsZU1hbmFnZXIuU0hPV19BTEw7XG4gICAgICB0aGlzLmdhbWUuc2NhbGUubWluV2lkdGggPSAgNDgwO1xuICAgICAgdGhpcy5nYW1lLnNjYWxlLm1pbkhlaWdodCA9IDI2MDtcbiAgICAgIHRoaXMuZ2FtZS5zY2FsZS5tYXhXaWR0aCA9IDY0MDtcbiAgICAgIHRoaXMuZ2FtZS5zY2FsZS5tYXhIZWlnaHQgPSA0ODA7XG4gICAgICB0aGlzLmdhbWUuc2NhbGUuZm9yY2VMYW5kc2NhcGUgPSB0cnVlO1xuICAgICAgdGhpcy5nYW1lLnNjYWxlLnBhZ2VBbGlnbkhvcml6b250YWxseSA9IHRydWU7XG4gICAgICB0aGlzLmdhbWUuc2NhbGUuc2V0U2NyZWVuU2l6ZSh0cnVlKTtcbiAgICB9XG5cbiAgICB0aGlzLmdhbWUuc3RhdGUuc3RhcnQoJ1ByZWxvYWRlcicpO1xuICB9XG59O1xuIiwidmFyIFBsYXllciA9IHJlcXVpcmUoJy4uL2VudGl0aWVzL3BsYXllcicpO1xudmFyIFBlcnNvbiA9IHJlcXVpcmUoJy4uL2VudGl0aWVzL3BlcnNvbicpO1xudmFyIEdyb3VwID0gcmVxdWlyZSgnLi4vZW50aXRpZXMvZ3JvdXAnKTtcbnZhciBHcm91cE1hbmFnZXIgPSByZXF1aXJlKCcuLi9lbnRpdGllcy9ncm91cE1hbmFnZXInKTtcblxudmFyIEdhbWUgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMudGVzdGVudGl0eSA9IG51bGw7XG4gIHRoaXMuZmxvY2tzID0gW107XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEdhbWU7XG5cbkdhbWUucHJvdG90eXBlID0ge1xuXG4gIGNyZWF0ZTogZnVuY3Rpb24gKCkge1xuXHR0aGlzLmdhbWUuc3RhZ2UuYmFja2dyb3VuZENvbG9yID0gXCIjZmZmZmZmXCI7XG5cdCAgXG4gICAgdmFyIHggPSAodGhpcy5nYW1lLndpZHRoIC8gMikgLSAxMDA7XG4gICAgdmFyIHkgPSAodGhpcy5nYW1lLmhlaWdodCAvIDIpIC0gNTA7XG5cdFxuXHQvKlxuICAgIHRoaXMudGVzdGVudGl0eSA9IG5ldyBQbGF5ZXIodGhpcy5nYW1lLCB4LCB5KTtcbiAgICB0aGlzLnRlc3RlbnRpdHkuYW5jaG9yLnNldFRvKDAuNSwgMC41KTtcblx0Ki9cblx0XG4gICAgdGhpcy5pbnB1dC5vbkRvd24uYWRkKHRoaXMub25JbnB1dERvd24sIHRoaXMpO1xuXHRcblx0dmFyIHRlc3RGbG9jayA9IG5ldyBHcm91cCh0aGlzLmdhbWUsIHRoaXMuZ2FtZS53aWR0aCAvIDIgKyAxMDAsIHRoaXMuZ2FtZS5oZWlnaHQgLyAyICsgMTAwKTtcblx0dGhpcy5mbG9ja3MucHVzaCh0ZXN0RmxvY2spO1xuXHRcblx0Zm9yICh2YXIgaSA9IDA7IGkgPCAxMDsgaSsrKSB7XG5cdFx0dmFyIHRlc3RQZXJzb24gPSBuZXcgUGVyc29uKHRoaXMuZ2FtZSwgdGhpcy5nYW1lLndpZHRoLzIgKyBpICogMTUsIHRoaXMuZ2FtZS5oZWlnaHQvMiArIGkgKiAxNSwgaSk7XG5cdFx0dGhpcy5nYW1lLmFkZC5leGlzdGluZyh0ZXN0UGVyc29uKTtcblx0XHR0ZXN0RmxvY2suYWRkTWVtYmVyKHRlc3RQZXJzb24pO1xuXHR9XG5cdHZhciBncm91cE1hbmFnZXIgPSBuZXcgR3JvdXBNYW5hZ2VyKHRoaXMuZ2FtZSk7XG5cdGdyb3VwTWFuYWdlci5hZGRNZW1iZXIodGVzdEZsb2NrKTtcbiAgfSxcblxuICB1cGRhdGU6IGZ1bmN0aW9uICgpIHtcblx0LypcbiAgICB2YXIgeCwgeSwgY3gsIGN5LCBkeCwgZHksIGFuZ2xlLCBzY2FsZTtcblxuICAgIHggPSB0aGlzLmlucHV0LnBvc2l0aW9uLng7XG4gICAgeSA9IHRoaXMuaW5wdXQucG9zaXRpb24ueTtcbiAgICBjeCA9IHRoaXMud29ybGQuY2VudGVyWDtcbiAgICBjeSA9IHRoaXMud29ybGQuY2VudGVyWTtcblxuICAgIGFuZ2xlID0gTWF0aC5hdGFuMih5IC0gY3ksIHggLSBjeCkgKiAoMTgwIC8gTWF0aC5QSSk7XG4gICAgdGhpcy50ZXN0ZW50aXR5LmFuZ2xlID0gYW5nbGU7XG5cbiAgICBkeCA9IHggLSBjeDtcbiAgICBkeSA9IHkgLSBjeTtcbiAgICBzY2FsZSA9IE1hdGguc3FydChkeCAqIGR4ICsgZHkgKiBkeSkgLyAxMDA7XG5cbiAgICB0aGlzLnRlc3RlbnRpdHkuc2NhbGUueCA9IHNjYWxlICogMC42O1xuICAgIHRoaXMudGVzdGVudGl0eS5zY2FsZS55ID0gc2NhbGUgKiAwLjY7XG5cdCovXG5cdFxuXHR0aGlzLmZsb2Nrc1swXS51cGRhdGUoKTtcbiAgfSxcblxuICBvbklucHV0RG93bjogZnVuY3Rpb24gKCkge1xuICAgIC8vdGhpcy5nYW1lLnN0YXRlLnN0YXJ0KCdNZW51Jyk7XG5cdC8vY29uc29sZS5sb2codGhpcy5nYW1lLmlucHV0LngsIHRoaXMuZ2FtZS5pbnB1dC55KTtcblx0aWYgKHRoaXMuZ2FtZS5pbnB1dC5hY3RpdmVQb2ludGVyLmxlZnRCdXR0b24uaXNEb3duKSB7XG5cdFx0dGhpcy5mbG9ja3NbMF0uY2xpY2soKTtcblx0fVxuICB9XG59O1xuIiwidmFyIE1lbnUgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMudGV4dCA9IG51bGw7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IE1lbnU7XG5cbk1lbnUucHJvdG90eXBlID0ge1xuXG4gIGNyZWF0ZTogZnVuY3Rpb24gKCkge1xuICAgIHZhciB4ID0gdGhpcy5nYW1lLndpZHRoIC8gMjtcbiAgICB2YXIgeSA9IHRoaXMuZ2FtZS5oZWlnaHQgLyAyO1xuXG4gICAgdmFyIHN0eWxlID0geyBmb250OiBcIjY1cHggQXJpYWxcIiwgZmlsbDogXCIjZmZmZmZmXCIsIGFsaWduOiBcImNlbnRlclwiIH07XG5cbiAgICB0aGlzLnRleHQgPSB0aGlzLmFkZC50ZXh0KHggLSAzMDAsIHkgLSAyMDAsIFwiUHJlc3MgdG8gU3RhcnRcIiwgc3R5bGUpO1xuXG4gICAgdGhpcy5pbnB1dC5vbkRvd24uYWRkKHRoaXMub25Eb3duLCB0aGlzKTtcbiAgfSxcblxuICB1cGRhdGU6IGZ1bmN0aW9uICgpIHtcbiAgfSxcblxuICBvbkRvd246IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmdhbWUuc3RhdGUuc3RhcnQocGxheWVyU3RhdGUuY3VycmVudExldmVsKTtcbiAgfVxufTtcbiIsInZhciBQcmVsb2FkZXIgPSBmdW5jdGlvbiAoZ2FtZSkge1xuICB0aGlzLmFzc2V0ID0gbnVsbDtcbiAgdGhpcy5yZWFkeSA9IGZhbHNlO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBQcmVsb2FkZXI7XG5cblByZWxvYWRlci5wcm90b3R5cGUgPSB7XG5cbiAgcHJlbG9hZDogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuYXNzZXQgPSB0aGlzLmFkZC5zcHJpdGUoMzIwLCAyNDAsICdwcmVsb2FkZXInKTtcbiAgICB0aGlzLmFzc2V0LmFuY2hvci5zZXRUbygwLjUsIDAuNSk7XG5cbiAgICB0aGlzLmxvYWQub25Mb2FkQ29tcGxldGUuYWRkT25jZSh0aGlzLm9uTG9hZENvbXBsZXRlLCB0aGlzKTtcbiAgICB0aGlzLmxvYWQuc2V0UHJlbG9hZFNwcml0ZSh0aGlzLmFzc2V0KTtcbiAgICB0aGlzLmxvYWQuaW1hZ2UoJ3Rlc3RzcHJpdGUnLCAnYXNzZXRzL3Rlc3QucG5nJyk7XG5cdHRoaXMubG9hZC5pbWFnZSgncGVyc29uJywgJ2Fzc2V0cy9wZXJzb24ucG5nJyk7XG5cdHRoaXMubG9hZC5pbWFnZSgnc2VsZWN0aW9uJywgJ2Fzc2V0cy9zZWxlY3Rpb24ucG5nJyk7XG4gIH0sXG5cbiAgY3JlYXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5hc3NldC5jcm9wRW5hYmxlZCA9IGZhbHNlO1xuICB9LFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gKCkge1xuICAgIGlmICghIXRoaXMucmVhZHkpIHtcbiAgICAgIHRoaXMuZ2FtZS5zdGF0ZS5zdGFydCgnR2FtZScpO1xuICAgIH1cbiAgfSxcblxuICBvbkxvYWRDb21wbGV0ZTogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMucmVhZHkgPSB0cnVlO1xuICB9XG59O1xuIiwidmFyIFNwbGFzaCA9IGZ1bmN0aW9uICgpIHtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gU3BsYXNoO1xuXG5TcGxhc2gucHJvdG90eXBlID0ge1xuICBjcmVhdGU6IGZ1bmN0aW9uICgpIHtcbiAgfVxufTsiLCJ2YXIgVXRpbHMgPSB7XG4gICAgY29udGFpbnNPYmplY3Q6IGZ1bmN0aW9uKG9iaiwgbGlzdCkge1xuICAgICAgICB2YXIgaTtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChsaXN0W2ldID09PSBvYmopIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9LFxuXHRoeXBvdGVudXNlOiBmdW5jdGlvbihhLCBiKSB7XG5cdFx0cmV0dXJuIE1hdGguc3FydChNYXRoLnBvdyhhLCAyKSArIE1hdGgucG93KGIsIDIpKTtcblx0fVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBVdGlsczsiXX0=
