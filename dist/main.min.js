(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({"C:\\Users\\Matthew D Zimmerman\\Work\\Hackathon\\first_build\\src\\js\\entities\\ProgressBar.js":[function(require,module,exports){
//NOTE: DON'T USE this code to create a ProgressBar. Instead, use the UIBuilder object and call buildProgressBar

var ProgressBar = function(setType, setMaxValue, setGraphics, setRenderables) {
	this.type = setType; //Two types, "growing" (starts at 0, triggers event when full) 
						 //and "shrinking" (starts full, triggers at 0)
	this.bgBorderSize = 2;			//default size of background border
	this.bgBorderColor = 0x00000;	//default color of background border
	this.bgColor = 0xffffff;		//default color of background
	this.paddingHoriz = 10;			//default sum of padding on left and right side inner value bar
	this.paddingVert = 10;			//default sum (i.e. half on each side) of vertical padding of inner value bar
	// this.valueBorderSize = 1;		//default size of value border
	// this.valueBorderColor = 0x8888FF; //default color of value border
	this.valueColor = 0x000000;		//default color of inner value bar
	this.x = null;
	this.y = null;
	this.width = null;
	this.height = null;
	this.maxValue = setMaxValue;
	this.graphics = setGraphics; //store graphics class (used to draw bar)
	this.renderables = setRenderables;
	
	this.onEvent = function() {}; //overwrite this function to make whatever you want happen when progressBar reaches limit
	
	//switch(this.type) {
	//case 'growing' : 
	if(setType === 'growing') {
		this.value = 0;
		//tryTrigger is called automatically when you add/subtract value, and will trigger the onEvent() function
		this.tryTrigger = function() {
			if(this.value >= this.maxValue) {
				this.onEvent();
			}
		};
		//break;
	}
	else if(setType === 'shrinking') {
	//case 'shrinking' :
		this.value = this.maxValue;
		this.tryTrigger = function() {
			if(this.value <= 0) {
				this.onEvent();
			}
		};
	}
};

ProgressBar.prototype.constructor = ProgressBar;

ProgressBar.prototype.destroy = function() {
	this.graphics.clear();
	this.renderables.unsubscribe(this);
};

//To subtract value, just use negative numbers as argument i.e. foo.addValue(-5);
ProgressBar.prototype.addValue = function (addThis) {
	this.value += addThis;
	if(this.value > this.maxValue) {
		this.value = this.maxValue;
	}
	if(this.value < 0) {
		this.value = 0;
	}
	this.tryTrigger();
};

//Sets the location where progress bar is rendered
ProgressBar.prototype.setLocation = function(setX, setY) {
	this.x = setX;
	this.y = setY;
};

//Sets the size of the progress bar
ProgressBar.prototype.setSize = function(setWidth, setHeight) {
	this.width = setWidth;
	this.height = setHeight;
};

ProgressBar.prototype.setStyle = function(bgBorderSize, bgBorderColor, bgColor, paddingHoriz, paddingVert, valueBorderSize, valueBorderColor, valueColor) {
	this.bgBorderSize = bgBorderSize;
	this.bgBorderColor = bgBorderColor;
	this.bgColor = bgColor;
	this.paddingHoriz = paddingHoriz;
	this.paddingVert = paddingVert;
	this.valueBorderSize = valueBorderSize;
	this.valueBorderColor = valueBorderColor;
	this.valueColor = valueColor;
};

//update for progress bar, called just before drawing progress bar
//Overwrite this function if desired
ProgressBar.prototype.update = function() {};

//Renders progressBar
ProgressBar.prototype.render = function() {
	this.update();
	this.graphics.clear();
	//Draw background of bar
	this.graphics.lineStyle(this.bgBorderSize, this.bgBorderColor, 1); //sets border color and size
	this.graphics.beginFill(this.bgColor); //sets color of background fill
	this.graphics.drawRect(this.x-this.width/2, this.y-this.height/2, this.width, this.height);
	this.graphics.endFill();
	//Draw value of bar
	var percentage = this.value / this.maxValue;
	var barWidth = this.width - this.paddingHoriz;
	var barHeight = this.height - this.paddingVert;
	this.graphics.lineStyle(this.valueBorderSize, this.valueBorderColor, 1);
	this.graphics.beginFill(this.valueColor);
	this.graphics.drawRect(this.x-(barWidth/2), this.y-(barHeight/2), barWidth*percentage, barHeight);
	this.graphics.endFill();
};

module.exports = ProgressBar;
},{}],"C:\\Users\\Matthew D Zimmerman\\Work\\Hackathon\\first_build\\src\\js\\entities\\background.js":[function(require,module,exports){
var Group_Manager = require('./groupManager');
var Person = require('./person');

var Background = function (game, income, type, state) {
    Phaser.Sprite.call(this, game, 0, 0, 'background');
    game.add.existing(this);
    this.group_manager = new Group_Manager(this.game, state);
	this.group_manager.background = this;
   	this.type = type;
    this.incomeLevel = income;
	this.state = state;
    this.anchor.setTo(0.5, 0.5);
};

Background.prototype = Object.create(Phaser.Sprite.prototype);
Background.prototype.constructor = Background;

Background.prototype.getVarsTrue = function() {
    return {width : this.width, height : this.height, center : {x : this.x, y : this.y}};
};

Background.prototype.numPeople = function() {
    return this.group_manager.numPeople();
};

Background.prototype.updateVars = function(vars) {
    // console.log(vars);
    // console.log(this.type, this.incomeLevel, vars.width, vars.height, vars.center);
    this.x = vars.center.x
    this.y = vars.center.y+ this.myManager.border;
    this.width = vars.width;
    this.height = vars.height;
    this.group_manager.updateVars();
};

Background.prototype.update = function() {
    this.group_manager.update();
};



module.exports = Background;
},{"./groupManager":"C:\\Users\\Matthew D Zimmerman\\Work\\Hackathon\\first_build\\src\\js\\entities\\groupManager.js","./person":"C:\\Users\\Matthew D Zimmerman\\Work\\Hackathon\\first_build\\src\\js\\entities\\person.js"}],"C:\\Users\\Matthew D Zimmerman\\Work\\Hackathon\\first_build\\src\\js\\entities\\background_manager.js":[function(require,module,exports){
//Controls background elements

var Background = require('./background');
var Person = require('./person');
var util = require('../utils');

var Group = require('./group');

var Background_Manager = function(game, state) {
	this.game = game;
	this.state = state;
	//Create array of backgrounds
	this.bgArray = [
		new Background(this.game, Person.EDULEVEL.low , 'work' , state),	// this.bgArray[0] == workLow
		new Background(this.game, Person.EDULEVEL.mid , 'work' , state),	// this.bgArray[1] == workMid
		new Background(this.game, Person.EDULEVEL.high, 'work' , state),	// this.bgArray[2] == workMid
		new Background(this.game, Person.EDULEVEL.low , 'house', state),	// this.bgArray[3] == houseLow
		new Background(this.game, Person.EDULEVEL.mid , 'house', state),	// this.bgArray[4] == houseMid
		new Background(this.game, Person.EDULEVEL.high, 'house', state),	// this.bgArray[5] == houseMid
		new Background(this.game, '',              'unemployed', state)		// this.bgArray[6] == unemployed
	];
	for (bg in this.bgArray) {
		this.bgArray[bg].myManager = this;
	}
	
	for (var i in this.bgArray) {
		if (this.bgArray[i].type == 'work') {
			if (this.bgArray[i].incomeLevel === Person.EDULEVEL.low) {
				this.bgArray[i].tint = 0xed5c5a;
			}
			else if (this.bgArray[i].incomeLevel === Person.EDULEVEL.mid) {
				this.bgArray[i].tint = 0x6ae246;
			}
			else if (this.bgArray[i].incomeLevel === Person.EDULEVEL.high) {
				this.bgArray[i].tint = 0x2b59e2;
			}
		}
		else if (this.bgArray[i].type == 'house') {
			if (this.bgArray[i].incomeLevel === Person.EDULEVEL.low) {
				this.bgArray[i].tint = 0xed8180;
			}
			else if (this.bgArray[i].incomeLevel === Person.EDULEVEL.mid) {
				this.bgArray[i].tint = 0x94ea79;
			}
			else if (this.bgArray[i].incomeLevel === Person.EDULEVEL.high) {
				this.bgArray[i].tint = 0x5476dd;
			}
		}
		else { // Unemployed background
			this.bgArray[i].tint = 0x808080;
		}
		// this.border = 100;
	}
	this.border = 100;
	this.minRatio = .2;
	this.updateRatios();
};

Background_Manager.prototype.constructor = Background_Manager;

Background_Manager.prototype.sendTo = function(source, destination, group) {
	if (destination === null) {
		return;
	}
	var transType = this.transferType(source, destination, group)
	// console.log(source, destination, group, transType);
	if (transType.can) {	// Check if they can transfer up
		// console.log('can');
		source.group_manager.transfer(destination.group_manager, group);
		if (transType.educate) {
			group.startEducation();
		}
		this.updateRatios(destination);
        group.happinessModifier = transType.happinessModifier;
	}
	// console.log(group.happinessModifier);
};
Background_Manager.prototype.numPeople = function() {
	var count = 0;
	for (var i in this.bgArray) {
		count += this.bgArray[i].group_manager.numPeople();
	}
	return count;
};
Background_Manager.prototype.transferType = function(source, destination, group) {
    if (destination == null) {
        return;
    }
	var groupEdu = group.members[0].eduLevel;
	var can = this.canTransfer(source, destination, group);
	// console.log(destination);
	// console.log(destination.type, destination.incomeLevel);
	var educate = (destination.type === 'house' && destination.incomeLevel) > groupEdu;
    var happinessModifier = 0;
    if (this.state.curMoney < 0) {
    	happinessModifier -= 1;
    	this.negMoney = true;
    }
    else if (this.negMoney){
    	happinessModifier += 1;
    }
    if (destination.type == 'unemployed' && source.type != 'unemployed') {
    	// console.log('unemployment');
        happinessModifier -= 1;
    }
    if (destination.incomeLevel < groupEdu) {
    	// console.log('education');
        happinessModifier -= groupEdu - destination.incomeLevel;
    }
    if (destination.type == 'house') {
    	// console.log('housing');
    	happinessModifier += 1;
    }
    if (destination.type == 'work') {
    	// console.log('tax', destination.incomeLevel, this.state.taxMod.low);
    	if (destination.incomeLevel == 0) {
	    	if (this.state.taxMod.low == .5) {
	    		happinessModifier += 1;
	    	} else if (this.state.taxMod.low == 1) {
	    		
	    	} else if (this.state.taxMod.low == 1.5) {
	    		happinessModifier -= 1;
	    	}
    	} else if (destination.incomeLevel == 1) {
	    	if (this.state.taxMod.mid == .5) {
	    		happinessModifier += 1;
	    	} else if (this.state.taxMod.mid == 1) {
	    		
	    	} else if (this.state.taxMod.mid == 1.5) {
	    		happinessModifier -= 1;
	    	}
    	} else if (destination.incomeLevel == 2) {
	    	if (this.state.taxMod.high == .5) {
	    		happinessModifier += 1;
	    	} else if (this.state.taxMod.high == 1) {

	    	} else if (this.state.taxMod.high == 1.5) {
	    		happinessModifier -= 1;
	    	}
    	}
 	}
 	// console.log(happinessModifier, group.happinessModifier);
    var happinessChange = happinessModifier - group.happinessModifier;
    // console.log(happinessChange, happinessModifier, group.happinessModifier);
    var incomeChange = 0;
    var baseIncome = group.income();
    var newIncome = 0;
    var numPeople = group.numPeople();
    if (destination.type == 'work') {
    	// console.log('tax', destination.incomeLevel, this.state.taxMod.low);
    	if (destination.incomeLevel == 0) {
	    	newIncome += numPeople * Person.INCOMES.low * this.state.taxMod.low;
    	} else if (destination.incomeLevel == 1) {
	    	newIncome += numPeople * Person.INCOMES.mid * this.state.taxMod.mid;
    	} else if (destination.incomeLevel == 2) {
	    	newIncome += numPeople * Person.INCOMES.high * this.state.taxMod.high;
    	}
 	} else if (destination.type == 'home') {
 		if (destination.incomeLevel == 0) {
	    	newIncome -= numPeople * Person.INCOMES.low;
    	} else if (destination.incomeLevel == 1) {
	    	newIncome -= numPeople * Person.INCOMES.mid;
    	} else if (destination.incomeLevel == 2) {
	    	newIncome -= numPeople * Person.INCOMES.high;
    	}
 	}
 	// console.log(newIncome, baseIncome)
 	var incomeChange = newIncome - baseIncome;
 	// console.log(happinessModifier);
	return {can : can, educate : educate, happinessChange : happinessChange, incomeChange : incomeChange, happinessModifier : happinessModifier};
};

Background_Manager.prototype.canTransfer = function(source, destination, group) {
	
	// console.log(source, destination, group);
	if (source === null || destination === null) return false;
	if (source.type == destination.type && source.incomeLevel == destination.incomeLevel) {
		return false;
	}
	var sourceEdu = group.members[0].eduLevel;
	if (destination.type === 'unemployed') {
		return true;
	}
	if (sourceEdu === Person.EDULEVEL.unemployed) {
		if (destination.incomeLevel === Person.EDULEVEL.low && destination.type === 'house') {
			return true;
		}
	} else if (sourceEdu === Person.EDULEVEL.low) {
		if (destination.incomeLevel === Person.EDULEVEL.low) {
			return true;
		} else if (destination.incomeLevel === Person.EDULEVEL.mid) {
			if (destination.type === 'house') {
				return true;
			}
		}
	} else if (sourceEdu === Person.EDULEVEL.mid) {
		if (destination.incomeLevel === Person.EDULEVEL.low) {
			return true;
		} else if (destination.incomeLevel === Person.EDULEVEL.mid) {
			return true;
		} else if (destination.incomeLevel === Person.EDULEVEL.high) {
			if (destination.type === 'house') {
				return true;
			}
		}
	} else if (sourceEdu === Person.EDULEVEL.high) {
		return true;
	}
	return false;
	
};
Background_Manager.prototype.backgroundBy = function(type, incomeLevel) {
	for (var bg in this.bgArray) {
		bg = this.bgArray[bg];
		if (bg.type == type && bg.incomeLevel == incomeLevel) {
			return bg;
		}
	}
	return null;
};

Background_Manager.prototype.whereClicked = function() {
	
	var mouseX = this.game.input.x;
	var mouseY = this.game.input.y;
	if (mouseY >= this.border) {
		if (mouseY <= this.bgArray[0].height + this.border) {
			if (mouseX <= this.bgArray[0].width) {
				// console.log('0');
				return this.bgArray[0];
			} else if (mouseX <= this.bgArray[0].width + this.bgArray[1].width) {
				// console.log('1');
				return this.bgArray[1];
			} else {
				// console.log('2');
				return this.bgArray[2];
			}
		} else if (mouseY <= this.bgArray[4].height + this.bgArray[0].height + this.border) {
			if (mouseX <= this.bgArray[0].width) {
				// console.log('3');
				return this.bgArray[3];
			} else if (mouseX <= this.bgArray[0].width + this.bgArray[1].width) {
				// console.log('4');
				return this.bgArray[4];
			} else {
				// console.log('5');
				return this.bgArray[5];
			}
		} else {
			// console.log('6');
			return this.bgArray[6];
		}
	}
	return null;
	
};

Background_Manager.prototype.findOther = function(source, destination) {
	if (source.type === 'work' && destination.type === 'work') {
		if (source.incomeLevel === Person.EDULEVEL.low) {
			if (destination.incomeLevel === Person.EDULEVEL.mid) return this.bgArray[2];
			else if (destination.incomeLevel === Person.EDULEVEL.high) return this.bgArray[1];
		}
		else if (source.incomeLevel === Person.EDULEVEL.mid) {
			if (destination.incomeLevel === Person.EDULEVEL.low) return this.bgArray[2];
			else if (destination.incomeLevel === Person.EDULEVEL.high) return this.bgArray[0];
		}
		else if (source.incomeLevel === Person.EDULEVEL.high) {
			if (destination.incomeLevel === Person.EDULEVEL.low) return this.bgArray[1];
			else if (destination.incomeLevel === Person.EDULEVEL.mid) return this.bgArray[0];
		}
	}
	else if (source.type === 'house' && destination.type === 'house') {
		if (source.incomeLevel === Person.EDULEVEL.low) {
			if (destination.incomeLevel === Person.EDULEVEL.mid) return this.bgArray[5];
			else if (destination.incomeLevel === Person.EDULEVEL.high) return this.bgArray[4];
		}
		else if (source.incomeLevel === Person.EDULEVEL.mid) {
			if (destination.incomeLevel === Person.EDULEVEL.low) return this.bgArray[5];
			else if (destination.incomeLevel === Person.EDULEVEL.high) return this.bgArray[3];
		}
		else if (source.incomeLevel === Person.EDULEVEL.high) {
			if (destination.incomeLevel === Person.EDULEVEL.low) return this.bgArray[4];
			else if (destination.incomeLevel === Person.EDULEVEL.mid) return this.bgArray[3];
		}
	}
};

// Background_Manager.prototype.updateRatios = function(destination) {
	// work 0 - 2 house 3 - 5 unemployed 6
Background_Manager.prototype.updateRatios = function() {
	
	var lowSum = this.bgArray[0].numPeople() + this.bgArray[3].numPeople();
	var midSum = this.bgArray[1].numPeople() + this.bgArray[4].numPeople();
	var highSum = this.bgArray[2].numPeople() + this.bgArray[5].numPeople();
	// console.log('low', lowSum, 'mid', midSum, 'high', highSum);
	var hRatio = util.ratio(lowSum, midSum, highSum, this.minRatio);
	var workSum = this.bgArray[0].numPeople() + this.bgArray[1].numPeople() + this.bgArray[2].numPeople();
	var homeSum = this.bgArray[3].numPeople() + this.bgArray[4].numPeople() + this.bgArray[5].numPeople();
	var unemSum = this.bgArray[6].numPeople();
	var vRatio = util.ratio(workSum, homeSum, unemSum, this.minRatio);
	var gWidth = this.game.width;
	var gHeight = this.game.height - this.border;

	var offsetX = 0;
	var offsetY = 0;
	var workHeight = gHeight * vRatio.a;
	var houseHeight = gHeight * vRatio.b;
	var unemHeight = gHeight * vRatio.c;
	// console.log(gWidth, gHeight, workSum, homeSum, unemSum, hRatio, vRatio);

	var lowWork = {width : gWidth * hRatio.a, height : workHeight, center : null};
	lowWork.center = {x : offsetX + lowWork.width / 2, y : offsetY + workHeight / 2};;
	offsetX += lowWork.width;
	this.bgArray[0].updateVars(lowWork);
	var midWork = {width : gWidth * hRatio.b, height : workHeight, center : null};
	midWork.center = {x : offsetX + midWork.width / 2, y : offsetY + workHeight / 2};
	offsetX += midWork.width;
	this.bgArray[1].updateVars(midWork);
	var highWork = {width : gWidth * hRatio.c, height : workHeight, center : null}
	highWork.center = {x : offsetX + highWork.width / 2, y : offsetY + workHeight / 2};
	offsetX = 0;
	offsetY += workHeight;
	this.bgArray[2].updateVars(highWork);
	var lowHouse = {width : gWidth * hRatio.a, height : houseHeight, center : null};
	lowHouse.center = {x : offsetX + lowHouse.width / 2, y : offsetY + houseHeight / 2};
	offsetX += lowHouse.width;
	this.bgArray[3].updateVars(lowHouse);
	var midHouse = {width : gWidth * hRatio.b, height : houseHeight, center : null};
	midHouse.center = {x : offsetX + midHouse.width / 2, y : offsetY + houseHeight / 2};
	offsetX += midHouse.width;
	this.bgArray[4].updateVars(midHouse);
	var highHouse = {width : gWidth * hRatio.c, height : houseHeight, center : null};
	highHouse.center = {x : offsetX + highHouse.width / 2, y : offsetY + houseHeight / 2};
	offsetY += houseHeight;
	this.bgArray[5].updateVars(highHouse);
	var unemployed = {width : gWidth * 1, height : unemHeight, center : null};
	unemployed.center = {x : unemployed.width / 2, y : offsetY + unemHeight / 2};
	this.bgArray[6].updateVars(unemployed);

};

Background_Manager.prototype.endQuit = function() {
    this.justQuit = false;
};

module.exports = Background_Manager;
},{"../utils":"C:\\Users\\Matthew D Zimmerman\\Work\\Hackathon\\first_build\\src\\js\\utils.js","./background":"C:\\Users\\Matthew D Zimmerman\\Work\\Hackathon\\first_build\\src\\js\\entities\\background.js","./group":"C:\\Users\\Matthew D Zimmerman\\Work\\Hackathon\\first_build\\src\\js\\entities\\group.js","./person":"C:\\Users\\Matthew D Zimmerman\\Work\\Hackathon\\first_build\\src\\js\\entities\\person.js"}],"C:\\Users\\Matthew D Zimmerman\\Work\\Hackathon\\first_build\\src\\js\\entities\\group.js":[function(require,module,exports){
//controls flocking for a group of person objects
var util = require('../utils');

var Group = function (game, centerX, centerY, state) {
	this.game = game;
	this.members = [];
	this.minDist = 20;
	//this.noise = 10;
	this.center = {x : centerX, y : centerY};
	this.clickDist = 50;
	this.selected = false;
	this.selection = this.game.add.sprite(this.center.x, this.center.y, 'selection');
	this.selection.anchor.setTo(0.5, 0.5);
	this.selection.width = 100;
	this.selection.height = 100;
	this.selection.visible = false;
	this.velocity = {x : 0, y : 0};
	this.speed = .05;
	this.state = state;
	this.book = this.game.add.sprite(this.center.x, this.center.y, 'book');
	this.book.anchor.setTo(0.5, 0.5);
	this.book.visible = false;
	this.learningTime = .01;
    this.hover = false;
    this.lock = this.game.add.sprite(this.center.x, this.center.y, 'lock');
	this.lock.anchor.setTo(0.5, 0.5);
	this.lock.width = 25;
	this.lock.height = 35;
	this.lock.visible = false;
	this.lockTime = 5;
	this.happinessModifier = 0;
	this.selectionWeight = 2.5;
	this.minSelectionSize = 40;
	this.clickWeight = 10;
	this.maxClickDist = 40;
	this.minClickDist = 20;
	this.maxMembers = 10;
	
	this.state.input.onDown.add(this.onInputDown, this);
    this.state.input.addMoveCallback(this.onMove, this);
};
Group.prototype.constructor = Group;
Group.prototype.update = function() {
	// console.log(this.center);
	//update center
	var newX = this.center.x + this.velocity.x * this.speed;
	var newY = this.center.y + this.velocity.y * this.speed;
	this.changeCenter({x : newX, y : newY});
	for (var member in this.members) {
		member = this.members[member];
		var velocity = {x:0, y:0};
		var diff = {x:0, y:0};
		diff.x = this.center.x - member.x;
		diff.y = this.center.y - member.y;
		velocity.x += diff.x;
		velocity.y += diff.y;
		for (var other in this.members) {
			other = this.members[other];
			//ignore self
			if (other === member) {
				continue;
			}
			var oDiff = {x:0, y:0};
			oDiff.x = other.x - member.x;
			oDiff.y = other.y - member.y;
			var totalDist = util.hypotenuse(oDiff.x, oDiff.y);
			if (totalDist <= this.minDist) {
				velocity.x = -1 * oDiff.x;
				velocity.y = -1 * oDiff.y;
				// velocity.x -= oDiff.x;
				// velocity.y -= oDiff.y;
				break;
			}
		}
		// if (util.hypotenuse(velocity.x, velocity.y) < this.minVelocity) {
			// velocity.x = velocity.y = 0;
		// }
		member.velocity = velocity;
	}

	// var average = 0;
	// for (var member in this.members) {
	// 	member = this.members[member];
	// 	var dist = util.hypotenuse(this.center.x - member.x, this.center.y - member.y);
	// 	// if (dist > furthest) {
	// 	// 	furthest = dist;
	// 	// }
	// 	average += dist;
	// }
	// average /= this.members.length;
	// // console.log(this.selectionWeight);
	// var newSelectionSize = average * this.selectionWeight;
	// if (newSelectionSize <= this.minSelectionSize) {
	// 	// console.log('a');
	// 	newSelectionSize = this.minSelectionSize;
	// }
	var newClickDist = 0;
	if (this.members.length >= this.maxMembers) {
		newClickDist = this.maxClickDist;
	} else {
		newClickDist = this.minClickDist + (this.maxClickDist - this.minClickDist) * (this.members.length / this.maxMembers);
	}
	this.clickDist = newClickDist;
	var newSelectionSize = this.minSelectionSize + this.members.length * this.selectionWeight;
	this.selection.width = newSelectionSize;
	this.selection.height = newSelectionSize;
};
Group.prototype.addMember = function(member, special) {
	this.members.push(member);
	member.group = this;
	if (special) {
		this.myManager.background.myManager.updateRatios();
	}
	// console.log(this.members);
};
Group.prototype.onInputDown = function() {
	// console.log('a');
	if (this.selected) {
		var bg = this.myManager.background.myManager.whereClicked();
		// console.log(bg);
		this.myManager.background.myManager.sendTo(this.myManager.background, bg, this);
		this.setSelected(false);
	} else if (this.clicked()) {
		this.click();
	}
};
Group.prototype.startEducation = function() {
	this.learning = false;
	this.book.visible = true;
	this.state.game.time.events.add(Phaser.Timer.SECOND * this.learningTime, this.endEducation, this);
};
Group.prototype.endEducation = function() {
	for (var member in this.members) {
		this.members[member].eduLevel += 1;
	}
	this.learning = false;
	this.book.visible = false;
};
Group.prototype.clicked = function() {
    if (this.members.length == 0) {
        return false;
    }
	var mouseX = this.game.input.x;
	var mouseY = this.game.input.y;
	var diffX = mouseX - this.center.x;
	var diffY = mouseY - this.center.y;
	var totalDiff = util.hypotenuse(diffX, diffY);
	if (totalDiff <= this.clickDist) {
		return true;
	}
	return false;
};
Group.prototype.click = function() {
	if (this.selected) {
        // this.state.hm.groupSelected = false;
		this.setSelected(false);
	} else if (!this.locked) {
        // this.state.hm.groupSelected = true;
		this.setSelected(true);
	}
};
Group.prototype.setSelected = function(newSelected) {
	this.selected = newSelected;
	this.selection.visible = newSelected;
    if (newSelected == true) {
        this.state.hm.groupSelected = this;
    } else {
        if (this.state.hm.groupSelected == this) {
            this.state.hm.groupSelected = null;
        }
    }
};
Group.prototype.changeCenter = function(newCenter) {
	this.selection.x = newCenter.x;
	this.selection.y = newCenter.y;
	this.book.x = newCenter.x;
	this.book.y = newCenter.y;
	this.lock.x = newCenter.x;
	this.lock.y = newCenter.y;
	this.center = newCenter;
};
Group.prototype.numPeople = function() {
	return this.members.length;
};
Group.prototype.lowestEducation = function() {
    var lowest = 3;
    for (var member in this.members) {
        member = this.members[member];
        if (member.eduLevel < lowest) {
            lowest = member.eduLevel;
        }
    }
    return lowest;
};
Group.prototype.averageHappiness = function() {
    var happiness = 0;
    for (var member in this.members) {
        member = this.members[member];
        happiness += member.happiness;
    }
    happiness /= this.members.length;
    return happiness;
};
Group.prototype.averageFatigue = function() {
    var fatigue = 0;
    for (var member in this.members) {
        member = this.members[member];
        fatigue += member.fatigue;
    }
    fatigue /= this.members.length;
    return fatigue;
};
Group.prototype.income = function() {
    var income = 0;
    for (var member in this.members) {
        member = this.members[member];
        income += member.getTax();
    }
    return income;
};
// Group.prototype.happinessChange = function() {
    
// };
// Group.prototype.incomeChange = function() {
    
// };
// Group.prototype.mouseDown = function() {
	
// };
Group.prototype.onMove = function() {
    if (this.members.length == 0) {
        return;
    }
    // console.log(this.members);
	var mouseX = this.game.input.x;
	var mouseY = this.game.input.y;
    var dist = util.hypotenuse(this.center.x - mouseX, this.center.y - mouseY);
    if (dist <= this.clickDist) {
        if (!this.state.hm.groupSelected || this.state.hm.groupSelected == this) {
            // console.log('a');
            // console.log(this.happinessModifier);
            this.state.hm.showStatic({people : this.numPeople(), education : this.lowestEducation(), happiness : this.averageHappiness(), fatigue : this.averageFatigue(), income : this.income(), happinessModifier : this.happinessModifier}, this.center.x, this.center.y - 50, 100);
            this.hover = true;
        }
    } else {
        if (this.hover) {
            this.hover = false;
            this.state.hm.hide();
        }
        if (this.state.hm.groupSelected == this && this.myManager.background.myManager.whereClicked() != this.myManager.background
            && this.myManager.background.myManager.canTransfer(this.myManager.background, this.myManager.background.myManager.whereClicked(), this)) {
            // console.log('a');
            var bgManager = this.myManager.background.myManager
            var transferType = bgManager.transferType(this.myManager.background, bgManager.whereClicked(), this);
            this.state.hm.showChange(transferType.can, {happinessChange : transferType.happinessChange, incomeChange : transferType.incomeChange}, mouseX, mouseY);
        } else {
            // console.log('b');
            this.state.hm.hide();
        }
    }
};
// Group.prototype.happinessModifier = function() {
//     return this.happinessModifier;
// };
Group.prototype.applyHappiness = function() {
	// console.log('apply');
	var flag = false;
	for (var member in this.members) {
		member = this.members[member];
		// console.log(member.happiness, this.happinessModifier);
		// console.logqmember.happiness, this.happinessModifier);
		member.happiness += this.happinessModifier;
		// member.happiness -= 50;
		if (member.happiness > 100) {
			member.happiness = 100;
		} else if (member.happiness <= 0) {
			member.happiness = 0;
			flag = true;
		}
	}
	if (flag) {
		this.getOutOfTown();
	}
};
Group.prototype.addFatigue = function(amt) {
	// console.log(amt);
	if (this.members[0].fatigue <= 0 && amt <= 0) {
		return;
	}
	var flag = false;
	for (var member in this.members) {
		this.members[member].fatigue += amt;
		if (this.members[member].fatigue >= 100) {
			flag = true;
		}
	}
	if (flag) {
		// console.log(this);
		this.getOutOfTown();
		//console.log('fatigue too dam high');
	}
};
Group.prototype.getOutOfTown = function() {
	var newBG = this.myManager.background.myManager.backgroundBy('house', this.myManager.background.incomeLevel);
	if (!newBG) {
		console.log('ERROR');
		return;
	}
	this.myManager.background.myManager.sendTo(this.myManager.background, newBG, this);
	this.lockIt();
}
Group.prototype.lockIt = function() {
    this.locked = true;
    this.lock.visible = true;
	this.state.game.time.events.add(Phaser.Timer.SECOND * this.lockTime, this.endLock, this);
};
Group.prototype.endLock = function() {
    this.locked = false;
    this.lock.visible = false;
};

module.exports = Group;













},{"../utils":"C:\\Users\\Matthew D Zimmerman\\Work\\Hackathon\\first_build\\src\\js\\utils.js"}],"C:\\Users\\Matthew D Zimmerman\\Work\\Hackathon\\first_build\\src\\js\\entities\\groupManager.js":[function(require,module,exports){
var Util = require('../utils');
var Group = require('./group');

var GroupManager = function (game, state) {
	this.game = game;
	this.members = [];
	this.state = state;
	this.splitChance = 0.1;
	this.maxSize = 2;
	this.margin = 50;
	this.width = 0;
	this.height = 0;
	this.center = {x : 0, y : 0};
};
GroupManager.prototype.constructor = GroupManager;
GroupManager.prototype.update = function() {
	// this.updateVars();
	// console.log(this.members);
	// console.log(this.center);
	//update bounds
	if (this.background) {
		var vars = this.background.getVarsTrue();
		this.width = vars.width;
		this.height = vars.height;
		this.center = vars.center;
		// console.log(vars);
	} else {
		return;
	}
	//update inter-group movement
	// console.log(Math.random());
	var largest = null;
	var largestSize = 0;
	for (var member in this.members) {
		member = this.members[member];
		var size = member.numPeople();
		if (size >= largestSize) {
			largestSize = size;
			largest = member;
		}
	}
	if (largestSize >= this.maxSize) {
		// console.log('split');
		var newGroup = new Group(this.game, this.center.x, this.center.y, this.state);
		this.addMember(newGroup);
		for (var i = 0; i < largestSize / 2; i++) {
			this.transferPeople(largest, newGroup, largest.members[0]);
		}
	}
	//update members
	for (member in this.members) {
		this.members[member].update();
	}
};
GroupManager.prototype.updateVars = function() {
	var vars = this.background.getVarsTrue();
	this.width = vars.width;
	this.height = vars.height;
	this.center = vars.center;
	// console.log(this.background.type, this.background.incomeLevel, vars.width, vars.height, vars.center.x, vars.center.y);
	var leftBound = this.center.x - this.width / 2;
	var rightBound = this.center.x + this.width / 2;
	var upperBound = this.center.y - this.height / 2;
	var lowerBound = this.center.y + this.height / 2;

	// var myBG = this.background;
	// console.log(myBG.type, myBG.incomeLevel, leftBound, rightBound, upperBound, lowerBound)

	for (var member in this.members) {
		member = this.members[member];
		if (member.center.x - this.margin <= leftBound || member.center.x + this.margin >= rightBound || member.center.y - this.margin <= upperBound || member.center.y + this.margin >= lowerBound) {
			// console.log('person', member.center, leftBound, rightBound, upperBound, lowerBound);
			// console.log('group manager', this.center, this.width, this.height);
			member.center.x = this.center.x - this.width / 2 + this.margin + (this.width - this.margin * 2) * Math.random();
			member.center.y = this.center.y - this.height / 2 + this.margin + (this.height - this.margin * 2) * Math.random();
		}
	}
};
GroupManager.prototype.transfer = function(otherGM, myMember) {
	// var testVals = otherGM.background.getVarsCenter();
	// console.log('transfer to', otherGM.background.type, otherGM.background.incomeLevel, testVals.center.y, testVals.y, testVals.visHeight, testVals.vRatio);
	var index = this.members.indexOf(myMember);
	this.members.splice(index, 1);
	otherGM.addMember(myMember);
};
GroupManager.prototype.transferPeople = function(source, destination, tPerson) {
	var index = source.members.indexOf(tPerson);
	source.members.splice(index, 1);
	destination.addMember(tPerson);
};
GroupManager.prototype.addMember = function(member) {
	this.members.push(member);
	member.myManager = this;
	member.center.x = this.center.x - this.width / 2 + this.margin + (this.width - this.margin * 2) * Math.random();
	member.center.y = this.center.y - this.height / 2 + this.margin + (this.height - this.margin * 2) * Math.random();
};
GroupManager.prototype.addPerson = function(newPerson) {
	if (this.members.length == 0) {
		// console.log(this.center);
		this.addMember(new Group(this.game, this.center.x, this.center.y, this.state), true);
		// console.log('new group');
	}
	this.members[0].addMember(newPerson);
};
GroupManager.prototype.numPeople = function() {
	var count = 0;
	for (var member in this.members) {
		member = this.members[member];
		count += member.numPeople();
	}
	return count;
};

module.exports = GroupManager;












},{"../utils":"C:\\Users\\Matthew D Zimmerman\\Work\\Hackathon\\first_build\\src\\js\\utils.js","./group":"C:\\Users\\Matthew D Zimmerman\\Work\\Hackathon\\first_build\\src\\js\\entities\\group.js"}],"C:\\Users\\Matthew D Zimmerman\\Work\\Hackathon\\first_build\\src\\js\\entities\\hoverMenu.js":[function(require,module,exports){
var HoverMenu = function (game, x, y, state) {
	Phaser.Sprite.call(this, game, x, y, 'bordered');
	game.add.existing(this);
	this.x = x;
	this.y = y;
    this.groupSelected = null;
	this.width = 256;
	this.height = 128;
    this.staticWidth = 256;
    this.staticHeight = 128;
    this.changeWidth = 224;
    this.changeHeight = 64;
    this.state = state;
	
	this.staticText = this.game.add.group();
	this.changeText = this.game.add.group();
    this.visible = false;

    this.chevron = this.game.add.sprite(this.x, this.y, 'chevrons');
    this.chevron.anchor.setTo(0.5, 0.5);
    this.chevron.frame = 3;
    this.chevron.y -= this.height;
    this.chevron.x += 25;
    
    // this.state.input.addMoveCallback(this.onInputMove, this);
	
	this.people = this.game.add.text(10, 10, 'People: 0');
	this.people.font = 'Roboto';
	this.people.fontSize = 18;
	this.people.fill = '#000000';
	
	this.education = this.game.add.text(10, 10, 'Education: Low');
	this.education.font = 'Roboto';
	this.education.fontSize = 18;
	this.education.fill = '#000000';
	
	this.happiness = this.game.add.text(10, 10, 'Happiness: %100');
	this.happiness.font = 'Roboto';
	this.happiness.fontSize = 18;
	this.happiness.fill = '#000000';
	
	this.fatigue = this.game.add.text(10, 10, 'Fatigue: %0');
	this.fatigue.font = 'Roboto';
	this.fatigue.fontSize = 18;
	this.fatigue.fill = '#000000';
	
    this.income = this.game.add.text(10, 10, 'Income: $0');
	this.income.font = 'Roboto';
	this.income.fontSize = 18;
	this.income.fill = '#000000';
    
	this.staticText.add(this.people);
	this.staticText.add(this.education);
    this.education.y += 22 * 1;
	this.staticText.add(this.happiness);
    this.happiness.y += 22 * 2;
	this.staticText.add(this.fatigue);
    this.fatigue.y += 22 * 3;
	this.staticText.add(this.income);
    this.income.y += 22 * 4;
    this.staticText.add(this.chevron);
    this.staticText.visible = false;
    this.staticText.x = this.x;
    this.staticText.y = this.y;
	
	this.happinessChange = this.game.add.text(10, 10, 'Happiness =');
	this.happinessChange.font = 'Roboto';
	this.happinessChange.fontSize = 18;
	this.happinessChange.fill = '#000000';
	
	this.incomeChange = this.game.add.text(10, 10, 'Income =');
	this.incomeChange.font = 'Roboto';
	this.incomeChange.fontSize = 18;
	this.incomeChange.fill = '#000000';
    
    this.changeText.add(this.happinessChange);
    this.changeText.add(this.incomeChange);
    this.incomeChange.y += 22 * 1;
    this.changeText.visible = false;
    this.changeText.x = this.x;
    this.changeText.y = this.y;
};
HoverMenu.prototype = Object.create(Phaser.Sprite.prototype);
HoverMenu.prototype.constructor = HoverMenu;
HoverMenu.prototype.update = function() {
	
};
//people, education, happiness, fatigue, income
HoverMenu.prototype.showStatic = function(state, x, y, over) {
    // console.log('static');
    x -= this.width / 2;
    y -= this.height;
	this.people.text = 'People: ' + state.people;
    this.education.text = 'Education: ' + state.education;
    this.happiness.text = 'Happiness: %' + state.happiness;
    this.fatigue.text = 'Fatigue: %' + state.fatigue;
    this.income.text = 'Income: $' + state.income;
    var happinessModifier = state.happinessModifier;
    if (happinessModifier == -3) {
        this.chevron.frame = 0;
    } else if (happinessModifier == -2) {
        this.chevron.frame = 1;
    } else if (happinessModifier == -1) {
        this.chevron.frame = 2;
    } else if (happinessModifier == 0) {
        this.chevron.frame = 3;
    } else if (happinessModifier == 1) {
        this.chevron.frame = 4;
    } else if (happinessModifier == 2) {
        this.chevron.frame = 5;
    } else if (happinessModifier == 3) {
        this.chevron.frame = 6;
    }
    this.staticText.visible = true;
    this.visible = true;
    this.width = this.staticWidth;
    this.height = this.staticHeight;
    this.x = x;
    this.y = y;
    this.staticText.x = x;
    this.staticText.y = y;
    this.adjustStatic(over);
};
//happinessChange, incomeChange
HoverMenu.prototype.showChange = function(can, state, x, y) {
    if (!can) {
        return;
    }
	this.happinessChange.text = 'Happiness change: ' + state.happinessChange;
    this.incomeChange.text = 'Income change: ' + state.incomeChange;
    this.changeText.visible = true;
    this.visible = true;
    this.width = this.changeWidth;
    this.height = this.changeHeight;
    y -= this.height;
    this.x = x;
    this.y = y;
    this.changeText.x = x;
    this.changeText.y = y;
    this.adjustChange();
};
HoverMenu.prototype.adjustStatic = function(over) {
    var maxWidth = this.game.width;
    var maxHeight = this.game.height;
    if (this.y - this.height <= 0) { // over top of screen
        this.y += over;
        this.y += this.height;
        this.staticText.y = this.y;
        this.changeText.y = this.y;
    }
    if (this.x - this.width / 2 < 0) { // over left of screen
        this.x += this.width / 2;
        this.staticText.x = this.x;
        this.changeText.x = this.x;
    } else if (this.x + this.width / 2 > maxWidth) { // over right of screen
        this.x -= this.width / 2;
        this.staticText.x = this.x;
        this.changeText.x = this.x;
    }
};
HoverMenu.prototype.adjustChange = function() {
    var maxWidth = this.game.width;
    var maxHeight = this.game.height;
    if (this.y - this.height <= 0) { // over top of screen
        this.y += this.height;
        this.staticText.y = this.y;
        this.changeText.y = this.y;
    }
    if (this.x + this.width > maxWidth) { // over right of screen
        this.x -= this.width;
        this.staticText.x = this.x;
        this.changeText.x = this.x;
    }
};
HoverMenu.prototype.hide = function() {
	this.staticText.visible = false;
    this.changeText.visible = false;
    this.visible = false;
};
// HoverMenu.prototype.onInputMove = function() {
  // console.log('move');
  
// };

module.exports = HoverMenu;



















},{}],"C:\\Users\\Matthew D Zimmerman\\Work\\Hackathon\\first_build\\src\\js\\entities\\person.js":[function(require,module,exports){
var Person = function (game, x, y, id) {
	Phaser.Sprite.call(this, game, x, y, 'ages');
	this.frame = 2;
	this.velocity = {x:0, y:0};
	this.width = 10;
	this.height = 10;
	this.speed = .05;
	this.id = id;
	this.eduLevel = Person.EDULEVEL.unemployed;
	this.happiness = 100;
    this.fatigue = 0;
    this.happinessModifier = 0;
    this.age = Person.AGE.young;
    this.turnCount = 0;
    this.ageThreshold = 5;
};
Person.prototype = Object.create(Phaser.Sprite.prototype);
Person.prototype.constructor = Person;

Person.EDULEVEL = {
	unemployed : -1,
	low  : 0,
	mid  : 1,
	high : 2
};

Person.INCOMES = {
	low : 10,
	mid : 20,
	high : 30
};

Person.AGE = {
	young : 0,
	adult : 1,
	old : 2
};

Person.prototype.update = function() {
	this.x += this.velocity.x * this.speed;
	this.y += this.velocity.y * this.speed;
	//console.log(this.velocity);
};

Person.prototype.ageTick = function() {
	// this.turnCount += 1;
	// if (this.turnCount >= this.ageThreshold) {
	// 	// console.log('happy birthday');
	// 	if (this.age == 0) {
	// 		this.age = Person.AGE.adult;
	// 		this.frame = 3;
	// 	} else if (this.age == 1) {
	// 		this.age = Person.AGE.old;
	// 		this.frame = 1;
	// 	} else if (this.age == 2) {

	// 	}
	// }
};

Person.prototype.getTax = function() {
	// console.log('get tax', this.group.myManager.background.type);
	if (this.group.myManager.background.type === 'house') {
		if (this.group.myManager.background.incomeLevel === Person.EDULEVEL.low) {
			// console.log(this.group.myManager.background.myManager.state.taxMod.low);
			return -1 * Person.INCOMES.low;
		} else if (this.group.myManager.background.incomeLevel === Person.EDULEVEL.mid) {
			return -2 * Person.INCOMES.mid;
		} else if (this.group.myManager.background.incomeLevel === Person.EDULEVEL.high) {
			return -3 * Person.INCOMES.high;
		}
	} else if (this.group.myManager.background.type === 'work') {
		if (this.group.myManager.background.incomeLevel === Person.EDULEVEL.low) {
			return Person.INCOMES.low * this.group.myManager.background.myManager.state.taxMod.low;
		} else if (this.group.myManager.background.incomeLevel === Person.EDULEVEL.mid) {
			return Person.INCOMES.mid * this.group.myManager.background.myManager.state.taxMod.mid;
		} else if (this.group.myManager.background.incomeLevel === Person.EDULEVEL.high) {
			return Person.INCOMES.high * this.group.myManager.background.myManager.state.taxMod.high;
		}
	}
	return 0;
};

module.exports = Person;
},{}],"C:\\Users\\Matthew D Zimmerman\\Work\\Hackathon\\first_build\\src\\js\\entities\\uiBuilder.js":[function(require,module,exports){
var ProgressBar = require('./ProgressBar');

var UIBuilder = function(setGameState) {
	//Ensure that cannot create multiple instances of this class
	if(UIBuilder.prototype.exists) {
		return UIBuilder.prototype.existingReference;
	}
	
	this.gameState = setGameState;
	this.renderables = [];
	//Create and store a graphics object (used for stuff like drawing rectangles)
	UIBuilder.prototype.exists = true;
	UIBuilder.prototype.existingReference = this;
};

UIBuilder.prototype.constructor = UIBuilder;
//These var's help create the singleton functionality
UIBuilder.prototype.exists = false;
UIBuilder.prototype.existingReference = null;

//Use this function to create a progress bar
//Usage: type: can be "growing" or "shrinking", this will effect if bar starts at 0 and goes up or vis versa
//		 maxValue: sets the max value of the progress bar, i.e. using 100 creates a bar from 0 to 100
//		 x,y: sets location
//		 DON'T FORGET to overwrite the onEvent() function for the progress bar after creating it
//			-onEvent() is automatically called when bar fills/shrinks past limit (depending on bar type)
UIBuilder.prototype.buildProgressBar = function(type, x, y, width, height, maxValue) {
	//create and format new prog bar
	var graphics = this.gameState.game.add.graphics(0,0);
	var newProgBar = new ProgressBar(type, maxValue, graphics, this.renderables);
	newProgBar.setLocation(x,y);
	newProgBar.setSize(width, height);
	//subscribe to 'renderables' so that render() is called automatically
	// this.renderables.subscribe(newProgBar);
	this.renderables.push(newProgBar);
	return newProgBar;
};
UIBuilder.prototype.render = function() {
	for (renderable in this.renderables) {
		this.renderables[renderable].render();
	}
};

module.exports = UIBuilder;
},{"./ProgressBar":"C:\\Users\\Matthew D Zimmerman\\Work\\Hackathon\\first_build\\src\\js\\entities\\ProgressBar.js"}],"C:\\Users\\Matthew D Zimmerman\\Work\\Hackathon\\first_build\\src\\js\\main.js":[function(require,module,exports){
'use strict';

var game = new Phaser.Game(800, 600, Phaser.AUTO, '-game');

window.Utils = require('./utils');
window.playerState = {
    currentLevel: 'Game'
};


game.state.add('Boot', require('./states/boot'));
game.state.add('Splash', require('./states/splash'));
game.state.add('Preloader', require('./states/preloader'));
game.state.add('Menu', require('./states/menu'));
game.state.add('Game', require('./states/game'));
game.state.add('Game_Over', require('./states/game_over'));

game.state.start('Boot');

//game.stage.backgroundColor = "#ffffff";

},{"./states/boot":"C:\\Users\\Matthew D Zimmerman\\Work\\Hackathon\\first_build\\src\\js\\states\\boot.js","./states/game":"C:\\Users\\Matthew D Zimmerman\\Work\\Hackathon\\first_build\\src\\js\\states\\game.js","./states/game_over":"C:\\Users\\Matthew D Zimmerman\\Work\\Hackathon\\first_build\\src\\js\\states\\game_over.js","./states/menu":"C:\\Users\\Matthew D Zimmerman\\Work\\Hackathon\\first_build\\src\\js\\states\\menu.js","./states/preloader":"C:\\Users\\Matthew D Zimmerman\\Work\\Hackathon\\first_build\\src\\js\\states\\preloader.js","./states/splash":"C:\\Users\\Matthew D Zimmerman\\Work\\Hackathon\\first_build\\src\\js\\states\\splash.js","./utils":"C:\\Users\\Matthew D Zimmerman\\Work\\Hackathon\\first_build\\src\\js\\utils.js"}],"C:\\Users\\Matthew D Zimmerman\\Work\\Hackathon\\first_build\\src\\js\\states\\boot.js":[function(require,module,exports){
var Boot = function () {};

module.exports = Boot;

Boot.prototype = {

  preload: function () {
    this.load.image('preloader', 'assets/preloader.gif');
  },

  create: function () {
    this.game.input.maxPointers = 1;

    if (this.game.device.desktop) {
      this.game.stage.scale.pageAlignHorizontally = true;
    } else {
      this.game.scale.scaleMode = Phaser.ScaleManager.SHOW_ALL;
      this.game.scale.minWidth =  480;
      this.game.scale.minHeight = 260;
      this.game.scale.maxWidth = 640;
      this.game.scale.maxHeight = 480;
      this.game.scale.forceLandscape = true;
      this.game.scale.pageAlignHorizontally = true;
      this.game.scale.setScreenSize(true);
    }

    this.game.state.start('Preloader');
  }
};

},{}],"C:\\Users\\Matthew D Zimmerman\\Work\\Hackathon\\first_build\\src\\js\\states\\game.js":[function(require,module,exports){
var Background_Manager = require('../entities/background_manager');
var Person = require('../entities/person');
var Group = require('../entities/group');
var GroupManager = require('../entities/groupManager');
var UIBuilder = require('../entities/uiBuilder');
var HoverMenu = require('../entities/hoverMenu');
var Utils = require('../utils');

var Game = function () {
  this.testentity = null;
  //this.flocks = [];
  this.bg_mg = null;
  // this.selectedGroup = null;
  this.money = null;
  this.moneyVal = 0;
  this.curMoney = 2000;
  this.moneyUpdateDelay = 0.001;
  this.moneyIncrementing = false;
  this.happinessVal = 0;
  this.curHappiness = 0;
  this.happinessUpdateDelay = 0.001;
  this.happinessIncrementing = false;
  this.taxTime = 3;
  this.taxMod = {low: 1, mid: 1, high: 1};
  this.minHappiness = 50;
	this.fatiguePerTick = 10;
	// this.moneyChangeFading = false;
	this.moneyChangeFadeDelay = 0.01;
	this.moneyChangeFadeRate = 0.025;
	this.moneyChangeHoldDelay = 1;
	this.migrantDelay = 1;
};

module.exports = Game;

Game.prototype = {

  create: function () {
  	console.log('foo');
	  // console.log(this);
    this.game.stage.backgroundColor = "#ededed";
    this.menu_bg = this.game.add.image(0, 0, 'menu_bg');  
    var x = (this.game.width / 2) - 100;
    var y = (this.game.height / 2) - 50;

    this.bg_mg = new Background_Manager(this.game, this);
	
    this.input.onDown.add(this.onInputDown, this);
	
	this.money = this.game.add.text(20, 15, '$0');
	this.money.font = "Roboto";
	this.money.fontSize = 24;
	this.money.fill = '#000000';
	this.money.text = '$0';

	this.moneyChange = this.game.add.text(120, 15, '$0');
	this.moneyChange.font = "Roboto";
	this.moneyChange.fontSize = 24;
	this.moneyChange.fill = '#000000';
	this.moneyChange.text = '+$0';
	this.moneyChange.alpha = 0;

	this.uib = new UIBuilder(this);
	this.bar = this.uib.buildProgressBar("growing", this.game.width / 2, 25, 300, 16, 100 - this.minHappiness);
	//this.bar.addValue(100);
	this.happy = this.game.add.sprite(this.game.width * .29, 25, 'happyface');
	this.happy.anchor.setTo(0.5, 0.5);

  // Tax buttons
  this.redTaxLow   = this.game.add.button(this.bg_mg.bgArray[0].getVarsTrue().center.x - 15, 75, 'taxReduce', this.decTaxLow, this);
  this.textTaxLow  = this.game.add.text(this.bg_mg.bgArray[0].getVarsTrue()[0], 78, '$$');
  this.textTaxLow.font = "Roboto";
  this.textTaxLow.fontSize = 18;
  this.addTaxLow   = this.game.add.button(this.bg_mg.bgArray[0].getVarsTrue().center.x + 15, 75, 'taxAdd', this.incTaxLow, this);
  this.redTaxLow.anchor.setTo(.5, .5);
  this.textTaxLow.anchor.setTo(0, .5);
  this.addTaxLow.anchor.setTo(.5, .5);
  this.redTaxMid   = this.game.add.button(this.bg_mg.bgArray[1].getVarsTrue().center.x - 15, 75, 'taxReduce', this.decTaxMid, this);
  this.textTaxMid  = this.game.add.text(this.bg_mg.bgArray[1].getVarsTrue().center.x, 78, '$$');
  this.textTaxMid.font = "Roboto";
  this.textTaxMid.fontSize = 18;
  this.addTaxMid   = this.game.add.button(this.bg_mg.bgArray[1].getVarsTrue().center.x + 15, 75, 'taxAdd', this.incTaxMid, this);
  this.redTaxMid.anchor.setTo(.5, .5);
  this.textTaxMid.anchor.setTo(0, .5);
  this.addTaxMid.anchor.setTo(.5, .5);
  this.redTaxHigh  = this.game.add.button(this.bg_mg.bgArray[2].getVarsTrue().center.x - 15, 75, 'taxReduce', this.decTaxHigh, this);
  this.textTaxHigh = this.game.add.text(this.bg_mg.bgArray[1].getVarsTrue().center.x, 78, '$$');
  this.textTaxHigh.font = "Roboto";
  this.textTaxHigh.fontSize = 18;
  this.addTaxHigh  = this.game.add.button(this.bg_mg.bgArray[2].getVarsTrue().center.x + 15, 75, 'taxAdd', this.incTaxHigh, this);
  this.redTaxHigh.anchor.setTo(.5, .5);
  this.textTaxHigh.anchor.setTo(0, .5);
  this.addTaxHigh.anchor.setTo(.5, .5);

	this.game.time.events.add(Phaser.Timer.SECOND * this.taxTime, this.collectTax, this);
    this.hm = new HoverMenu(this.game, 200, 200, this);
    // this.hm.anchor.setTo(0.5, 1);
	// this.hm.visible = false;
	this.game.time.events.add(Phaser.Timer.SECOND * this.moneyChangeFadeDelay, this.fadeMoneyChange, this);
	// this.game.time.events.add(Phaser.Timer.SECOND * this.migrantDelay, this.spawnMigrant, this);

	this.game.input.keyboard.onPressCallback = this.spawnMigrantNoRepeat;
  // console.log(this.game.input.keyboard);
	this.game.input.keyboard.state = this;
	this.game.input.keyboard.utils = Utils;
  this.input.addMoveCallback(this.onMouseMove, this);
  this.personGroup = this.game.add.group();
  this.personGroup.z = 5;
  },
  testFun: function() {
  	// console.log('fun');
  		this.spawnMigrantNoRepeat()
  },
  update: function () {
	// this.bg_mg.update();
	//this.gm.update();
	this.uib.render();
	var happiness = 0;
	  for (var bg in this.bg_mg.bgArray) {
		  for (var group in this.bg_mg.bgArray[bg].group_manager.members) {
			  for (var person in this.bg_mg.bgArray[bg].group_manager.members[group].members) {
				  happiness += this.bg_mg.bgArray[bg].group_manager.members[group].members[person].happiness;
			  }
		  }
	  }
	  happiness /= this.bg_mg.numPeople();
	  this.setHappiness(happiness);
	  happiness -= this.minHappiness;
	  // console.log(happiness);
	  // console.log(happiness);
    this.redTaxLow.x   = this.bg_mg.bgArray[0].getVarsTrue().center.x - 30;
    this.textTaxLow.x  = this.bg_mg.bgArray[0].getVarsTrue().center.x - 15;
    this.addTaxLow.x   = this.bg_mg.bgArray[0].getVarsTrue().center.x + 30;
    this.redTaxMid.x   = this.bg_mg.bgArray[1].getVarsTrue().center.x - 30;
    this.textTaxMid.x  = this.bg_mg.bgArray[1].getVarsTrue().center.x - 15;
    this.addTaxMid.x   = this.bg_mg.bgArray[1].getVarsTrue().center.x + 30;
    this.redTaxHigh.x  = this.bg_mg.bgArray[2].getVarsTrue().center.x - 30;
    this.textTaxHigh.x = this.bg_mg.bgArray[2].getVarsTrue().center.x - 15;
    this.addTaxHigh.x  = this.bg_mg.bgArray[2].getVarsTrue().center.x + 30;

    if (this.curHappiness < this.minHappiness) {
      this.game.state.start('Game_Over');
  	}
  	// console.log(this.moneyChange.alpha);
  },

  onInputDown: function () {
     var bg = this.bg_mg.whereClicked();
     var gm = bg.group_manager;
	   console.log('mouse', this.input.x, this.input.y, 'bg x-y-width-height', bg.x, bg.y, bg.width, bg.height);
     console.log('gm', gm.center.x, gm.center.y, gm.width, gm.height);
  },
  onMouseMove: function () {
    // var here = this.bg_mg.whereClicked();
    // console.log(this.input.x, this.input.y, here.type, here.incomeLevel, here.width, here.height);
  },
  spawnMigrant: function () {
  	// var newMigrant = new Person(this.game, this.game.width / 2, this.game.height + 15);
  	var newMigrant = new Person(this.game, this.game.width / 2 + Math.random() * 800 - 400, this.game.height + 15);
  	this.game.add.existing(newMigrant);
  	var bg = this.bg_mg.bgArray[6];
  	bg.group_manager.addPerson(newMigrant);
    this.personGroup.add(newMigrant);
  	this.game.time.events.add(Phaser.Timer.SECOND * this.migrantDelasy, this.spawnMigrant, this);
  	// console.log(bg)
  },
  spawnMigrantNoRepeat: function () {
  	// console.log(Qthis);
	   var newMigrant = new Person(this.game, this.game.width / 2 + Math.random() * 800 - 400, this.game.height + 15);
  	this.game.add.existing(newMigrant);
  	// console.log(newMigrant);
  	var bg = this.state.bg_mg.bgArray[6];
  	bg.group_manager.addPerson(newMigrant);

  	// console.log(this.utils.ratio(0, 0, 0, .2));
  },
  collectTax: function () {
	  // console.log('collect tax');
	  var taxes = 0;
	  for (var bg in this.bg_mg.bgArray) {
      var diminishing = false;
      var maxNum = 10000;
      var curNum = 0;
      var dimFactor = 1;
      if (bg == 1 || bg == 2) {
        diminishing = true;
        maxNum = this.bg_mg.bgArray[bg - 1];
      }
      for (var group in this.bg_mg.bgArray[bg].group_manager.members) {
	  		// console.log(this.bg_mg.bgArray[bg].group_manager.members[group], this.bg_mg.bgArray[bg].group_manager.members[group].happinessModifier);
			  for (var person in this.bg_mg.bgArray[bg].group_manager.members[group].members) {
				  if (diminishing) {  
            curNum++;
            if (curNum > maxNum) {
              if (curNum > 10) dimFactor = 0;
              else dimFactor = .1 * (10 - curNum);
            }
          }
          if (this.bg_mg.bgArray[bg].group_manager.background.type == 'work') {
            taxes += this.bg_mg.bgArray[bg].group_manager.members[group].members[person].getTax() * dimFactor;
          }
          else {
            taxes += this.bg_mg.bgArray[bg].group_manager.members[group].members[person].getTax();
          }
				  this.bg_mg.bgArray[bg].group_manager.members[group].members[person].ageTick();
			  }
			  if (this.bg_mg.bgArray[bg].group_manager.background.type == 'work') {
			  	this.bg_mg.bgArray[bg].group_manager.members[group].addFatigue(this.fatiguePerTick);
			  } else {
			  	this.bg_mg.bgArray[bg].group_manager.members[group].addFatigue(-1 * this.fatiguePerTick);
			  }
			  if (this.bg_mg.bgArray[bg].group_manager.members[group]) {
			  	// console.log('a');
			  	// console.log(this.bg_mg.bgArray[bg].group_manager.members[group], this.bg_mg.bgArray[bg].group_manager.members[group].happinessModifier);
			  	this.bg_mg.bgArray[bg].group_manager.members[group].applyHappiness();
			  }
		  }
	  }
	  this.addMoney(taxes);
	  this.moneyChange.text = ((taxes >= 0) ? '+' : '-') + '$' + taxes;
	  this.moneyChange.fill = (taxes >= 0) ? '#16fb04' : '#ff0000';
	  this.moneyChange.alpha = 1;
	  this.moneyChangeHold = true;

	  this.game.time.events.add(Phaser.Timer.SECOND * this.taxTime, this.collectTax, this);
  },
  fadeMoneyChange: function () {
  		// console.log(this.moneyChange.alpha);
  		if (this.moneyChangeHold) {
  			this.moneyChangeHold = false;
  			this.game.time.events.add(Phaser.Timer.SECOND * this.moneyChangeHoldDelay, this.fadeMoneyChange, this);
  		} else {
	  		this.moneyChange.alpha -= this.moneyChangeFadeRate;
	  		this.game.time.events.add(Phaser.Timer.SECOND * this.moneyChangeFadeDelay, this.fadeMoneyChange, this);
	  	}
  },
  setHappiness: function (amt) {
	  this.curHappiness = amt;
	  if (!this.happinessIncrementing) {
		  this.game.time.events.add(Phaser.Timer.SECOND * this.happinessUpdateDelay, this.incrementHappiness, this);
		  this.happinessIncrementing = true;
	  }
  },
  incrementHappiness: function () {
	if (this.happinessVal === this.curHappiness) {
		this.happinessIncrementing = false;
		return;
	}
	if (this.curHappiness > this.happinessVal) {
		this.bar.addValue(1);
		this.happinessVal += 1;
	} else if (this.curHappiness < this.happinessVal) {
		this.bar.addValue(-1);
		this.happinessVal -= 1;
	}
	this.game.time.events.add(Phaser.Timer.SECOND * this.happinessUpdateDelay, this.incrementHappiness, this);
  },
  addMoney: function (amt) {
	  this.curMoney += amt;
	  //this.money.text = '$' + newMoney;
	  if (!this.moneyIncrementing) {
		this.game.time.events.add(Phaser.Timer.SECOND * this.moneyUpdateDelay, this.incrementMoney, this);
		this.moneyIncrementing = true;
	  }
  },
  incrementMoney: function () {
	if (this.moneyVal === this.curMoney) {
		this.moneyIncrementing = false;
		return;
	}
	if (this.curMoney > this.moneyVal) {
		this.moneyVal += 10;
	} else if (this.curMoney < this.moneyVal) {
		this.moneyVal -= 10;
	}
	this.money.text = '$' + this.moneyVal;
	this.game.time.events.add(Phaser.Timer.SECOND * this.moneyUpdateDelay, this.incrementMoney, this);
  },
  decTaxLow: function () {
    if (this.taxMod.low == 1) {
      this.taxMod.low = .5;
      this.textTaxLow.text = '$';
    }
    else if (this.taxMod.low == 1.5) {
      this.taxMod.low = 1;
      this.textTaxLow.text = '$$';
    }
  },
  incTaxLow: function () {
    if (this.taxMod.low == .5) {
      this.taxMod.low = 1;
      this.textTaxLow.text = '$$';
    }
    else if (this.taxMod.low == 1) {
      this.taxMod.low = 1.5;
      this.textTaxLow.text = '$$$';
    }
  },
  decTaxMid: function () {
    if (this.taxMod.mid == 1) {
      this.taxMod.mid = .5;
      this.textTaxMid.text = '$';
    }
    else if (this.taxMod.mid == 1.5) {
      this.taxMod.mid = 1;
      this.textTaxMid.text = '$$';
    }
  },
  incTaxMid: function () {
    if (this.taxMod.mid == .5) {
      this.taxMod.mid = 1;
      this.textTaxMid.text = '$$';
    }
    else if (this.taxMod.mid == 1) {
      this.taxMod.mid = 1.5;
      this.textTaxMid.text = '$$$';
    }
  },
  decTaxHigh: function () {
    if (this.taxMod.high == 1) {
      this.taxMod.high = .5;
      this.textTaxHigh.text = '$';
    }
    else if (this.taxMod.high == 1.5) {
      this.taxMod.high = 1;
      this.textTaxHigh.text = '$$';
    }
  },
  incTaxHigh: function () {
    if (this.taxMod.high == .5) {
      this.taxMod.high = 1;
      this.textTaxHigh.text = '$$';
    }
    else if (this.taxMod.high == 1) {
      this.taxMod.high = 1.5;
      this.textTaxHigh.text = '$$$';
    }
  }
};














},{"../entities/background_manager":"C:\\Users\\Matthew D Zimmerman\\Work\\Hackathon\\first_build\\src\\js\\entities\\background_manager.js","../entities/group":"C:\\Users\\Matthew D Zimmerman\\Work\\Hackathon\\first_build\\src\\js\\entities\\group.js","../entities/groupManager":"C:\\Users\\Matthew D Zimmerman\\Work\\Hackathon\\first_build\\src\\js\\entities\\groupManager.js","../entities/hoverMenu":"C:\\Users\\Matthew D Zimmerman\\Work\\Hackathon\\first_build\\src\\js\\entities\\hoverMenu.js","../entities/person":"C:\\Users\\Matthew D Zimmerman\\Work\\Hackathon\\first_build\\src\\js\\entities\\person.js","../entities/uiBuilder":"C:\\Users\\Matthew D Zimmerman\\Work\\Hackathon\\first_build\\src\\js\\entities\\uiBuilder.js","../utils":"C:\\Users\\Matthew D Zimmerman\\Work\\Hackathon\\first_build\\src\\js\\utils.js"}],"C:\\Users\\Matthew D Zimmerman\\Work\\Hackathon\\first_build\\src\\js\\states\\game_over.js":[function(require,module,exports){
var Game_Over = function () {
  this.text = null;
  this.textSmall = null;
};

module.exports = Game_Over;

Game_Over.prototype = {

  create: function () {
    var x = this.game.width / 2;
    var y = this.game.height / 2;

    var style = { font: "Roboto", fontSize: 64, fill: "#000000", align: "center" };
    var smallStyle = { font: "Roboto", fontSize: 32, fill: "#000000", align: "left" };

    this.text = this.add.text(x - 300, y - 200, "Game Over", style);
    this.textSmall = this.add.text(x - 300, y - 100, "your happiness went under 50%\n" + "click to continue", smallStyle);
    this.game.time.events.add(Phaser.Timer.SECOND * 3, this.doThing, this);
  },

  update: function () {

  },

  doThing: function() {
    this.input.onDown.add(this.onDown, this);
  },

  onDown: function () {
    this.game.state.start('Menu');
  }
};
},{}],"C:\\Users\\Matthew D Zimmerman\\Work\\Hackathon\\first_build\\src\\js\\states\\menu.js":[function(require,module,exports){
var Menu = function () {
  this.text = null;
};

module.exports = Menu;

Menu.prototype = {

  create: function () {
    var x = this.game.width / 2;
    var y = this.game.height / 2;

    var style = { font: "Roboto", fontSize: 64, fill: "#000000", align: "center" };

    this.text = this.add.text(x, y, "Click to Start", style);
    this.text.anchor.setTo(.5, .5);
    this.input.onDown.add(this.onDown, this);
  },

  update: function () {
  },

  onDown: function () {
    this.game.state.start(playerState.currentLevel);
  }
};

},{}],"C:\\Users\\Matthew D Zimmerman\\Work\\Hackathon\\first_build\\src\\js\\states\\preloader.js":[function(require,module,exports){
var Preloader = function (game) {
  this.asset = null;
  this.ready = false;
};

module.exports = Preloader;

Preloader.prototype = {

  preload: function () {
    this.asset = this.add.sprite(320, 240, 'preloader');
    this.asset.anchor.setTo(0.5, 0.5);

    this.load.onLoadComplete.addOnce(this.onLoadComplete, this);
    this.load.setPreloadSprite(this.asset);
    this.load.image('testsprite', 'assets/test.png');
    this.load.image('menu_bg', 'assets/menu_bg.png');
    this.load.image('background', 'assets/sectorBG.png')
    this.load.image('person', 'assets/person.png');
    this.load.image('selection', 'assets/selection.png');
    this.load.image('book', 'assets/book.png');
    this.load.image('young', 'assets/young.png');
    this.load.image('adult', 'assets/adult.png');
    this.load.image('old', 'assets/old.png');
    this.load.image('taxReduce', 'assets/taxReduce.png');
    this.load.image('taxAdd', 'assets/taxAdd.png');
    this.load.image('lock', 'assets/lock.png');
    this.load.spritesheet('chevrons', 'assets/chevron_sheet.png', 40, 50);
    // this.load.atlasJSONHash('chevrons', 'assets/chevrons.png', 'assets/chevrons.json');
    this.load.atlasJSONHash('ages', 'assets/ages.png', 'assets/ages.json');
    this.load.image('happyface', 'assets/happyface_better.png');
    this.load.image('bordered', 'assets/bordered.png');
    this.load.image('low_dollar', 'assets/low_dollar.png');
    this.load.image('med_dollar', 'assets/med_dollar.png');
    this.load.image('high_dollar', 'assets/high_dollar.png');
    this.load.script('webfont', '//ajax.googleapis.com/ajax/libs/webfont/1.4.7/webfont.js');
  },

  create: function () {
    this.asset.cropEnabled = false;
  },

  update: function () {
    if (!!this.ready) {
      this.game.state.start('Game');
    }
  },

  onLoadComplete: function () {
    this.ready = true;
  }
};

},{}],"C:\\Users\\Matthew D Zimmerman\\Work\\Hackathon\\first_build\\src\\js\\states\\splash.js":[function(require,module,exports){
var Splash = function () {
};

module.exports = Splash;

Splash.prototype = {
  create: function () {
  }
};
},{}],"C:\\Users\\Matthew D Zimmerman\\Work\\Hackathon\\first_build\\src\\js\\utils.js":[function(require,module,exports){
var Utils = {
    containsObject: function(obj, list) {
        var i;
        for (i = 0; i < list.length; i++) {
            if (list[i] === obj) {
                return true;
            }
        }

        return false;
    },
	hypotenuse: function(a, b) {
		return Math.sqrt(Math.pow(a, 2) + Math.pow(b, 2));
	},
	ratio: function(a, b, c, min) {
		if (a == 0 && b == 0 && c == 0) {
			return {a : 1 / 3, b : 1 / 3, c : 1 / 3};
		}
		var sum = a + b + c
		// var aRatio = (a == 0) ? 0 : a / sum;
		// var bRatio = (b == 0) ? 0 : b / sum;
		// var cRatio = (c == 0) ? 0 : c / sum;
		var aRatio = a / sum;
		var bRatio = b / sum;
		var cRatio = c / sum;

		// if (arguments.length === 1) {
		// 	return [a / a];
		// }
		// else if (arguments.length === 2) {
		// 	return [a / (a + b), b / (a + b)];
		// }
		// else if (arguments.length === 3) {
		// 	return [a / (a + b + c), b / (a + b + c), c / (a + b + c)];
		// }
		// else {
		// 	return [];
		// }
		// console.log('util recieves', a, b, c, aRatio, bRatio, cRatio);
		if (aRatio < min) {
			if (bRatio < min) {
				// console.log(aRatio, bRatio, cRatio);
				var diffA = min - aRatio;
				var diffB = min - bRatio;
				// console.log(cRatio, diffA, diffB);
				cRatio -= diffA + diffB;
				aRatio = min;
				bRatio = min;
			} else if (cRatio < min) {
				var diffA = min - aRatio;
				var diffC = min - cRatio;
				// console.log(aRatio, bRatio, diffA, diffC);
				bRatio -= diffA + diffC;
				// console.log(bRatio);
				aRatio = min;
				cRatio = min;
			} else {
				var diff = min - aRatio;
				if (bRatio - diff / 2 < min) {
					var allowed = bRatio - min;
					var needed = diff - allowed;
					bRatio = min;
					cRatio -= needed;
					aRatio = min;
				} else if (cRatio - diff / 2 < min) {
					var allowed = cRatio - min;
					var needed = diff - allowed;
					cRatio = min;
					bRatio -= needed;
					aRatio = min;
				} else {
					aRatio = min;
					bRatio -= diff / 2;
					cRatio -= diff / 2;
				}
			}
		} else if (bRatio < min) {
			if (cRatio < min) {
				var diffB = min - bRatio;
				var diffC = min - cRatio;
				aRatio -= diffB + diffC;
				bRatio = min;
				cRatio = min;
			} else {
				var diff = min - bRatio;
				if (aRatio - diff / 2 < min) {
					var allowed = aRatio - min;
					var needed = diff - allowed;
					aRatio = min;
					cRatio -= needed;
					bRatio = min;
				} else if (cRatio - diff / 2 < min) {
					var allowed = cRatio - min;
					var needed = diff - allowed;
					cRatio = min;
					aRatio -= needed;
					bRatio = min;
				} else {
					bRatio = min;
					aRatio -= diff / 2;
					cRatio -= diff / 2;
				}
			}
		} else if (cRatio < min) {
			// console.log('case a');
			var diff = min - cRatio;
			if (aRatio - diff / 2 < min) {
				// console.log('case b');
				var allowed = aRatio - min;
				var needed = diff - allowed;
				aRatio = min;
				bRatio -= needed;
				cRatio = min;
			} else if (bRatio - diff / 2 < min) {
				// console.log('case c');
				var allowed = bRatio - min;
				var needed = diff - allowed;
				bRatio = min;
				aRatio -= needed;
				cRatio = min;
			} else {
				// console.log('case d');
				cRatio = min;
				aRatio -= diff / 2;
				cRatio -= diff / 2;
			}
		}
		// console.log('util returns', aRatio, bRatio, cRatio);
		return {a : aRatio, b : bRatio, c : cRatio};
	}
};


module.exports = Utils;
},{}]},{},["C:\\Users\\Matthew D Zimmerman\\Work\\Hackathon\\first_build\\src\\js\\main.js"])
<<<<<<< HEAD
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvZW50aXRpZXMvUHJvZ3Jlc3NCYXIuanMiLCJzcmMvanMvZW50aXRpZXMvYmFja2dyb3VuZC5qcyIsInNyYy9qcy9lbnRpdGllcy9iYWNrZ3JvdW5kX21hbmFnZXIuanMiLCJzcmMvanMvZW50aXRpZXMvZ3JvdXAuanMiLCJzcmMvanMvZW50aXRpZXMvZ3JvdXBNYW5hZ2VyLmpzIiwic3JjL2pzL2VudGl0aWVzL2hvdmVyTWVudS5qcyIsInNyYy9qcy9lbnRpdGllcy9wZXJzb24uanMiLCJzcmMvanMvZW50aXRpZXMvdWlCdWlsZGVyLmpzIiwic3JjL2pzL21haW4uanMiLCJzcmMvanMvc3RhdGVzL2Jvb3QuanMiLCJzcmMvanMvc3RhdGVzL2dhbWUuanMiLCJzcmMvanMvc3RhdGVzL2dhbWVfb3Zlci5qcyIsInNyYy9qcy9zdGF0ZXMvbWVudS5qcyIsInNyYy9qcy9zdGF0ZXMvcHJlbG9hZGVyLmpzIiwic3JjL2pzL3N0YXRlcy9zcGxhc2guanMiLCJzcmMvanMvdXRpbHMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMvR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3pDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFWQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzlVQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDN0hBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMzTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzVGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzNDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM3QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzVVQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiLy9OT1RFOiBET04nVCBVU0UgdGhpcyBjb2RlIHRvIGNyZWF0ZSBhIFByb2dyZXNzQmFyLiBJbnN0ZWFkLCB1c2UgdGhlIFVJQnVpbGRlciBvYmplY3QgYW5kIGNhbGwgYnVpbGRQcm9ncmVzc0JhclxyXG5cclxudmFyIFByb2dyZXNzQmFyID0gZnVuY3Rpb24oc2V0VHlwZSwgc2V0TWF4VmFsdWUsIHNldEdyYXBoaWNzLCBzZXRSZW5kZXJhYmxlcykge1xyXG5cdHRoaXMudHlwZSA9IHNldFR5cGU7IC8vVHdvIHR5cGVzLCBcImdyb3dpbmdcIiAoc3RhcnRzIGF0IDAsIHRyaWdnZXJzIGV2ZW50IHdoZW4gZnVsbCkgXHJcblx0XHRcdFx0XHRcdCAvL2FuZCBcInNocmlua2luZ1wiIChzdGFydHMgZnVsbCwgdHJpZ2dlcnMgYXQgMClcclxuXHR0aGlzLmJnQm9yZGVyU2l6ZSA9IDI7XHRcdFx0Ly9kZWZhdWx0IHNpemUgb2YgYmFja2dyb3VuZCBib3JkZXJcclxuXHR0aGlzLmJnQm9yZGVyQ29sb3IgPSAweDAwMDAwO1x0Ly9kZWZhdWx0IGNvbG9yIG9mIGJhY2tncm91bmQgYm9yZGVyXHJcblx0dGhpcy5iZ0NvbG9yID0gMHhmZmZmZmY7XHRcdC8vZGVmYXVsdCBjb2xvciBvZiBiYWNrZ3JvdW5kXHJcblx0dGhpcy5wYWRkaW5nSG9yaXogPSAxMDtcdFx0XHQvL2RlZmF1bHQgc3VtIG9mIHBhZGRpbmcgb24gbGVmdCBhbmQgcmlnaHQgc2lkZSBpbm5lciB2YWx1ZSBiYXJcclxuXHR0aGlzLnBhZGRpbmdWZXJ0ID0gMTA7XHRcdFx0Ly9kZWZhdWx0IHN1bSAoaS5lLiBoYWxmIG9uIGVhY2ggc2lkZSkgb2YgdmVydGljYWwgcGFkZGluZyBvZiBpbm5lciB2YWx1ZSBiYXJcclxuXHQvLyB0aGlzLnZhbHVlQm9yZGVyU2l6ZSA9IDE7XHRcdC8vZGVmYXVsdCBzaXplIG9mIHZhbHVlIGJvcmRlclxyXG5cdC8vIHRoaXMudmFsdWVCb3JkZXJDb2xvciA9IDB4ODg4OEZGOyAvL2RlZmF1bHQgY29sb3Igb2YgdmFsdWUgYm9yZGVyXHJcblx0dGhpcy52YWx1ZUNvbG9yID0gMHgwMDAwMDA7XHRcdC8vZGVmYXVsdCBjb2xvciBvZiBpbm5lciB2YWx1ZSBiYXJcclxuXHR0aGlzLnggPSBudWxsO1xyXG5cdHRoaXMueSA9IG51bGw7XHJcblx0dGhpcy53aWR0aCA9IG51bGw7XHJcblx0dGhpcy5oZWlnaHQgPSBudWxsO1xyXG5cdHRoaXMubWF4VmFsdWUgPSBzZXRNYXhWYWx1ZTtcclxuXHR0aGlzLmdyYXBoaWNzID0gc2V0R3JhcGhpY3M7IC8vc3RvcmUgZ3JhcGhpY3MgY2xhc3MgKHVzZWQgdG8gZHJhdyBiYXIpXHJcblx0dGhpcy5yZW5kZXJhYmxlcyA9IHNldFJlbmRlcmFibGVzO1xyXG5cdFxyXG5cdHRoaXMub25FdmVudCA9IGZ1bmN0aW9uKCkge307IC8vb3ZlcndyaXRlIHRoaXMgZnVuY3Rpb24gdG8gbWFrZSB3aGF0ZXZlciB5b3Ugd2FudCBoYXBwZW4gd2hlbiBwcm9ncmVzc0JhciByZWFjaGVzIGxpbWl0XHJcblx0XHJcblx0Ly9zd2l0Y2godGhpcy50eXBlKSB7XHJcblx0Ly9jYXNlICdncm93aW5nJyA6IFxyXG5cdGlmKHNldFR5cGUgPT09ICdncm93aW5nJykge1xyXG5cdFx0dGhpcy52YWx1ZSA9IDA7XHJcblx0XHQvL3RyeVRyaWdnZXIgaXMgY2FsbGVkIGF1dG9tYXRpY2FsbHkgd2hlbiB5b3UgYWRkL3N1YnRyYWN0IHZhbHVlLCBhbmQgd2lsbCB0cmlnZ2VyIHRoZSBvbkV2ZW50KCkgZnVuY3Rpb25cclxuXHRcdHRoaXMudHJ5VHJpZ2dlciA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZih0aGlzLnZhbHVlID49IHRoaXMubWF4VmFsdWUpIHtcclxuXHRcdFx0XHR0aGlzLm9uRXZlbnQoKTtcclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHRcdC8vYnJlYWs7XHJcblx0fVxyXG5cdGVsc2UgaWYoc2V0VHlwZSA9PT0gJ3Nocmlua2luZycpIHtcclxuXHQvL2Nhc2UgJ3Nocmlua2luZycgOlxyXG5cdFx0dGhpcy52YWx1ZSA9IHRoaXMubWF4VmFsdWU7XHJcblx0XHR0aGlzLnRyeVRyaWdnZXIgPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0aWYodGhpcy52YWx1ZSA8PSAwKSB7XHJcblx0XHRcdFx0dGhpcy5vbkV2ZW50KCk7XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblx0fVxyXG59O1xyXG5cclxuUHJvZ3Jlc3NCYXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gUHJvZ3Jlc3NCYXI7XHJcblxyXG5Qcm9ncmVzc0Jhci5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uKCkge1xyXG5cdHRoaXMuZ3JhcGhpY3MuY2xlYXIoKTtcclxuXHR0aGlzLnJlbmRlcmFibGVzLnVuc3Vic2NyaWJlKHRoaXMpO1xyXG59O1xyXG5cclxuLy9UbyBzdWJ0cmFjdCB2YWx1ZSwganVzdCB1c2UgbmVnYXRpdmUgbnVtYmVycyBhcyBhcmd1bWVudCBpLmUuIGZvby5hZGRWYWx1ZSgtNSk7XHJcblByb2dyZXNzQmFyLnByb3RvdHlwZS5hZGRWYWx1ZSA9IGZ1bmN0aW9uIChhZGRUaGlzKSB7XHJcblx0dGhpcy52YWx1ZSArPSBhZGRUaGlzO1xyXG5cdGlmKHRoaXMudmFsdWUgPiB0aGlzLm1heFZhbHVlKSB7XHJcblx0XHR0aGlzLnZhbHVlID0gdGhpcy5tYXhWYWx1ZTtcclxuXHR9XHJcblx0aWYodGhpcy52YWx1ZSA8IDApIHtcclxuXHRcdHRoaXMudmFsdWUgPSAwO1xyXG5cdH1cclxuXHR0aGlzLnRyeVRyaWdnZXIoKTtcclxufTtcclxuXHJcbi8vU2V0cyB0aGUgbG9jYXRpb24gd2hlcmUgcHJvZ3Jlc3MgYmFyIGlzIHJlbmRlcmVkXHJcblByb2dyZXNzQmFyLnByb3RvdHlwZS5zZXRMb2NhdGlvbiA9IGZ1bmN0aW9uKHNldFgsIHNldFkpIHtcclxuXHR0aGlzLnggPSBzZXRYO1xyXG5cdHRoaXMueSA9IHNldFk7XHJcbn07XHJcblxyXG4vL1NldHMgdGhlIHNpemUgb2YgdGhlIHByb2dyZXNzIGJhclxyXG5Qcm9ncmVzc0Jhci5wcm90b3R5cGUuc2V0U2l6ZSA9IGZ1bmN0aW9uKHNldFdpZHRoLCBzZXRIZWlnaHQpIHtcclxuXHR0aGlzLndpZHRoID0gc2V0V2lkdGg7XHJcblx0dGhpcy5oZWlnaHQgPSBzZXRIZWlnaHQ7XHJcbn07XHJcblxyXG5Qcm9ncmVzc0Jhci5wcm90b3R5cGUuc2V0U3R5bGUgPSBmdW5jdGlvbihiZ0JvcmRlclNpemUsIGJnQm9yZGVyQ29sb3IsIGJnQ29sb3IsIHBhZGRpbmdIb3JpeiwgcGFkZGluZ1ZlcnQsIHZhbHVlQm9yZGVyU2l6ZSwgdmFsdWVCb3JkZXJDb2xvciwgdmFsdWVDb2xvcikge1xyXG5cdHRoaXMuYmdCb3JkZXJTaXplID0gYmdCb3JkZXJTaXplO1xyXG5cdHRoaXMuYmdCb3JkZXJDb2xvciA9IGJnQm9yZGVyQ29sb3I7XHJcblx0dGhpcy5iZ0NvbG9yID0gYmdDb2xvcjtcclxuXHR0aGlzLnBhZGRpbmdIb3JpeiA9IHBhZGRpbmdIb3JpejtcclxuXHR0aGlzLnBhZGRpbmdWZXJ0ID0gcGFkZGluZ1ZlcnQ7XHJcblx0dGhpcy52YWx1ZUJvcmRlclNpemUgPSB2YWx1ZUJvcmRlclNpemU7XHJcblx0dGhpcy52YWx1ZUJvcmRlckNvbG9yID0gdmFsdWVCb3JkZXJDb2xvcjtcclxuXHR0aGlzLnZhbHVlQ29sb3IgPSB2YWx1ZUNvbG9yO1xyXG59O1xyXG5cclxuLy91cGRhdGUgZm9yIHByb2dyZXNzIGJhciwgY2FsbGVkIGp1c3QgYmVmb3JlIGRyYXdpbmcgcHJvZ3Jlc3MgYmFyXHJcbi8vT3ZlcndyaXRlIHRoaXMgZnVuY3Rpb24gaWYgZGVzaXJlZFxyXG5Qcm9ncmVzc0Jhci5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24oKSB7fTtcclxuXHJcbi8vUmVuZGVycyBwcm9ncmVzc0JhclxyXG5Qcm9ncmVzc0Jhci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24oKSB7XHJcblx0dGhpcy51cGRhdGUoKTtcclxuXHR0aGlzLmdyYXBoaWNzLmNsZWFyKCk7XHJcblx0Ly9EcmF3IGJhY2tncm91bmQgb2YgYmFyXHJcblx0dGhpcy5ncmFwaGljcy5saW5lU3R5bGUodGhpcy5iZ0JvcmRlclNpemUsIHRoaXMuYmdCb3JkZXJDb2xvciwgMSk7IC8vc2V0cyBib3JkZXIgY29sb3IgYW5kIHNpemVcclxuXHR0aGlzLmdyYXBoaWNzLmJlZ2luRmlsbCh0aGlzLmJnQ29sb3IpOyAvL3NldHMgY29sb3Igb2YgYmFja2dyb3VuZCBmaWxsXHJcblx0dGhpcy5ncmFwaGljcy5kcmF3UmVjdCh0aGlzLngtdGhpcy53aWR0aC8yLCB0aGlzLnktdGhpcy5oZWlnaHQvMiwgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xyXG5cdHRoaXMuZ3JhcGhpY3MuZW5kRmlsbCgpO1xyXG5cdC8vRHJhdyB2YWx1ZSBvZiBiYXJcclxuXHR2YXIgcGVyY2VudGFnZSA9IHRoaXMudmFsdWUgLyB0aGlzLm1heFZhbHVlO1xyXG5cdHZhciBiYXJXaWR0aCA9IHRoaXMud2lkdGggLSB0aGlzLnBhZGRpbmdIb3JpejtcclxuXHR2YXIgYmFySGVpZ2h0ID0gdGhpcy5oZWlnaHQgLSB0aGlzLnBhZGRpbmdWZXJ0O1xyXG5cdHRoaXMuZ3JhcGhpY3MubGluZVN0eWxlKHRoaXMudmFsdWVCb3JkZXJTaXplLCB0aGlzLnZhbHVlQm9yZGVyQ29sb3IsIDEpO1xyXG5cdHRoaXMuZ3JhcGhpY3MuYmVnaW5GaWxsKHRoaXMudmFsdWVDb2xvcik7XHJcblx0dGhpcy5ncmFwaGljcy5kcmF3UmVjdCh0aGlzLngtKGJhcldpZHRoLzIpLCB0aGlzLnktKGJhckhlaWdodC8yKSwgYmFyV2lkdGgqcGVyY2VudGFnZSwgYmFySGVpZ2h0KTtcclxuXHR0aGlzLmdyYXBoaWNzLmVuZEZpbGwoKTtcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gUHJvZ3Jlc3NCYXI7IiwidmFyIEdyb3VwX01hbmFnZXIgPSByZXF1aXJlKCcuL2dyb3VwTWFuYWdlcicpO1xyXG52YXIgUGVyc29uID0gcmVxdWlyZSgnLi9wZXJzb24nKTtcclxuXHJcbnZhciBCYWNrZ3JvdW5kID0gZnVuY3Rpb24gKGdhbWUsIGluY29tZSwgdHlwZSwgc3RhdGUpIHtcclxuICAgIFBoYXNlci5TcHJpdGUuY2FsbCh0aGlzLCBnYW1lLCAwLCAwLCAnYmFja2dyb3VuZCcpO1xyXG4gICAgZ2FtZS5hZGQuZXhpc3RpbmcodGhpcyk7XHJcbiAgICB0aGlzLmdyb3VwX21hbmFnZXIgPSBuZXcgR3JvdXBfTWFuYWdlcih0aGlzLmdhbWUsIHN0YXRlKTtcclxuXHR0aGlzLmdyb3VwX21hbmFnZXIuYmFja2dyb3VuZCA9IHRoaXM7XHJcbiAgIFx0dGhpcy50eXBlID0gdHlwZTtcclxuICAgIHRoaXMuaW5jb21lTGV2ZWwgPSBpbmNvbWU7XHJcblx0dGhpcy5zdGF0ZSA9IHN0YXRlO1xyXG4gICAgdGhpcy5hbmNob3Iuc2V0VG8oMC41LCAwLjUpO1xyXG59O1xyXG5cclxuQmFja2dyb3VuZC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFBoYXNlci5TcHJpdGUucHJvdG90eXBlKTtcclxuQmFja2dyb3VuZC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBCYWNrZ3JvdW5kO1xyXG5cclxuQmFja2dyb3VuZC5wcm90b3R5cGUuZ2V0VmFyc1RydWUgPSBmdW5jdGlvbigpIHtcclxuICAgIHJldHVybiB7d2lkdGggOiB0aGlzLndpZHRoLCBoZWlnaHQgOiB0aGlzLmhlaWdodCwgY2VudGVyIDoge3ggOiB0aGlzLngsIHkgOiB0aGlzLnl9fTtcclxufTtcclxuXHJcbkJhY2tncm91bmQucHJvdG90eXBlLm51bVBlb3BsZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuZ3JvdXBfbWFuYWdlci5udW1QZW9wbGUoKTtcclxufTtcclxuXHJcbkJhY2tncm91bmQucHJvdG90eXBlLnVwZGF0ZVZhcnMgPSBmdW5jdGlvbih2YXJzKSB7XHJcbiAgICAvLyBjb25zb2xlLmxvZyh2YXJzKTtcclxuICAgIC8vIGNvbnNvbGUubG9nKHRoaXMudHlwZSwgdGhpcy5pbmNvbWVMZXZlbCwgdmFycy53aWR0aCwgdmFycy5oZWlnaHQsIHZhcnMuY2VudGVyKTtcclxuICAgIHRoaXMueCA9IHZhcnMuY2VudGVyLnhcclxuICAgIHRoaXMueSA9IHZhcnMuY2VudGVyLnkrIHRoaXMubXlNYW5hZ2VyLmJvcmRlcjtcclxuICAgIHRoaXMud2lkdGggPSB2YXJzLndpZHRoO1xyXG4gICAgdGhpcy5oZWlnaHQgPSB2YXJzLmhlaWdodDtcclxuICAgIHRoaXMuZ3JvdXBfbWFuYWdlci51cGRhdGVWYXJzKCk7XHJcbn07XHJcblxyXG5CYWNrZ3JvdW5kLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbigpIHtcclxuICAgIHRoaXMuZ3JvdXBfbWFuYWdlci51cGRhdGUoKTtcclxufTtcclxuXHJcblxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBCYWNrZ3JvdW5kOyIsIi8vQ29udHJvbHMgYmFja2dyb3VuZCBlbGVtZW50c1xyXG5cclxudmFyIEJhY2tncm91bmQgPSByZXF1aXJlKCcuL2JhY2tncm91bmQnKTtcclxudmFyIFBlcnNvbiA9IHJlcXVpcmUoJy4vcGVyc29uJyk7XHJcbnZhciB1dGlsID0gcmVxdWlyZSgnLi4vdXRpbHMnKTtcclxuXHJcbnZhciBHcm91cCA9IHJlcXVpcmUoJy4vZ3JvdXAnKTtcclxuXHJcbnZhciBCYWNrZ3JvdW5kX01hbmFnZXIgPSBmdW5jdGlvbihnYW1lLCBzdGF0ZSkge1xyXG5cdHRoaXMuZ2FtZSA9IGdhbWU7XHJcblx0dGhpcy5zdGF0ZSA9IHN0YXRlO1xyXG5cdC8vQ3JlYXRlIGFycmF5IG9mIGJhY2tncm91bmRzXHJcblx0dGhpcy5iZ0FycmF5ID0gW1xyXG5cdFx0bmV3IEJhY2tncm91bmQodGhpcy5nYW1lLCBQZXJzb24uRURVTEVWRUwubG93ICwgJ3dvcmsnICwgc3RhdGUpLFx0Ly8gdGhpcy5iZ0FycmF5WzBdID09IHdvcmtMb3dcclxuXHRcdG5ldyBCYWNrZ3JvdW5kKHRoaXMuZ2FtZSwgUGVyc29uLkVEVUxFVkVMLm1pZCAsICd3b3JrJyAsIHN0YXRlKSxcdC8vIHRoaXMuYmdBcnJheVsxXSA9PSB3b3JrTWlkXHJcblx0XHRuZXcgQmFja2dyb3VuZCh0aGlzLmdhbWUsIFBlcnNvbi5FRFVMRVZFTC5oaWdoLCAnd29yaycgLCBzdGF0ZSksXHQvLyB0aGlzLmJnQXJyYXlbMl0gPT0gd29ya01pZFxyXG5cdFx0bmV3IEJhY2tncm91bmQodGhpcy5nYW1lLCBQZXJzb24uRURVTEVWRUwubG93ICwgJ2hvdXNlJywgc3RhdGUpLFx0Ly8gdGhpcy5iZ0FycmF5WzNdID09IGhvdXNlTG93XHJcblx0XHRuZXcgQmFja2dyb3VuZCh0aGlzLmdhbWUsIFBlcnNvbi5FRFVMRVZFTC5taWQgLCAnaG91c2UnLCBzdGF0ZSksXHQvLyB0aGlzLmJnQXJyYXlbNF0gPT0gaG91c2VNaWRcclxuXHRcdG5ldyBCYWNrZ3JvdW5kKHRoaXMuZ2FtZSwgUGVyc29uLkVEVUxFVkVMLmhpZ2gsICdob3VzZScsIHN0YXRlKSxcdC8vIHRoaXMuYmdBcnJheVs1XSA9PSBob3VzZU1pZFxyXG5cdFx0bmV3IEJhY2tncm91bmQodGhpcy5nYW1lLCAnJywgICAgICAgICAgICAgICd1bmVtcGxveWVkJywgc3RhdGUpXHRcdC8vIHRoaXMuYmdBcnJheVs2XSA9PSB1bmVtcGxveWVkXHJcblx0XTtcclxuXHRmb3IgKGJnIGluIHRoaXMuYmdBcnJheSkge1xyXG5cdFx0dGhpcy5iZ0FycmF5W2JnXS5teU1hbmFnZXIgPSB0aGlzO1xyXG5cdH1cclxuXHRcclxuXHRmb3IgKHZhciBpIGluIHRoaXMuYmdBcnJheSkge1xyXG5cdFx0aWYgKHRoaXMuYmdBcnJheVtpXS50eXBlID09ICd3b3JrJykge1xyXG5cdFx0XHRpZiAodGhpcy5iZ0FycmF5W2ldLmluY29tZUxldmVsID09PSBQZXJzb24uRURVTEVWRUwubG93KSB7XHJcblx0XHRcdFx0dGhpcy5iZ0FycmF5W2ldLnRpbnQgPSAweGVkNWM1YTtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIGlmICh0aGlzLmJnQXJyYXlbaV0uaW5jb21lTGV2ZWwgPT09IFBlcnNvbi5FRFVMRVZFTC5taWQpIHtcclxuXHRcdFx0XHR0aGlzLmJnQXJyYXlbaV0udGludCA9IDB4NmFlMjQ2O1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2UgaWYgKHRoaXMuYmdBcnJheVtpXS5pbmNvbWVMZXZlbCA9PT0gUGVyc29uLkVEVUxFVkVMLmhpZ2gpIHtcclxuXHRcdFx0XHR0aGlzLmJnQXJyYXlbaV0udGludCA9IDB4MmI1OWUyO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRlbHNlIGlmICh0aGlzLmJnQXJyYXlbaV0udHlwZSA9PSAnaG91c2UnKSB7XHJcblx0XHRcdGlmICh0aGlzLmJnQXJyYXlbaV0uaW5jb21lTGV2ZWwgPT09IFBlcnNvbi5FRFVMRVZFTC5sb3cpIHtcclxuXHRcdFx0XHR0aGlzLmJnQXJyYXlbaV0udGludCA9IDB4ZWQ4MTgwO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2UgaWYgKHRoaXMuYmdBcnJheVtpXS5pbmNvbWVMZXZlbCA9PT0gUGVyc29uLkVEVUxFVkVMLm1pZCkge1xyXG5cdFx0XHRcdHRoaXMuYmdBcnJheVtpXS50aW50ID0gMHg5NGVhNzk7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSBpZiAodGhpcy5iZ0FycmF5W2ldLmluY29tZUxldmVsID09PSBQZXJzb24uRURVTEVWRUwuaGlnaCkge1xyXG5cdFx0XHRcdHRoaXMuYmdBcnJheVtpXS50aW50ID0gMHg1NDc2ZGQ7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdGVsc2UgeyAvLyBVbmVtcGxveWVkIGJhY2tncm91bmRcclxuXHRcdFx0dGhpcy5iZ0FycmF5W2ldLnRpbnQgPSAweDgwODA4MDtcclxuXHRcdH1cclxuXHRcdC8vIHRoaXMuYm9yZGVyID0gMTAwO1xyXG5cdH1cclxuXHR0aGlzLmJvcmRlciA9IDEwMDtcclxuXHR0aGlzLm1pblJhdGlvID0gLjI7XHJcblx0dGhpcy51cGRhdGVSYXRpb3MoKTtcclxufTtcclxuXHJcbkJhY2tncm91bmRfTWFuYWdlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBCYWNrZ3JvdW5kX01hbmFnZXI7XHJcblxyXG5CYWNrZ3JvdW5kX01hbmFnZXIucHJvdG90eXBlLnNlbmRUbyA9IGZ1bmN0aW9uKHNvdXJjZSwgZGVzdGluYXRpb24sIGdyb3VwKSB7XHJcblx0aWYgKGRlc3RpbmF0aW9uID09PSBudWxsKSB7XHJcblx0XHRyZXR1cm47XHJcblx0fVxyXG5cdHZhciB0cmFuc1R5cGUgPSB0aGlzLnRyYW5zZmVyVHlwZShzb3VyY2UsIGRlc3RpbmF0aW9uLCBncm91cClcclxuXHQvLyBjb25zb2xlLmxvZyhzb3VyY2UsIGRlc3RpbmF0aW9uLCBncm91cCwgdHJhbnNUeXBlKTtcclxuXHRpZiAodHJhbnNUeXBlLmNhbikge1x0Ly8gQ2hlY2sgaWYgdGhleSBjYW4gdHJhbnNmZXIgdXBcclxuXHRcdC8vIGNvbnNvbGUubG9nKCdjYW4nKTtcclxuXHRcdHNvdXJjZS5ncm91cF9tYW5hZ2VyLnRyYW5zZmVyKGRlc3RpbmF0aW9uLmdyb3VwX21hbmFnZXIsIGdyb3VwKTtcclxuXHRcdGlmICh0cmFuc1R5cGUuZWR1Y2F0ZSkge1xyXG5cdFx0XHRncm91cC5zdGFydEVkdWNhdGlvbigpO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy51cGRhdGVSYXRpb3MoZGVzdGluYXRpb24pO1xyXG4gICAgICAgIGdyb3VwLmhhcHBpbmVzc01vZGlmaWVyID0gdHJhbnNUeXBlLmhhcHBpbmVzc01vZGlmaWVyO1xyXG5cdH1cclxuXHQvLyBjb25zb2xlLmxvZyhncm91cC5oYXBwaW5lc3NNb2RpZmllcik7XHJcbn07XHJcbkJhY2tncm91bmRfTWFuYWdlci5wcm90b3R5cGUubnVtUGVvcGxlID0gZnVuY3Rpb24oKSB7XHJcblx0dmFyIGNvdW50ID0gMDtcclxuXHRmb3IgKHZhciBpIGluIHRoaXMuYmdBcnJheSkge1xyXG5cdFx0Y291bnQgKz0gdGhpcy5iZ0FycmF5W2ldLmdyb3VwX21hbmFnZXIubnVtUGVvcGxlKCk7XHJcblx0fVxyXG5cdHJldHVybiBjb3VudDtcclxufTtcclxuQmFja2dyb3VuZF9NYW5hZ2VyLnByb3RvdHlwZS50cmFuc2ZlclR5cGUgPSBmdW5jdGlvbihzb3VyY2UsIGRlc3RpbmF0aW9uLCBncm91cCkge1xyXG4gICAgaWYgKGRlc3RpbmF0aW9uID09IG51bGwpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblx0dmFyIGdyb3VwRWR1ID0gZ3JvdXAubWVtYmVyc1swXS5lZHVMZXZlbDtcclxuXHR2YXIgY2FuID0gdGhpcy5jYW5UcmFuc2Zlcihzb3VyY2UsIGRlc3RpbmF0aW9uLCBncm91cCk7XHJcblx0Ly8gY29uc29sZS5sb2coZGVzdGluYXRpb24pO1xyXG5cdC8vIGNvbnNvbGUubG9nKGRlc3RpbmF0aW9uLnR5cGUsIGRlc3RpbmF0aW9uLmluY29tZUxldmVsKTtcclxuXHR2YXIgZWR1Y2F0ZSA9IChkZXN0aW5hdGlvbi50eXBlID09PSAnaG91c2UnICYmIGRlc3RpbmF0aW9uLmluY29tZUxldmVsKSA+IGdyb3VwRWR1O1xyXG4gICAgdmFyIGhhcHBpbmVzc01vZGlmaWVyID0gMDtcclxuICAgIGlmICh0aGlzLnN0YXRlLmN1ck1vbmV5IDwgMCkge1xyXG4gICAgXHRoYXBwaW5lc3NNb2RpZmllciAtPSAxO1xyXG4gICAgXHR0aGlzLm5lZ01vbmV5ID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHRoaXMubmVnTW9uZXkpe1xyXG4gICAgXHRoYXBwaW5lc3NNb2RpZmllciArPSAxO1xyXG4gICAgfVxyXG4gICAgaWYgKGRlc3RpbmF0aW9uLnR5cGUgPT0gJ3VuZW1wbG95ZWQnICYmIHNvdXJjZS50eXBlICE9ICd1bmVtcGxveWVkJykge1xyXG4gICAgXHQvLyBjb25zb2xlLmxvZygndW5lbXBsb3ltZW50Jyk7XHJcbiAgICAgICAgaGFwcGluZXNzTW9kaWZpZXIgLT0gMTtcclxuICAgIH1cclxuICAgIGlmIChkZXN0aW5hdGlvbi5pbmNvbWVMZXZlbCA8IGdyb3VwRWR1KSB7XHJcbiAgICBcdC8vIGNvbnNvbGUubG9nKCdlZHVjYXRpb24nKTtcclxuICAgICAgICBoYXBwaW5lc3NNb2RpZmllciAtPSBncm91cEVkdSAtIGRlc3RpbmF0aW9uLmluY29tZUxldmVsO1xyXG4gICAgfVxyXG4gICAgaWYgKGRlc3RpbmF0aW9uLnR5cGUgPT0gJ2hvdXNlJykge1xyXG4gICAgXHQvLyBjb25zb2xlLmxvZygnaG91c2luZycpO1xyXG4gICAgXHRoYXBwaW5lc3NNb2RpZmllciArPSAxO1xyXG4gICAgfVxyXG4gICAgaWYgKGRlc3RpbmF0aW9uLnR5cGUgPT0gJ3dvcmsnKSB7XHJcbiAgICBcdC8vIGNvbnNvbGUubG9nKCd0YXgnLCBkZXN0aW5hdGlvbi5pbmNvbWVMZXZlbCwgdGhpcy5zdGF0ZS50YXhNb2QubG93KTtcclxuICAgIFx0aWYgKGRlc3RpbmF0aW9uLmluY29tZUxldmVsID09IDApIHtcclxuXHQgICAgXHRpZiAodGhpcy5zdGF0ZS50YXhNb2QubG93ID09IC41KSB7XHJcblx0ICAgIFx0XHRoYXBwaW5lc3NNb2RpZmllciArPSAxO1xyXG5cdCAgICBcdH0gZWxzZSBpZiAodGhpcy5zdGF0ZS50YXhNb2QubG93ID09IDEpIHtcclxuXHQgICAgXHRcdFxyXG5cdCAgICBcdH0gZWxzZSBpZiAodGhpcy5zdGF0ZS50YXhNb2QubG93ID09IDEuNSkge1xyXG5cdCAgICBcdFx0aGFwcGluZXNzTW9kaWZpZXIgLT0gMTtcclxuXHQgICAgXHR9XHJcbiAgICBcdH0gZWxzZSBpZiAoZGVzdGluYXRpb24uaW5jb21lTGV2ZWwgPT0gMSkge1xyXG5cdCAgICBcdGlmICh0aGlzLnN0YXRlLnRheE1vZC5taWQgPT0gLjUpIHtcclxuXHQgICAgXHRcdGhhcHBpbmVzc01vZGlmaWVyICs9IDE7XHJcblx0ICAgIFx0fSBlbHNlIGlmICh0aGlzLnN0YXRlLnRheE1vZC5taWQgPT0gMSkge1xyXG5cdCAgICBcdFx0XHJcblx0ICAgIFx0fSBlbHNlIGlmICh0aGlzLnN0YXRlLnRheE1vZC5taWQgPT0gMS41KSB7XHJcblx0ICAgIFx0XHRoYXBwaW5lc3NNb2RpZmllciAtPSAxO1xyXG5cdCAgICBcdH1cclxuICAgIFx0fSBlbHNlIGlmIChkZXN0aW5hdGlvbi5pbmNvbWVMZXZlbCA9PSAyKSB7XHJcblx0ICAgIFx0aWYgKHRoaXMuc3RhdGUudGF4TW9kLmhpZ2ggPT0gLjUpIHtcclxuXHQgICAgXHRcdGhhcHBpbmVzc01vZGlmaWVyICs9IDE7XHJcblx0ICAgIFx0fSBlbHNlIGlmICh0aGlzLnN0YXRlLnRheE1vZC5oaWdoID09IDEpIHtcclxuXHJcblx0ICAgIFx0fSBlbHNlIGlmICh0aGlzLnN0YXRlLnRheE1vZC5oaWdoID09IDEuNSkge1xyXG5cdCAgICBcdFx0aGFwcGluZXNzTW9kaWZpZXIgLT0gMTtcclxuXHQgICAgXHR9XHJcbiAgICBcdH1cclxuIFx0fVxyXG4gXHQvLyBjb25zb2xlLmxvZyhoYXBwaW5lc3NNb2RpZmllciwgZ3JvdXAuaGFwcGluZXNzTW9kaWZpZXIpO1xyXG4gICAgdmFyIGhhcHBpbmVzc0NoYW5nZSA9IGhhcHBpbmVzc01vZGlmaWVyIC0gZ3JvdXAuaGFwcGluZXNzTW9kaWZpZXI7XHJcbiAgICAvLyBjb25zb2xlLmxvZyhoYXBwaW5lc3NDaGFuZ2UsIGhhcHBpbmVzc01vZGlmaWVyLCBncm91cC5oYXBwaW5lc3NNb2RpZmllcik7XHJcbiAgICB2YXIgaW5jb21lQ2hhbmdlID0gMDtcclxuICAgIHZhciBiYXNlSW5jb21lID0gZ3JvdXAuaW5jb21lKCk7XHJcbiAgICB2YXIgbmV3SW5jb21lID0gMDtcclxuICAgIHZhciBudW1QZW9wbGUgPSBncm91cC5udW1QZW9wbGUoKTtcclxuICAgIGlmIChkZXN0aW5hdGlvbi50eXBlID09ICd3b3JrJykge1xyXG4gICAgXHQvLyBjb25zb2xlLmxvZygndGF4JywgZGVzdGluYXRpb24uaW5jb21lTGV2ZWwsIHRoaXMuc3RhdGUudGF4TW9kLmxvdyk7XHJcbiAgICBcdGlmIChkZXN0aW5hdGlvbi5pbmNvbWVMZXZlbCA9PSAwKSB7XHJcblx0ICAgIFx0bmV3SW5jb21lICs9IG51bVBlb3BsZSAqIFBlcnNvbi5JTkNPTUVTLmxvdyAqIHRoaXMuc3RhdGUudGF4TW9kLmxvdztcclxuICAgIFx0fSBlbHNlIGlmIChkZXN0aW5hdGlvbi5pbmNvbWVMZXZlbCA9PSAxKSB7XHJcblx0ICAgIFx0bmV3SW5jb21lICs9IG51bVBlb3BsZSAqIFBlcnNvbi5JTkNPTUVTLm1pZCAqIHRoaXMuc3RhdGUudGF4TW9kLm1pZDtcclxuICAgIFx0fSBlbHNlIGlmIChkZXN0aW5hdGlvbi5pbmNvbWVMZXZlbCA9PSAyKSB7XHJcblx0ICAgIFx0bmV3SW5jb21lICs9IG51bVBlb3BsZSAqIFBlcnNvbi5JTkNPTUVTLmhpZ2ggKiB0aGlzLnN0YXRlLnRheE1vZC5oaWdoO1xyXG4gICAgXHR9XHJcbiBcdH0gZWxzZSBpZiAoZGVzdGluYXRpb24udHlwZSA9PSAnaG9tZScpIHtcclxuIFx0XHRpZiAoZGVzdGluYXRpb24uaW5jb21lTGV2ZWwgPT0gMCkge1xyXG5cdCAgICBcdG5ld0luY29tZSAtPSBudW1QZW9wbGUgKiBQZXJzb24uSU5DT01FUy5sb3c7XHJcbiAgICBcdH0gZWxzZSBpZiAoZGVzdGluYXRpb24uaW5jb21lTGV2ZWwgPT0gMSkge1xyXG5cdCAgICBcdG5ld0luY29tZSAtPSBudW1QZW9wbGUgKiBQZXJzb24uSU5DT01FUy5taWQ7XHJcbiAgICBcdH0gZWxzZSBpZiAoZGVzdGluYXRpb24uaW5jb21lTGV2ZWwgPT0gMikge1xyXG5cdCAgICBcdG5ld0luY29tZSAtPSBudW1QZW9wbGUgKiBQZXJzb24uSU5DT01FUy5oaWdoO1xyXG4gICAgXHR9XHJcbiBcdH1cclxuIFx0Ly8gY29uc29sZS5sb2cobmV3SW5jb21lLCBiYXNlSW5jb21lKVxyXG4gXHR2YXIgaW5jb21lQ2hhbmdlID0gbmV3SW5jb21lIC0gYmFzZUluY29tZTtcclxuIFx0Ly8gY29uc29sZS5sb2coaGFwcGluZXNzTW9kaWZpZXIpO1xyXG5cdHJldHVybiB7Y2FuIDogY2FuLCBlZHVjYXRlIDogZWR1Y2F0ZSwgaGFwcGluZXNzQ2hhbmdlIDogaGFwcGluZXNzQ2hhbmdlLCBpbmNvbWVDaGFuZ2UgOiBpbmNvbWVDaGFuZ2UsIGhhcHBpbmVzc01vZGlmaWVyIDogaGFwcGluZXNzTW9kaWZpZXJ9O1xyXG59O1xyXG5cclxuQmFja2dyb3VuZF9NYW5hZ2VyLnByb3RvdHlwZS5jYW5UcmFuc2ZlciA9IGZ1bmN0aW9uKHNvdXJjZSwgZGVzdGluYXRpb24sIGdyb3VwKSB7XHJcblx0XHJcblx0Ly8gY29uc29sZS5sb2coc291cmNlLCBkZXN0aW5hdGlvbiwgZ3JvdXApO1xyXG5cdGlmIChzb3VyY2UgPT09IG51bGwgfHwgZGVzdGluYXRpb24gPT09IG51bGwpIHJldHVybiBmYWxzZTtcclxuXHRpZiAoc291cmNlLnR5cGUgPT0gZGVzdGluYXRpb24udHlwZSAmJiBzb3VyY2UuaW5jb21lTGV2ZWwgPT0gZGVzdGluYXRpb24uaW5jb21lTGV2ZWwpIHtcclxuXHRcdHJldHVybiBmYWxzZTtcclxuXHR9XHJcblx0dmFyIHNvdXJjZUVkdSA9IGdyb3VwLm1lbWJlcnNbMF0uZWR1TGV2ZWw7XHJcblx0aWYgKGRlc3RpbmF0aW9uLnR5cGUgPT09ICd1bmVtcGxveWVkJykge1xyXG5cdFx0cmV0dXJuIHRydWU7XHJcblx0fVxyXG5cdGlmIChzb3VyY2VFZHUgPT09IFBlcnNvbi5FRFVMRVZFTC51bmVtcGxveWVkKSB7XHJcblx0XHRpZiAoZGVzdGluYXRpb24uaW5jb21lTGV2ZWwgPT09IFBlcnNvbi5FRFVMRVZFTC5sb3cgJiYgZGVzdGluYXRpb24udHlwZSA9PT0gJ2hvdXNlJykge1xyXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdH1cclxuXHR9IGVsc2UgaWYgKHNvdXJjZUVkdSA9PT0gUGVyc29uLkVEVUxFVkVMLmxvdykge1xyXG5cdFx0aWYgKGRlc3RpbmF0aW9uLmluY29tZUxldmVsID09PSBQZXJzb24uRURVTEVWRUwubG93KSB7XHJcblx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0fSBlbHNlIGlmIChkZXN0aW5hdGlvbi5pbmNvbWVMZXZlbCA9PT0gUGVyc29uLkVEVUxFVkVMLm1pZCkge1xyXG5cdFx0XHRpZiAoZGVzdGluYXRpb24udHlwZSA9PT0gJ2hvdXNlJykge1xyXG5cdFx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fSBlbHNlIGlmIChzb3VyY2VFZHUgPT09IFBlcnNvbi5FRFVMRVZFTC5taWQpIHtcclxuXHRcdGlmIChkZXN0aW5hdGlvbi5pbmNvbWVMZXZlbCA9PT0gUGVyc29uLkVEVUxFVkVMLmxvdykge1xyXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdH0gZWxzZSBpZiAoZGVzdGluYXRpb24uaW5jb21lTGV2ZWwgPT09IFBlcnNvbi5FRFVMRVZFTC5taWQpIHtcclxuXHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHR9IGVsc2UgaWYgKGRlc3RpbmF0aW9uLmluY29tZUxldmVsID09PSBQZXJzb24uRURVTEVWRUwuaGlnaCkge1xyXG5cdFx0XHRpZiAoZGVzdGluYXRpb24udHlwZSA9PT0gJ2hvdXNlJykge1xyXG5cdFx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fSBlbHNlIGlmIChzb3VyY2VFZHUgPT09IFBlcnNvbi5FRFVMRVZFTC5oaWdoKSB7XHJcblx0XHRyZXR1cm4gdHJ1ZTtcclxuXHR9XHJcblx0cmV0dXJuIGZhbHNlO1xyXG5cdFxyXG59O1xyXG5CYWNrZ3JvdW5kX01hbmFnZXIucHJvdG90eXBlLmJhY2tncm91bmRCeSA9IGZ1bmN0aW9uKHR5cGUsIGluY29tZUxldmVsKSB7XHJcblx0Zm9yICh2YXIgYmcgaW4gdGhpcy5iZ0FycmF5KSB7XHJcblx0XHRiZyA9IHRoaXMuYmdBcnJheVtiZ107XHJcblx0XHRpZiAoYmcudHlwZSA9PSB0eXBlICYmIGJnLmluY29tZUxldmVsID09IGluY29tZUxldmVsKSB7XHJcblx0XHRcdHJldHVybiBiZztcclxuXHRcdH1cclxuXHR9XHJcblx0cmV0dXJuIG51bGw7XHJcbn07XHJcblxyXG5CYWNrZ3JvdW5kX01hbmFnZXIucHJvdG90eXBlLndoZXJlQ2xpY2tlZCA9IGZ1bmN0aW9uKCkge1xyXG5cdFxyXG5cdHZhciBtb3VzZVggPSB0aGlzLmdhbWUuaW5wdXQueDtcclxuXHR2YXIgbW91c2VZID0gdGhpcy5nYW1lLmlucHV0Lnk7XHJcblx0aWYgKG1vdXNlWSA+PSB0aGlzLmJvcmRlcikge1xyXG5cdFx0aWYgKG1vdXNlWSA8PSB0aGlzLmJnQXJyYXlbMF0uaGVpZ2h0ICsgdGhpcy5ib3JkZXIpIHtcclxuXHRcdFx0aWYgKG1vdXNlWCA8PSB0aGlzLmJnQXJyYXlbMF0ud2lkdGgpIHtcclxuXHRcdFx0XHQvLyBjb25zb2xlLmxvZygnMCcpO1xyXG5cdFx0XHRcdHJldHVybiB0aGlzLmJnQXJyYXlbMF07XHJcblx0XHRcdH0gZWxzZSBpZiAobW91c2VYIDw9IHRoaXMuYmdBcnJheVswXS53aWR0aCArIHRoaXMuYmdBcnJheVsxXS53aWR0aCkge1xyXG5cdFx0XHRcdC8vIGNvbnNvbGUubG9nKCcxJyk7XHJcblx0XHRcdFx0cmV0dXJuIHRoaXMuYmdBcnJheVsxXTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQvLyBjb25zb2xlLmxvZygnMicpO1xyXG5cdFx0XHRcdHJldHVybiB0aGlzLmJnQXJyYXlbMl07XHJcblx0XHRcdH1cclxuXHRcdH0gZWxzZSBpZiAobW91c2VZIDw9IHRoaXMuYmdBcnJheVs0XS5oZWlnaHQgKyB0aGlzLmJnQXJyYXlbMF0uaGVpZ2h0ICsgdGhpcy5ib3JkZXIpIHtcclxuXHRcdFx0aWYgKG1vdXNlWCA8PSB0aGlzLmJnQXJyYXlbMF0ud2lkdGgpIHtcclxuXHRcdFx0XHQvLyBjb25zb2xlLmxvZygnMycpO1xyXG5cdFx0XHRcdHJldHVybiB0aGlzLmJnQXJyYXlbM107XHJcblx0XHRcdH0gZWxzZSBpZiAobW91c2VYIDw9IHRoaXMuYmdBcnJheVswXS53aWR0aCArIHRoaXMuYmdBcnJheVsxXS53aWR0aCkge1xyXG5cdFx0XHRcdC8vIGNvbnNvbGUubG9nKCc0Jyk7XHJcblx0XHRcdFx0cmV0dXJuIHRoaXMuYmdBcnJheVs0XTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQvLyBjb25zb2xlLmxvZygnNScpO1xyXG5cdFx0XHRcdHJldHVybiB0aGlzLmJnQXJyYXlbNV07XHJcblx0XHRcdH1cclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdC8vIGNvbnNvbGUubG9nKCc2Jyk7XHJcblx0XHRcdHJldHVybiB0aGlzLmJnQXJyYXlbNl07XHJcblx0XHR9XHJcblx0fVxyXG5cdHJldHVybiBudWxsO1xyXG5cdFxyXG59O1xyXG5cclxuQmFja2dyb3VuZF9NYW5hZ2VyLnByb3RvdHlwZS5maW5kT3RoZXIgPSBmdW5jdGlvbihzb3VyY2UsIGRlc3RpbmF0aW9uKSB7XHJcblx0aWYgKHNvdXJjZS50eXBlID09PSAnd29yaycgJiYgZGVzdGluYXRpb24udHlwZSA9PT0gJ3dvcmsnKSB7XHJcblx0XHRpZiAoc291cmNlLmluY29tZUxldmVsID09PSBQZXJzb24uRURVTEVWRUwubG93KSB7XHJcblx0XHRcdGlmIChkZXN0aW5hdGlvbi5pbmNvbWVMZXZlbCA9PT0gUGVyc29uLkVEVUxFVkVMLm1pZCkgcmV0dXJuIHRoaXMuYmdBcnJheVsyXTtcclxuXHRcdFx0ZWxzZSBpZiAoZGVzdGluYXRpb24uaW5jb21lTGV2ZWwgPT09IFBlcnNvbi5FRFVMRVZFTC5oaWdoKSByZXR1cm4gdGhpcy5iZ0FycmF5WzFdO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSBpZiAoc291cmNlLmluY29tZUxldmVsID09PSBQZXJzb24uRURVTEVWRUwubWlkKSB7XHJcblx0XHRcdGlmIChkZXN0aW5hdGlvbi5pbmNvbWVMZXZlbCA9PT0gUGVyc29uLkVEVUxFVkVMLmxvdykgcmV0dXJuIHRoaXMuYmdBcnJheVsyXTtcclxuXHRcdFx0ZWxzZSBpZiAoZGVzdGluYXRpb24uaW5jb21lTGV2ZWwgPT09IFBlcnNvbi5FRFVMRVZFTC5oaWdoKSByZXR1cm4gdGhpcy5iZ0FycmF5WzBdO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSBpZiAoc291cmNlLmluY29tZUxldmVsID09PSBQZXJzb24uRURVTEVWRUwuaGlnaCkge1xyXG5cdFx0XHRpZiAoZGVzdGluYXRpb24uaW5jb21lTGV2ZWwgPT09IFBlcnNvbi5FRFVMRVZFTC5sb3cpIHJldHVybiB0aGlzLmJnQXJyYXlbMV07XHJcblx0XHRcdGVsc2UgaWYgKGRlc3RpbmF0aW9uLmluY29tZUxldmVsID09PSBQZXJzb24uRURVTEVWRUwubWlkKSByZXR1cm4gdGhpcy5iZ0FycmF5WzBdO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRlbHNlIGlmIChzb3VyY2UudHlwZSA9PT0gJ2hvdXNlJyAmJiBkZXN0aW5hdGlvbi50eXBlID09PSAnaG91c2UnKSB7XHJcblx0XHRpZiAoc291cmNlLmluY29tZUxldmVsID09PSBQZXJzb24uRURVTEVWRUwubG93KSB7XHJcblx0XHRcdGlmIChkZXN0aW5hdGlvbi5pbmNvbWVMZXZlbCA9PT0gUGVyc29uLkVEVUxFVkVMLm1pZCkgcmV0dXJuIHRoaXMuYmdBcnJheVs1XTtcclxuXHRcdFx0ZWxzZSBpZiAoZGVzdGluYXRpb24uaW5jb21lTGV2ZWwgPT09IFBlcnNvbi5FRFVMRVZFTC5oaWdoKSByZXR1cm4gdGhpcy5iZ0FycmF5WzRdO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSBpZiAoc291cmNlLmluY29tZUxldmVsID09PSBQZXJzb24uRURVTEVWRUwubWlkKSB7XHJcblx0XHRcdGlmIChkZXN0aW5hdGlvbi5pbmNvbWVMZXZlbCA9PT0gUGVyc29uLkVEVUxFVkVMLmxvdykgcmV0dXJuIHRoaXMuYmdBcnJheVs1XTtcclxuXHRcdFx0ZWxzZSBpZiAoZGVzdGluYXRpb24uaW5jb21lTGV2ZWwgPT09IFBlcnNvbi5FRFVMRVZFTC5oaWdoKSByZXR1cm4gdGhpcy5iZ0FycmF5WzNdO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSBpZiAoc291cmNlLmluY29tZUxldmVsID09PSBQZXJzb24uRURVTEVWRUwuaGlnaCkge1xyXG5cdFx0XHRpZiAoZGVzdGluYXRpb24uaW5jb21lTGV2ZWwgPT09IFBlcnNvbi5FRFVMRVZFTC5sb3cpIHJldHVybiB0aGlzLmJnQXJyYXlbNF07XHJcblx0XHRcdGVsc2UgaWYgKGRlc3RpbmF0aW9uLmluY29tZUxldmVsID09PSBQZXJzb24uRURVTEVWRUwubWlkKSByZXR1cm4gdGhpcy5iZ0FycmF5WzNdO1xyXG5cdFx0fVxyXG5cdH1cclxufTtcclxuXHJcbi8vIEJhY2tncm91bmRfTWFuYWdlci5wcm90b3R5cGUudXBkYXRlUmF0aW9zID0gZnVuY3Rpb24oZGVzdGluYXRpb24pIHtcclxuXHQvLyB3b3JrIDAgLSAyIGhvdXNlIDMgLSA1IHVuZW1wbG95ZWQgNlxyXG5CYWNrZ3JvdW5kX01hbmFnZXIucHJvdG90eXBlLnVwZGF0ZVJhdGlvcyA9IGZ1bmN0aW9uKCkge1xyXG5cdFxyXG5cdHZhciBsb3dTdW0gPSB0aGlzLmJnQXJyYXlbMF0ubnVtUGVvcGxlKCkgKyB0aGlzLmJnQXJyYXlbM10ubnVtUGVvcGxlKCk7XHJcblx0dmFyIG1pZFN1bSA9IHRoaXMuYmdBcnJheVsxXS5udW1QZW9wbGUoKSArIHRoaXMuYmdBcnJheVs0XS5udW1QZW9wbGUoKTtcclxuXHR2YXIgaGlnaFN1bSA9IHRoaXMuYmdBcnJheVsyXS5udW1QZW9wbGUoKSArIHRoaXMuYmdBcnJheVs1XS5udW1QZW9wbGUoKTtcclxuXHQvLyBjb25zb2xlLmxvZygnbG93JywgbG93U3VtLCAnbWlkJywgbWlkU3VtLCAnaGlnaCcsIGhpZ2hTdW0pO1xyXG5cdHZhciBoUmF0aW8gPSB1dGlsLnJhdGlvKGxvd1N1bSwgbWlkU3VtLCBoaWdoU3VtLCB0aGlzLm1pblJhdGlvKTtcclxuXHR2YXIgd29ya1N1bSA9IHRoaXMuYmdBcnJheVswXS5udW1QZW9wbGUoKSArIHRoaXMuYmdBcnJheVsxXS5udW1QZW9wbGUoKSArIHRoaXMuYmdBcnJheVsyXS5udW1QZW9wbGUoKTtcclxuXHR2YXIgaG9tZVN1bSA9IHRoaXMuYmdBcnJheVszXS5udW1QZW9wbGUoKSArIHRoaXMuYmdBcnJheVs0XS5udW1QZW9wbGUoKSArIHRoaXMuYmdBcnJheVs1XS5udW1QZW9wbGUoKTtcclxuXHR2YXIgdW5lbVN1bSA9IHRoaXMuYmdBcnJheVs2XS5udW1QZW9wbGUoKTtcclxuXHR2YXIgdlJhdGlvID0gdXRpbC5yYXRpbyh3b3JrU3VtLCBob21lU3VtLCB1bmVtU3VtLCB0aGlzLm1pblJhdGlvKTtcclxuXHR2YXIgZ1dpZHRoID0gdGhpcy5nYW1lLndpZHRoO1xyXG5cdHZhciBnSGVpZ2h0ID0gdGhpcy5nYW1lLmhlaWdodCAtIHRoaXMuYm9yZGVyO1xyXG5cclxuXHR2YXIgb2Zmc2V0WCA9IDA7XHJcblx0dmFyIG9mZnNldFkgPSAwO1xyXG5cdHZhciB3b3JrSGVpZ2h0ID0gZ0hlaWdodCAqIHZSYXRpby5hO1xyXG5cdHZhciBob3VzZUhlaWdodCA9IGdIZWlnaHQgKiB2UmF0aW8uYjtcclxuXHR2YXIgdW5lbUhlaWdodCA9IGdIZWlnaHQgKiB2UmF0aW8uYztcclxuXHQvLyBjb25zb2xlLmxvZyhnV2lkdGgsIGdIZWlnaHQsIHdvcmtTdW0sIGhvbWVTdW0sIHVuZW1TdW0sIGhSYXRpbywgdlJhdGlvKTtcclxuXHJcblx0dmFyIGxvd1dvcmsgPSB7d2lkdGggOiBnV2lkdGggKiBoUmF0aW8uYSwgaGVpZ2h0IDogd29ya0hlaWdodCwgY2VudGVyIDogbnVsbH07XHJcblx0bG93V29yay5jZW50ZXIgPSB7eCA6IG9mZnNldFggKyBsb3dXb3JrLndpZHRoIC8gMiwgeSA6IG9mZnNldFkgKyB3b3JrSGVpZ2h0IC8gMn07O1xyXG5cdG9mZnNldFggKz0gbG93V29yay53aWR0aDtcclxuXHR0aGlzLmJnQXJyYXlbMF0udXBkYXRlVmFycyhsb3dXb3JrKTtcclxuXHR2YXIgbWlkV29yayA9IHt3aWR0aCA6IGdXaWR0aCAqIGhSYXRpby5iLCBoZWlnaHQgOiB3b3JrSGVpZ2h0LCBjZW50ZXIgOiBudWxsfTtcclxuXHRtaWRXb3JrLmNlbnRlciA9IHt4IDogb2Zmc2V0WCArIG1pZFdvcmsud2lkdGggLyAyLCB5IDogb2Zmc2V0WSArIHdvcmtIZWlnaHQgLyAyfTtcclxuXHRvZmZzZXRYICs9IG1pZFdvcmsud2lkdGg7XHJcblx0dGhpcy5iZ0FycmF5WzFdLnVwZGF0ZVZhcnMobWlkV29yayk7XHJcblx0dmFyIGhpZ2hXb3JrID0ge3dpZHRoIDogZ1dpZHRoICogaFJhdGlvLmMsIGhlaWdodCA6IHdvcmtIZWlnaHQsIGNlbnRlciA6IG51bGx9XHJcblx0aGlnaFdvcmsuY2VudGVyID0ge3ggOiBvZmZzZXRYICsgaGlnaFdvcmsud2lkdGggLyAyLCB5IDogb2Zmc2V0WSArIHdvcmtIZWlnaHQgLyAyfTtcclxuXHRvZmZzZXRYID0gMDtcclxuXHRvZmZzZXRZICs9IHdvcmtIZWlnaHQ7XHJcblx0dGhpcy5iZ0FycmF5WzJdLnVwZGF0ZVZhcnMoaGlnaFdvcmspO1xyXG5cdHZhciBsb3dIb3VzZSA9IHt3aWR0aCA6IGdXaWR0aCAqIGhSYXRpby5hLCBoZWlnaHQgOiBob3VzZUhlaWdodCwgY2VudGVyIDogbnVsbH07XHJcblx0bG93SG91c2UuY2VudGVyID0ge3ggOiBvZmZzZXRYICsgbG93SG91c2Uud2lkdGggLyAyLCB5IDogb2Zmc2V0WSArIGhvdXNlSGVpZ2h0IC8gMn07XHJcblx0b2Zmc2V0WCArPSBsb3dIb3VzZS53aWR0aDtcclxuXHR0aGlzLmJnQXJyYXlbM10udXBkYXRlVmFycyhsb3dIb3VzZSk7XHJcblx0dmFyIG1pZEhvdXNlID0ge3dpZHRoIDogZ1dpZHRoICogaFJhdGlvLmIsIGhlaWdodCA6IGhvdXNlSGVpZ2h0LCBjZW50ZXIgOiBudWxsfTtcclxuXHRtaWRIb3VzZS5jZW50ZXIgPSB7eCA6IG9mZnNldFggKyBtaWRIb3VzZS53aWR0aCAvIDIsIHkgOiBvZmZzZXRZICsgaG91c2VIZWlnaHQgLyAyfTtcclxuXHRvZmZzZXRYICs9IG1pZEhvdXNlLndpZHRoO1xyXG5cdHRoaXMuYmdBcnJheVs0XS51cGRhdGVWYXJzKG1pZEhvdXNlKTtcclxuXHR2YXIgaGlnaEhvdXNlID0ge3dpZHRoIDogZ1dpZHRoICogaFJhdGlvLmMsIGhlaWdodCA6IGhvdXNlSGVpZ2h0LCBjZW50ZXIgOiBudWxsfTtcclxuXHRoaWdoSG91c2UuY2VudGVyID0ge3ggOiBvZmZzZXRYICsgaGlnaEhvdXNlLndpZHRoIC8gMiwgeSA6IG9mZnNldFkgKyBob3VzZUhlaWdodCAvIDJ9O1xyXG5cdG9mZnNldFkgKz0gaG91c2VIZWlnaHQ7XHJcblx0dGhpcy5iZ0FycmF5WzVdLnVwZGF0ZVZhcnMoaGlnaEhvdXNlKTtcclxuXHR2YXIgdW5lbXBsb3llZCA9IHt3aWR0aCA6IGdXaWR0aCAqIDEsIGhlaWdodCA6IHVuZW1IZWlnaHQsIGNlbnRlciA6IG51bGx9O1xyXG5cdHVuZW1wbG95ZWQuY2VudGVyID0ge3ggOiB1bmVtcGxveWVkLndpZHRoIC8gMiwgeSA6IG9mZnNldFkgKyB1bmVtSGVpZ2h0IC8gMn07XHJcblx0dGhpcy5iZ0FycmF5WzZdLnVwZGF0ZVZhcnModW5lbXBsb3llZCk7XHJcblxyXG59O1xyXG5cclxuQmFja2dyb3VuZF9NYW5hZ2VyLnByb3RvdHlwZS5lbmRRdWl0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICB0aGlzLmp1c3RRdWl0ID0gZmFsc2U7XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IEJhY2tncm91bmRfTWFuYWdlcjsiLCIvL2NvbnRyb2xzIGZsb2NraW5nIGZvciBhIGdyb3VwIG9mIHBlcnNvbiBvYmplY3RzXHJcbnZhciB1dGlsID0gcmVxdWlyZSgnLi4vdXRpbHMnKTtcclxuXHJcbnZhciBHcm91cCA9IGZ1bmN0aW9uIChnYW1lLCBjZW50ZXJYLCBjZW50ZXJZLCBzdGF0ZSkge1xyXG5cdHRoaXMuZ2FtZSA9IGdhbWU7XHJcblx0dGhpcy5tZW1iZXJzID0gW107XHJcblx0dGhpcy5taW5EaXN0ID0gMjA7XHJcblx0Ly90aGlzLm5vaXNlID0gMTA7XHJcblx0dGhpcy5jZW50ZXIgPSB7eCA6IGNlbnRlclgsIHkgOiBjZW50ZXJZfTtcclxuXHR0aGlzLmNsaWNrRGlzdCA9IDUwO1xyXG5cdHRoaXMuc2VsZWN0ZWQgPSBmYWxzZTtcclxuXHR0aGlzLnNlbGVjdGlvbiA9IHRoaXMuZ2FtZS5hZGQuc3ByaXRlKHRoaXMuY2VudGVyLngsIHRoaXMuY2VudGVyLnksICdzZWxlY3Rpb24nKTtcclxuXHR0aGlzLnNlbGVjdGlvbi5hbmNob3Iuc2V0VG8oMC41LCAwLjUpO1xyXG5cdHRoaXMuc2VsZWN0aW9uLndpZHRoID0gMTAwO1xyXG5cdHRoaXMuc2VsZWN0aW9uLmhlaWdodCA9IDEwMDtcclxuXHR0aGlzLnNlbGVjdGlvbi52aXNpYmxlID0gZmFsc2U7XHJcblx0dGhpcy52ZWxvY2l0eSA9IHt4IDogMCwgeSA6IDB9O1xyXG5cdHRoaXMuc3BlZWQgPSAuMDU7XHJcblx0dGhpcy5zdGF0ZSA9IHN0YXRlO1xyXG5cdHRoaXMuYm9vayA9IHRoaXMuZ2FtZS5hZGQuc3ByaXRlKHRoaXMuY2VudGVyLngsIHRoaXMuY2VudGVyLnksICdib29rJyk7XHJcblx0dGhpcy5ib29rLmFuY2hvci5zZXRUbygwLjUsIDAuNSk7XHJcblx0dGhpcy5ib29rLnZpc2libGUgPSBmYWxzZTtcclxuXHR0aGlzLmxlYXJuaW5nVGltZSA9IC4wMTtcclxuICAgIHRoaXMuaG92ZXIgPSBmYWxzZTtcclxuICAgIHRoaXMubG9jayA9IHRoaXMuZ2FtZS5hZGQuc3ByaXRlKHRoaXMuY2VudGVyLngsIHRoaXMuY2VudGVyLnksICdsb2NrJyk7XHJcblx0dGhpcy5sb2NrLmFuY2hvci5zZXRUbygwLjUsIDAuNSk7XHJcblx0dGhpcy5sb2NrLndpZHRoID0gMjU7XHJcblx0dGhpcy5sb2NrLmhlaWdodCA9IDM1O1xyXG5cdHRoaXMubG9jay52aXNpYmxlID0gZmFsc2U7XHJcblx0dGhpcy5sb2NrVGltZSA9IDU7XHJcblx0dGhpcy5oYXBwaW5lc3NNb2RpZmllciA9IDA7XHJcblx0dGhpcy5zZWxlY3Rpb25XZWlnaHQgPSAyLjU7XHJcblx0dGhpcy5taW5TZWxlY3Rpb25TaXplID0gNDA7XHJcblx0dGhpcy5jbGlja1dlaWdodCA9IDEwO1xyXG5cdHRoaXMubWF4Q2xpY2tEaXN0ID0gNDA7XHJcblx0dGhpcy5taW5DbGlja0Rpc3QgPSAyMDtcclxuXHR0aGlzLm1heE1lbWJlcnMgPSAxMDtcclxuXHRcclxuXHR0aGlzLnN0YXRlLmlucHV0Lm9uRG93bi5hZGQodGhpcy5vbklucHV0RG93biwgdGhpcyk7XHJcbiAgICB0aGlzLnN0YXRlLmlucHV0LmFkZE1vdmVDYWxsYmFjayh0aGlzLm9uTW92ZSwgdGhpcyk7XHJcbn07XHJcbkdyb3VwLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEdyb3VwO1xyXG5Hcm91cC5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24oKSB7XHJcblx0Ly8gY29uc29sZS5sb2codGhpcy5jZW50ZXIpO1xyXG5cdC8vdXBkYXRlIGNlbnRlclxyXG5cdHZhciBuZXdYID0gdGhpcy5jZW50ZXIueCArIHRoaXMudmVsb2NpdHkueCAqIHRoaXMuc3BlZWQ7XHJcblx0dmFyIG5ld1kgPSB0aGlzLmNlbnRlci55ICsgdGhpcy52ZWxvY2l0eS55ICogdGhpcy5zcGVlZDtcclxuXHR0aGlzLmNoYW5nZUNlbnRlcih7eCA6IG5ld1gsIHkgOiBuZXdZfSk7XHJcblx0Zm9yICh2YXIgbWVtYmVyIGluIHRoaXMubWVtYmVycykge1xyXG5cdFx0bWVtYmVyID0gdGhpcy5tZW1iZXJzW21lbWJlcl07XHJcblx0XHR2YXIgdmVsb2NpdHkgPSB7eDowLCB5OjB9O1xyXG5cdFx0dmFyIGRpZmYgPSB7eDowLCB5OjB9O1xyXG5cdFx0ZGlmZi54ID0gdGhpcy5jZW50ZXIueCAtIG1lbWJlci54O1xyXG5cdFx0ZGlmZi55ID0gdGhpcy5jZW50ZXIueSAtIG1lbWJlci55O1xyXG5cdFx0dmVsb2NpdHkueCArPSBkaWZmLng7XHJcblx0XHR2ZWxvY2l0eS55ICs9IGRpZmYueTtcclxuXHRcdGZvciAodmFyIG90aGVyIGluIHRoaXMubWVtYmVycykge1xyXG5cdFx0XHRvdGhlciA9IHRoaXMubWVtYmVyc1tvdGhlcl07XHJcblx0XHRcdC8vaWdub3JlIHNlbGZcclxuXHRcdFx0aWYgKG90aGVyID09PSBtZW1iZXIpIHtcclxuXHRcdFx0XHRjb250aW51ZTtcclxuXHRcdFx0fVxyXG5cdFx0XHR2YXIgb0RpZmYgPSB7eDowLCB5OjB9O1xyXG5cdFx0XHRvRGlmZi54ID0gb3RoZXIueCAtIG1lbWJlci54O1xyXG5cdFx0XHRvRGlmZi55ID0gb3RoZXIueSAtIG1lbWJlci55O1xyXG5cdFx0XHR2YXIgdG90YWxEaXN0ID0gdXRpbC5oeXBvdGVudXNlKG9EaWZmLngsIG9EaWZmLnkpO1xyXG5cdFx0XHRpZiAodG90YWxEaXN0IDw9IHRoaXMubWluRGlzdCkge1xyXG5cdFx0XHRcdHZlbG9jaXR5LnggPSAtMSAqIG9EaWZmLng7XHJcblx0XHRcdFx0dmVsb2NpdHkueSA9IC0xICogb0RpZmYueTtcclxuXHRcdFx0XHQvLyB2ZWxvY2l0eS54IC09IG9EaWZmLng7XHJcblx0XHRcdFx0Ly8gdmVsb2NpdHkueSAtPSBvRGlmZi55O1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHQvLyBpZiAodXRpbC5oeXBvdGVudXNlKHZlbG9jaXR5LngsIHZlbG9jaXR5LnkpIDwgdGhpcy5taW5WZWxvY2l0eSkge1xyXG5cdFx0XHQvLyB2ZWxvY2l0eS54ID0gdmVsb2NpdHkueSA9IDA7XHJcblx0XHQvLyB9XHJcblx0XHRtZW1iZXIudmVsb2NpdHkgPSB2ZWxvY2l0eTtcclxuXHR9XHJcblxyXG5cdC8vIHZhciBhdmVyYWdlID0gMDtcclxuXHQvLyBmb3IgKHZhciBtZW1iZXIgaW4gdGhpcy5tZW1iZXJzKSB7XHJcblx0Ly8gXHRtZW1iZXIgPSB0aGlzLm1lbWJlcnNbbWVtYmVyXTtcclxuXHQvLyBcdHZhciBkaXN0ID0gdXRpbC5oeXBvdGVudXNlKHRoaXMuY2VudGVyLnggLSBtZW1iZXIueCwgdGhpcy5jZW50ZXIueSAtIG1lbWJlci55KTtcclxuXHQvLyBcdC8vIGlmIChkaXN0ID4gZnVydGhlc3QpIHtcclxuXHQvLyBcdC8vIFx0ZnVydGhlc3QgPSBkaXN0O1xyXG5cdC8vIFx0Ly8gfVxyXG5cdC8vIFx0YXZlcmFnZSArPSBkaXN0O1xyXG5cdC8vIH1cclxuXHQvLyBhdmVyYWdlIC89IHRoaXMubWVtYmVycy5sZW5ndGg7XHJcblx0Ly8gLy8gY29uc29sZS5sb2codGhpcy5zZWxlY3Rpb25XZWlnaHQpO1xyXG5cdC8vIHZhciBuZXdTZWxlY3Rpb25TaXplID0gYXZlcmFnZSAqIHRoaXMuc2VsZWN0aW9uV2VpZ2h0O1xyXG5cdC8vIGlmIChuZXdTZWxlY3Rpb25TaXplIDw9IHRoaXMubWluU2VsZWN0aW9uU2l6ZSkge1xyXG5cdC8vIFx0Ly8gY29uc29sZS5sb2coJ2EnKTtcclxuXHQvLyBcdG5ld1NlbGVjdGlvblNpemUgPSB0aGlzLm1pblNlbGVjdGlvblNpemU7XHJcblx0Ly8gfVxyXG5cdHZhciBuZXdDbGlja0Rpc3QgPSAwO1xyXG5cdGlmICh0aGlzLm1lbWJlcnMubGVuZ3RoID49IHRoaXMubWF4TWVtYmVycykge1xyXG5cdFx0bmV3Q2xpY2tEaXN0ID0gdGhpcy5tYXhDbGlja0Rpc3Q7XHJcblx0fSBlbHNlIHtcclxuXHRcdG5ld0NsaWNrRGlzdCA9IHRoaXMubWluQ2xpY2tEaXN0ICsgKHRoaXMubWF4Q2xpY2tEaXN0IC0gdGhpcy5taW5DbGlja0Rpc3QpICogKHRoaXMubWVtYmVycy5sZW5ndGggLyB0aGlzLm1heE1lbWJlcnMpO1xyXG5cdH1cclxuXHR0aGlzLmNsaWNrRGlzdCA9IG5ld0NsaWNrRGlzdDtcclxuXHR2YXIgbmV3U2VsZWN0aW9uU2l6ZSA9IHRoaXMubWluU2VsZWN0aW9uU2l6ZSArIHRoaXMubWVtYmVycy5sZW5ndGggKiB0aGlzLnNlbGVjdGlvbldlaWdodDtcclxuXHR0aGlzLnNlbGVjdGlvbi53aWR0aCA9IG5ld1NlbGVjdGlvblNpemU7XHJcblx0dGhpcy5zZWxlY3Rpb24uaGVpZ2h0ID0gbmV3U2VsZWN0aW9uU2l6ZTtcclxufTtcclxuR3JvdXAucHJvdG90eXBlLmFkZE1lbWJlciA9IGZ1bmN0aW9uKG1lbWJlciwgc3BlY2lhbCkge1xyXG5cdHRoaXMubWVtYmVycy5wdXNoKG1lbWJlcik7XHJcblx0bWVtYmVyLmdyb3VwID0gdGhpcztcclxuXHRpZiAoc3BlY2lhbCkge1xyXG5cdFx0dGhpcy5teU1hbmFnZXIuYmFja2dyb3VuZC5teU1hbmFnZXIudXBkYXRlUmF0aW9zKCk7XHJcblx0fVxyXG5cdC8vIGNvbnNvbGUubG9nKHRoaXMubWVtYmVycyk7XHJcbn07XHJcbkdyb3VwLnByb3RvdHlwZS5vbklucHV0RG93biA9IGZ1bmN0aW9uKCkge1xyXG5cdC8vIGNvbnNvbGUubG9nKCdhJyk7XHJcblx0aWYgKHRoaXMuc2VsZWN0ZWQpIHtcclxuXHRcdHZhciBiZyA9IHRoaXMubXlNYW5hZ2VyLmJhY2tncm91bmQubXlNYW5hZ2VyLndoZXJlQ2xpY2tlZCgpO1xyXG5cdFx0Ly8gY29uc29sZS5sb2coYmcpO1xyXG5cdFx0dGhpcy5teU1hbmFnZXIuYmFja2dyb3VuZC5teU1hbmFnZXIuc2VuZFRvKHRoaXMubXlNYW5hZ2VyLmJhY2tncm91bmQsIGJnLCB0aGlzKTtcclxuXHRcdHRoaXMuc2V0U2VsZWN0ZWQoZmFsc2UpO1xyXG5cdH0gZWxzZSBpZiAodGhpcy5jbGlja2VkKCkpIHtcclxuXHRcdHRoaXMuY2xpY2soKTtcclxuXHR9XHJcbn07XHJcbkdyb3VwLnByb3RvdHlwZS5zdGFydEVkdWNhdGlvbiA9IGZ1bmN0aW9uKCkge1xyXG5cdHRoaXMubGVhcm5pbmcgPSBmYWxzZTtcclxuXHR0aGlzLmJvb2sudmlzaWJsZSA9IHRydWU7XHJcblx0dGhpcy5zdGF0ZS5nYW1lLnRpbWUuZXZlbnRzLmFkZChQaGFzZXIuVGltZXIuU0VDT05EICogdGhpcy5sZWFybmluZ1RpbWUsIHRoaXMuZW5kRWR1Y2F0aW9uLCB0aGlzKTtcclxufTtcclxuR3JvdXAucHJvdG90eXBlLmVuZEVkdWNhdGlvbiA9IGZ1bmN0aW9uKCkge1xyXG5cdGZvciAodmFyIG1lbWJlciBpbiB0aGlzLm1lbWJlcnMpIHtcclxuXHRcdHRoaXMubWVtYmVyc1ttZW1iZXJdLmVkdUxldmVsICs9IDE7XHJcblx0fVxyXG5cdHRoaXMubGVhcm5pbmcgPSBmYWxzZTtcclxuXHR0aGlzLmJvb2sudmlzaWJsZSA9IGZhbHNlO1xyXG59O1xyXG5Hcm91cC5wcm90b3R5cGUuY2xpY2tlZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgaWYgKHRoaXMubWVtYmVycy5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHR2YXIgbW91c2VYID0gdGhpcy5nYW1lLmlucHV0Lng7XHJcblx0dmFyIG1vdXNlWSA9IHRoaXMuZ2FtZS5pbnB1dC55O1xyXG5cdHZhciBkaWZmWCA9IG1vdXNlWCAtIHRoaXMuY2VudGVyLng7XHJcblx0dmFyIGRpZmZZID0gbW91c2VZIC0gdGhpcy5jZW50ZXIueTtcclxuXHR2YXIgdG90YWxEaWZmID0gdXRpbC5oeXBvdGVudXNlKGRpZmZYLCBkaWZmWSk7XHJcblx0aWYgKHRvdGFsRGlmZiA8PSB0aGlzLmNsaWNrRGlzdCkge1xyXG5cdFx0cmV0dXJuIHRydWU7XHJcblx0fVxyXG5cdHJldHVybiBmYWxzZTtcclxufTtcclxuR3JvdXAucHJvdG90eXBlLmNsaWNrID0gZnVuY3Rpb24oKSB7XHJcblx0aWYgKHRoaXMuc2VsZWN0ZWQpIHtcclxuICAgICAgICAvLyB0aGlzLnN0YXRlLmhtLmdyb3VwU2VsZWN0ZWQgPSBmYWxzZTtcclxuXHRcdHRoaXMuc2V0U2VsZWN0ZWQoZmFsc2UpO1xyXG5cdH0gZWxzZSBpZiAoIXRoaXMubG9ja2VkKSB7XHJcbiAgICAgICAgLy8gdGhpcy5zdGF0ZS5obS5ncm91cFNlbGVjdGVkID0gdHJ1ZTtcclxuXHRcdHRoaXMuc2V0U2VsZWN0ZWQodHJ1ZSk7XHJcblx0fVxyXG59O1xyXG5Hcm91cC5wcm90b3R5cGUuc2V0U2VsZWN0ZWQgPSBmdW5jdGlvbihuZXdTZWxlY3RlZCkge1xyXG5cdHRoaXMuc2VsZWN0ZWQgPSBuZXdTZWxlY3RlZDtcclxuXHR0aGlzLnNlbGVjdGlvbi52aXNpYmxlID0gbmV3U2VsZWN0ZWQ7XHJcbiAgICBpZiAobmV3U2VsZWN0ZWQgPT0gdHJ1ZSkge1xyXG4gICAgICAgIHRoaXMuc3RhdGUuaG0uZ3JvdXBTZWxlY3RlZCA9IHRoaXM7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmICh0aGlzLnN0YXRlLmhtLmdyb3VwU2VsZWN0ZWQgPT0gdGhpcykge1xyXG4gICAgICAgICAgICB0aGlzLnN0YXRlLmhtLmdyb3VwU2VsZWN0ZWQgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxuR3JvdXAucHJvdG90eXBlLmNoYW5nZUNlbnRlciA9IGZ1bmN0aW9uKG5ld0NlbnRlcikge1xyXG5cdHRoaXMuc2VsZWN0aW9uLnggPSBuZXdDZW50ZXIueDtcclxuXHR0aGlzLnNlbGVjdGlvbi55ID0gbmV3Q2VudGVyLnk7XHJcblx0dGhpcy5ib29rLnggPSBuZXdDZW50ZXIueDtcclxuXHR0aGlzLmJvb2sueSA9IG5ld0NlbnRlci55O1xyXG5cdHRoaXMubG9jay54ID0gbmV3Q2VudGVyLng7XHJcblx0dGhpcy5sb2NrLnkgPSBuZXdDZW50ZXIueTtcclxuXHR0aGlzLmNlbnRlciA9IG5ld0NlbnRlcjtcclxufTtcclxuR3JvdXAucHJvdG90eXBlLm51bVBlb3BsZSA9IGZ1bmN0aW9uKCkge1xyXG5cdHJldHVybiB0aGlzLm1lbWJlcnMubGVuZ3RoO1xyXG59O1xyXG5Hcm91cC5wcm90b3R5cGUubG93ZXN0RWR1Y2F0aW9uID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgbG93ZXN0ID0gMztcclxuICAgIGZvciAodmFyIG1lbWJlciBpbiB0aGlzLm1lbWJlcnMpIHtcclxuICAgICAgICBtZW1iZXIgPSB0aGlzLm1lbWJlcnNbbWVtYmVyXTtcclxuICAgICAgICBpZiAobWVtYmVyLmVkdUxldmVsIDwgbG93ZXN0KSB7XHJcbiAgICAgICAgICAgIGxvd2VzdCA9IG1lbWJlci5lZHVMZXZlbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbG93ZXN0O1xyXG59O1xyXG5Hcm91cC5wcm90b3R5cGUuYXZlcmFnZUhhcHBpbmVzcyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIGhhcHBpbmVzcyA9IDA7XHJcbiAgICBmb3IgKHZhciBtZW1iZXIgaW4gdGhpcy5tZW1iZXJzKSB7XHJcbiAgICAgICAgbWVtYmVyID0gdGhpcy5tZW1iZXJzW21lbWJlcl07XHJcbiAgICAgICAgaGFwcGluZXNzICs9IG1lbWJlci5oYXBwaW5lc3M7XHJcbiAgICB9XHJcbiAgICBoYXBwaW5lc3MgLz0gdGhpcy5tZW1iZXJzLmxlbmd0aDtcclxuICAgIHJldHVybiBoYXBwaW5lc3M7XHJcbn07XHJcbkdyb3VwLnByb3RvdHlwZS5hdmVyYWdlRmF0aWd1ZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIGZhdGlndWUgPSAwO1xyXG4gICAgZm9yICh2YXIgbWVtYmVyIGluIHRoaXMubWVtYmVycykge1xyXG4gICAgICAgIG1lbWJlciA9IHRoaXMubWVtYmVyc1ttZW1iZXJdO1xyXG4gICAgICAgIGZhdGlndWUgKz0gbWVtYmVyLmZhdGlndWU7XHJcbiAgICB9XHJcbiAgICBmYXRpZ3VlIC89IHRoaXMubWVtYmVycy5sZW5ndGg7XHJcbiAgICByZXR1cm4gZmF0aWd1ZTtcclxufTtcclxuR3JvdXAucHJvdG90eXBlLmluY29tZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIGluY29tZSA9IDA7XHJcbiAgICBmb3IgKHZhciBtZW1iZXIgaW4gdGhpcy5tZW1iZXJzKSB7XHJcbiAgICAgICAgbWVtYmVyID0gdGhpcy5tZW1iZXJzW21lbWJlcl07XHJcbiAgICAgICAgaW5jb21lICs9IG1lbWJlci5nZXRUYXgoKTtcclxuICAgIH1cclxuICAgIHJldHVybiBpbmNvbWU7XHJcbn07XHJcbi8vIEdyb3VwLnByb3RvdHlwZS5oYXBwaW5lc3NDaGFuZ2UgPSBmdW5jdGlvbigpIHtcclxuICAgIFxyXG4vLyB9O1xyXG4vLyBHcm91cC5wcm90b3R5cGUuaW5jb21lQ2hhbmdlID0gZnVuY3Rpb24oKSB7XHJcbiAgICBcclxuLy8gfTtcclxuLy8gR3JvdXAucHJvdG90eXBlLm1vdXNlRG93biA9IGZ1bmN0aW9uKCkge1xyXG5cdFxyXG4vLyB9O1xyXG5Hcm91cC5wcm90b3R5cGUub25Nb3ZlID0gZnVuY3Rpb24oKSB7XHJcbiAgICBpZiAodGhpcy5tZW1iZXJzLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgLy8gY29uc29sZS5sb2codGhpcy5tZW1iZXJzKTtcclxuXHR2YXIgbW91c2VYID0gdGhpcy5nYW1lLmlucHV0Lng7XHJcblx0dmFyIG1vdXNlWSA9IHRoaXMuZ2FtZS5pbnB1dC55O1xyXG4gICAgdmFyIGRpc3QgPSB1dGlsLmh5cG90ZW51c2UodGhpcy5jZW50ZXIueCAtIG1vdXNlWCwgdGhpcy5jZW50ZXIueSAtIG1vdXNlWSk7XHJcbiAgICBpZiAoZGlzdCA8PSB0aGlzLmNsaWNrRGlzdCkge1xyXG4gICAgICAgIGlmICghdGhpcy5zdGF0ZS5obS5ncm91cFNlbGVjdGVkIHx8IHRoaXMuc3RhdGUuaG0uZ3JvdXBTZWxlY3RlZCA9PSB0aGlzKSB7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdhJyk7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuaGFwcGluZXNzTW9kaWZpZXIpO1xyXG4gICAgICAgICAgICB0aGlzLnN0YXRlLmhtLnNob3dTdGF0aWMoe3Blb3BsZSA6IHRoaXMubnVtUGVvcGxlKCksIGVkdWNhdGlvbiA6IHRoaXMubG93ZXN0RWR1Y2F0aW9uKCksIGhhcHBpbmVzcyA6IHRoaXMuYXZlcmFnZUhhcHBpbmVzcygpLCBmYXRpZ3VlIDogdGhpcy5hdmVyYWdlRmF0aWd1ZSgpLCBpbmNvbWUgOiB0aGlzLmluY29tZSgpLCBoYXBwaW5lc3NNb2RpZmllciA6IHRoaXMuaGFwcGluZXNzTW9kaWZpZXJ9LCB0aGlzLmNlbnRlci54LCB0aGlzLmNlbnRlci55IC0gNTAsIDEwMCk7XHJcbiAgICAgICAgICAgIHRoaXMuaG92ZXIgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaG92ZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5ob3ZlciA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLnN0YXRlLmhtLmhpZGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuaG0uZ3JvdXBTZWxlY3RlZCA9PSB0aGlzICYmIHRoaXMubXlNYW5hZ2VyLmJhY2tncm91bmQubXlNYW5hZ2VyLndoZXJlQ2xpY2tlZCgpICE9IHRoaXMubXlNYW5hZ2VyLmJhY2tncm91bmRcclxuICAgICAgICAgICAgJiYgdGhpcy5teU1hbmFnZXIuYmFja2dyb3VuZC5teU1hbmFnZXIuY2FuVHJhbnNmZXIodGhpcy5teU1hbmFnZXIuYmFja2dyb3VuZCwgdGhpcy5teU1hbmFnZXIuYmFja2dyb3VuZC5teU1hbmFnZXIud2hlcmVDbGlja2VkKCksIHRoaXMpKSB7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdhJyk7XHJcbiAgICAgICAgICAgIHZhciBiZ01hbmFnZXIgPSB0aGlzLm15TWFuYWdlci5iYWNrZ3JvdW5kLm15TWFuYWdlclxyXG4gICAgICAgICAgICB2YXIgdHJhbnNmZXJUeXBlID0gYmdNYW5hZ2VyLnRyYW5zZmVyVHlwZSh0aGlzLm15TWFuYWdlci5iYWNrZ3JvdW5kLCBiZ01hbmFnZXIud2hlcmVDbGlja2VkKCksIHRoaXMpO1xyXG4gICAgICAgICAgICB0aGlzLnN0YXRlLmhtLnNob3dDaGFuZ2UodHJhbnNmZXJUeXBlLmNhbiwge2hhcHBpbmVzc0NoYW5nZSA6IHRyYW5zZmVyVHlwZS5oYXBwaW5lc3NDaGFuZ2UsIGluY29tZUNoYW5nZSA6IHRyYW5zZmVyVHlwZS5pbmNvbWVDaGFuZ2V9LCBtb3VzZVgsIG1vdXNlWSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2InKTtcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5obS5oaWRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59O1xyXG4vLyBHcm91cC5wcm90b3R5cGUuaGFwcGluZXNzTW9kaWZpZXIgPSBmdW5jdGlvbigpIHtcclxuLy8gICAgIHJldHVybiB0aGlzLmhhcHBpbmVzc01vZGlmaWVyO1xyXG4vLyB9O1xyXG5Hcm91cC5wcm90b3R5cGUuYXBwbHlIYXBwaW5lc3MgPSBmdW5jdGlvbigpIHtcclxuXHQvLyBjb25zb2xlLmxvZygnYXBwbHknKTtcclxuXHR2YXIgZmxhZyA9IGZhbHNlO1xyXG5cdGZvciAodmFyIG1lbWJlciBpbiB0aGlzLm1lbWJlcnMpIHtcclxuXHRcdG1lbWJlciA9IHRoaXMubWVtYmVyc1ttZW1iZXJdO1xyXG5cdFx0Ly8gY29uc29sZS5sb2cobWVtYmVyLmhhcHBpbmVzcywgdGhpcy5oYXBwaW5lc3NNb2RpZmllcik7XHJcblx0XHQvLyBjb25zb2xlLmxvZ3FtZW1iZXIuaGFwcGluZXNzLCB0aGlzLmhhcHBpbmVzc01vZGlmaWVyKTtcclxuXHRcdG1lbWJlci5oYXBwaW5lc3MgKz0gdGhpcy5oYXBwaW5lc3NNb2RpZmllcjtcclxuXHRcdC8vIG1lbWJlci5oYXBwaW5lc3MgLT0gNTA7XHJcblx0XHRpZiAobWVtYmVyLmhhcHBpbmVzcyA+IDEwMCkge1xyXG5cdFx0XHRtZW1iZXIuaGFwcGluZXNzID0gMTAwO1xyXG5cdFx0fSBlbHNlIGlmIChtZW1iZXIuaGFwcGluZXNzIDw9IDApIHtcclxuXHRcdFx0bWVtYmVyLmhhcHBpbmVzcyA9IDA7XHJcblx0XHRcdGZsYWcgPSB0cnVlO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRpZiAoZmxhZykge1xyXG5cdFx0dGhpcy5nZXRPdXRPZlRvd24oKTtcclxuXHR9XHJcbn07XHJcbkdyb3VwLnByb3RvdHlwZS5hZGRGYXRpZ3VlID0gZnVuY3Rpb24oYW10KSB7XHJcblx0Ly8gY29uc29sZS5sb2coYW10KTtcclxuXHRpZiAodGhpcy5tZW1iZXJzWzBdLmZhdGlndWUgPD0gMCAmJiBhbXQgPD0gMCkge1xyXG5cdFx0cmV0dXJuO1xyXG5cdH1cclxuXHR2YXIgZmxhZyA9IGZhbHNlO1xyXG5cdGZvciAodmFyIG1lbWJlciBpbiB0aGlzLm1lbWJlcnMpIHtcclxuXHRcdHRoaXMubWVtYmVyc1ttZW1iZXJdLmZhdGlndWUgKz0gYW10O1xyXG5cdFx0aWYgKHRoaXMubWVtYmVyc1ttZW1iZXJdLmZhdGlndWUgPj0gMTAwKSB7XHJcblx0XHRcdGZsYWcgPSB0cnVlO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRpZiAoZmxhZykge1xyXG5cdFx0Ly8gY29uc29sZS5sb2codGhpcyk7XHJcblx0XHR0aGlzLmdldE91dE9mVG93bigpO1xyXG5cdFx0Ly9jb25zb2xlLmxvZygnZmF0aWd1ZSB0b28gZGFtIGhpZ2gnKTtcclxuXHR9XHJcbn07XHJcbkdyb3VwLnByb3RvdHlwZS5nZXRPdXRPZlRvd24gPSBmdW5jdGlvbigpIHtcclxuXHR2YXIgbmV3QkcgPSB0aGlzLm15TWFuYWdlci5iYWNrZ3JvdW5kLm15TWFuYWdlci5iYWNrZ3JvdW5kQnkoJ2hvdXNlJywgdGhpcy5teU1hbmFnZXIuYmFja2dyb3VuZC5pbmNvbWVMZXZlbCk7XHJcblx0aWYgKCFuZXdCRykge1xyXG5cdFx0Y29uc29sZS5sb2coJ0VSUk9SJyk7XHJcblx0XHRyZXR1cm47XHJcblx0fVxyXG5cdHRoaXMubXlNYW5hZ2VyLmJhY2tncm91bmQubXlNYW5hZ2VyLnNlbmRUbyh0aGlzLm15TWFuYWdlci5iYWNrZ3JvdW5kLCBuZXdCRywgdGhpcyk7XHJcblx0dGhpcy5sb2NrSXQoKTtcclxufVxyXG5Hcm91cC5wcm90b3R5cGUubG9ja0l0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICB0aGlzLmxvY2tlZCA9IHRydWU7XHJcbiAgICB0aGlzLmxvY2sudmlzaWJsZSA9IHRydWU7XHJcblx0dGhpcy5zdGF0ZS5nYW1lLnRpbWUuZXZlbnRzLmFkZChQaGFzZXIuVGltZXIuU0VDT05EICogdGhpcy5sb2NrVGltZSwgdGhpcy5lbmRMb2NrLCB0aGlzKTtcclxufTtcclxuR3JvdXAucHJvdG90eXBlLmVuZExvY2sgPSBmdW5jdGlvbigpIHtcclxuICAgIHRoaXMubG9ja2VkID0gZmFsc2U7XHJcbiAgICB0aGlzLmxvY2sudmlzaWJsZSA9IGZhbHNlO1xyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBHcm91cDtcclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuIiwidmFyIFV0aWwgPSByZXF1aXJlKCcuLi91dGlscycpO1xyXG52YXIgR3JvdXAgPSByZXF1aXJlKCcuL2dyb3VwJyk7XHJcblxyXG52YXIgR3JvdXBNYW5hZ2VyID0gZnVuY3Rpb24gKGdhbWUsIHN0YXRlKSB7XHJcblx0dGhpcy5nYW1lID0gZ2FtZTtcclxuXHR0aGlzLm1lbWJlcnMgPSBbXTtcclxuXHR0aGlzLnN0YXRlID0gc3RhdGU7XHJcblx0dGhpcy5zcGxpdENoYW5jZSA9IDAuMTtcclxuXHR0aGlzLm1heFNpemUgPSAyO1xyXG5cdHRoaXMubWFyZ2luID0gNTA7XHJcblx0dGhpcy53aWR0aCA9IDA7XHJcblx0dGhpcy5oZWlnaHQgPSAwO1xyXG5cdHRoaXMuY2VudGVyID0ge3ggOiAwLCB5IDogMH07XHJcbn07XHJcbkdyb3VwTWFuYWdlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBHcm91cE1hbmFnZXI7XHJcbkdyb3VwTWFuYWdlci5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24oKSB7XHJcblx0Ly8gdGhpcy51cGRhdGVWYXJzKCk7XHJcblx0Ly8gY29uc29sZS5sb2codGhpcy5tZW1iZXJzKTtcclxuXHQvLyBjb25zb2xlLmxvZyh0aGlzLmNlbnRlcik7XHJcblx0Ly91cGRhdGUgYm91bmRzXHJcblx0aWYgKHRoaXMuYmFja2dyb3VuZCkge1xyXG5cdFx0dmFyIHZhcnMgPSB0aGlzLmJhY2tncm91bmQuZ2V0VmFyc1RydWUoKTtcclxuXHRcdHRoaXMud2lkdGggPSB2YXJzLndpZHRoO1xyXG5cdFx0dGhpcy5oZWlnaHQgPSB2YXJzLmhlaWdodDtcclxuXHRcdHRoaXMuY2VudGVyID0gdmFycy5jZW50ZXI7XHJcblx0XHQvLyBjb25zb2xlLmxvZyh2YXJzKTtcclxuXHR9IGVsc2Uge1xyXG5cdFx0cmV0dXJuO1xyXG5cdH1cclxuXHQvL3VwZGF0ZSBpbnRlci1ncm91cCBtb3ZlbWVudFxyXG5cdC8vIGNvbnNvbGUubG9nKE1hdGgucmFuZG9tKCkpO1xyXG5cdHZhciBsYXJnZXN0ID0gbnVsbDtcclxuXHR2YXIgbGFyZ2VzdFNpemUgPSAwO1xyXG5cdGZvciAodmFyIG1lbWJlciBpbiB0aGlzLm1lbWJlcnMpIHtcclxuXHRcdG1lbWJlciA9IHRoaXMubWVtYmVyc1ttZW1iZXJdO1xyXG5cdFx0dmFyIHNpemUgPSBtZW1iZXIubnVtUGVvcGxlKCk7XHJcblx0XHRpZiAoc2l6ZSA+PSBsYXJnZXN0U2l6ZSkge1xyXG5cdFx0XHRsYXJnZXN0U2l6ZSA9IHNpemU7XHJcblx0XHRcdGxhcmdlc3QgPSBtZW1iZXI7XHJcblx0XHR9XHJcblx0fVxyXG5cdGlmIChsYXJnZXN0U2l6ZSA+PSB0aGlzLm1heFNpemUpIHtcclxuXHRcdC8vIGNvbnNvbGUubG9nKCdzcGxpdCcpO1xyXG5cdFx0dmFyIG5ld0dyb3VwID0gbmV3IEdyb3VwKHRoaXMuZ2FtZSwgdGhpcy5jZW50ZXIueCwgdGhpcy5jZW50ZXIueSwgdGhpcy5zdGF0ZSk7XHJcblx0XHR0aGlzLmFkZE1lbWJlcihuZXdHcm91cCk7XHJcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGxhcmdlc3RTaXplIC8gMjsgaSsrKSB7XHJcblx0XHRcdHRoaXMudHJhbnNmZXJQZW9wbGUobGFyZ2VzdCwgbmV3R3JvdXAsIGxhcmdlc3QubWVtYmVyc1swXSk7XHJcblx0XHR9XHJcblx0fVxyXG5cdC8vdXBkYXRlIG1lbWJlcnNcclxuXHRmb3IgKG1lbWJlciBpbiB0aGlzLm1lbWJlcnMpIHtcclxuXHRcdHRoaXMubWVtYmVyc1ttZW1iZXJdLnVwZGF0ZSgpO1xyXG5cdH1cclxufTtcclxuR3JvdXBNYW5hZ2VyLnByb3RvdHlwZS51cGRhdGVWYXJzID0gZnVuY3Rpb24oKSB7XHJcblx0dmFyIHZhcnMgPSB0aGlzLmJhY2tncm91bmQuZ2V0VmFyc1RydWUoKTtcclxuXHR0aGlzLndpZHRoID0gdmFycy53aWR0aDtcclxuXHR0aGlzLmhlaWdodCA9IHZhcnMuaGVpZ2h0O1xyXG5cdHRoaXMuY2VudGVyID0gdmFycy5jZW50ZXI7XHJcblx0Ly8gY29uc29sZS5sb2codGhpcy5iYWNrZ3JvdW5kLnR5cGUsIHRoaXMuYmFja2dyb3VuZC5pbmNvbWVMZXZlbCwgdmFycy53aWR0aCwgdmFycy5oZWlnaHQsIHZhcnMuY2VudGVyLngsIHZhcnMuY2VudGVyLnkpO1xyXG5cdHZhciBsZWZ0Qm91bmQgPSB0aGlzLmNlbnRlci54IC0gdGhpcy53aWR0aCAvIDI7XHJcblx0dmFyIHJpZ2h0Qm91bmQgPSB0aGlzLmNlbnRlci54ICsgdGhpcy53aWR0aCAvIDI7XHJcblx0dmFyIHVwcGVyQm91bmQgPSB0aGlzLmNlbnRlci55IC0gdGhpcy5oZWlnaHQgLyAyO1xyXG5cdHZhciBsb3dlckJvdW5kID0gdGhpcy5jZW50ZXIueSArIHRoaXMuaGVpZ2h0IC8gMjtcclxuXHJcblx0Ly8gdmFyIG15QkcgPSB0aGlzLmJhY2tncm91bmQ7XHJcblx0Ly8gY29uc29sZS5sb2cobXlCRy50eXBlLCBteUJHLmluY29tZUxldmVsLCBsZWZ0Qm91bmQsIHJpZ2h0Qm91bmQsIHVwcGVyQm91bmQsIGxvd2VyQm91bmQpXHJcblxyXG5cdGZvciAodmFyIG1lbWJlciBpbiB0aGlzLm1lbWJlcnMpIHtcclxuXHRcdG1lbWJlciA9IHRoaXMubWVtYmVyc1ttZW1iZXJdO1xyXG5cdFx0aWYgKG1lbWJlci5jZW50ZXIueCAtIHRoaXMubWFyZ2luIDw9IGxlZnRCb3VuZCB8fCBtZW1iZXIuY2VudGVyLnggKyB0aGlzLm1hcmdpbiA+PSByaWdodEJvdW5kIHx8IG1lbWJlci5jZW50ZXIueSAtIHRoaXMubWFyZ2luIDw9IHVwcGVyQm91bmQgfHwgbWVtYmVyLmNlbnRlci55ICsgdGhpcy5tYXJnaW4gPj0gbG93ZXJCb3VuZCkge1xyXG5cdFx0XHQvLyBjb25zb2xlLmxvZygncGVyc29uJywgbWVtYmVyLmNlbnRlciwgbGVmdEJvdW5kLCByaWdodEJvdW5kLCB1cHBlckJvdW5kLCBsb3dlckJvdW5kKTtcclxuXHRcdFx0Ly8gY29uc29sZS5sb2coJ2dyb3VwIG1hbmFnZXInLCB0aGlzLmNlbnRlciwgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xyXG5cdFx0XHRtZW1iZXIuY2VudGVyLnggPSB0aGlzLmNlbnRlci54IC0gdGhpcy53aWR0aCAvIDIgKyB0aGlzLm1hcmdpbiArICh0aGlzLndpZHRoIC0gdGhpcy5tYXJnaW4gKiAyKSAqIE1hdGgucmFuZG9tKCk7XHJcblx0XHRcdG1lbWJlci5jZW50ZXIueSA9IHRoaXMuY2VudGVyLnkgLSB0aGlzLmhlaWdodCAvIDIgKyB0aGlzLm1hcmdpbiArICh0aGlzLmhlaWdodCAtIHRoaXMubWFyZ2luICogMikgKiBNYXRoLnJhbmRvbSgpO1xyXG5cdFx0fVxyXG5cdH1cclxufTtcclxuR3JvdXBNYW5hZ2VyLnByb3RvdHlwZS50cmFuc2ZlciA9IGZ1bmN0aW9uKG90aGVyR00sIG15TWVtYmVyKSB7XHJcblx0Ly8gdmFyIHRlc3RWYWxzID0gb3RoZXJHTS5iYWNrZ3JvdW5kLmdldFZhcnNDZW50ZXIoKTtcclxuXHQvLyBjb25zb2xlLmxvZygndHJhbnNmZXIgdG8nLCBvdGhlckdNLmJhY2tncm91bmQudHlwZSwgb3RoZXJHTS5iYWNrZ3JvdW5kLmluY29tZUxldmVsLCB0ZXN0VmFscy5jZW50ZXIueSwgdGVzdFZhbHMueSwgdGVzdFZhbHMudmlzSGVpZ2h0LCB0ZXN0VmFscy52UmF0aW8pO1xyXG5cdHZhciBpbmRleCA9IHRoaXMubWVtYmVycy5pbmRleE9mKG15TWVtYmVyKTtcclxuXHR0aGlzLm1lbWJlcnMuc3BsaWNlKGluZGV4LCAxKTtcclxuXHRvdGhlckdNLmFkZE1lbWJlcihteU1lbWJlcik7XHJcbn07XHJcbkdyb3VwTWFuYWdlci5wcm90b3R5cGUudHJhbnNmZXJQZW9wbGUgPSBmdW5jdGlvbihzb3VyY2UsIGRlc3RpbmF0aW9uLCB0UGVyc29uKSB7XHJcblx0dmFyIGluZGV4ID0gc291cmNlLm1lbWJlcnMuaW5kZXhPZih0UGVyc29uKTtcclxuXHRzb3VyY2UubWVtYmVycy5zcGxpY2UoaW5kZXgsIDEpO1xyXG5cdGRlc3RpbmF0aW9uLmFkZE1lbWJlcih0UGVyc29uKTtcclxufTtcclxuR3JvdXBNYW5hZ2VyLnByb3RvdHlwZS5hZGRNZW1iZXIgPSBmdW5jdGlvbihtZW1iZXIpIHtcclxuXHR0aGlzLm1lbWJlcnMucHVzaChtZW1iZXIpO1xyXG5cdG1lbWJlci5teU1hbmFnZXIgPSB0aGlzO1xyXG5cdG1lbWJlci5jZW50ZXIueCA9IHRoaXMuY2VudGVyLnggLSB0aGlzLndpZHRoIC8gMiArIHRoaXMubWFyZ2luICsgKHRoaXMud2lkdGggLSB0aGlzLm1hcmdpbiAqIDIpICogTWF0aC5yYW5kb20oKTtcclxuXHRtZW1iZXIuY2VudGVyLnkgPSB0aGlzLmNlbnRlci55IC0gdGhpcy5oZWlnaHQgLyAyICsgdGhpcy5tYXJnaW4gKyAodGhpcy5oZWlnaHQgLSB0aGlzLm1hcmdpbiAqIDIpICogTWF0aC5yYW5kb20oKTtcclxufTtcclxuR3JvdXBNYW5hZ2VyLnByb3RvdHlwZS5hZGRQZXJzb24gPSBmdW5jdGlvbihuZXdQZXJzb24pIHtcclxuXHRpZiAodGhpcy5tZW1iZXJzLmxlbmd0aCA9PSAwKSB7XHJcblx0XHQvLyBjb25zb2xlLmxvZyh0aGlzLmNlbnRlcik7XHJcblx0XHR0aGlzLmFkZE1lbWJlcihuZXcgR3JvdXAodGhpcy5nYW1lLCB0aGlzLmNlbnRlci54LCB0aGlzLmNlbnRlci55LCB0aGlzLnN0YXRlKSwgdHJ1ZSk7XHJcblx0XHQvLyBjb25zb2xlLmxvZygnbmV3IGdyb3VwJyk7XHJcblx0fVxyXG5cdHRoaXMubWVtYmVyc1swXS5hZGRNZW1iZXIobmV3UGVyc29uKTtcclxufTtcclxuR3JvdXBNYW5hZ2VyLnByb3RvdHlwZS5udW1QZW9wbGUgPSBmdW5jdGlvbigpIHtcclxuXHR2YXIgY291bnQgPSAwO1xyXG5cdGZvciAodmFyIG1lbWJlciBpbiB0aGlzLm1lbWJlcnMpIHtcclxuXHRcdG1lbWJlciA9IHRoaXMubWVtYmVyc1ttZW1iZXJdO1xyXG5cdFx0Y291bnQgKz0gbWVtYmVyLm51bVBlb3BsZSgpO1xyXG5cdH1cclxuXHRyZXR1cm4gY291bnQ7XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IEdyb3VwTWFuYWdlcjtcclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG4iLCJ2YXIgSG92ZXJNZW51ID0gZnVuY3Rpb24gKGdhbWUsIHgsIHksIHN0YXRlKSB7XHJcblx0UGhhc2VyLlNwcml0ZS5jYWxsKHRoaXMsIGdhbWUsIHgsIHksICdib3JkZXJlZCcpO1xyXG5cdGdhbWUuYWRkLmV4aXN0aW5nKHRoaXMpO1xyXG5cdHRoaXMueCA9IHg7XHJcblx0dGhpcy55ID0geTtcclxuICAgIHRoaXMuZ3JvdXBTZWxlY3RlZCA9IG51bGw7XHJcblx0dGhpcy53aWR0aCA9IDI1NjtcclxuXHR0aGlzLmhlaWdodCA9IDEyODtcclxuICAgIHRoaXMuc3RhdGljV2lkdGggPSAyNTY7XHJcbiAgICB0aGlzLnN0YXRpY0hlaWdodCA9IDEyODtcclxuICAgIHRoaXMuY2hhbmdlV2lkdGggPSAyMjQ7XHJcbiAgICB0aGlzLmNoYW5nZUhlaWdodCA9IDY0O1xyXG4gICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xyXG5cdFxyXG5cdHRoaXMuc3RhdGljVGV4dCA9IHRoaXMuZ2FtZS5hZGQuZ3JvdXAoKTtcclxuXHR0aGlzLmNoYW5nZVRleHQgPSB0aGlzLmdhbWUuYWRkLmdyb3VwKCk7XHJcbiAgICB0aGlzLnZpc2libGUgPSBmYWxzZTtcclxuXHJcbiAgICB0aGlzLmNoZXZyb24gPSB0aGlzLmdhbWUuYWRkLnNwcml0ZSh0aGlzLngsIHRoaXMueSwgJ2NoZXZyb25zJyk7XHJcbiAgICB0aGlzLmNoZXZyb24uYW5jaG9yLnNldFRvKDAuNSwgMC41KTtcclxuICAgIHRoaXMuY2hldnJvbi5mcmFtZSA9IDM7XHJcbiAgICB0aGlzLmNoZXZyb24ueSAtPSB0aGlzLmhlaWdodDtcclxuICAgIHRoaXMuY2hldnJvbi54ICs9IDI1O1xyXG4gICAgXHJcbiAgICAvLyB0aGlzLnN0YXRlLmlucHV0LmFkZE1vdmVDYWxsYmFjayh0aGlzLm9uSW5wdXRNb3ZlLCB0aGlzKTtcclxuXHRcclxuXHR0aGlzLnBlb3BsZSA9IHRoaXMuZ2FtZS5hZGQudGV4dCgxMCwgMTAsICdQZW9wbGU6IDAnKTtcclxuXHR0aGlzLnBlb3BsZS5mb250ID0gJ1JvYm90byc7XHJcblx0dGhpcy5wZW9wbGUuZm9udFNpemUgPSAxODtcclxuXHR0aGlzLnBlb3BsZS5maWxsID0gJyMwMDAwMDAnO1xyXG5cdFxyXG5cdHRoaXMuZWR1Y2F0aW9uID0gdGhpcy5nYW1lLmFkZC50ZXh0KDEwLCAxMCwgJ0VkdWNhdGlvbjogTG93Jyk7XHJcblx0dGhpcy5lZHVjYXRpb24uZm9udCA9ICdSb2JvdG8nO1xyXG5cdHRoaXMuZWR1Y2F0aW9uLmZvbnRTaXplID0gMTg7XHJcblx0dGhpcy5lZHVjYXRpb24uZmlsbCA9ICcjMDAwMDAwJztcclxuXHRcclxuXHR0aGlzLmhhcHBpbmVzcyA9IHRoaXMuZ2FtZS5hZGQudGV4dCgxMCwgMTAsICdIYXBwaW5lc3M6ICUxMDAnKTtcclxuXHR0aGlzLmhhcHBpbmVzcy5mb250ID0gJ1JvYm90byc7XHJcblx0dGhpcy5oYXBwaW5lc3MuZm9udFNpemUgPSAxODtcclxuXHR0aGlzLmhhcHBpbmVzcy5maWxsID0gJyMwMDAwMDAnO1xyXG5cdFxyXG5cdHRoaXMuZmF0aWd1ZSA9IHRoaXMuZ2FtZS5hZGQudGV4dCgxMCwgMTAsICdGYXRpZ3VlOiAlMCcpO1xyXG5cdHRoaXMuZmF0aWd1ZS5mb250ID0gJ1JvYm90byc7XHJcblx0dGhpcy5mYXRpZ3VlLmZvbnRTaXplID0gMTg7XHJcblx0dGhpcy5mYXRpZ3VlLmZpbGwgPSAnIzAwMDAwMCc7XHJcblx0XHJcbiAgICB0aGlzLmluY29tZSA9IHRoaXMuZ2FtZS5hZGQudGV4dCgxMCwgMTAsICdJbmNvbWU6ICQwJyk7XHJcblx0dGhpcy5pbmNvbWUuZm9udCA9ICdSb2JvdG8nO1xyXG5cdHRoaXMuaW5jb21lLmZvbnRTaXplID0gMTg7XHJcblx0dGhpcy5pbmNvbWUuZmlsbCA9ICcjMDAwMDAwJztcclxuICAgIFxyXG5cdHRoaXMuc3RhdGljVGV4dC5hZGQodGhpcy5wZW9wbGUpO1xyXG5cdHRoaXMuc3RhdGljVGV4dC5hZGQodGhpcy5lZHVjYXRpb24pO1xyXG4gICAgdGhpcy5lZHVjYXRpb24ueSArPSAyMiAqIDE7XHJcblx0dGhpcy5zdGF0aWNUZXh0LmFkZCh0aGlzLmhhcHBpbmVzcyk7XHJcbiAgICB0aGlzLmhhcHBpbmVzcy55ICs9IDIyICogMjtcclxuXHR0aGlzLnN0YXRpY1RleHQuYWRkKHRoaXMuZmF0aWd1ZSk7XHJcbiAgICB0aGlzLmZhdGlndWUueSArPSAyMiAqIDM7XHJcblx0dGhpcy5zdGF0aWNUZXh0LmFkZCh0aGlzLmluY29tZSk7XHJcbiAgICB0aGlzLmluY29tZS55ICs9IDIyICogNDtcclxuICAgIHRoaXMuc3RhdGljVGV4dC5hZGQodGhpcy5jaGV2cm9uKTtcclxuICAgIHRoaXMuc3RhdGljVGV4dC52aXNpYmxlID0gZmFsc2U7XHJcbiAgICB0aGlzLnN0YXRpY1RleHQueCA9IHRoaXMueDtcclxuICAgIHRoaXMuc3RhdGljVGV4dC55ID0gdGhpcy55O1xyXG5cdFxyXG5cdHRoaXMuaGFwcGluZXNzQ2hhbmdlID0gdGhpcy5nYW1lLmFkZC50ZXh0KDEwLCAxMCwgJ0hhcHBpbmVzcyA9Jyk7XHJcblx0dGhpcy5oYXBwaW5lc3NDaGFuZ2UuZm9udCA9ICdSb2JvdG8nO1xyXG5cdHRoaXMuaGFwcGluZXNzQ2hhbmdlLmZvbnRTaXplID0gMTg7XHJcblx0dGhpcy5oYXBwaW5lc3NDaGFuZ2UuZmlsbCA9ICcjMDAwMDAwJztcclxuXHRcclxuXHR0aGlzLmluY29tZUNoYW5nZSA9IHRoaXMuZ2FtZS5hZGQudGV4dCgxMCwgMTAsICdJbmNvbWUgPScpO1xyXG5cdHRoaXMuaW5jb21lQ2hhbmdlLmZvbnQgPSAnUm9ib3RvJztcclxuXHR0aGlzLmluY29tZUNoYW5nZS5mb250U2l6ZSA9IDE4O1xyXG5cdHRoaXMuaW5jb21lQ2hhbmdlLmZpbGwgPSAnIzAwMDAwMCc7XHJcbiAgICBcclxuICAgIHRoaXMuY2hhbmdlVGV4dC5hZGQodGhpcy5oYXBwaW5lc3NDaGFuZ2UpO1xyXG4gICAgdGhpcy5jaGFuZ2VUZXh0LmFkZCh0aGlzLmluY29tZUNoYW5nZSk7XHJcbiAgICB0aGlzLmluY29tZUNoYW5nZS55ICs9IDIyICogMTtcclxuICAgIHRoaXMuY2hhbmdlVGV4dC52aXNpYmxlID0gZmFsc2U7XHJcbiAgICB0aGlzLmNoYW5nZVRleHQueCA9IHRoaXMueDtcclxuICAgIHRoaXMuY2hhbmdlVGV4dC55ID0gdGhpcy55O1xyXG59O1xyXG5Ib3Zlck1lbnUucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShQaGFzZXIuU3ByaXRlLnByb3RvdHlwZSk7XHJcbkhvdmVyTWVudS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBIb3Zlck1lbnU7XHJcbkhvdmVyTWVudS5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24oKSB7XHJcblx0XHJcbn07XHJcbi8vcGVvcGxlLCBlZHVjYXRpb24sIGhhcHBpbmVzcywgZmF0aWd1ZSwgaW5jb21lXHJcbkhvdmVyTWVudS5wcm90b3R5cGUuc2hvd1N0YXRpYyA9IGZ1bmN0aW9uKHN0YXRlLCB4LCB5LCBvdmVyKSB7XHJcbiAgICAvLyBjb25zb2xlLmxvZygnc3RhdGljJyk7XHJcbiAgICB4IC09IHRoaXMud2lkdGggLyAyO1xyXG4gICAgeSAtPSB0aGlzLmhlaWdodDtcclxuXHR0aGlzLnBlb3BsZS50ZXh0ID0gJ1Blb3BsZTogJyArIHN0YXRlLnBlb3BsZTtcclxuICAgIHRoaXMuZWR1Y2F0aW9uLnRleHQgPSAnRWR1Y2F0aW9uOiAnICsgc3RhdGUuZWR1Y2F0aW9uO1xyXG4gICAgdGhpcy5oYXBwaW5lc3MudGV4dCA9ICdIYXBwaW5lc3M6ICUnICsgc3RhdGUuaGFwcGluZXNzO1xyXG4gICAgdGhpcy5mYXRpZ3VlLnRleHQgPSAnRmF0aWd1ZTogJScgKyBzdGF0ZS5mYXRpZ3VlO1xyXG4gICAgdGhpcy5pbmNvbWUudGV4dCA9ICdJbmNvbWU6ICQnICsgc3RhdGUuaW5jb21lO1xyXG4gICAgdmFyIGhhcHBpbmVzc01vZGlmaWVyID0gc3RhdGUuaGFwcGluZXNzTW9kaWZpZXI7XHJcbiAgICBpZiAoaGFwcGluZXNzTW9kaWZpZXIgPT0gLTMpIHtcclxuICAgICAgICB0aGlzLmNoZXZyb24uZnJhbWUgPSAwO1xyXG4gICAgfSBlbHNlIGlmIChoYXBwaW5lc3NNb2RpZmllciA9PSAtMikge1xyXG4gICAgICAgIHRoaXMuY2hldnJvbi5mcmFtZSA9IDE7XHJcbiAgICB9IGVsc2UgaWYgKGhhcHBpbmVzc01vZGlmaWVyID09IC0xKSB7XHJcbiAgICAgICAgdGhpcy5jaGV2cm9uLmZyYW1lID0gMjtcclxuICAgIH0gZWxzZSBpZiAoaGFwcGluZXNzTW9kaWZpZXIgPT0gMCkge1xyXG4gICAgICAgIHRoaXMuY2hldnJvbi5mcmFtZSA9IDM7XHJcbiAgICB9IGVsc2UgaWYgKGhhcHBpbmVzc01vZGlmaWVyID09IDEpIHtcclxuICAgICAgICB0aGlzLmNoZXZyb24uZnJhbWUgPSA0O1xyXG4gICAgfSBlbHNlIGlmIChoYXBwaW5lc3NNb2RpZmllciA9PSAyKSB7XHJcbiAgICAgICAgdGhpcy5jaGV2cm9uLmZyYW1lID0gNTtcclxuICAgIH0gZWxzZSBpZiAoaGFwcGluZXNzTW9kaWZpZXIgPT0gMykge1xyXG4gICAgICAgIHRoaXMuY2hldnJvbi5mcmFtZSA9IDY7XHJcbiAgICB9XHJcbiAgICB0aGlzLnN0YXRpY1RleHQudmlzaWJsZSA9IHRydWU7XHJcbiAgICB0aGlzLnZpc2libGUgPSB0cnVlO1xyXG4gICAgdGhpcy53aWR0aCA9IHRoaXMuc3RhdGljV2lkdGg7XHJcbiAgICB0aGlzLmhlaWdodCA9IHRoaXMuc3RhdGljSGVpZ2h0O1xyXG4gICAgdGhpcy54ID0geDtcclxuICAgIHRoaXMueSA9IHk7XHJcbiAgICB0aGlzLnN0YXRpY1RleHQueCA9IHg7XHJcbiAgICB0aGlzLnN0YXRpY1RleHQueSA9IHk7XHJcbiAgICB0aGlzLmFkanVzdFN0YXRpYyhvdmVyKTtcclxufTtcclxuLy9oYXBwaW5lc3NDaGFuZ2UsIGluY29tZUNoYW5nZVxyXG5Ib3Zlck1lbnUucHJvdG90eXBlLnNob3dDaGFuZ2UgPSBmdW5jdGlvbihjYW4sIHN0YXRlLCB4LCB5KSB7XHJcbiAgICBpZiAoIWNhbikge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHR0aGlzLmhhcHBpbmVzc0NoYW5nZS50ZXh0ID0gJ0hhcHBpbmVzcyBjaGFuZ2U6ICcgKyBzdGF0ZS5oYXBwaW5lc3NDaGFuZ2U7XHJcbiAgICB0aGlzLmluY29tZUNoYW5nZS50ZXh0ID0gJ0luY29tZSBjaGFuZ2U6ICcgKyBzdGF0ZS5pbmNvbWVDaGFuZ2U7XHJcbiAgICB0aGlzLmNoYW5nZVRleHQudmlzaWJsZSA9IHRydWU7XHJcbiAgICB0aGlzLnZpc2libGUgPSB0cnVlO1xyXG4gICAgdGhpcy53aWR0aCA9IHRoaXMuY2hhbmdlV2lkdGg7XHJcbiAgICB0aGlzLmhlaWdodCA9IHRoaXMuY2hhbmdlSGVpZ2h0O1xyXG4gICAgeSAtPSB0aGlzLmhlaWdodDtcclxuICAgIHRoaXMueCA9IHg7XHJcbiAgICB0aGlzLnkgPSB5O1xyXG4gICAgdGhpcy5jaGFuZ2VUZXh0LnggPSB4O1xyXG4gICAgdGhpcy5jaGFuZ2VUZXh0LnkgPSB5O1xyXG4gICAgdGhpcy5hZGp1c3RDaGFuZ2UoKTtcclxufTtcclxuSG92ZXJNZW51LnByb3RvdHlwZS5hZGp1c3RTdGF0aWMgPSBmdW5jdGlvbihvdmVyKSB7XHJcbiAgICB2YXIgbWF4V2lkdGggPSB0aGlzLmdhbWUud2lkdGg7XHJcbiAgICB2YXIgbWF4SGVpZ2h0ID0gdGhpcy5nYW1lLmhlaWdodDtcclxuICAgIGlmICh0aGlzLnkgLSB0aGlzLmhlaWdodCA8PSAwKSB7IC8vIG92ZXIgdG9wIG9mIHNjcmVlblxyXG4gICAgICAgIHRoaXMueSArPSBvdmVyO1xyXG4gICAgICAgIHRoaXMueSArPSB0aGlzLmhlaWdodDtcclxuICAgICAgICB0aGlzLnN0YXRpY1RleHQueSA9IHRoaXMueTtcclxuICAgICAgICB0aGlzLmNoYW5nZVRleHQueSA9IHRoaXMueTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLnggLSB0aGlzLndpZHRoIC8gMiA8IDApIHsgLy8gb3ZlciBsZWZ0IG9mIHNjcmVlblxyXG4gICAgICAgIHRoaXMueCArPSB0aGlzLndpZHRoIC8gMjtcclxuICAgICAgICB0aGlzLnN0YXRpY1RleHQueCA9IHRoaXMueDtcclxuICAgICAgICB0aGlzLmNoYW5nZVRleHQueCA9IHRoaXMueDtcclxuICAgIH0gZWxzZSBpZiAodGhpcy54ICsgdGhpcy53aWR0aCAvIDIgPiBtYXhXaWR0aCkgeyAvLyBvdmVyIHJpZ2h0IG9mIHNjcmVlblxyXG4gICAgICAgIHRoaXMueCAtPSB0aGlzLndpZHRoIC8gMjtcclxuICAgICAgICB0aGlzLnN0YXRpY1RleHQueCA9IHRoaXMueDtcclxuICAgICAgICB0aGlzLmNoYW5nZVRleHQueCA9IHRoaXMueDtcclxuICAgIH1cclxufTtcclxuSG92ZXJNZW51LnByb3RvdHlwZS5hZGp1c3RDaGFuZ2UgPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBtYXhXaWR0aCA9IHRoaXMuZ2FtZS53aWR0aDtcclxuICAgIHZhciBtYXhIZWlnaHQgPSB0aGlzLmdhbWUuaGVpZ2h0O1xyXG4gICAgaWYgKHRoaXMueSAtIHRoaXMuaGVpZ2h0IDw9IDApIHsgLy8gb3ZlciB0b3Agb2Ygc2NyZWVuXHJcbiAgICAgICAgdGhpcy55ICs9IHRoaXMuaGVpZ2h0O1xyXG4gICAgICAgIHRoaXMuc3RhdGljVGV4dC55ID0gdGhpcy55O1xyXG4gICAgICAgIHRoaXMuY2hhbmdlVGV4dC55ID0gdGhpcy55O1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMueCArIHRoaXMud2lkdGggPiBtYXhXaWR0aCkgeyAvLyBvdmVyIHJpZ2h0IG9mIHNjcmVlblxyXG4gICAgICAgIHRoaXMueCAtPSB0aGlzLndpZHRoO1xyXG4gICAgICAgIHRoaXMuc3RhdGljVGV4dC54ID0gdGhpcy54O1xyXG4gICAgICAgIHRoaXMuY2hhbmdlVGV4dC54ID0gdGhpcy54O1xyXG4gICAgfVxyXG59O1xyXG5Ib3Zlck1lbnUucHJvdG90eXBlLmhpZGUgPSBmdW5jdGlvbigpIHtcclxuXHR0aGlzLnN0YXRpY1RleHQudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgdGhpcy5jaGFuZ2VUZXh0LnZpc2libGUgPSBmYWxzZTtcclxuICAgIHRoaXMudmlzaWJsZSA9IGZhbHNlO1xyXG59O1xyXG4vLyBIb3Zlck1lbnUucHJvdG90eXBlLm9uSW5wdXRNb3ZlID0gZnVuY3Rpb24oKSB7XHJcbiAgLy8gY29uc29sZS5sb2coJ21vdmUnKTtcclxuICBcclxuLy8gfTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gSG92ZXJNZW51O1xyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG4iLCJ2YXIgUGVyc29uID0gZnVuY3Rpb24gKGdhbWUsIHgsIHksIGlkKSB7XHJcblx0UGhhc2VyLlNwcml0ZS5jYWxsKHRoaXMsIGdhbWUsIHgsIHksICdhZ2VzJyk7XHJcblx0dGhpcy5mcmFtZSA9IDI7XHJcblx0dGhpcy52ZWxvY2l0eSA9IHt4OjAsIHk6MH07XHJcblx0dGhpcy53aWR0aCA9IDEwO1xyXG5cdHRoaXMuaGVpZ2h0ID0gMTA7XHJcblx0dGhpcy5zcGVlZCA9IC4wNTtcclxuXHR0aGlzLmlkID0gaWQ7XHJcblx0dGhpcy5lZHVMZXZlbCA9IFBlcnNvbi5FRFVMRVZFTC51bmVtcGxveWVkO1xyXG5cdHRoaXMuaGFwcGluZXNzID0gMTAwO1xyXG4gICAgdGhpcy5mYXRpZ3VlID0gMDtcclxuICAgIHRoaXMuaGFwcGluZXNzTW9kaWZpZXIgPSAwO1xyXG4gICAgdGhpcy5hZ2UgPSBQZXJzb24uQUdFLnlvdW5nO1xyXG4gICAgdGhpcy50dXJuQ291bnQgPSAwO1xyXG4gICAgdGhpcy5hZ2VUaHJlc2hvbGQgPSA1O1xyXG59O1xyXG5QZXJzb24ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShQaGFzZXIuU3ByaXRlLnByb3RvdHlwZSk7XHJcblBlcnNvbi5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBQZXJzb247XHJcblxyXG5QZXJzb24uRURVTEVWRUwgPSB7XHJcblx0dW5lbXBsb3llZCA6IC0xLFxyXG5cdGxvdyAgOiAwLFxyXG5cdG1pZCAgOiAxLFxyXG5cdGhpZ2ggOiAyXHJcbn07XHJcblxyXG5QZXJzb24uSU5DT01FUyA9IHtcclxuXHRsb3cgOiAxMCxcclxuXHRtaWQgOiAyMCxcclxuXHRoaWdoIDogMzBcclxufTtcclxuXHJcblBlcnNvbi5BR0UgPSB7XHJcblx0eW91bmcgOiAwLFxyXG5cdGFkdWx0IDogMSxcclxuXHRvbGQgOiAyXHJcbn07XHJcblxyXG5QZXJzb24ucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uKCkge1xyXG5cdHRoaXMueCArPSB0aGlzLnZlbG9jaXR5LnggKiB0aGlzLnNwZWVkO1xyXG5cdHRoaXMueSArPSB0aGlzLnZlbG9jaXR5LnkgKiB0aGlzLnNwZWVkO1xyXG5cdC8vY29uc29sZS5sb2codGhpcy52ZWxvY2l0eSk7XHJcbn07XHJcblxyXG5QZXJzb24ucHJvdG90eXBlLmFnZVRpY2sgPSBmdW5jdGlvbigpIHtcclxuXHQvLyB0aGlzLnR1cm5Db3VudCArPSAxO1xyXG5cdC8vIGlmICh0aGlzLnR1cm5Db3VudCA+PSB0aGlzLmFnZVRocmVzaG9sZCkge1xyXG5cdC8vIFx0Ly8gY29uc29sZS5sb2coJ2hhcHB5IGJpcnRoZGF5Jyk7XHJcblx0Ly8gXHRpZiAodGhpcy5hZ2UgPT0gMCkge1xyXG5cdC8vIFx0XHR0aGlzLmFnZSA9IFBlcnNvbi5BR0UuYWR1bHQ7XHJcblx0Ly8gXHRcdHRoaXMuZnJhbWUgPSAzO1xyXG5cdC8vIFx0fSBlbHNlIGlmICh0aGlzLmFnZSA9PSAxKSB7XHJcblx0Ly8gXHRcdHRoaXMuYWdlID0gUGVyc29uLkFHRS5vbGQ7XHJcblx0Ly8gXHRcdHRoaXMuZnJhbWUgPSAxO1xyXG5cdC8vIFx0fSBlbHNlIGlmICh0aGlzLmFnZSA9PSAyKSB7XHJcblxyXG5cdC8vIFx0fVxyXG5cdC8vIH1cclxufTtcclxuXHJcblBlcnNvbi5wcm90b3R5cGUuZ2V0VGF4ID0gZnVuY3Rpb24oKSB7XHJcblx0Ly8gY29uc29sZS5sb2coJ2dldCB0YXgnLCB0aGlzLmdyb3VwLm15TWFuYWdlci5iYWNrZ3JvdW5kLnR5cGUpO1xyXG5cdGlmICh0aGlzLmdyb3VwLm15TWFuYWdlci5iYWNrZ3JvdW5kLnR5cGUgPT09ICdob3VzZScpIHtcclxuXHRcdGlmICh0aGlzLmdyb3VwLm15TWFuYWdlci5iYWNrZ3JvdW5kLmluY29tZUxldmVsID09PSBQZXJzb24uRURVTEVWRUwubG93KSB7XHJcblx0XHRcdC8vIGNvbnNvbGUubG9nKHRoaXMuZ3JvdXAubXlNYW5hZ2VyLmJhY2tncm91bmQubXlNYW5hZ2VyLnN0YXRlLnRheE1vZC5sb3cpO1xyXG5cdFx0XHRyZXR1cm4gLTEgKiBQZXJzb24uSU5DT01FUy5sb3c7XHJcblx0XHR9IGVsc2UgaWYgKHRoaXMuZ3JvdXAubXlNYW5hZ2VyLmJhY2tncm91bmQuaW5jb21lTGV2ZWwgPT09IFBlcnNvbi5FRFVMRVZFTC5taWQpIHtcclxuXHRcdFx0cmV0dXJuIC0yICogUGVyc29uLklOQ09NRVMubWlkO1xyXG5cdFx0fSBlbHNlIGlmICh0aGlzLmdyb3VwLm15TWFuYWdlci5iYWNrZ3JvdW5kLmluY29tZUxldmVsID09PSBQZXJzb24uRURVTEVWRUwuaGlnaCkge1xyXG5cdFx0XHRyZXR1cm4gLTMgKiBQZXJzb24uSU5DT01FUy5oaWdoO1xyXG5cdFx0fVxyXG5cdH0gZWxzZSBpZiAodGhpcy5ncm91cC5teU1hbmFnZXIuYmFja2dyb3VuZC50eXBlID09PSAnd29yaycpIHtcclxuXHRcdGlmICh0aGlzLmdyb3VwLm15TWFuYWdlci5iYWNrZ3JvdW5kLmluY29tZUxldmVsID09PSBQZXJzb24uRURVTEVWRUwubG93KSB7XHJcblx0XHRcdHZhciBvdmVybG9hZE11bHQgPSAxO1xyXG5cdFx0XHRpZiAoKHRoaXMuZ3JvdXAubXlNYW5hZ2VyLmJhY2tncm91bmQubXlNYW5hZ2VyLmJnQXJyYXlbMF0uZ3JvdXBfbWFuYWdlci5udW1QZW9wbGUoKSAvIHRoaXMuZ3JvdXAubXlNYW5hZ2VyLmJhY2tncm91bmQubXlNYW5hZ2VyLm51bVBlb3BsZSgpKSA+IC41KVxyXG5cdFx0XHRcdG92ZXJsb2FkTXVsdCA9IC4yNTtcclxuXHRcdFx0cmV0dXJuIG92ZXJsb2FkTXVsdCAqIChQZXJzb24uSU5DT01FUy5sb3cgKiB0aGlzLmdyb3VwLm15TWFuYWdlci5iYWNrZ3JvdW5kLm15TWFuYWdlci5zdGF0ZS50YXhNb2QubG93KTtcclxuXHRcdH0gZWxzZSBpZiAodGhpcy5ncm91cC5teU1hbmFnZXIuYmFja2dyb3VuZC5pbmNvbWVMZXZlbCA9PT0gUGVyc29uLkVEVUxFVkVMLm1pZCkge1xyXG5cdFx0XHR2YXIgb3ZlcmxvYWRNdWx0ID0gMTtcclxuXHRcdFx0aWYgKCh0aGlzLmdyb3VwLm15TWFuYWdlci5iYWNrZ3JvdW5kLm15TWFuYWdlci5iZ0FycmF5WzFdLmdyb3VwX21hbmFnZXIubnVtUGVvcGxlKCkgLyB0aGlzLmdyb3VwLm15TWFuYWdlci5iYWNrZ3JvdW5kLm15TWFuYWdlci5udW1QZW9wbGUoKSkgPiAuNSlcclxuXHRcdFx0XHRvdmVybG9hZE11bHQgPSAuMjU7XHJcblx0XHRcdHJldHVybiBvdmVybG9hZE11bHQgKiAoUGVyc29uLklOQ09NRVMubWlkICogdGhpcy5ncm91cC5teU1hbmFnZXIuYmFja2dyb3VuZC5teU1hbmFnZXIuc3RhdGUudGF4TW9kLm1pZCk7XHJcblx0XHR9IGVsc2UgaWYgKHRoaXMuZ3JvdXAubXlNYW5hZ2VyLmJhY2tncm91bmQuaW5jb21lTGV2ZWwgPT09IFBlcnNvbi5FRFVMRVZFTC5oaWdoKSB7XHJcblx0XHRcdHZhciBvdmVybG9hZE11bHQgPSAxO1xyXG5cdFx0XHRpZiAoKHRoaXMuZ3JvdXAubXlNYW5hZ2VyLmJhY2tncm91bmQubXlNYW5hZ2VyLmJnQXJyYXlbMl0uZ3JvdXBfbWFuYWdlci5udW1QZW9wbGUoKSAvIHRoaXMuZ3JvdXAubXlNYW5hZ2VyLmJhY2tncm91bmQubXlNYW5hZ2VyLm51bVBlb3BsZSgpKSA+IC41KVxyXG5cdFx0XHRcdG92ZXJsb2FkTXVsdCA9IC4yNTtcclxuXHRcdFx0cmV0dXJuIG92ZXJsb2FkTXVsdCAqIChQZXJzb24uSU5DT01FUy5oaWdoICogdGhpcy5ncm91cC5teU1hbmFnZXIuYmFja2dyb3VuZC5teU1hbmFnZXIuc3RhdGUudGF4TW9kLmhpZ2gpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRyZXR1cm4gMDtcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gUGVyc29uOyIsInZhciBQcm9ncmVzc0JhciA9IHJlcXVpcmUoJy4vUHJvZ3Jlc3NCYXInKTtcclxuXHJcbnZhciBVSUJ1aWxkZXIgPSBmdW5jdGlvbihzZXRHYW1lU3RhdGUpIHtcclxuXHQvL0Vuc3VyZSB0aGF0IGNhbm5vdCBjcmVhdGUgbXVsdGlwbGUgaW5zdGFuY2VzIG9mIHRoaXMgY2xhc3NcclxuXHRpZihVSUJ1aWxkZXIucHJvdG90eXBlLmV4aXN0cykge1xyXG5cdFx0cmV0dXJuIFVJQnVpbGRlci5wcm90b3R5cGUuZXhpc3RpbmdSZWZlcmVuY2U7XHJcblx0fVxyXG5cdFxyXG5cdHRoaXMuZ2FtZVN0YXRlID0gc2V0R2FtZVN0YXRlO1xyXG5cdHRoaXMucmVuZGVyYWJsZXMgPSBbXTtcclxuXHQvL0NyZWF0ZSBhbmQgc3RvcmUgYSBncmFwaGljcyBvYmplY3QgKHVzZWQgZm9yIHN0dWZmIGxpa2UgZHJhd2luZyByZWN0YW5nbGVzKVxyXG5cdFVJQnVpbGRlci5wcm90b3R5cGUuZXhpc3RzID0gdHJ1ZTtcclxuXHRVSUJ1aWxkZXIucHJvdG90eXBlLmV4aXN0aW5nUmVmZXJlbmNlID0gdGhpcztcclxufTtcclxuXHJcblVJQnVpbGRlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBVSUJ1aWxkZXI7XHJcbi8vVGhlc2UgdmFyJ3MgaGVscCBjcmVhdGUgdGhlIHNpbmdsZXRvbiBmdW5jdGlvbmFsaXR5XHJcblVJQnVpbGRlci5wcm90b3R5cGUuZXhpc3RzID0gZmFsc2U7XHJcblVJQnVpbGRlci5wcm90b3R5cGUuZXhpc3RpbmdSZWZlcmVuY2UgPSBudWxsO1xyXG5cclxuLy9Vc2UgdGhpcyBmdW5jdGlvbiB0byBjcmVhdGUgYSBwcm9ncmVzcyBiYXJcclxuLy9Vc2FnZTogdHlwZTogY2FuIGJlIFwiZ3Jvd2luZ1wiIG9yIFwic2hyaW5raW5nXCIsIHRoaXMgd2lsbCBlZmZlY3QgaWYgYmFyIHN0YXJ0cyBhdCAwIGFuZCBnb2VzIHVwIG9yIHZpcyB2ZXJzYVxyXG4vL1x0XHQgbWF4VmFsdWU6IHNldHMgdGhlIG1heCB2YWx1ZSBvZiB0aGUgcHJvZ3Jlc3MgYmFyLCBpLmUuIHVzaW5nIDEwMCBjcmVhdGVzIGEgYmFyIGZyb20gMCB0byAxMDBcclxuLy9cdFx0IHgseTogc2V0cyBsb2NhdGlvblxyXG4vL1x0XHQgRE9OJ1QgRk9SR0VUIHRvIG92ZXJ3cml0ZSB0aGUgb25FdmVudCgpIGZ1bmN0aW9uIGZvciB0aGUgcHJvZ3Jlc3MgYmFyIGFmdGVyIGNyZWF0aW5nIGl0XHJcbi8vXHRcdFx0LW9uRXZlbnQoKSBpcyBhdXRvbWF0aWNhbGx5IGNhbGxlZCB3aGVuIGJhciBmaWxscy9zaHJpbmtzIHBhc3QgbGltaXQgKGRlcGVuZGluZyBvbiBiYXIgdHlwZSlcclxuVUlCdWlsZGVyLnByb3RvdHlwZS5idWlsZFByb2dyZXNzQmFyID0gZnVuY3Rpb24odHlwZSwgeCwgeSwgd2lkdGgsIGhlaWdodCwgbWF4VmFsdWUpIHtcclxuXHQvL2NyZWF0ZSBhbmQgZm9ybWF0IG5ldyBwcm9nIGJhclxyXG5cdHZhciBncmFwaGljcyA9IHRoaXMuZ2FtZVN0YXRlLmdhbWUuYWRkLmdyYXBoaWNzKDAsMCk7XHJcblx0dmFyIG5ld1Byb2dCYXIgPSBuZXcgUHJvZ3Jlc3NCYXIodHlwZSwgbWF4VmFsdWUsIGdyYXBoaWNzLCB0aGlzLnJlbmRlcmFibGVzKTtcclxuXHRuZXdQcm9nQmFyLnNldExvY2F0aW9uKHgseSk7XHJcblx0bmV3UHJvZ0Jhci5zZXRTaXplKHdpZHRoLCBoZWlnaHQpO1xyXG5cdC8vc3Vic2NyaWJlIHRvICdyZW5kZXJhYmxlcycgc28gdGhhdCByZW5kZXIoKSBpcyBjYWxsZWQgYXV0b21hdGljYWxseVxyXG5cdC8vIHRoaXMucmVuZGVyYWJsZXMuc3Vic2NyaWJlKG5ld1Byb2dCYXIpO1xyXG5cdHRoaXMucmVuZGVyYWJsZXMucHVzaChuZXdQcm9nQmFyKTtcclxuXHRyZXR1cm4gbmV3UHJvZ0JhcjtcclxufTtcclxuVUlCdWlsZGVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbigpIHtcclxuXHRmb3IgKHJlbmRlcmFibGUgaW4gdGhpcy5yZW5kZXJhYmxlcykge1xyXG5cdFx0dGhpcy5yZW5kZXJhYmxlc1tyZW5kZXJhYmxlXS5yZW5kZXIoKTtcclxuXHR9XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFVJQnVpbGRlcjsiLCIndXNlIHN0cmljdCc7XHJcblxyXG52YXIgZ2FtZSA9IG5ldyBQaGFzZXIuR2FtZSg4MDAsIDYwMCwgUGhhc2VyLkFVVE8sICctZ2FtZScpO1xyXG5cclxud2luZG93LlV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xyXG53aW5kb3cucGxheWVyU3RhdGUgPSB7XHJcbiAgICBjdXJyZW50TGV2ZWw6ICdHYW1lJ1xyXG59O1xyXG5cclxuXHJcbmdhbWUuc3RhdGUuYWRkKCdCb290JywgcmVxdWlyZSgnLi9zdGF0ZXMvYm9vdCcpKTtcclxuZ2FtZS5zdGF0ZS5hZGQoJ1NwbGFzaCcsIHJlcXVpcmUoJy4vc3RhdGVzL3NwbGFzaCcpKTtcclxuZ2FtZS5zdGF0ZS5hZGQoJ1ByZWxvYWRlcicsIHJlcXVpcmUoJy4vc3RhdGVzL3ByZWxvYWRlcicpKTtcclxuZ2FtZS5zdGF0ZS5hZGQoJ01lbnUnLCByZXF1aXJlKCcuL3N0YXRlcy9tZW51JykpO1xyXG5nYW1lLnN0YXRlLmFkZCgnR2FtZScsIHJlcXVpcmUoJy4vc3RhdGVzL2dhbWUnKSk7XHJcbmdhbWUuc3RhdGUuYWRkKCdHYW1lX092ZXInLCByZXF1aXJlKCcuL3N0YXRlcy9nYW1lX292ZXInKSk7XHJcblxyXG5nYW1lLnN0YXRlLnN0YXJ0KCdCb290Jyk7XHJcblxyXG4vL2dhbWUuc3RhZ2UuYmFja2dyb3VuZENvbG9yID0gXCIjZmZmZmZmXCI7XHJcbiIsInZhciBCb290ID0gZnVuY3Rpb24gKCkge307XG5cbm1vZHVsZS5leHBvcnRzID0gQm9vdDtcblxuQm9vdC5wcm90b3R5cGUgPSB7XG5cbiAgcHJlbG9hZDogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMubG9hZC5pbWFnZSgncHJlbG9hZGVyJywgJ2Fzc2V0cy9wcmVsb2FkZXIuZ2lmJyk7XG4gIH0sXG5cbiAgY3JlYXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5nYW1lLmlucHV0Lm1heFBvaW50ZXJzID0gMTtcblxuICAgIGlmICh0aGlzLmdhbWUuZGV2aWNlLmRlc2t0b3ApIHtcbiAgICAgIHRoaXMuZ2FtZS5zdGFnZS5zY2FsZS5wYWdlQWxpZ25Ib3Jpem9udGFsbHkgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmdhbWUuc2NhbGUuc2NhbGVNb2RlID0gUGhhc2VyLlNjYWxlTWFuYWdlci5TSE9XX0FMTDtcbiAgICAgIHRoaXMuZ2FtZS5zY2FsZS5taW5XaWR0aCA9ICA0ODA7XG4gICAgICB0aGlzLmdhbWUuc2NhbGUubWluSGVpZ2h0ID0gMjYwO1xuICAgICAgdGhpcy5nYW1lLnNjYWxlLm1heFdpZHRoID0gNjQwO1xuICAgICAgdGhpcy5nYW1lLnNjYWxlLm1heEhlaWdodCA9IDQ4MDtcbiAgICAgIHRoaXMuZ2FtZS5zY2FsZS5mb3JjZUxhbmRzY2FwZSA9IHRydWU7XG4gICAgICB0aGlzLmdhbWUuc2NhbGUucGFnZUFsaWduSG9yaXpvbnRhbGx5ID0gdHJ1ZTtcbiAgICAgIHRoaXMuZ2FtZS5zY2FsZS5zZXRTY3JlZW5TaXplKHRydWUpO1xuICAgIH1cblxuICAgIHRoaXMuZ2FtZS5zdGF0ZS5zdGFydCgnUHJlbG9hZGVyJyk7XG4gIH1cbn07XG4iLCJ2YXIgQmFja2dyb3VuZF9NYW5hZ2VyID0gcmVxdWlyZSgnLi4vZW50aXRpZXMvYmFja2dyb3VuZF9tYW5hZ2VyJyk7XHJcbnZhciBQZXJzb24gPSByZXF1aXJlKCcuLi9lbnRpdGllcy9wZXJzb24nKTtcclxudmFyIEdyb3VwID0gcmVxdWlyZSgnLi4vZW50aXRpZXMvZ3JvdXAnKTtcclxudmFyIEdyb3VwTWFuYWdlciA9IHJlcXVpcmUoJy4uL2VudGl0aWVzL2dyb3VwTWFuYWdlcicpO1xyXG52YXIgVUlCdWlsZGVyID0gcmVxdWlyZSgnLi4vZW50aXRpZXMvdWlCdWlsZGVyJyk7XHJcbnZhciBIb3Zlck1lbnUgPSByZXF1aXJlKCcuLi9lbnRpdGllcy9ob3Zlck1lbnUnKTtcclxudmFyIFV0aWxzID0gcmVxdWlyZSgnLi4vdXRpbHMnKTtcclxuXHJcbnZhciBHYW1lID0gZnVuY3Rpb24gKCkge1xyXG4gIHRoaXMudGVzdGVudGl0eSA9IG51bGw7XHJcbiAgLy90aGlzLmZsb2NrcyA9IFtdO1xyXG4gIHRoaXMuYmdfbWcgPSBudWxsO1xyXG4gIC8vIHRoaXMuc2VsZWN0ZWRHcm91cCA9IG51bGw7XHJcbiAgdGhpcy5tb25leSA9IG51bGw7XHJcbiAgdGhpcy5tb25leVZhbCA9IDA7XHJcbiAgdGhpcy5jdXJNb25leSA9IDIwMDA7XHJcbiAgdGhpcy5tb25leVVwZGF0ZURlbGF5ID0gMC4wMDE7XHJcbiAgdGhpcy5tb25leUluY3JlbWVudGluZyA9IGZhbHNlO1xyXG4gIHRoaXMuaGFwcGluZXNzVmFsID0gMDtcclxuICB0aGlzLmN1ckhhcHBpbmVzcyA9IDA7XHJcbiAgdGhpcy5oYXBwaW5lc3NVcGRhdGVEZWxheSA9IDAuMDAxO1xyXG4gIHRoaXMuaGFwcGluZXNzSW5jcmVtZW50aW5nID0gZmFsc2U7XHJcbiAgdGhpcy50YXhUaW1lID0gNTtcclxuICB0aGlzLnRheE1vZCA9IHtsb3c6IDEsIG1pZDogMSwgaGlnaDogMX07XHJcbiAgdGhpcy5taW5IYXBwaW5lc3MgPSA1MDtcclxuXHR0aGlzLmZhdGlndWVQZXJUaWNrID0gMTA7XHJcblx0Ly8gdGhpcy5tb25leUNoYW5nZUZhZGluZyA9IGZhbHNlO1xyXG5cdHRoaXMubW9uZXlDaGFuZ2VGYWRlRGVsYXkgPSAwLjAxO1xyXG5cdHRoaXMubW9uZXlDaGFuZ2VGYWRlUmF0ZSA9IDAuMDI1O1xyXG5cdHRoaXMubW9uZXlDaGFuZ2VIb2xkRGVsYXkgPSAxO1xyXG5cdHRoaXMubWlncmFudERlbGF5ID0gNTtcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gR2FtZTtcclxuXHJcbkdhbWUucHJvdG90eXBlID0ge1xyXG5cclxuICBjcmVhdGU6IGZ1bmN0aW9uICgpIHtcclxuICBcdGNvbnNvbGUubG9nKCdmb28nKTtcclxuXHQgIC8vIGNvbnNvbGUubG9nKHRoaXMpO1xyXG4gICAgdGhpcy5nYW1lLnN0YWdlLmJhY2tncm91bmRDb2xvciA9IFwiI2VkZWRlZFwiO1xyXG4gICAgdGhpcy5tZW51X2JnID0gdGhpcy5nYW1lLmFkZC5pbWFnZSgwLCAwLCAnbWVudV9iZycpOyAgXHJcbiAgICB2YXIgeCA9ICh0aGlzLmdhbWUud2lkdGggLyAyKSAtIDEwMDtcclxuICAgIHZhciB5ID0gKHRoaXMuZ2FtZS5oZWlnaHQgLyAyKSAtIDUwO1xyXG5cclxuICAgIHRoaXMuYmdfbWcgPSBuZXcgQmFja2dyb3VuZF9NYW5hZ2VyKHRoaXMuZ2FtZSwgdGhpcyk7XHJcblx0XHJcbiAgICB0aGlzLmlucHV0Lm9uRG93bi5hZGQodGhpcy5vbklucHV0RG93biwgdGhpcyk7XHJcblx0XHJcblx0dGhpcy5tb25leSA9IHRoaXMuZ2FtZS5hZGQudGV4dCgyMCwgMTUsICckMCcpO1xyXG5cdHRoaXMubW9uZXkuZm9udCA9IFwiUm9ib3RvXCI7XHJcblx0dGhpcy5tb25leS5mb250U2l6ZSA9IDI0O1xyXG5cdHRoaXMubW9uZXkuZmlsbCA9ICcjMDAwMDAwJztcclxuXHR0aGlzLm1vbmV5LnRleHQgPSAnJDAnO1xyXG5cclxuXHR0aGlzLm1vbmV5Q2hhbmdlID0gdGhpcy5nYW1lLmFkZC50ZXh0KDEyMCwgMTUsICckMCcpO1xyXG5cdHRoaXMubW9uZXlDaGFuZ2UuZm9udCA9IFwiUm9ib3RvXCI7XHJcblx0dGhpcy5tb25leUNoYW5nZS5mb250U2l6ZSA9IDI0O1xyXG5cdHRoaXMubW9uZXlDaGFuZ2UuZmlsbCA9ICcjMDAwMDAwJztcclxuXHR0aGlzLm1vbmV5Q2hhbmdlLnRleHQgPSAnKyQwJztcclxuXHR0aGlzLm1vbmV5Q2hhbmdlLmFscGhhID0gMDtcclxuXHJcblx0dGhpcy51aWIgPSBuZXcgVUlCdWlsZGVyKHRoaXMpO1xyXG5cdHRoaXMuYmFyID0gdGhpcy51aWIuYnVpbGRQcm9ncmVzc0JhcihcImdyb3dpbmdcIiwgdGhpcy5nYW1lLndpZHRoIC8gMiwgMjUsIDMwMCwgMTYsIDEwMCAtIHRoaXMubWluSGFwcGluZXNzKTtcclxuXHQvL3RoaXMuYmFyLmFkZFZhbHVlKDEwMCk7XHJcblx0dGhpcy5oYXBweSA9IHRoaXMuZ2FtZS5hZGQuc3ByaXRlKHRoaXMuZ2FtZS53aWR0aCAqIC4yOSwgMjUsICdoYXBweWZhY2UnKTtcclxuXHR0aGlzLmhhcHB5LmFuY2hvci5zZXRUbygwLjUsIDAuNSk7XHJcblxyXG4gIC8vIFRheCBidXR0b25zXHJcbiAgdGhpcy5yZWRUYXhMb3cgICA9IHRoaXMuZ2FtZS5hZGQuYnV0dG9uKHRoaXMuYmdfbWcuYmdBcnJheVswXS5nZXRWYXJzVHJ1ZSgpLmNlbnRlci54IC0gMTUsIDc1LCAndGF4UmVkdWNlJywgdGhpcy5kZWNUYXhMb3csIHRoaXMpO1xyXG4gIHRoaXMudGV4dFRheExvdyAgPSB0aGlzLmdhbWUuYWRkLnRleHQodGhpcy5iZ19tZy5iZ0FycmF5WzBdLmdldFZhcnNUcnVlKClbMF0sIDc4LCAnJCQnKTtcclxuICB0aGlzLnRleHRUYXhMb3cuZm9udCA9IFwiUm9ib3RvXCI7XHJcbiAgdGhpcy50ZXh0VGF4TG93LmZvbnRTaXplID0gMTg7XHJcbiAgdGhpcy5hZGRUYXhMb3cgICA9IHRoaXMuZ2FtZS5hZGQuYnV0dG9uKHRoaXMuYmdfbWcuYmdBcnJheVswXS5nZXRWYXJzVHJ1ZSgpLmNlbnRlci54ICsgMTUsIDc1LCAndGF4QWRkJywgdGhpcy5pbmNUYXhMb3csIHRoaXMpO1xyXG4gIHRoaXMucmVkVGF4TG93LmFuY2hvci5zZXRUbyguNSwgLjUpO1xyXG4gIHRoaXMudGV4dFRheExvdy5hbmNob3Iuc2V0VG8oMCwgLjUpO1xyXG4gIHRoaXMuYWRkVGF4TG93LmFuY2hvci5zZXRUbyguNSwgLjUpO1xyXG4gIHRoaXMucmVkVGF4TWlkICAgPSB0aGlzLmdhbWUuYWRkLmJ1dHRvbih0aGlzLmJnX21nLmJnQXJyYXlbMV0uZ2V0VmFyc1RydWUoKS5jZW50ZXIueCAtIDE1LCA3NSwgJ3RheFJlZHVjZScsIHRoaXMuZGVjVGF4TWlkLCB0aGlzKTtcclxuICB0aGlzLnRleHRUYXhNaWQgID0gdGhpcy5nYW1lLmFkZC50ZXh0KHRoaXMuYmdfbWcuYmdBcnJheVsxXS5nZXRWYXJzVHJ1ZSgpLmNlbnRlci54LCA3OCwgJyQkJyk7XHJcbiAgdGhpcy50ZXh0VGF4TWlkLmZvbnQgPSBcIlJvYm90b1wiO1xyXG4gIHRoaXMudGV4dFRheE1pZC5mb250U2l6ZSA9IDE4O1xyXG4gIHRoaXMuYWRkVGF4TWlkICAgPSB0aGlzLmdhbWUuYWRkLmJ1dHRvbih0aGlzLmJnX21nLmJnQXJyYXlbMV0uZ2V0VmFyc1RydWUoKS5jZW50ZXIueCArIDE1LCA3NSwgJ3RheEFkZCcsIHRoaXMuaW5jVGF4TWlkLCB0aGlzKTtcclxuICB0aGlzLnJlZFRheE1pZC5hbmNob3Iuc2V0VG8oLjUsIC41KTtcclxuICB0aGlzLnRleHRUYXhNaWQuYW5jaG9yLnNldFRvKDAsIC41KTtcclxuICB0aGlzLmFkZFRheE1pZC5hbmNob3Iuc2V0VG8oLjUsIC41KTtcclxuICB0aGlzLnJlZFRheEhpZ2ggID0gdGhpcy5nYW1lLmFkZC5idXR0b24odGhpcy5iZ19tZy5iZ0FycmF5WzJdLmdldFZhcnNUcnVlKCkuY2VudGVyLnggLSAxNSwgNzUsICd0YXhSZWR1Y2UnLCB0aGlzLmRlY1RheEhpZ2gsIHRoaXMpO1xyXG4gIHRoaXMudGV4dFRheEhpZ2ggPSB0aGlzLmdhbWUuYWRkLnRleHQodGhpcy5iZ19tZy5iZ0FycmF5WzFdLmdldFZhcnNUcnVlKCkuY2VudGVyLngsIDc4LCAnJCQnKTtcclxuICB0aGlzLnRleHRUYXhIaWdoLmZvbnQgPSBcIlJvYm90b1wiO1xyXG4gIHRoaXMudGV4dFRheEhpZ2guZm9udFNpemUgPSAxODtcclxuICB0aGlzLmFkZFRheEhpZ2ggID0gdGhpcy5nYW1lLmFkZC5idXR0b24odGhpcy5iZ19tZy5iZ0FycmF5WzJdLmdldFZhcnNUcnVlKCkuY2VudGVyLnggKyAxNSwgNzUsICd0YXhBZGQnLCB0aGlzLmluY1RheEhpZ2gsIHRoaXMpO1xyXG4gIHRoaXMucmVkVGF4SGlnaC5hbmNob3Iuc2V0VG8oLjUsIC41KTtcclxuICB0aGlzLnRleHRUYXhIaWdoLmFuY2hvci5zZXRUbygwLCAuNSk7XHJcbiAgdGhpcy5hZGRUYXhIaWdoLmFuY2hvci5zZXRUbyguNSwgLjUpO1xyXG5cclxuXHR0aGlzLmdhbWUudGltZS5ldmVudHMuYWRkKFBoYXNlci5UaW1lci5TRUNPTkQgKiB0aGlzLnRheFRpbWUsIHRoaXMuY29sbGVjdFRheCwgdGhpcyk7XHJcbiAgICB0aGlzLmhtID0gbmV3IEhvdmVyTWVudSh0aGlzLmdhbWUsIDIwMCwgMjAwLCB0aGlzKTtcclxuICAgIC8vIHRoaXMuaG0uYW5jaG9yLnNldFRvKDAuNSwgMSk7XHJcblx0Ly8gdGhpcy5obS52aXNpYmxlID0gZmFsc2U7XHJcblx0dGhpcy5nYW1lLnRpbWUuZXZlbnRzLmFkZChQaGFzZXIuVGltZXIuU0VDT05EICogdGhpcy5tb25leUNoYW5nZUZhZGVEZWxheSwgdGhpcy5mYWRlTW9uZXlDaGFuZ2UsIHRoaXMpO1xyXG5cdC8vIHRoaXMuZ2FtZS50aW1lLmV2ZW50cy5hZGQoUGhhc2VyLlRpbWVyLlNFQ09ORCAqIHRoaXMubWlncmFudERlbGF5LCB0aGlzLnNwYXduTWlncmFudCwgdGhpcyk7XHJcblxyXG5cdHRoaXMuZ2FtZS5pbnB1dC5rZXlib2FyZC5vblByZXNzQ2FsbGJhY2sgPSB0aGlzLnNwYXduTWlncmFudE5vUmVwZWF0O1xyXG4gIC8vIGNvbnNvbGUubG9nKHRoaXMuZ2FtZS5pbnB1dC5rZXlib2FyZCk7XHJcblx0dGhpcy5nYW1lLmlucHV0LmtleWJvYXJkLnN0YXRlID0gdGhpcztcclxuXHR0aGlzLmdhbWUuaW5wdXQua2V5Ym9hcmQudXRpbHMgPSBVdGlscztcclxuICB0aGlzLmlucHV0LmFkZE1vdmVDYWxsYmFjayh0aGlzLm9uTW91c2VNb3ZlLCB0aGlzKTtcclxuICB0aGlzLnBlcnNvbkdyb3VwID0gdGhpcy5nYW1lLmFkZC5ncm91cCgpO1xyXG4gIHRoaXMucGVyc29uR3JvdXAueiA9IDU7XHJcbiAgfSxcclxuICB0ZXN0RnVuOiBmdW5jdGlvbigpIHtcclxuICBcdC8vIGNvbnNvbGUubG9nKCdmdW4nKTtcclxuICBcdFx0dGhpcy5zcGF3bk1pZ3JhbnROb1JlcGVhdCgpXHJcbiAgfSxcclxuICB1cGRhdGU6IGZ1bmN0aW9uICgpIHtcclxuXHQvLyB0aGlzLmJnX21nLnVwZGF0ZSgpO1xyXG5cdC8vdGhpcy5nbS51cGRhdGUoKTtcclxuXHR0aGlzLnVpYi5yZW5kZXIoKTtcclxuXHR2YXIgaGFwcGluZXNzID0gMDtcclxuXHQgIGZvciAodmFyIGJnIGluIHRoaXMuYmdfbWcuYmdBcnJheSkge1xyXG5cdFx0ICBmb3IgKHZhciBncm91cCBpbiB0aGlzLmJnX21nLmJnQXJyYXlbYmddLmdyb3VwX21hbmFnZXIubWVtYmVycykge1xyXG5cdFx0XHQgIGZvciAodmFyIHBlcnNvbiBpbiB0aGlzLmJnX21nLmJnQXJyYXlbYmddLmdyb3VwX21hbmFnZXIubWVtYmVyc1tncm91cF0ubWVtYmVycykge1xyXG5cdFx0XHRcdCAgaGFwcGluZXNzICs9IHRoaXMuYmdfbWcuYmdBcnJheVtiZ10uZ3JvdXBfbWFuYWdlci5tZW1iZXJzW2dyb3VwXS5tZW1iZXJzW3BlcnNvbl0uaGFwcGluZXNzO1xyXG5cdFx0XHQgIH1cclxuXHRcdCAgfVxyXG5cdCAgfVxyXG5cdCAgaGFwcGluZXNzIC89IHRoaXMuYmdfbWcubnVtUGVvcGxlKCk7XHJcblx0ICB0aGlzLnNldEhhcHBpbmVzcyhoYXBwaW5lc3MpO1xyXG5cdCAgaGFwcGluZXNzIC09IHRoaXMubWluSGFwcGluZXNzO1xyXG5cdCAgLy8gY29uc29sZS5sb2coaGFwcGluZXNzKTtcclxuXHQgIC8vIGNvbnNvbGUubG9nKGhhcHBpbmVzcyk7XHJcbiAgICB0aGlzLnJlZFRheExvdy54ICAgPSB0aGlzLmJnX21nLmJnQXJyYXlbMF0uZ2V0VmFyc1RydWUoKS5jZW50ZXIueCAtIDMwO1xyXG4gICAgdGhpcy50ZXh0VGF4TG93LnggID0gdGhpcy5iZ19tZy5iZ0FycmF5WzBdLmdldFZhcnNUcnVlKCkuY2VudGVyLnggLSAxNTtcclxuICAgIHRoaXMuYWRkVGF4TG93LnggICA9IHRoaXMuYmdfbWcuYmdBcnJheVswXS5nZXRWYXJzVHJ1ZSgpLmNlbnRlci54ICsgMzA7XHJcbiAgICB0aGlzLnJlZFRheE1pZC54ICAgPSB0aGlzLmJnX21nLmJnQXJyYXlbMV0uZ2V0VmFyc1RydWUoKS5jZW50ZXIueCAtIDMwO1xyXG4gICAgdGhpcy50ZXh0VGF4TWlkLnggID0gdGhpcy5iZ19tZy5iZ0FycmF5WzFdLmdldFZhcnNUcnVlKCkuY2VudGVyLnggLSAxNTtcclxuICAgIHRoaXMuYWRkVGF4TWlkLnggICA9IHRoaXMuYmdfbWcuYmdBcnJheVsxXS5nZXRWYXJzVHJ1ZSgpLmNlbnRlci54ICsgMzA7XHJcbiAgICB0aGlzLnJlZFRheEhpZ2gueCAgPSB0aGlzLmJnX21nLmJnQXJyYXlbMl0uZ2V0VmFyc1RydWUoKS5jZW50ZXIueCAtIDMwO1xyXG4gICAgdGhpcy50ZXh0VGF4SGlnaC54ID0gdGhpcy5iZ19tZy5iZ0FycmF5WzJdLmdldFZhcnNUcnVlKCkuY2VudGVyLnggLSAxNTtcclxuICAgIHRoaXMuYWRkVGF4SGlnaC54ICA9IHRoaXMuYmdfbWcuYmdBcnJheVsyXS5nZXRWYXJzVHJ1ZSgpLmNlbnRlci54ICsgMzA7XHJcblxyXG4gICAgaWYgKHRoaXMuY3VySGFwcGluZXNzIDwgdGhpcy5taW5IYXBwaW5lc3MpIHtcclxuICAgICAgdGhpcy5nYW1lLnN0YXRlLnN0YXJ0KCdHYW1lX092ZXInKTtcclxuICBcdH1cclxuICBcdC8vIGNvbnNvbGUubG9nKHRoaXMubW9uZXlDaGFuZ2UuYWxwaGEpO1xyXG4gIH0sXHJcblxyXG4gIG9uSW5wdXREb3duOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgdmFyIGJnID0gdGhpcy5iZ19tZy53aGVyZUNsaWNrZWQoKTtcclxuICAgICB2YXIgZ20gPSBiZy5ncm91cF9tYW5hZ2VyO1xyXG5cdCAgIGNvbnNvbGUubG9nKCdtb3VzZScsIHRoaXMuaW5wdXQueCwgdGhpcy5pbnB1dC55LCAnYmcgeC15LXdpZHRoLWhlaWdodCcsIGJnLngsIGJnLnksIGJnLndpZHRoLCBiZy5oZWlnaHQpO1xyXG4gICAgIGNvbnNvbGUubG9nKCdnbScsIGdtLmNlbnRlci54LCBnbS5jZW50ZXIueSwgZ20ud2lkdGgsIGdtLmhlaWdodCk7XHJcbiAgfSxcclxuICBvbk1vdXNlTW92ZTogZnVuY3Rpb24gKCkge1xyXG4gICAgLy8gdmFyIGhlcmUgPSB0aGlzLmJnX21nLndoZXJlQ2xpY2tlZCgpO1xyXG4gICAgLy8gY29uc29sZS5sb2codGhpcy5pbnB1dC54LCB0aGlzLmlucHV0LnksIGhlcmUudHlwZSwgaGVyZS5pbmNvbWVMZXZlbCwgaGVyZS53aWR0aCwgaGVyZS5oZWlnaHQpO1xyXG4gIH0sXHJcbiAgc3Bhd25NaWdyYW50OiBmdW5jdGlvbiAoKSB7XHJcbiAgXHQvLyB2YXIgbmV3TWlncmFudCA9IG5ldyBQZXJzb24odGhpcy5nYW1lLCB0aGlzLmdhbWUud2lkdGggLyAyLCB0aGlzLmdhbWUuaGVpZ2h0ICsgMTUpO1xyXG4gIFx0dmFyIG5ld01pZ3JhbnQgPSBuZXcgUGVyc29uKHRoaXMuZ2FtZSwgdGhpcy5nYW1lLndpZHRoIC8gMiArIE1hdGgucmFuZG9tKCkgKiA4MDAgLSA0MDAsIHRoaXMuZ2FtZS5oZWlnaHQgKyAxNSk7XHJcbiAgXHR0aGlzLmdhbWUuYWRkLmV4aXN0aW5nKG5ld01pZ3JhbnQpO1xyXG4gIFx0dmFyIGJnID0gdGhpcy5iZ19tZy5iZ0FycmF5WzZdO1xyXG4gIFx0YmcuZ3JvdXBfbWFuYWdlci5hZGRQZXJzb24obmV3TWlncmFudCk7XHJcbiAgICB0aGlzLnBlcnNvbkdyb3VwLmFkZChuZXdNaWdyYW50KTtcclxuICBcdHRoaXMuZ2FtZS50aW1lLmV2ZW50cy5hZGQoUGhhc2VyLlRpbWVyLlNFQ09ORCAqIHRoaXMubWlncmFudERlbGFzeSwgdGhpcy5zcGF3bk1pZ3JhbnQsIHRoaXMpO1xyXG4gIFx0Ly8gY29uc29sZS5sb2coYmcpXHJcbiAgfSxcclxuICBzcGF3bk1pZ3JhbnROb1JlcGVhdDogZnVuY3Rpb24gKCkge1xyXG4gIFx0Ly8gY29uc29sZS5sb2coUXRoaXMpO1xyXG5cdCAgIHZhciBuZXdNaWdyYW50ID0gbmV3IFBlcnNvbih0aGlzLmdhbWUsIHRoaXMuZ2FtZS53aWR0aCAvIDIgKyBNYXRoLnJhbmRvbSgpICogODAwIC0gNDAwLCB0aGlzLmdhbWUuaGVpZ2h0ICsgMTUpO1xyXG4gIFx0dGhpcy5nYW1lLmFkZC5leGlzdGluZyhuZXdNaWdyYW50KTtcclxuICBcdC8vIGNvbnNvbGUubG9nKG5ld01pZ3JhbnQpO1xyXG4gIFx0dmFyIGJnID0gdGhpcy5zdGF0ZS5iZ19tZy5iZ0FycmF5WzZdO1xyXG4gIFx0YmcuZ3JvdXBfbWFuYWdlci5hZGRQZXJzb24obmV3TWlncmFudCk7XHJcblxyXG4gIFx0Ly8gY29uc29sZS5sb2codGhpcy51dGlscy5yYXRpbygwLCAwLCAwLCAuMikpO1xyXG4gIH0sXHJcbiAgY29sbGVjdFRheDogZnVuY3Rpb24gKCkge1xyXG5cdCAgLy8gY29uc29sZS5sb2coJ2NvbGxlY3QgdGF4Jyk7XHJcblx0ICB2YXIgdGF4ZXMgPSAwO1xyXG5cdCAgZm9yICh2YXIgYmcgaW4gdGhpcy5iZ19tZy5iZ0FycmF5KSB7XHJcblx0XHQgIGZvciAodmFyIGdyb3VwIGluIHRoaXMuYmdfbWcuYmdBcnJheVtiZ10uZ3JvdXBfbWFuYWdlci5tZW1iZXJzKSB7XHJcblx0ICBcdFx0Ly8gY29uc29sZS5sb2codGhpcy5iZ19tZy5iZ0FycmF5W2JnXS5ncm91cF9tYW5hZ2VyLm1lbWJlcnNbZ3JvdXBdLCB0aGlzLmJnX21nLmJnQXJyYXlbYmddLmdyb3VwX21hbmFnZXIubWVtYmVyc1tncm91cF0uaGFwcGluZXNzTW9kaWZpZXIpO1xyXG5cdFx0XHQgIGZvciAodmFyIHBlcnNvbiBpbiB0aGlzLmJnX21nLmJnQXJyYXlbYmddLmdyb3VwX21hbmFnZXIubWVtYmVyc1tncm91cF0ubWVtYmVycykge1xyXG5cdFx0XHRcdCAgdGF4ZXMgKz0gdGhpcy5iZ19tZy5iZ0FycmF5W2JnXS5ncm91cF9tYW5hZ2VyLm1lbWJlcnNbZ3JvdXBdLm1lbWJlcnNbcGVyc29uXS5nZXRUYXgoKTtcclxuXHRcdFx0XHQgIHRoaXMuYmdfbWcuYmdBcnJheVtiZ10uZ3JvdXBfbWFuYWdlci5tZW1iZXJzW2dyb3VwXS5tZW1iZXJzW3BlcnNvbl0uYWdlVGljaygpO1xyXG5cdFx0XHQgIH1cclxuXHRcdFx0ICBpZiAodGhpcy5iZ19tZy5iZ0FycmF5W2JnXS5ncm91cF9tYW5hZ2VyLmJhY2tncm91bmQudHlwZSA9PSAnd29yaycpIHtcclxuXHRcdFx0ICBcdHRoaXMuYmdfbWcuYmdBcnJheVtiZ10uZ3JvdXBfbWFuYWdlci5tZW1iZXJzW2dyb3VwXS5hZGRGYXRpZ3VlKHRoaXMuZmF0aWd1ZVBlclRpY2spO1xyXG5cdFx0XHQgIH0gZWxzZSB7XHJcblx0XHRcdCAgXHR0aGlzLmJnX21nLmJnQXJyYXlbYmddLmdyb3VwX21hbmFnZXIubWVtYmVyc1tncm91cF0uYWRkRmF0aWd1ZSgtMSAqIHRoaXMuZmF0aWd1ZVBlclRpY2spO1xyXG5cdFx0XHQgIH1cclxuXHRcdFx0ICBpZiAodGhpcy5iZ19tZy5iZ0FycmF5W2JnXS5ncm91cF9tYW5hZ2VyLm1lbWJlcnNbZ3JvdXBdKSB7XHJcblx0XHRcdCAgXHQvLyBjb25zb2xlLmxvZygnYScpO1xyXG5cdFx0XHQgIFx0Ly8gY29uc29sZS5sb2codGhpcy5iZ19tZy5iZ0FycmF5W2JnXS5ncm91cF9tYW5hZ2VyLm1lbWJlcnNbZ3JvdXBdLCB0aGlzLmJnX21nLmJnQXJyYXlbYmddLmdyb3VwX21hbmFnZXIubWVtYmVyc1tncm91cF0uaGFwcGluZXNzTW9kaWZpZXIpO1xyXG5cdFx0XHQgIFx0dGhpcy5iZ19tZy5iZ0FycmF5W2JnXS5ncm91cF9tYW5hZ2VyLm1lbWJlcnNbZ3JvdXBdLmFwcGx5SGFwcGluZXNzKCk7XHJcblx0XHRcdCAgfVxyXG5cdFx0ICB9XHJcblx0ICB9XHJcblx0ICB0aGlzLmFkZE1vbmV5KHRheGVzKTtcclxuXHQgIHRoaXMubW9uZXlDaGFuZ2UudGV4dCA9ICgodGF4ZXMgPj0gMCkgPyAnKycgOiAnLScpICsgJyQnICsgdGF4ZXM7XHJcblx0ICB0aGlzLm1vbmV5Q2hhbmdlLmZpbGwgPSAodGF4ZXMgPj0gMCkgPyAnIzE2ZmIwNCcgOiAnI2ZmMDAwMCc7XHJcblx0ICB0aGlzLm1vbmV5Q2hhbmdlLmFscGhhID0gMTtcclxuXHQgIHRoaXMubW9uZXlDaGFuZ2VIb2xkID0gdHJ1ZTtcclxuXHJcblx0ICB0aGlzLmdhbWUudGltZS5ldmVudHMuYWRkKFBoYXNlci5UaW1lci5TRUNPTkQgKiB0aGlzLnRheFRpbWUsIHRoaXMuY29sbGVjdFRheCwgdGhpcyk7XHJcbiAgfSxcclxuICBmYWRlTW9uZXlDaGFuZ2U6IGZ1bmN0aW9uICgpIHtcclxuICBcdFx0Ly8gY29uc29sZS5sb2codGhpcy5tb25leUNoYW5nZS5hbHBoYSk7XHJcbiAgXHRcdGlmICh0aGlzLm1vbmV5Q2hhbmdlSG9sZCkge1xyXG4gIFx0XHRcdHRoaXMubW9uZXlDaGFuZ2VIb2xkID0gZmFsc2U7XHJcbiAgXHRcdFx0dGhpcy5nYW1lLnRpbWUuZXZlbnRzLmFkZChQaGFzZXIuVGltZXIuU0VDT05EICogdGhpcy5tb25leUNoYW5nZUhvbGREZWxheSwgdGhpcy5mYWRlTW9uZXlDaGFuZ2UsIHRoaXMpO1xyXG4gIFx0XHR9IGVsc2Uge1xyXG5cdCAgXHRcdHRoaXMubW9uZXlDaGFuZ2UuYWxwaGEgLT0gdGhpcy5tb25leUNoYW5nZUZhZGVSYXRlO1xyXG5cdCAgXHRcdHRoaXMuZ2FtZS50aW1lLmV2ZW50cy5hZGQoUGhhc2VyLlRpbWVyLlNFQ09ORCAqIHRoaXMubW9uZXlDaGFuZ2VGYWRlRGVsYXksIHRoaXMuZmFkZU1vbmV5Q2hhbmdlLCB0aGlzKTtcclxuXHQgIFx0fVxyXG4gIH0sXHJcbiAgc2V0SGFwcGluZXNzOiBmdW5jdGlvbiAoYW10KSB7XHJcblx0ICB0aGlzLmN1ckhhcHBpbmVzcyA9IGFtdDtcclxuXHQgIGlmICghdGhpcy5oYXBwaW5lc3NJbmNyZW1lbnRpbmcpIHtcclxuXHRcdCAgdGhpcy5nYW1lLnRpbWUuZXZlbnRzLmFkZChQaGFzZXIuVGltZXIuU0VDT05EICogdGhpcy5oYXBwaW5lc3NVcGRhdGVEZWxheSwgdGhpcy5pbmNyZW1lbnRIYXBwaW5lc3MsIHRoaXMpO1xyXG5cdFx0ICB0aGlzLmhhcHBpbmVzc0luY3JlbWVudGluZyA9IHRydWU7XHJcblx0ICB9XHJcbiAgfSxcclxuICBpbmNyZW1lbnRIYXBwaW5lc3M6IGZ1bmN0aW9uICgpIHtcclxuXHRpZiAodGhpcy5oYXBwaW5lc3NWYWwgPT09IHRoaXMuY3VySGFwcGluZXNzKSB7XHJcblx0XHR0aGlzLmhhcHBpbmVzc0luY3JlbWVudGluZyA9IGZhbHNlO1xyXG5cdFx0cmV0dXJuO1xyXG5cdH1cclxuXHRpZiAodGhpcy5jdXJIYXBwaW5lc3MgPiB0aGlzLmhhcHBpbmVzc1ZhbCkge1xyXG5cdFx0dGhpcy5iYXIuYWRkVmFsdWUoMSk7XHJcblx0XHR0aGlzLmhhcHBpbmVzc1ZhbCArPSAxO1xyXG5cdH0gZWxzZSBpZiAodGhpcy5jdXJIYXBwaW5lc3MgPCB0aGlzLmhhcHBpbmVzc1ZhbCkge1xyXG5cdFx0dGhpcy5iYXIuYWRkVmFsdWUoLTEpO1xyXG5cdFx0dGhpcy5oYXBwaW5lc3NWYWwgLT0gMTtcclxuXHR9XHJcblx0dGhpcy5nYW1lLnRpbWUuZXZlbnRzLmFkZChQaGFzZXIuVGltZXIuU0VDT05EICogdGhpcy5oYXBwaW5lc3NVcGRhdGVEZWxheSwgdGhpcy5pbmNyZW1lbnRIYXBwaW5lc3MsIHRoaXMpO1xyXG4gIH0sXHJcbiAgYWRkTW9uZXk6IGZ1bmN0aW9uIChhbXQpIHtcclxuXHQgIHRoaXMuY3VyTW9uZXkgKz0gYW10O1xyXG5cdCAgLy90aGlzLm1vbmV5LnRleHQgPSAnJCcgKyBuZXdNb25leTtcclxuXHQgIGlmICghdGhpcy5tb25leUluY3JlbWVudGluZykge1xyXG5cdFx0dGhpcy5nYW1lLnRpbWUuZXZlbnRzLmFkZChQaGFzZXIuVGltZXIuU0VDT05EICogdGhpcy5tb25leVVwZGF0ZURlbGF5LCB0aGlzLmluY3JlbWVudE1vbmV5LCB0aGlzKTtcclxuXHRcdHRoaXMubW9uZXlJbmNyZW1lbnRpbmcgPSB0cnVlO1xyXG5cdCAgfVxyXG4gIH0sXHJcbiAgaW5jcmVtZW50TW9uZXk6IGZ1bmN0aW9uICgpIHtcclxuXHRpZiAodGhpcy5tb25leVZhbCA9PT0gdGhpcy5jdXJNb25leSkge1xyXG5cdFx0dGhpcy5tb25leUluY3JlbWVudGluZyA9IGZhbHNlO1xyXG5cdFx0cmV0dXJuO1xyXG5cdH1cclxuXHRpZiAodGhpcy5jdXJNb25leSA+IHRoaXMubW9uZXlWYWwpIHtcclxuXHRcdHRoaXMubW9uZXlWYWwgKz0gMTA7XHJcblx0fSBlbHNlIGlmICh0aGlzLmN1ck1vbmV5IDwgdGhpcy5tb25leVZhbCkge1xyXG5cdFx0dGhpcy5tb25leVZhbCAtPSAxMDtcclxuXHR9XHJcblx0dGhpcy5tb25leS50ZXh0ID0gJyQnICsgdGhpcy5tb25leVZhbDtcclxuXHR0aGlzLmdhbWUudGltZS5ldmVudHMuYWRkKFBoYXNlci5UaW1lci5TRUNPTkQgKiB0aGlzLm1vbmV5VXBkYXRlRGVsYXksIHRoaXMuaW5jcmVtZW50TW9uZXksIHRoaXMpO1xyXG4gIH0sXHJcbiAgZGVjVGF4TG93OiBmdW5jdGlvbiAoKSB7XHJcbiAgICBpZiAodGhpcy50YXhNb2QubG93ID09IDEpIHtcclxuICAgICAgdGhpcy50YXhNb2QubG93ID0gLjU7XHJcbiAgICAgIHRoaXMudGV4dFRheExvdy50ZXh0ID0gJyQnO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodGhpcy50YXhNb2QubG93ID09IDEuNSkge1xyXG4gICAgICB0aGlzLnRheE1vZC5sb3cgPSAxO1xyXG4gICAgICB0aGlzLnRleHRUYXhMb3cudGV4dCA9ICckJCc7XHJcbiAgICB9XHJcbiAgfSxcclxuICBpbmNUYXhMb3c6IGZ1bmN0aW9uICgpIHtcclxuICAgIGlmICh0aGlzLnRheE1vZC5sb3cgPT0gLjUpIHtcclxuICAgICAgdGhpcy50YXhNb2QubG93ID0gMTtcclxuICAgICAgdGhpcy50ZXh0VGF4TG93LnRleHQgPSAnJCQnO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodGhpcy50YXhNb2QubG93ID09IDEpIHtcclxuICAgICAgdGhpcy50YXhNb2QubG93ID0gMS41O1xyXG4gICAgICB0aGlzLnRleHRUYXhMb3cudGV4dCA9ICckJCQnO1xyXG4gICAgfVxyXG4gIH0sXHJcbiAgZGVjVGF4TWlkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICBpZiAodGhpcy50YXhNb2QubWlkID09IDEpIHtcclxuICAgICAgdGhpcy50YXhNb2QubWlkID0gLjU7XHJcbiAgICAgIHRoaXMudGV4dFRheE1pZC50ZXh0ID0gJyQnO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodGhpcy50YXhNb2QubWlkID09IDEuNSkge1xyXG4gICAgICB0aGlzLnRheE1vZC5taWQgPSAxO1xyXG4gICAgICB0aGlzLnRleHRUYXhNaWQudGV4dCA9ICckJCc7XHJcbiAgICB9XHJcbiAgfSxcclxuICBpbmNUYXhNaWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgIGlmICh0aGlzLnRheE1vZC5taWQgPT0gLjUpIHtcclxuICAgICAgdGhpcy50YXhNb2QubWlkID0gMTtcclxuICAgICAgdGhpcy50ZXh0VGF4TWlkLnRleHQgPSAnJCQnO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodGhpcy50YXhNb2QubWlkID09IDEpIHtcclxuICAgICAgdGhpcy50YXhNb2QubWlkID0gMS41O1xyXG4gICAgICB0aGlzLnRleHRUYXhNaWQudGV4dCA9ICckJCQnO1xyXG4gICAgfVxyXG4gIH0sXHJcbiAgZGVjVGF4SGlnaDogZnVuY3Rpb24gKCkge1xyXG4gICAgaWYgKHRoaXMudGF4TW9kLmhpZ2ggPT0gMSkge1xyXG4gICAgICB0aGlzLnRheE1vZC5oaWdoID0gLjU7XHJcbiAgICAgIHRoaXMudGV4dFRheEhpZ2gudGV4dCA9ICckJztcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHRoaXMudGF4TW9kLmhpZ2ggPT0gMS41KSB7XHJcbiAgICAgIHRoaXMudGF4TW9kLmhpZ2ggPSAxO1xyXG4gICAgICB0aGlzLnRleHRUYXhIaWdoLnRleHQgPSAnJCQnO1xyXG4gICAgfVxyXG4gIH0sXHJcbiAgaW5jVGF4SGlnaDogZnVuY3Rpb24gKCkge1xyXG4gICAgaWYgKHRoaXMudGF4TW9kLmhpZ2ggPT0gLjUpIHtcclxuICAgICAgdGhpcy50YXhNb2QuaGlnaCA9IDE7XHJcbiAgICAgIHRoaXMudGV4dFRheEhpZ2gudGV4dCA9ICckJCc7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICh0aGlzLnRheE1vZC5oaWdoID09IDEpIHtcclxuICAgICAgdGhpcy50YXhNb2QuaGlnaCA9IDEuNTtcclxuICAgICAgdGhpcy50ZXh0VGF4SGlnaC50ZXh0ID0gJyQkJCc7XHJcbiAgICB9XHJcbiAgfVxyXG59O1xyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuIiwidmFyIEdhbWVfT3ZlciA9IGZ1bmN0aW9uICgpIHtcclxuICB0aGlzLnRleHQgPSBudWxsO1xyXG4gIHRoaXMudGV4dFNtYWxsID0gbnVsbDtcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gR2FtZV9PdmVyO1xyXG5cclxuR2FtZV9PdmVyLnByb3RvdHlwZSA9IHtcclxuXHJcbiAgY3JlYXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgeCA9IHRoaXMuZ2FtZS53aWR0aCAvIDI7XHJcbiAgICB2YXIgeSA9IHRoaXMuZ2FtZS5oZWlnaHQgLyAyO1xyXG5cclxuICAgIHZhciBzdHlsZSA9IHsgZm9udDogXCJSb2JvdG9cIiwgZm9udFNpemU6IDY0LCBmaWxsOiBcIiMwMDAwMDBcIiwgYWxpZ246IFwiY2VudGVyXCIgfTtcclxuICAgIHZhciBzbWFsbFN0eWxlID0geyBmb250OiBcIlJvYm90b1wiLCBmb250U2l6ZTogMzIsIGZpbGw6IFwiIzAwMDAwMFwiLCBhbGlnbjogXCJsZWZ0XCIgfTtcclxuXHJcbiAgICB0aGlzLnRleHQgPSB0aGlzLmFkZC50ZXh0KHggLSAzMDAsIHkgLSAyMDAsIFwiR2FtZSBPdmVyXCIsIHN0eWxlKTtcclxuICAgIHRoaXMudGV4dFNtYWxsID0gdGhpcy5hZGQudGV4dCh4IC0gMzAwLCB5IC0gMTAwLCBcInlvdXIgaGFwcGluZXNzIHdlbnQgdW5kZXIgNTAlXFxuXCIgKyBcImNsaWNrIHRvIGNvbnRpbnVlXCIsIHNtYWxsU3R5bGUpO1xyXG4gICAgdGhpcy5nYW1lLnRpbWUuZXZlbnRzLmFkZChQaGFzZXIuVGltZXIuU0VDT05EICogMywgdGhpcy5kb1RoaW5nLCB0aGlzKTtcclxuICB9LFxyXG5cclxuICB1cGRhdGU6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgfSxcclxuXHJcbiAgZG9UaGluZzogZnVuY3Rpb24oKSB7XHJcbiAgICB0aGlzLmlucHV0Lm9uRG93bi5hZGQodGhpcy5vbkRvd24sIHRoaXMpO1xyXG4gIH0sXHJcblxyXG4gIG9uRG93bjogZnVuY3Rpb24gKCkge1xyXG4gICAgdGhpcy5nYW1lLnN0YXRlLnN0YXJ0KCdNZW51Jyk7XHJcbiAgfVxyXG59OyIsInZhciBNZW51ID0gZnVuY3Rpb24gKCkge1xyXG4gIHRoaXMudGV4dCA9IG51bGw7XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IE1lbnU7XHJcblxyXG5NZW51LnByb3RvdHlwZSA9IHtcclxuXHJcbiAgY3JlYXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgeCA9IHRoaXMuZ2FtZS53aWR0aCAvIDI7XHJcbiAgICB2YXIgeSA9IHRoaXMuZ2FtZS5oZWlnaHQgLyAyO1xyXG5cclxuICAgIHZhciBzdHlsZSA9IHsgZm9udDogXCJSb2JvdG9cIiwgZm9udFNpemU6IDY0LCBmaWxsOiBcIiMwMDAwMDBcIiwgYWxpZ246IFwiY2VudGVyXCIgfTtcclxuXHJcbiAgICB0aGlzLnRleHQgPSB0aGlzLmFkZC50ZXh0KHgsIHksIFwiQ2xpY2sgdG8gU3RhcnRcIiwgc3R5bGUpO1xyXG4gICAgdGhpcy50ZXh0LmFuY2hvci5zZXRUbyguNSwgLjUpO1xyXG4gICAgdGhpcy5pbnB1dC5vbkRvd24uYWRkKHRoaXMub25Eb3duLCB0aGlzKTtcclxuICB9LFxyXG5cclxuICB1cGRhdGU6IGZ1bmN0aW9uICgpIHtcclxuICB9LFxyXG5cclxuICBvbkRvd246IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMuZ2FtZS5zdGF0ZS5zdGFydChwbGF5ZXJTdGF0ZS5jdXJyZW50TGV2ZWwpO1xyXG4gIH1cclxufTtcclxuIiwidmFyIFByZWxvYWRlciA9IGZ1bmN0aW9uIChnYW1lKSB7XHJcbiAgdGhpcy5hc3NldCA9IG51bGw7XHJcbiAgdGhpcy5yZWFkeSA9IGZhbHNlO1xyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBQcmVsb2FkZXI7XHJcblxyXG5QcmVsb2FkZXIucHJvdG90eXBlID0ge1xyXG5cclxuICBwcmVsb2FkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLmFzc2V0ID0gdGhpcy5hZGQuc3ByaXRlKDMyMCwgMjQwLCAncHJlbG9hZGVyJyk7XHJcbiAgICB0aGlzLmFzc2V0LmFuY2hvci5zZXRUbygwLjUsIDAuNSk7XHJcblxyXG4gICAgdGhpcy5sb2FkLm9uTG9hZENvbXBsZXRlLmFkZE9uY2UodGhpcy5vbkxvYWRDb21wbGV0ZSwgdGhpcyk7XHJcbiAgICB0aGlzLmxvYWQuc2V0UHJlbG9hZFNwcml0ZSh0aGlzLmFzc2V0KTtcclxuICAgIHRoaXMubG9hZC5pbWFnZSgndGVzdHNwcml0ZScsICdhc3NldHMvdGVzdC5wbmcnKTtcclxuICAgIHRoaXMubG9hZC5pbWFnZSgnbWVudV9iZycsICdhc3NldHMvbWVudV9iZy5wbmcnKTtcclxuICAgIHRoaXMubG9hZC5pbWFnZSgnYmFja2dyb3VuZCcsICdhc3NldHMvc2VjdG9yQkcucG5nJylcclxuICAgIHRoaXMubG9hZC5pbWFnZSgncGVyc29uJywgJ2Fzc2V0cy9wZXJzb24ucG5nJyk7XHJcbiAgICB0aGlzLmxvYWQuaW1hZ2UoJ3NlbGVjdGlvbicsICdhc3NldHMvc2VsZWN0aW9uLnBuZycpO1xyXG4gICAgdGhpcy5sb2FkLmltYWdlKCdib29rJywgJ2Fzc2V0cy9ib29rLnBuZycpO1xyXG4gICAgdGhpcy5sb2FkLmltYWdlKCd5b3VuZycsICdhc3NldHMveW91bmcucG5nJyk7XHJcbiAgICB0aGlzLmxvYWQuaW1hZ2UoJ2FkdWx0JywgJ2Fzc2V0cy9hZHVsdC5wbmcnKTtcclxuICAgIHRoaXMubG9hZC5pbWFnZSgnb2xkJywgJ2Fzc2V0cy9vbGQucG5nJyk7XHJcbiAgICB0aGlzLmxvYWQuaW1hZ2UoJ3RheFJlZHVjZScsICdhc3NldHMvdGF4UmVkdWNlLnBuZycpO1xyXG4gICAgdGhpcy5sb2FkLmltYWdlKCd0YXhBZGQnLCAnYXNzZXRzL3RheEFkZC5wbmcnKTtcclxuICAgIHRoaXMubG9hZC5pbWFnZSgnbG9jaycsICdhc3NldHMvbG9jay5wbmcnKTtcclxuICAgIHRoaXMubG9hZC5zcHJpdGVzaGVldCgnY2hldnJvbnMnLCAnYXNzZXRzL2NoZXZyb25fc2hlZXQucG5nJywgNDAsIDUwKTtcclxuICAgIC8vIHRoaXMubG9hZC5hdGxhc0pTT05IYXNoKCdjaGV2cm9ucycsICdhc3NldHMvY2hldnJvbnMucG5nJywgJ2Fzc2V0cy9jaGV2cm9ucy5qc29uJyk7XHJcbiAgICB0aGlzLmxvYWQuYXRsYXNKU09OSGFzaCgnYWdlcycsICdhc3NldHMvYWdlcy5wbmcnLCAnYXNzZXRzL2FnZXMuanNvbicpO1xyXG4gICAgdGhpcy5sb2FkLmltYWdlKCdoYXBweWZhY2UnLCAnYXNzZXRzL2hhcHB5ZmFjZV9iZXR0ZXIucG5nJyk7XHJcbiAgICB0aGlzLmxvYWQuaW1hZ2UoJ2JvcmRlcmVkJywgJ2Fzc2V0cy9ib3JkZXJlZC5wbmcnKTtcclxuICAgIHRoaXMubG9hZC5pbWFnZSgnbG93X2RvbGxhcicsICdhc3NldHMvbG93X2RvbGxhci5wbmcnKTtcclxuICAgIHRoaXMubG9hZC5pbWFnZSgnbWVkX2RvbGxhcicsICdhc3NldHMvbWVkX2RvbGxhci5wbmcnKTtcclxuICAgIHRoaXMubG9hZC5pbWFnZSgnaGlnaF9kb2xsYXInLCAnYXNzZXRzL2hpZ2hfZG9sbGFyLnBuZycpO1xyXG4gICAgdGhpcy5sb2FkLnNjcmlwdCgnd2ViZm9udCcsICcvL2FqYXguZ29vZ2xlYXBpcy5jb20vYWpheC9saWJzL3dlYmZvbnQvMS40Ljcvd2ViZm9udC5qcycpO1xyXG4gIH0sXHJcblxyXG4gIGNyZWF0ZTogZnVuY3Rpb24gKCkge1xyXG4gICAgdGhpcy5hc3NldC5jcm9wRW5hYmxlZCA9IGZhbHNlO1xyXG4gIH0sXHJcblxyXG4gIHVwZGF0ZTogZnVuY3Rpb24gKCkge1xyXG4gICAgaWYgKCEhdGhpcy5yZWFkeSkge1xyXG4gICAgICB0aGlzLmdhbWUuc3RhdGUuc3RhcnQoJ0dhbWUnKTtcclxuICAgIH1cclxuICB9LFxyXG5cclxuICBvbkxvYWRDb21wbGV0ZTogZnVuY3Rpb24gKCkge1xyXG4gICAgdGhpcy5yZWFkeSA9IHRydWU7XHJcbiAgfVxyXG59O1xyXG4iLCJ2YXIgU3BsYXNoID0gZnVuY3Rpb24gKCkge1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBTcGxhc2g7XG5cblNwbGFzaC5wcm90b3R5cGUgPSB7XG4gIGNyZWF0ZTogZnVuY3Rpb24gKCkge1xuICB9XG59OyIsInZhciBVdGlscyA9IHtcclxuICAgIGNvbnRhaW5zT2JqZWN0OiBmdW5jdGlvbihvYmosIGxpc3QpIHtcclxuICAgICAgICB2YXIgaTtcclxuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAobGlzdFtpXSA9PT0gb2JqKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfSxcclxuXHRoeXBvdGVudXNlOiBmdW5jdGlvbihhLCBiKSB7XHJcblx0XHRyZXR1cm4gTWF0aC5zcXJ0KE1hdGgucG93KGEsIDIpICsgTWF0aC5wb3coYiwgMikpO1xyXG5cdH0sXHJcblx0cmF0aW86IGZ1bmN0aW9uKGEsIGIsIGMsIG1pbikge1xyXG5cdFx0aWYgKGEgPT0gMCAmJiBiID09IDAgJiYgYyA9PSAwKSB7XHJcblx0XHRcdHJldHVybiB7YSA6IDEgLyAzLCBiIDogMSAvIDMsIGMgOiAxIC8gM307XHJcblx0XHR9XHJcblx0XHR2YXIgc3VtID0gYSArIGIgKyBjXHJcblx0XHQvLyB2YXIgYVJhdGlvID0gKGEgPT0gMCkgPyAwIDogYSAvIHN1bTtcclxuXHRcdC8vIHZhciBiUmF0aW8gPSAoYiA9PSAwKSA/IDAgOiBiIC8gc3VtO1xyXG5cdFx0Ly8gdmFyIGNSYXRpbyA9IChjID09IDApID8gMCA6IGMgLyBzdW07XHJcblx0XHR2YXIgYVJhdGlvID0gYSAvIHN1bTtcclxuXHRcdHZhciBiUmF0aW8gPSBiIC8gc3VtO1xyXG5cdFx0dmFyIGNSYXRpbyA9IGMgLyBzdW07XHJcblxyXG5cdFx0Ly8gaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHtcclxuXHRcdC8vIFx0cmV0dXJuIFthIC8gYV07XHJcblx0XHQvLyB9XHJcblx0XHQvLyBlbHNlIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAyKSB7XHJcblx0XHQvLyBcdHJldHVybiBbYSAvIChhICsgYiksIGIgLyAoYSArIGIpXTtcclxuXHRcdC8vIH1cclxuXHRcdC8vIGVsc2UgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDMpIHtcclxuXHRcdC8vIFx0cmV0dXJuIFthIC8gKGEgKyBiICsgYyksIGIgLyAoYSArIGIgKyBjKSwgYyAvIChhICsgYiArIGMpXTtcclxuXHRcdC8vIH1cclxuXHRcdC8vIGVsc2Uge1xyXG5cdFx0Ly8gXHRyZXR1cm4gW107XHJcblx0XHQvLyB9XHJcblx0XHQvLyBjb25zb2xlLmxvZygndXRpbCByZWNpZXZlcycsIGEsIGIsIGMsIGFSYXRpbywgYlJhdGlvLCBjUmF0aW8pO1xyXG5cdFx0aWYgKGFSYXRpbyA8IG1pbikge1xyXG5cdFx0XHRpZiAoYlJhdGlvIDwgbWluKSB7XHJcblx0XHRcdFx0Ly8gY29uc29sZS5sb2coYVJhdGlvLCBiUmF0aW8sIGNSYXRpbyk7XHJcblx0XHRcdFx0dmFyIGRpZmZBID0gbWluIC0gYVJhdGlvO1xyXG5cdFx0XHRcdHZhciBkaWZmQiA9IG1pbiAtIGJSYXRpbztcclxuXHRcdFx0XHQvLyBjb25zb2xlLmxvZyhjUmF0aW8sIGRpZmZBLCBkaWZmQik7XHJcblx0XHRcdFx0Y1JhdGlvIC09IGRpZmZBICsgZGlmZkI7XHJcblx0XHRcdFx0YVJhdGlvID0gbWluO1xyXG5cdFx0XHRcdGJSYXRpbyA9IG1pbjtcclxuXHRcdFx0fSBlbHNlIGlmIChjUmF0aW8gPCBtaW4pIHtcclxuXHRcdFx0XHR2YXIgZGlmZkEgPSBtaW4gLSBhUmF0aW87XHJcblx0XHRcdFx0dmFyIGRpZmZDID0gbWluIC0gY1JhdGlvO1xyXG5cdFx0XHRcdC8vIGNvbnNvbGUubG9nKGFSYXRpbywgYlJhdGlvLCBkaWZmQSwgZGlmZkMpO1xyXG5cdFx0XHRcdGJSYXRpbyAtPSBkaWZmQSArIGRpZmZDO1xyXG5cdFx0XHRcdC8vIGNvbnNvbGUubG9nKGJSYXRpbyk7XHJcblx0XHRcdFx0YVJhdGlvID0gbWluO1xyXG5cdFx0XHRcdGNSYXRpbyA9IG1pbjtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHR2YXIgZGlmZiA9IG1pbiAtIGFSYXRpbztcclxuXHRcdFx0XHRpZiAoYlJhdGlvIC0gZGlmZiAvIDIgPCBtaW4pIHtcclxuXHRcdFx0XHRcdHZhciBhbGxvd2VkID0gYlJhdGlvIC0gbWluO1xyXG5cdFx0XHRcdFx0dmFyIG5lZWRlZCA9IGRpZmYgLSBhbGxvd2VkO1xyXG5cdFx0XHRcdFx0YlJhdGlvID0gbWluO1xyXG5cdFx0XHRcdFx0Y1JhdGlvIC09IG5lZWRlZDtcclxuXHRcdFx0XHRcdGFSYXRpbyA9IG1pbjtcclxuXHRcdFx0XHR9IGVsc2UgaWYgKGNSYXRpbyAtIGRpZmYgLyAyIDwgbWluKSB7XHJcblx0XHRcdFx0XHR2YXIgYWxsb3dlZCA9IGNSYXRpbyAtIG1pbjtcclxuXHRcdFx0XHRcdHZhciBuZWVkZWQgPSBkaWZmIC0gYWxsb3dlZDtcclxuXHRcdFx0XHRcdGNSYXRpbyA9IG1pbjtcclxuXHRcdFx0XHRcdGJSYXRpbyAtPSBuZWVkZWQ7XHJcblx0XHRcdFx0XHRhUmF0aW8gPSBtaW47XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdGFSYXRpbyA9IG1pbjtcclxuXHRcdFx0XHRcdGJSYXRpbyAtPSBkaWZmIC8gMjtcclxuXHRcdFx0XHRcdGNSYXRpbyAtPSBkaWZmIC8gMjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0gZWxzZSBpZiAoYlJhdGlvIDwgbWluKSB7XHJcblx0XHRcdGlmIChjUmF0aW8gPCBtaW4pIHtcclxuXHRcdFx0XHR2YXIgZGlmZkIgPSBtaW4gLSBiUmF0aW87XHJcblx0XHRcdFx0dmFyIGRpZmZDID0gbWluIC0gY1JhdGlvO1xyXG5cdFx0XHRcdGFSYXRpbyAtPSBkaWZmQiArIGRpZmZDO1xyXG5cdFx0XHRcdGJSYXRpbyA9IG1pbjtcclxuXHRcdFx0XHRjUmF0aW8gPSBtaW47XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0dmFyIGRpZmYgPSBtaW4gLSBiUmF0aW87XHJcblx0XHRcdFx0aWYgKGFSYXRpbyAtIGRpZmYgLyAyIDwgbWluKSB7XHJcblx0XHRcdFx0XHR2YXIgYWxsb3dlZCA9IGFSYXRpbyAtIG1pbjtcclxuXHRcdFx0XHRcdHZhciBuZWVkZWQgPSBkaWZmIC0gYWxsb3dlZDtcclxuXHRcdFx0XHRcdGFSYXRpbyA9IG1pbjtcclxuXHRcdFx0XHRcdGNSYXRpbyAtPSBuZWVkZWQ7XHJcblx0XHRcdFx0XHRiUmF0aW8gPSBtaW47XHJcblx0XHRcdFx0fSBlbHNlIGlmIChjUmF0aW8gLSBkaWZmIC8gMiA8IG1pbikge1xyXG5cdFx0XHRcdFx0dmFyIGFsbG93ZWQgPSBjUmF0aW8gLSBtaW47XHJcblx0XHRcdFx0XHR2YXIgbmVlZGVkID0gZGlmZiAtIGFsbG93ZWQ7XHJcblx0XHRcdFx0XHRjUmF0aW8gPSBtaW47XHJcblx0XHRcdFx0XHRhUmF0aW8gLT0gbmVlZGVkO1xyXG5cdFx0XHRcdFx0YlJhdGlvID0gbWluO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRiUmF0aW8gPSBtaW47XHJcblx0XHRcdFx0XHRhUmF0aW8gLT0gZGlmZiAvIDI7XHJcblx0XHRcdFx0XHRjUmF0aW8gLT0gZGlmZiAvIDI7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9IGVsc2UgaWYgKGNSYXRpbyA8IG1pbikge1xyXG5cdFx0XHQvLyBjb25zb2xlLmxvZygnY2FzZSBhJyk7XHJcblx0XHRcdHZhciBkaWZmID0gbWluIC0gY1JhdGlvO1xyXG5cdFx0XHRpZiAoYVJhdGlvIC0gZGlmZiAvIDIgPCBtaW4pIHtcclxuXHRcdFx0XHQvLyBjb25zb2xlLmxvZygnY2FzZSBiJyk7XHJcblx0XHRcdFx0dmFyIGFsbG93ZWQgPSBhUmF0aW8gLSBtaW47XHJcblx0XHRcdFx0dmFyIG5lZWRlZCA9IGRpZmYgLSBhbGxvd2VkO1xyXG5cdFx0XHRcdGFSYXRpbyA9IG1pbjtcclxuXHRcdFx0XHRiUmF0aW8gLT0gbmVlZGVkO1xyXG5cdFx0XHRcdGNSYXRpbyA9IG1pbjtcclxuXHRcdFx0fSBlbHNlIGlmIChiUmF0aW8gLSBkaWZmIC8gMiA8IG1pbikge1xyXG5cdFx0XHRcdC8vIGNvbnNvbGUubG9nKCdjYXNlIGMnKTtcclxuXHRcdFx0XHR2YXIgYWxsb3dlZCA9IGJSYXRpbyAtIG1pbjtcclxuXHRcdFx0XHR2YXIgbmVlZGVkID0gZGlmZiAtIGFsbG93ZWQ7XHJcblx0XHRcdFx0YlJhdGlvID0gbWluO1xyXG5cdFx0XHRcdGFSYXRpbyAtPSBuZWVkZWQ7XHJcblx0XHRcdFx0Y1JhdGlvID0gbWluO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdC8vIGNvbnNvbGUubG9nKCdjYXNlIGQnKTtcclxuXHRcdFx0XHRjUmF0aW8gPSBtaW47XHJcblx0XHRcdFx0YVJhdGlvIC09IGRpZmYgLyAyO1xyXG5cdFx0XHRcdGNSYXRpbyAtPSBkaWZmIC8gMjtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0Ly8gY29uc29sZS5sb2coJ3V0aWwgcmV0dXJucycsIGFSYXRpbywgYlJhdGlvLCBjUmF0aW8pO1xyXG5cdFx0cmV0dXJuIHthIDogYVJhdGlvLCBiIDogYlJhdGlvLCBjIDogY1JhdGlvfTtcclxuXHR9XHJcbn07XHJcblxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBVdGlsczsiXX0=
=======
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvZW50aXRpZXMvUHJvZ3Jlc3NCYXIuanMiLCJzcmMvanMvZW50aXRpZXMvYmFja2dyb3VuZC5qcyIsInNyYy9qcy9lbnRpdGllcy9iYWNrZ3JvdW5kX21hbmFnZXIuanMiLCJzcmMvanMvZW50aXRpZXMvZ3JvdXAuanMiLCJzcmMvanMvZW50aXRpZXMvZ3JvdXBNYW5hZ2VyLmpzIiwic3JjL2pzL2VudGl0aWVzL2hvdmVyTWVudS5qcyIsInNyYy9qcy9lbnRpdGllcy9wZXJzb24uanMiLCJzcmMvanMvZW50aXRpZXMvcGxheWVyLmpzIiwic3JjL2pzL2VudGl0aWVzL3VpQnVpbGRlci5qcyIsInNyYy9qcy9tYWluLmpzIiwic3JjL2pzL3N0YXRlcy9ib290LmpzIiwic3JjL2pzL3N0YXRlcy9nYW1lLmpzIiwic3JjL2pzL3N0YXRlcy9nYW1lX292ZXIuanMiLCJzcmMvanMvc3RhdGVzL21lbnUuanMiLCJzcmMvanMvc3RhdGVzL3ByZWxvYWRlci5qcyIsInNyYy9qcy9zdGF0ZXMvc3BsYXNoLmpzIiwic3JjL2pzL3V0aWxzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDL0dBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3phQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzlVQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDN0hBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzVNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbkZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMzQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDN0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDeFVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiLy9OT1RFOiBET04nVCBVU0UgdGhpcyBjb2RlIHRvIGNyZWF0ZSBhIFByb2dyZXNzQmFyLiBJbnN0ZWFkLCB1c2UgdGhlIFVJQnVpbGRlciBvYmplY3QgYW5kIGNhbGwgYnVpbGRQcm9ncmVzc0JhclxyXG5cclxudmFyIFByb2dyZXNzQmFyID0gZnVuY3Rpb24oc2V0VHlwZSwgc2V0TWF4VmFsdWUsIHNldEdyYXBoaWNzLCBzZXRSZW5kZXJhYmxlcykge1xyXG5cdHRoaXMudHlwZSA9IHNldFR5cGU7IC8vVHdvIHR5cGVzLCBcImdyb3dpbmdcIiAoc3RhcnRzIGF0IDAsIHRyaWdnZXJzIGV2ZW50IHdoZW4gZnVsbCkgXHJcblx0XHRcdFx0XHRcdCAvL2FuZCBcInNocmlua2luZ1wiIChzdGFydHMgZnVsbCwgdHJpZ2dlcnMgYXQgMClcclxuXHR0aGlzLmJnQm9yZGVyU2l6ZSA9IDI7XHRcdFx0Ly9kZWZhdWx0IHNpemUgb2YgYmFja2dyb3VuZCBib3JkZXJcclxuXHR0aGlzLmJnQm9yZGVyQ29sb3IgPSAweDAwMDAwO1x0Ly9kZWZhdWx0IGNvbG9yIG9mIGJhY2tncm91bmQgYm9yZGVyXHJcblx0dGhpcy5iZ0NvbG9yID0gMHhmZmZmZmY7XHRcdC8vZGVmYXVsdCBjb2xvciBvZiBiYWNrZ3JvdW5kXHJcblx0dGhpcy5wYWRkaW5nSG9yaXogPSAxMDtcdFx0XHQvL2RlZmF1bHQgc3VtIG9mIHBhZGRpbmcgb24gbGVmdCBhbmQgcmlnaHQgc2lkZSBpbm5lciB2YWx1ZSBiYXJcclxuXHR0aGlzLnBhZGRpbmdWZXJ0ID0gMTA7XHRcdFx0Ly9kZWZhdWx0IHN1bSAoaS5lLiBoYWxmIG9uIGVhY2ggc2lkZSkgb2YgdmVydGljYWwgcGFkZGluZyBvZiBpbm5lciB2YWx1ZSBiYXJcclxuXHQvLyB0aGlzLnZhbHVlQm9yZGVyU2l6ZSA9IDE7XHRcdC8vZGVmYXVsdCBzaXplIG9mIHZhbHVlIGJvcmRlclxyXG5cdC8vIHRoaXMudmFsdWVCb3JkZXJDb2xvciA9IDB4ODg4OEZGOyAvL2RlZmF1bHQgY29sb3Igb2YgdmFsdWUgYm9yZGVyXHJcblx0dGhpcy52YWx1ZUNvbG9yID0gMHgwMDAwMDA7XHRcdC8vZGVmYXVsdCBjb2xvciBvZiBpbm5lciB2YWx1ZSBiYXJcclxuXHR0aGlzLnggPSBudWxsO1xyXG5cdHRoaXMueSA9IG51bGw7XHJcblx0dGhpcy53aWR0aCA9IG51bGw7XHJcblx0dGhpcy5oZWlnaHQgPSBudWxsO1xyXG5cdHRoaXMubWF4VmFsdWUgPSBzZXRNYXhWYWx1ZTtcclxuXHR0aGlzLmdyYXBoaWNzID0gc2V0R3JhcGhpY3M7IC8vc3RvcmUgZ3JhcGhpY3MgY2xhc3MgKHVzZWQgdG8gZHJhdyBiYXIpXHJcblx0dGhpcy5yZW5kZXJhYmxlcyA9IHNldFJlbmRlcmFibGVzO1xyXG5cdFxyXG5cdHRoaXMub25FdmVudCA9IGZ1bmN0aW9uKCkge307IC8vb3ZlcndyaXRlIHRoaXMgZnVuY3Rpb24gdG8gbWFrZSB3aGF0ZXZlciB5b3Ugd2FudCBoYXBwZW4gd2hlbiBwcm9ncmVzc0JhciByZWFjaGVzIGxpbWl0XHJcblx0XHJcblx0Ly9zd2l0Y2godGhpcy50eXBlKSB7XHJcblx0Ly9jYXNlICdncm93aW5nJyA6IFxyXG5cdGlmKHNldFR5cGUgPT09ICdncm93aW5nJykge1xyXG5cdFx0dGhpcy52YWx1ZSA9IDA7XHJcblx0XHQvL3RyeVRyaWdnZXIgaXMgY2FsbGVkIGF1dG9tYXRpY2FsbHkgd2hlbiB5b3UgYWRkL3N1YnRyYWN0IHZhbHVlLCBhbmQgd2lsbCB0cmlnZ2VyIHRoZSBvbkV2ZW50KCkgZnVuY3Rpb25cclxuXHRcdHRoaXMudHJ5VHJpZ2dlciA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZih0aGlzLnZhbHVlID49IHRoaXMubWF4VmFsdWUpIHtcclxuXHRcdFx0XHR0aGlzLm9uRXZlbnQoKTtcclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHRcdC8vYnJlYWs7XHJcblx0fVxyXG5cdGVsc2UgaWYoc2V0VHlwZSA9PT0gJ3Nocmlua2luZycpIHtcclxuXHQvL2Nhc2UgJ3Nocmlua2luZycgOlxyXG5cdFx0dGhpcy52YWx1ZSA9IHRoaXMubWF4VmFsdWU7XHJcblx0XHR0aGlzLnRyeVRyaWdnZXIgPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0aWYodGhpcy52YWx1ZSA8PSAwKSB7XHJcblx0XHRcdFx0dGhpcy5vbkV2ZW50KCk7XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblx0fVxyXG59O1xyXG5cclxuUHJvZ3Jlc3NCYXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gUHJvZ3Jlc3NCYXI7XHJcblxyXG5Qcm9ncmVzc0Jhci5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uKCkge1xyXG5cdHRoaXMuZ3JhcGhpY3MuY2xlYXIoKTtcclxuXHR0aGlzLnJlbmRlcmFibGVzLnVuc3Vic2NyaWJlKHRoaXMpO1xyXG59O1xyXG5cclxuLy9UbyBzdWJ0cmFjdCB2YWx1ZSwganVzdCB1c2UgbmVnYXRpdmUgbnVtYmVycyBhcyBhcmd1bWVudCBpLmUuIGZvby5hZGRWYWx1ZSgtNSk7XHJcblByb2dyZXNzQmFyLnByb3RvdHlwZS5hZGRWYWx1ZSA9IGZ1bmN0aW9uIChhZGRUaGlzKSB7XHJcblx0dGhpcy52YWx1ZSArPSBhZGRUaGlzO1xyXG5cdGlmKHRoaXMudmFsdWUgPiB0aGlzLm1heFZhbHVlKSB7XHJcblx0XHR0aGlzLnZhbHVlID0gdGhpcy5tYXhWYWx1ZTtcclxuXHR9XHJcblx0aWYodGhpcy52YWx1ZSA8IDApIHtcclxuXHRcdHRoaXMudmFsdWUgPSAwO1xyXG5cdH1cclxuXHR0aGlzLnRyeVRyaWdnZXIoKTtcclxufTtcclxuXHJcbi8vU2V0cyB0aGUgbG9jYXRpb24gd2hlcmUgcHJvZ3Jlc3MgYmFyIGlzIHJlbmRlcmVkXHJcblByb2dyZXNzQmFyLnByb3RvdHlwZS5zZXRMb2NhdGlvbiA9IGZ1bmN0aW9uKHNldFgsIHNldFkpIHtcclxuXHR0aGlzLnggPSBzZXRYO1xyXG5cdHRoaXMueSA9IHNldFk7XHJcbn07XHJcblxyXG4vL1NldHMgdGhlIHNpemUgb2YgdGhlIHByb2dyZXNzIGJhclxyXG5Qcm9ncmVzc0Jhci5wcm90b3R5cGUuc2V0U2l6ZSA9IGZ1bmN0aW9uKHNldFdpZHRoLCBzZXRIZWlnaHQpIHtcclxuXHR0aGlzLndpZHRoID0gc2V0V2lkdGg7XHJcblx0dGhpcy5oZWlnaHQgPSBzZXRIZWlnaHQ7XHJcbn07XHJcblxyXG5Qcm9ncmVzc0Jhci5wcm90b3R5cGUuc2V0U3R5bGUgPSBmdW5jdGlvbihiZ0JvcmRlclNpemUsIGJnQm9yZGVyQ29sb3IsIGJnQ29sb3IsIHBhZGRpbmdIb3JpeiwgcGFkZGluZ1ZlcnQsIHZhbHVlQm9yZGVyU2l6ZSwgdmFsdWVCb3JkZXJDb2xvciwgdmFsdWVDb2xvcikge1xyXG5cdHRoaXMuYmdCb3JkZXJTaXplID0gYmdCb3JkZXJTaXplO1xyXG5cdHRoaXMuYmdCb3JkZXJDb2xvciA9IGJnQm9yZGVyQ29sb3I7XHJcblx0dGhpcy5iZ0NvbG9yID0gYmdDb2xvcjtcclxuXHR0aGlzLnBhZGRpbmdIb3JpeiA9IHBhZGRpbmdIb3JpejtcclxuXHR0aGlzLnBhZGRpbmdWZXJ0ID0gcGFkZGluZ1ZlcnQ7XHJcblx0dGhpcy52YWx1ZUJvcmRlclNpemUgPSB2YWx1ZUJvcmRlclNpemU7XHJcblx0dGhpcy52YWx1ZUJvcmRlckNvbG9yID0gdmFsdWVCb3JkZXJDb2xvcjtcclxuXHR0aGlzLnZhbHVlQ29sb3IgPSB2YWx1ZUNvbG9yO1xyXG59O1xyXG5cclxuLy91cGRhdGUgZm9yIHByb2dyZXNzIGJhciwgY2FsbGVkIGp1c3QgYmVmb3JlIGRyYXdpbmcgcHJvZ3Jlc3MgYmFyXHJcbi8vT3ZlcndyaXRlIHRoaXMgZnVuY3Rpb24gaWYgZGVzaXJlZFxyXG5Qcm9ncmVzc0Jhci5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24oKSB7fTtcclxuXHJcbi8vUmVuZGVycyBwcm9ncmVzc0JhclxyXG5Qcm9ncmVzc0Jhci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24oKSB7XHJcblx0dGhpcy51cGRhdGUoKTtcclxuXHR0aGlzLmdyYXBoaWNzLmNsZWFyKCk7XHJcblx0Ly9EcmF3IGJhY2tncm91bmQgb2YgYmFyXHJcblx0dGhpcy5ncmFwaGljcy5saW5lU3R5bGUodGhpcy5iZ0JvcmRlclNpemUsIHRoaXMuYmdCb3JkZXJDb2xvciwgMSk7IC8vc2V0cyBib3JkZXIgY29sb3IgYW5kIHNpemVcclxuXHR0aGlzLmdyYXBoaWNzLmJlZ2luRmlsbCh0aGlzLmJnQ29sb3IpOyAvL3NldHMgY29sb3Igb2YgYmFja2dyb3VuZCBmaWxsXHJcblx0dGhpcy5ncmFwaGljcy5kcmF3UmVjdCh0aGlzLngtdGhpcy53aWR0aC8yLCB0aGlzLnktdGhpcy5oZWlnaHQvMiwgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xyXG5cdHRoaXMuZ3JhcGhpY3MuZW5kRmlsbCgpO1xyXG5cdC8vRHJhdyB2YWx1ZSBvZiBiYXJcclxuXHR2YXIgcGVyY2VudGFnZSA9IHRoaXMudmFsdWUgLyB0aGlzLm1heFZhbHVlO1xyXG5cdHZhciBiYXJXaWR0aCA9IHRoaXMud2lkdGggLSB0aGlzLnBhZGRpbmdIb3JpejtcclxuXHR2YXIgYmFySGVpZ2h0ID0gdGhpcy5oZWlnaHQgLSB0aGlzLnBhZGRpbmdWZXJ0O1xyXG5cdHRoaXMuZ3JhcGhpY3MubGluZVN0eWxlKHRoaXMudmFsdWVCb3JkZXJTaXplLCB0aGlzLnZhbHVlQm9yZGVyQ29sb3IsIDEpO1xyXG5cdHRoaXMuZ3JhcGhpY3MuYmVnaW5GaWxsKHRoaXMudmFsdWVDb2xvcik7XHJcblx0dGhpcy5ncmFwaGljcy5kcmF3UmVjdCh0aGlzLngtKGJhcldpZHRoLzIpLCB0aGlzLnktKGJhckhlaWdodC8yKSwgYmFyV2lkdGgqcGVyY2VudGFnZSwgYmFySGVpZ2h0KTtcclxuXHR0aGlzLmdyYXBoaWNzLmVuZEZpbGwoKTtcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gUHJvZ3Jlc3NCYXI7IiwidmFyIEdyb3VwX01hbmFnZXIgPSByZXF1aXJlKCcuL2dyb3VwTWFuYWdlcicpO1xyXG52YXIgUGVyc29uID0gcmVxdWlyZSgnLi9wZXJzb24nKTtcclxuXHJcbnZhciBCYWNrZ3JvdW5kID0gZnVuY3Rpb24gKGdhbWUsIGJhc2VYLCBiYXNlWSwgaFJhdGlvLCB2UmF0aW8sIGluY29tZSwgdHlwZSwgc3RhdGUpIHtcclxuICAgIFBoYXNlci5TcHJpdGUuY2FsbCh0aGlzLCBnYW1lLCAoYmFzZVggKiBoUmF0aW8gKiBnYW1lLndpZHRoKSwgKGJhc2VZICogdlJhdGlvICogZ2FtZS5oZWlnaHQpICsgMTAwLCAnYmFja2dyb3VuZCcpO1xyXG4gICAgZ2FtZS5hZGQuZXhpc3RpbmcodGhpcyk7XHJcbiAgICB0aGlzLmJhc2VYID0gYmFzZVg7XHJcbiAgICB0aGlzLmJhc2VZID0gYmFzZVk7XHJcbiAgICB0aGlzLmhSYXRpbyA9IGhSYXRpbztcclxuICAgIHRoaXMudlJhdGlvID0gdlJhdGlvO1xyXG4gICAgLy8gdGhpcy53aWR0aCA9IGhSYXRpbyAqIGdhbWUud2lkdGg7XHJcbiAgICAvLyB0aGlzLmhlaWdodCA9IHZSYXRpbyAqIGdhbWUuaGVpZ2h0O1xyXG4gICAgdGhpcy5uZXdIUmF0aW8gPSBoUmF0aW87XHJcbiAgICB0aGlzLm5ld1ZSYXRpbyA9IHZSYXRpbztcclxuICAgIHRoaXMubWluUmF0aW8gPSAuMTtcclxuICAgIHRoaXMuZ3JvdXBfbWFuYWdlciA9IG5ldyBHcm91cF9NYW5hZ2VyKHRoaXMuZ2FtZSwgc3RhdGUpO1xyXG5cdHRoaXMuZ3JvdXBfbWFuYWdlci5iYWNrZ3JvdW5kID0gdGhpcztcclxuICAgXHR0aGlzLnR5cGUgPSB0eXBlO1xyXG4gICAgdGhpcy5pbmNvbWVMZXZlbCA9IGluY29tZTtcclxuXHR0aGlzLnN0YXRlID0gc3RhdGVcclxufTtcclxuXHJcbkJhY2tncm91bmQucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShQaGFzZXIuU3ByaXRlLnByb3RvdHlwZSk7XHJcbkJhY2tncm91bmQucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQmFja2dyb3VuZDtcclxuXHJcbkJhY2tncm91bmQucHJvdG90eXBlLmdldFZhcnMgPSBmdW5jdGlvbigpIHtcclxuICAgIC8vcmV0dXJuIHggJiB5IGFuZCB3aWR0aCAmIGhlaWdodCBvZiB2aXNpYmxlXHJcbiAgICByZXR1cm4gW3RoaXMueCwgdGhpcy55LCB0aGlzLmhSYXRpbyAqICh0aGlzLmdhbWUud2lkdGgpLCB0aGlzLnZSYXRpbyAqICh0aGlzLmdhbWUuaGVpZ2h0IC0gdGhpcy5teU1hbmFnZXIuYm9yZGVyKV07XHJcbn07XHJcblxyXG5CYWNrZ3JvdW5kLnByb3RvdHlwZS5nZXRWYXJzQ2VudGVyID0gZnVuY3Rpb24oKSB7XHJcbiAgICAvLyAvL3JldHVybiB4ICYgeSBvZiBjZW50ZXIgYW5kIHdpZHRoICYgaGVpZ2h0IG9mIHZpc2libGVcclxuICAgIHZhciB2aXNXaWR0aCA9IHRoaXMuaFJhdGlvICogKHRoaXMuZ2FtZS53aWR0aCk7XHJcbiAgICB2YXIgdmlzSGVpZ2h0ID0gdGhpcy52UmF0aW8gKiAodGhpcy5nYW1lLmhlaWdodCAtIHRoaXMubXlNYW5hZ2VyLmJvcmRlcik7XHJcbiAgICByZXR1cm4ge3dpZHRoIDogdmlzV2lkdGgsIGhlaWdodCA6IHZpc0hlaWdodCwgY2VudGVyIDoge3ggOiB0aGlzLnggKyB2aXNXaWR0aCAvIDIsIHkgOiB0aGlzLnkgKyB2aXNIZWlnaHQgLyAyfX07XHJcbn07XHJcblxyXG5CYWNrZ3JvdW5kLnByb3RvdHlwZS5udW1QZW9wbGUgPSBmdW5jdGlvbigpIHtcclxuICAgIC8vIHZhciBudW0gPSB0aGlzLmdyb3VwX21hbmFnZXIubnVtUGVvcGxlKCk7XHJcbiAgICAvLyBpZiAobnVtID09PSAwKSByZXR1cm4gMTtcclxuICAgIC8vIGVsc2UgcmV0dXJuIG51bTtcclxuICAgIHJldHVybiB0aGlzLmdyb3VwX21hbmFnZXIubnVtUGVvcGxlKCk7XHJcbn07XHJcblxyXG5CYWNrZ3JvdW5kLnByb3RvdHlwZS51cGRhdGVWYXJzID0gZnVuY3Rpb24odmFycykge1xyXG4gICAgLy8gY29uc29sZS5sb2codGhpcy50eXBlLCB0aGlzLmluY29tZUxldmVsKTtcclxuICAgIC8vIGNvbnNvbGUubG9nKHRoaXMudHlwZSwgdGhpcy5pbmNvbWVMZXZlbCwgdmFycylcclxuICAgIHRoaXMueCA9IHZhcnMuY2VudGVyLnggLSB2YXJzLndpZHRoIC8gMjtcclxuICAgIHRoaXMueSA9IHZhcnMuY2VudGVyLnkgLSB2YXJzLmhlaWdodCAvIDIgKyB0aGlzLm15TWFuYWdlci5ib3JkZXI7XHJcbiAgICB0aGlzLndpZHRoID0gdmFycy53aWR0aDtcclxuICAgIHRoaXMuaGVpZ2h0ID0gdmFycy5oZWlnaHQ7XHJcbiAgICB0aGlzLmdyb3VwX21hbmFnZXIudXBkYXRlVmFycygpO1xyXG59O1xyXG5cclxuQmFja2dyb3VuZC5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24oKSB7XHJcblx0Ly8gaWYgKHRoaXMubmV3SFJhdGlvIDwgdGhpcy5taW5SYXRpbykgdGhpcy5uZXdIUmF0aW8gPSB0aGlzLm1pblJhdGlvO1xyXG4gLy8gICAgaWYgKHRoaXMubmV3VlJhdGlvIDwgdGhpcy5taW5SYXRpbykgdGhpcy5uZXdWUmF0aW8gPSB0aGlzLm1pblJhdGlvO1xyXG4gLy8gICAgaWYgKHRoaXMuaFJhdGlvICE9PSB0aGlzLm5ld0hSYXRpbykge1xyXG4gLy8gICAgICAgIGlmICh0aGlzLmhSYXRpbyArIC4wMSA8IHRoaXMubmV3SFJhdGlvKSB0aGlzLmhSYXRpbyArPSAuMDE7XHJcbiAvLyAgICAgICAgZWxzZSBpZiAodGhpcy5oUmF0aW8gLSAuMDEgPiB0aGlzLm5ld0hSYXRpbykgdGhpcy5oUmF0aW8gLT0gLjAxO1xyXG4gLy8gICAgICAgIGVsc2UgdGhpcy5oUmF0aW8gPSB0aGlzLm5ld0hSYXRpbztcclxuIC8vICAgIH1cclxuIC8vICAgIGlmICh0aGlzLnZSYXRpbyAhPT0gdGhpcy5uZXdWUmF0aW8pIHtcclxuIC8vICAgICAgICBpZiAodGhpcy52UmF0aW8gKyAuMDEgPCB0aGlzLm5ld1ZSYXRpbykgdGhpcy52UmF0aW8gKz0gLjAxO1xyXG4gLy8gICAgICAgIGVsc2UgaWYgKHRoaXMudlJhdGlvIC0gLjAxID4gdGhpcy5uZXdWUmF0aW8pIHRoaXMudlJhdGlvIC09IC4wMTtcclxuIC8vICAgICAgICBlbHNlIHRoaXMudlJhdGlvID0gdGhpcy5uZXdWUmF0aW87XHJcbiAvLyAgICB9XHJcbiAvLyAgICBpZiAodGhpcy50eXBlID09PSAndW5lbXBsb3llZCcpXHJcbiAvLyAgICAgICAgdGhpcy5oUmF0aW8gPSAxO1xyXG4gICAgdGhpcy5ncm91cF9tYW5hZ2VyLnVwZGF0ZSgpO1xyXG59O1xyXG5cclxuXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IEJhY2tncm91bmQ7IiwiLy9Db250cm9scyBiYWNrZ3JvdW5kIGVsZW1lbnRzXHJcblxyXG52YXIgQmFja2dyb3VuZCA9IHJlcXVpcmUoJy4vYmFja2dyb3VuZCcpO1xyXG52YXIgUGVyc29uID0gcmVxdWlyZSgnLi9wZXJzb24nKTtcclxudmFyIHV0aWwgPSByZXF1aXJlKCcuLi91dGlscycpO1xyXG5cclxudmFyIEdyb3VwID0gcmVxdWlyZSgnLi9ncm91cCcpO1xyXG5cclxudmFyIEJhY2tncm91bmRfTWFuYWdlciA9IGZ1bmN0aW9uKGdhbWUsIHN0YXRlKSB7XHJcblx0dGhpcy5nYW1lID0gZ2FtZTtcclxuXHR0aGlzLnN0YXRlID0gc3RhdGU7XHJcblx0Ly9DcmVhdGUgYXJyYXkgb2YgYmFja2dyb3VuZHNcclxuXHR0aGlzLmJnQXJyYXkgPSBbXHJcblx0XHRuZXcgQmFja2dyb3VuZCh0aGlzLmdhbWUsIDAsIDAsIC4zMywgLjMzLCBQZXJzb24uRURVTEVWRUwubG93ICwgJ3dvcmsnICwgc3RhdGUpLFx0Ly8gdGhpcy5iZ0FycmF5WzBdID09IHdvcmtMb3dcclxuXHRcdG5ldyBCYWNrZ3JvdW5kKHRoaXMuZ2FtZSwgMSwgMCwgLjMzLCAuMzMsIFBlcnNvbi5FRFVMRVZFTC5taWQgLCAnd29yaycgLCBzdGF0ZSksXHQvLyB0aGlzLmJnQXJyYXlbMV0gPT0gd29ya01pZFxyXG5cdFx0bmV3IEJhY2tncm91bmQodGhpcy5nYW1lLCAyLCAwLCAuMzMsIC4zMywgUGVyc29uLkVEVUxFVkVMLmhpZ2gsICd3b3JrJyAsIHN0YXRlKSxcdC8vIHRoaXMuYmdBcnJheVsyXSA9PSB3b3JrTWlkXHJcblx0XHRuZXcgQmFja2dyb3VuZCh0aGlzLmdhbWUsIDAsIDEsIC4zMywgLjMzLCBQZXJzb24uRURVTEVWRUwubG93ICwgJ2hvdXNlJywgc3RhdGUpLFx0Ly8gdGhpcy5iZ0FycmF5WzNdID09IGhvdXNlTG93XHJcblx0XHRuZXcgQmFja2dyb3VuZCh0aGlzLmdhbWUsIDEsIDEsIC4zMywgLjMzLCBQZXJzb24uRURVTEVWRUwubWlkICwgJ2hvdXNlJywgc3RhdGUpLFx0Ly8gdGhpcy5iZ0FycmF5WzRdID09IGhvdXNlTWlkXHJcblx0XHRuZXcgQmFja2dyb3VuZCh0aGlzLmdhbWUsIDIsIDEsIC4zMywgLjMzLCBQZXJzb24uRURVTEVWRUwuaGlnaCwgJ2hvdXNlJywgc3RhdGUpLFx0Ly8gdGhpcy5iZ0FycmF5WzVdID09IGhvdXNlTWlkXHJcblx0XHRuZXcgQmFja2dyb3VuZCh0aGlzLmdhbWUsIDAsIDIsICAgMSwgLjMzLCAnJywgICAgICAgICAgICAgICd1bmVtcGxveWVkJywgc3RhdGUpXHRcdC8vIHRoaXMuYmdBcnJheVs2XSA9PSB1bmVtcGxveWVkXHJcblx0XTtcclxuXHRmb3IgKGJnIGluIHRoaXMuYmdBcnJheSkge1xyXG5cdFx0dGhpcy5iZ0FycmF5W2JnXS5teU1hbmFnZXIgPSB0aGlzO1xyXG5cdH1cclxuXHRcclxuXHRmb3IgKHZhciBpIGluIHRoaXMuYmdBcnJheSkge1xyXG5cdFx0aWYgKHRoaXMuYmdBcnJheVtpXS50eXBlID09ICd3b3JrJykge1xyXG5cdFx0XHRpZiAodGhpcy5iZ0FycmF5W2ldLmluY29tZUxldmVsID09PSBQZXJzb24uRURVTEVWRUwubG93KSB7XHJcblx0XHRcdFx0dGhpcy5iZ0FycmF5W2ldLnRpbnQgPSAweGVkNWM1YTtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIGlmICh0aGlzLmJnQXJyYXlbaV0uaW5jb21lTGV2ZWwgPT09IFBlcnNvbi5FRFVMRVZFTC5taWQpIHtcclxuXHRcdFx0XHR0aGlzLmJnQXJyYXlbaV0udGludCA9IDB4NmFlMjQ2O1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2UgaWYgKHRoaXMuYmdBcnJheVtpXS5pbmNvbWVMZXZlbCA9PT0gUGVyc29uLkVEVUxFVkVMLmhpZ2gpIHtcclxuXHRcdFx0XHR0aGlzLmJnQXJyYXlbaV0udGludCA9IDB4MmI1OWUyO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRlbHNlIGlmICh0aGlzLmJnQXJyYXlbaV0udHlwZSA9PSAnaG91c2UnKSB7XHJcblx0XHRcdGlmICh0aGlzLmJnQXJyYXlbaV0uaW5jb21lTGV2ZWwgPT09IFBlcnNvbi5FRFVMRVZFTC5sb3cpIHtcclxuXHRcdFx0XHR0aGlzLmJnQXJyYXlbaV0udGludCA9IDB4ZWQ4MTgwO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2UgaWYgKHRoaXMuYmdBcnJheVtpXS5pbmNvbWVMZXZlbCA9PT0gUGVyc29uLkVEVUxFVkVMLm1pZCkge1xyXG5cdFx0XHRcdHRoaXMuYmdBcnJheVtpXS50aW50ID0gMHg5NGVhNzk7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSBpZiAodGhpcy5iZ0FycmF5W2ldLmluY29tZUxldmVsID09PSBQZXJzb24uRURVTEVWRUwuaGlnaCkge1xyXG5cdFx0XHRcdHRoaXMuYmdBcnJheVtpXS50aW50ID0gMHg1NDc2ZGQ7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdGVsc2UgeyAvLyBVbmVtcGxveWVkIGJhY2tncm91bmRcclxuXHRcdFx0dGhpcy5iZ0FycmF5W2ldLnRpbnQgPSAweDgwODA4MDtcclxuXHRcdH1cclxuXHRcdC8vIHRoaXMuYm9yZGVyID0gMTAwO1xyXG5cdH1cclxuXHR0aGlzLmJvcmRlciA9IDEwMDtcclxuXHR0aGlzLm1pblJhdGlvID0gLjI7XHJcblx0dGhpcy51cGRhdGVSYXRpb3MoKTtcclxuXHJcblx0Ly8gdmFyIHRlc3QgPSB0aGlzLmJnQXJyYXlbNl0uZ3JvdXBfbWFuYWdlcjtcclxuXHQvLyB2YXIgdGVzdEZsb2NrID0gbmV3IEdyb3VwKHRoaXMuZ2FtZSwgdGhpcy5nYW1lLndpZHRoIC8gMiArIDEwMCwgKHRoaXMuZ2FtZS5oZWlnaHQgLSB0aGlzLmJvcmRlcikgLyAyICsgMTAwLCBzdGF0ZSk7XHJcbiAvLyAgICBmb3IgKHZhciBpID0gMDsgaSA8IDEwOyBpKyspIHtcclxuIC8vICAgIFx0dmFyIHRlc3RQZXJzb24gPSBuZXcgUGVyc29uKHRoaXMuZ2FtZSwgdGhpcy5nYW1lLndpZHRoIC8gMiArIGkgKiAxNSwgKHRoaXMuZ2FtZS5oZWlnaHQgLSB0aGlzLmJvcmRlcikgLyAyICsgaSAqIDE1LCBpKTtcclxuIC8vICAgIFx0dGhpcy5nYW1lLmFkZC5leGlzdGluZyh0ZXN0UGVyc29uKTtcclxuIC8vICAgIFx0dGVzdEZsb2NrLmFkZE1lbWJlcih0ZXN0UGVyc29uKTtcclxuIC8vICAgIH1cclxuIC8vICAgIHRlc3QuYWRkTWVtYmVyKHRlc3RGbG9jayk7XHJcblx0Ly8gdGVzdEZsb2NrID0gbmV3IEdyb3VwKHRoaXMuZ2FtZSwgdGhpcy5nYW1lLndpZHRoIC8gMiAtIDEwMCwgKHRoaXMuZ2FtZS5oZWlnaHQgLSB0aGlzLmJvcmRlcikgLyAyICsgMTAwLCBzdGF0ZSk7XHJcblx0Ly8gZm9yICh2YXIgaSA9IDA7IGkgPCAxMDsgaSsrKSB7XHJcbiAgICBcdC8vIHZhciB0ZXN0UGVyc29uID0gbmV3IFBlcnNvbih0aGlzLmdhbWUsIHRoaXMuZ2FtZS53aWR0aCAvIDIgKyBpICogMTUgLSAxMDAsICh0aGlzLmdhbWUuaGVpZ2h0IC0gdGhpcy5ib3JkZXIpIC8gMiArIGkgKiAxNSArIDEwMCwgaSk7XHJcbiAgICBcdC8vIHRoaXMuZ2FtZS5hZGQuZXhpc3RpbmcodGVzdFBlcnNvbik7XHJcbiAgICBcdC8vIHRlc3RGbG9jay5hZGRNZW1iZXIodGVzdFBlcnNvbik7XHJcbiAgICAvLyB9XHJcbiAgICAvLyB0ZXN0LmFkZE1lbWJlcih0ZXN0RmxvY2spO1xyXG59O1xyXG5cclxuQmFja2dyb3VuZF9NYW5hZ2VyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEJhY2tncm91bmRfTWFuYWdlcjtcclxuXHJcbi8qQmFja2dyb3VuZF9NYW5hZ2VyLkJHTkFNRVMgPSB7XHJcblx0XHR3b3JrTG93ICAgIDogdGhpcy5iZ0FycmF5WzBdLFxyXG5cdFx0d29ya01pZCAgICA6IHRoaXMuYmdBcnJheVsxXSxcclxuXHRcdHdvcmtIaWdoICAgOiB0aGlzLmJnQXJyYXlbMl0sXHJcblx0XHRob3VzZUxvdyAgIDogdGhpcy5iZ0FycmF5WzNdLFxyXG5cdFx0aG91c2VNaWQgICA6IHRoaXMuYmdBcnJheVs0XSxcclxuXHRcdGhvdXNlSGlnaCAgOiB0aGlzLmJnQXJyYXlbNV0sXHJcblx0XHR1bmVtcGxveWVkIDogdGhpcy5iZ0FycmF5WzZdXHJcbn07Ki9cclxuXHJcbkJhY2tncm91bmRfTWFuYWdlci5wcm90b3R5cGUuc2VuZFRvID0gZnVuY3Rpb24oc291cmNlLCBkZXN0aW5hdGlvbiwgZ3JvdXApIHtcclxuXHQvLyBjb25zb2xlLmxvZygnc2VuZCB0bycsIHNvdXJjZSwgZGVzdGluYXRpb24sIGdyb3VwKTtcclxuXHQvLyBjb25zb2xlLmxvZyhkZXN0aW5hdGlvbik7XHJcblx0Ly8gY29uc29sZS5sb2coc291cmNlLCBkZXN0aW5hdGlvbik7XHJcblx0aWYgKGRlc3RpbmF0aW9uID09PSBudWxsKSB7XHJcblx0XHRyZXR1cm47XHJcblx0fVxyXG5cdHZhciB0cmFuc1R5cGUgPSB0aGlzLnRyYW5zZmVyVHlwZShzb3VyY2UsIGRlc3RpbmF0aW9uLCBncm91cClcclxuXHQvLyBjb25zb2xlLmxvZyhzb3VyY2UsIGRlc3RpbmF0aW9uLCBncm91cCwgdHJhbnNUeXBlKTtcclxuXHRpZiAodHJhbnNUeXBlLmNhbikge1x0Ly8gQ2hlY2sgaWYgdGhleSBjYW4gdHJhbnNmZXIgdXBcclxuXHRcdC8vIGNvbnNvbGUubG9nKCdjYW4nKTtcclxuXHRcdHNvdXJjZS5ncm91cF9tYW5hZ2VyLnRyYW5zZmVyKGRlc3RpbmF0aW9uLmdyb3VwX21hbmFnZXIsIGdyb3VwKTtcclxuXHRcdGlmICh0cmFuc1R5cGUuZWR1Y2F0ZSkge1xyXG5cdFx0XHRncm91cC5zdGFydEVkdWNhdGlvbigpO1xyXG5cdFx0fVxyXG5cdFx0Ly8gaWYgKHNvdXJjZS5pbmNvbWVMZXZlbCAhPT0gZGVzdGluYXRpb24uaW5jb21lTGV2ZWwpIHtcclxuXHRcdC8vIFx0dGhpcy51cGRhdGVSYXRpb3MoZGVzdGluYXRpb24pO1xyXG5cdFx0Ly8gfVxyXG5cdFx0Ly8gY29uc29sZS5sb2coc291cmNlLCBkZXN0aW5hdGlvbiwgZ3JvdXApO1xyXG5cdFx0dGhpcy51cGRhdGVSYXRpb3MoZGVzdGluYXRpb24pO1xyXG4gICAgICAgIGdyb3VwLmhhcHBpbmVzc01vZGlmaWVyID0gdHJhbnNUeXBlLmhhcHBpbmVzc01vZGlmaWVyO1xyXG5cdH1cclxuXHQvLyBjb25zb2xlLmxvZyhncm91cC5oYXBwaW5lc3NNb2RpZmllcik7XHJcbn07XHJcbkJhY2tncm91bmRfTWFuYWdlci5wcm90b3R5cGUubnVtUGVvcGxlID0gZnVuY3Rpb24oKSB7XHJcblx0dmFyIGNvdW50ID0gMDtcclxuXHRmb3IgKHZhciBpIGluIHRoaXMuYmdBcnJheSkge1xyXG5cdFx0Y291bnQgKz0gdGhpcy5iZ0FycmF5W2ldLmdyb3VwX21hbmFnZXIubnVtUGVvcGxlKCk7XHJcblx0fVxyXG5cdHJldHVybiBjb3VudDtcclxufTtcclxuQmFja2dyb3VuZF9NYW5hZ2VyLnByb3RvdHlwZS50cmFuc2ZlclR5cGUgPSBmdW5jdGlvbihzb3VyY2UsIGRlc3RpbmF0aW9uLCBncm91cCkge1xyXG4gICAgaWYgKGRlc3RpbmF0aW9uID09IG51bGwpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblx0dmFyIGdyb3VwRWR1ID0gZ3JvdXAubWVtYmVyc1swXS5lZHVMZXZlbDtcclxuXHR2YXIgY2FuID0gdGhpcy5jYW5UcmFuc2Zlcihzb3VyY2UsIGRlc3RpbmF0aW9uLCBncm91cCk7XHJcblx0Ly8gY29uc29sZS5sb2coZGVzdGluYXRpb24pO1xyXG5cdC8vIGNvbnNvbGUubG9nKGRlc3RpbmF0aW9uLnR5cGUsIGRlc3RpbmF0aW9uLmluY29tZUxldmVsKTtcclxuXHR2YXIgZWR1Y2F0ZSA9IChkZXN0aW5hdGlvbi50eXBlID09PSAnaG91c2UnICYmIGRlc3RpbmF0aW9uLmluY29tZUxldmVsKSA+IGdyb3VwRWR1O1xyXG4gICAgdmFyIGhhcHBpbmVzc01vZGlmaWVyID0gMDtcclxuICAgIGlmICh0aGlzLnN0YXRlLmN1ck1vbmV5IDwgMCkge1xyXG4gICAgXHRoYXBwaW5lc3NNb2RpZmllciAtPSAxO1xyXG4gICAgXHR0aGlzLm5lZ01vbmV5ID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHRoaXMubmVnTW9uZXkpe1xyXG4gICAgXHRoYXBwaW5lc3NNb2RpZmllciArPSAxO1xyXG4gICAgfVxyXG4gICAgaWYgKGRlc3RpbmF0aW9uLnR5cGUgPT0gJ3VuZW1wbG95ZWQnICYmIHNvdXJjZS50eXBlICE9ICd1bmVtcGxveWVkJykge1xyXG4gICAgXHQvLyBjb25zb2xlLmxvZygndW5lbXBsb3ltZW50Jyk7XHJcbiAgICAgICAgaGFwcGluZXNzTW9kaWZpZXIgLT0gMTtcclxuICAgIH1cclxuICAgIGlmIChkZXN0aW5hdGlvbi5pbmNvbWVMZXZlbCA8IGdyb3VwRWR1KSB7XHJcbiAgICBcdC8vIGNvbnNvbGUubG9nKCdlZHVjYXRpb24nKTtcclxuICAgICAgICBoYXBwaW5lc3NNb2RpZmllciAtPSBncm91cEVkdSAtIGRlc3RpbmF0aW9uLmluY29tZUxldmVsO1xyXG4gICAgfVxyXG4gICAgaWYgKGRlc3RpbmF0aW9uLnR5cGUgPT0gJ2hvdXNlJykge1xyXG4gICAgXHQvLyBjb25zb2xlLmxvZygnaG91c2luZycpO1xyXG4gICAgXHRoYXBwaW5lc3NNb2RpZmllciArPSAxO1xyXG4gICAgfVxyXG4gICAgaWYgKGRlc3RpbmF0aW9uLnR5cGUgPT0gJ3dvcmsnKSB7XHJcbiAgICBcdC8vIGNvbnNvbGUubG9nKCd0YXgnLCBkZXN0aW5hdGlvbi5pbmNvbWVMZXZlbCwgdGhpcy5zdGF0ZS50YXhNb2QubG93KTtcclxuICAgIFx0aWYgKGRlc3RpbmF0aW9uLmluY29tZUxldmVsID09IDApIHtcclxuXHQgICAgXHRpZiAodGhpcy5zdGF0ZS50YXhNb2QubG93ID09IC41KSB7XHJcblx0ICAgIFx0XHRoYXBwaW5lc3NNb2RpZmllciArPSAxO1xyXG5cdCAgICBcdH0gZWxzZSBpZiAodGhpcy5zdGF0ZS50YXhNb2QubG93ID09IDEpIHtcclxuXHQgICAgXHRcdFxyXG5cdCAgICBcdH0gZWxzZSBpZiAodGhpcy5zdGF0ZS50YXhNb2QubG93ID09IDEuNSkge1xyXG5cdCAgICBcdFx0aGFwcGluZXNzTW9kaWZpZXIgLT0gMTtcclxuXHQgICAgXHR9XHJcbiAgICBcdH0gZWxzZSBpZiAoZGVzdGluYXRpb24uaW5jb21lTGV2ZWwgPT0gMSkge1xyXG5cdCAgICBcdGlmICh0aGlzLnN0YXRlLnRheE1vZC5taWQgPT0gLjUpIHtcclxuXHQgICAgXHRcdGhhcHBpbmVzc01vZGlmaWVyICs9IDE7XHJcblx0ICAgIFx0fSBlbHNlIGlmICh0aGlzLnN0YXRlLnRheE1vZC5taWQgPT0gMSkge1xyXG5cdCAgICBcdFx0XHJcblx0ICAgIFx0fSBlbHNlIGlmICh0aGlzLnN0YXRlLnRheE1vZC5taWQgPT0gMS41KSB7XHJcblx0ICAgIFx0XHRoYXBwaW5lc3NNb2RpZmllciAtPSAxO1xyXG5cdCAgICBcdH1cclxuICAgIFx0fSBlbHNlIGlmIChkZXN0aW5hdGlvbi5pbmNvbWVMZXZlbCA9PSAyKSB7XHJcblx0ICAgIFx0aWYgKHRoaXMuc3RhdGUudGF4TW9kLmhpZ2ggPT0gLjUpIHtcclxuXHQgICAgXHRcdGhhcHBpbmVzc01vZGlmaWVyICs9IDE7XHJcblx0ICAgIFx0fSBlbHNlIGlmICh0aGlzLnN0YXRlLnRheE1vZC5oaWdoID09IDEpIHtcclxuXHJcblx0ICAgIFx0fSBlbHNlIGlmICh0aGlzLnN0YXRlLnRheE1vZC5oaWdoID09IDEuNSkge1xyXG5cdCAgICBcdFx0aGFwcGluZXNzTW9kaWZpZXIgLT0gMTtcclxuXHQgICAgXHR9XHJcbiAgICBcdH1cclxuIFx0fVxyXG4gXHQvLyBjb25zb2xlLmxvZyhoYXBwaW5lc3NNb2RpZmllciwgZ3JvdXAuaGFwcGluZXNzTW9kaWZpZXIpO1xyXG4gICAgdmFyIGhhcHBpbmVzc0NoYW5nZSA9IGhhcHBpbmVzc01vZGlmaWVyIC0gZ3JvdXAuaGFwcGluZXNzTW9kaWZpZXI7XHJcbiAgICAvLyBjb25zb2xlLmxvZyhoYXBwaW5lc3NDaGFuZ2UsIGhhcHBpbmVzc01vZGlmaWVyLCBncm91cC5oYXBwaW5lc3NNb2RpZmllcik7XHJcbiAgICB2YXIgaW5jb21lQ2hhbmdlID0gMDtcclxuICAgIHZhciBiYXNlSW5jb21lID0gZ3JvdXAuaW5jb21lKCk7XHJcbiAgICB2YXIgbmV3SW5jb21lID0gMDtcclxuICAgIHZhciBudW1QZW9wbGUgPSBncm91cC5udW1QZW9wbGUoKTtcclxuICAgIGlmIChkZXN0aW5hdGlvbi50eXBlID09ICd3b3JrJykge1xyXG4gICAgXHQvLyBjb25zb2xlLmxvZygndGF4JywgZGVzdGluYXRpb24uaW5jb21lTGV2ZWwsIHRoaXMuc3RhdGUudGF4TW9kLmxvdyk7XHJcbiAgICBcdGlmIChkZXN0aW5hdGlvbi5pbmNvbWVMZXZlbCA9PSAwKSB7XHJcblx0ICAgIFx0bmV3SW5jb21lICs9IG51bVBlb3BsZSAqIFBlcnNvbi5JTkNPTUVTLmxvdyAqIHRoaXMuc3RhdGUudGF4TW9kLmxvdztcclxuICAgIFx0fSBlbHNlIGlmIChkZXN0aW5hdGlvbi5pbmNvbWVMZXZlbCA9PSAxKSB7XHJcblx0ICAgIFx0bmV3SW5jb21lICs9IG51bVBlb3BsZSAqIFBlcnNvbi5JTkNPTUVTLm1pZCAqIHRoaXMuc3RhdGUudGF4TW9kLm1pZDtcclxuICAgIFx0fSBlbHNlIGlmIChkZXN0aW5hdGlvbi5pbmNvbWVMZXZlbCA9PSAyKSB7XHJcblx0ICAgIFx0bmV3SW5jb21lICs9IG51bVBlb3BsZSAqIFBlcnNvbi5JTkNPTUVTLmhpZ2ggKiB0aGlzLnN0YXRlLnRheE1vZC5oaWdoO1xyXG4gICAgXHR9XHJcbiBcdH0gZWxzZSBpZiAoZGVzdGluYXRpb24udHlwZSA9PSAnaG9tZScpIHtcclxuIFx0XHRpZiAoZGVzdGluYXRpb24uaW5jb21lTGV2ZWwgPT0gMCkge1xyXG5cdCAgICBcdG5ld0luY29tZSAtPSBudW1QZW9wbGUgKiBQZXJzb24uSU5DT01FUy5sb3c7XHJcbiAgICBcdH0gZWxzZSBpZiAoZGVzdGluYXRpb24uaW5jb21lTGV2ZWwgPT0gMSkge1xyXG5cdCAgICBcdG5ld0luY29tZSAtPSBudW1QZW9wbGUgKiBQZXJzb24uSU5DT01FUy5taWQ7XHJcbiAgICBcdH0gZWxzZSBpZiAoZGVzdGluYXRpb24uaW5jb21lTGV2ZWwgPT0gMikge1xyXG5cdCAgICBcdG5ld0luY29tZSAtPSBudW1QZW9wbGUgKiBQZXJzb24uSU5DT01FUy5oaWdoO1xyXG4gICAgXHR9XHJcbiBcdH1cclxuIFx0Ly8gY29uc29sZS5sb2cobmV3SW5jb21lLCBiYXNlSW5jb21lKVxyXG4gXHR2YXIgaW5jb21lQ2hhbmdlID0gbmV3SW5jb21lIC0gYmFzZUluY29tZTtcclxuIFx0Ly8gY29uc29sZS5sb2coaGFwcGluZXNzTW9kaWZpZXIpO1xyXG5cdHJldHVybiB7Y2FuIDogY2FuLCBlZHVjYXRlIDogZWR1Y2F0ZSwgaGFwcGluZXNzQ2hhbmdlIDogaGFwcGluZXNzQ2hhbmdlLCBpbmNvbWVDaGFuZ2UgOiBpbmNvbWVDaGFuZ2UsIGhhcHBpbmVzc01vZGlmaWVyIDogaGFwcGluZXNzTW9kaWZpZXJ9O1xyXG59O1xyXG5CYWNrZ3JvdW5kX01hbmFnZXIucHJvdG90eXBlLmNhblRyYW5zZmVyID0gZnVuY3Rpb24oc291cmNlLCBkZXN0aW5hdGlvbiwgZ3JvdXApIHtcclxuXHQvLyBjb25zb2xlLmxvZyhzb3VyY2UsIGRlc3RpbmF0aW9uLCBncm91cCk7XHJcblx0aWYgKHNvdXJjZSA9PT0gbnVsbCB8fCBkZXN0aW5hdGlvbiA9PT0gbnVsbCkgcmV0dXJuIGZhbHNlO1xyXG5cdGlmIChzb3VyY2UudHlwZSA9PSBkZXN0aW5hdGlvbi50eXBlICYmIHNvdXJjZS5pbmNvbWVMZXZlbCA9PSBkZXN0aW5hdGlvbi5pbmNvbWVMZXZlbCkge1xyXG5cdFx0cmV0dXJuIGZhbHNlO1xyXG5cdH1cclxuXHR2YXIgc291cmNlRWR1ID0gZ3JvdXAubWVtYmVyc1swXS5lZHVMZXZlbDtcclxuXHRpZiAoZGVzdGluYXRpb24udHlwZSA9PT0gJ3VuZW1wbG95ZWQnKSB7XHJcblx0XHRyZXR1cm4gdHJ1ZTtcclxuXHR9XHJcblx0aWYgKHNvdXJjZUVkdSA9PT0gUGVyc29uLkVEVUxFVkVMLnVuZW1wbG95ZWQpIHtcclxuXHRcdGlmIChkZXN0aW5hdGlvbi5pbmNvbWVMZXZlbCA9PT0gUGVyc29uLkVEVUxFVkVMLmxvdyAmJiBkZXN0aW5hdGlvbi50eXBlID09PSAnaG91c2UnKSB7XHJcblx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0fVxyXG5cdH0gZWxzZSBpZiAoc291cmNlRWR1ID09PSBQZXJzb24uRURVTEVWRUwubG93KSB7XHJcblx0XHRpZiAoZGVzdGluYXRpb24uaW5jb21lTGV2ZWwgPT09IFBlcnNvbi5FRFVMRVZFTC5sb3cpIHtcclxuXHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHR9IGVsc2UgaWYgKGRlc3RpbmF0aW9uLmluY29tZUxldmVsID09PSBQZXJzb24uRURVTEVWRUwubWlkKSB7XHJcblx0XHRcdGlmIChkZXN0aW5hdGlvbi50eXBlID09PSAnaG91c2UnKSB7XHJcblx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9IGVsc2UgaWYgKHNvdXJjZUVkdSA9PT0gUGVyc29uLkVEVUxFVkVMLm1pZCkge1xyXG5cdFx0aWYgKGRlc3RpbmF0aW9uLmluY29tZUxldmVsID09PSBQZXJzb24uRURVTEVWRUwubG93KSB7XHJcblx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0fSBlbHNlIGlmIChkZXN0aW5hdGlvbi5pbmNvbWVMZXZlbCA9PT0gUGVyc29uLkVEVUxFVkVMLm1pZCkge1xyXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdH0gZWxzZSBpZiAoZGVzdGluYXRpb24uaW5jb21lTGV2ZWwgPT09IFBlcnNvbi5FRFVMRVZFTC5oaWdoKSB7XHJcblx0XHRcdGlmIChkZXN0aW5hdGlvbi50eXBlID09PSAnaG91c2UnKSB7XHJcblx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9IGVsc2UgaWYgKHNvdXJjZUVkdSA9PT0gUGVyc29uLkVEVUxFVkVMLmhpZ2gpIHtcclxuXHRcdHJldHVybiB0cnVlO1xyXG5cdH1cclxuXHRyZXR1cm4gZmFsc2U7XHJcbn07XHJcbkJhY2tncm91bmRfTWFuYWdlci5wcm90b3R5cGUuYmFja2dyb3VuZEJ5ID0gZnVuY3Rpb24odHlwZSwgaW5jb21lTGV2ZWwpIHtcclxuXHRmb3IgKHZhciBiZyBpbiB0aGlzLmJnQXJyYXkpIHtcclxuXHRcdGJnID0gdGhpcy5iZ0FycmF5W2JnXTtcclxuXHRcdGlmIChiZy50eXBlID09IHR5cGUgJiYgYmcuaW5jb21lTGV2ZWwgPT0gaW5jb21lTGV2ZWwpIHtcclxuXHRcdFx0cmV0dXJuIGJnO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRyZXR1cm4gbnVsbDtcclxufTtcclxuXHJcbkJhY2tncm91bmRfTWFuYWdlci5wcm90b3R5cGUud2hlcmVDbGlja2VkID0gZnVuY3Rpb24oKSB7XHJcblx0Ly8gZm9yICh2YXIgaSBpbiB0aGlzLmJnQXJyYXkpIHtcclxuXHQvLyBcdHZhciBjdXJEaW1lbnNpb25zID0gdGhpcy5iZ0FycmF5W2ldLmdldFZhcnMoKTtcclxuXHQvLyBcdHZhciBtb3VzZVggPSB0aGlzLmdhbWUuaW5wdXQueDtcclxuXHQvLyBcdHZhciBtb3VzZVkgPSB0aGlzLmdhbWUuaW5wdXQueTtcclxuXHQvLyBcdC8vIGlmKGkgPT0gNikgY29uc29sZS5sb2coJ2N1ckRpbWVuc2lvbnM6ICcgKyBjdXJEaW1lbnNpb25zKTtcclxuXHQvLyBcdGlmIChtb3VzZVggPiBjdXJEaW1lbnNpb25zWzBdICYmIG1vdXNlWCA8PSBjdXJEaW1lbnNpb25zWzBdICsgY3VyRGltZW5zaW9uc1syXSkge1xyXG5cdC8vIFx0XHRpZiAobW91c2VZID4gY3VyRGltZW5zaW9uc1sxXSAmJiBtb3VzZVkgPD0gY3VyRGltZW5zaW9uc1sxXSArIGN1ckRpbWVuc2lvbnNbM10pIHtcclxuXHQvLyBcdFx0XHRyZXR1cm4gdGhpcy5iZ0FycmF5W2ldO1xyXG5cdC8vIFx0XHR9XHJcblx0Ly8gXHR9XHJcblx0Ly8gfVxyXG5cdHZhciBtb3VzZVggPSB0aGlzLmdhbWUuaW5wdXQueDtcclxuXHR2YXIgbW91c2VZID0gdGhpcy5nYW1lLmlucHV0Lnk7XHJcblx0aWYgKG1vdXNlWSA+PSB0aGlzLmJvcmRlcikge1xyXG5cdFx0aWYgKG1vdXNlWSA8PSB0aGlzLmJnQXJyYXlbMF0uaGVpZ2h0ICsgdGhpcy5ib3JkZXIpIHtcclxuXHRcdFx0aWYgKG1vdXNlWCA8PSB0aGlzLmJnQXJyYXlbMF0ud2lkdGgpIHtcclxuXHRcdFx0XHQvLyBjb25zb2xlLmxvZygnMCcpO1xyXG5cdFx0XHRcdHJldHVybiB0aGlzLmJnQXJyYXlbMF07XHJcblx0XHRcdH0gZWxzZSBpZiAobW91c2VYIDw9IHRoaXMuYmdBcnJheVswXS53aWR0aCArIHRoaXMuYmdBcnJheVsxXS53aWR0aCkge1xyXG5cdFx0XHRcdC8vIGNvbnNvbGUubG9nKCcxJyk7XHJcblx0XHRcdFx0cmV0dXJuIHRoaXMuYmdBcnJheVsxXTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQvLyBjb25zb2xlLmxvZygnMicpO1xyXG5cdFx0XHRcdHJldHVybiB0aGlzLmJnQXJyYXlbMl07XHJcblx0XHRcdH1cclxuXHRcdH0gZWxzZSBpZiAobW91c2VZIDw9IHRoaXMuYmdBcnJheVs0XS5oZWlnaHQgKyB0aGlzLmJnQXJyYXlbMF0uaGVpZ2h0ICsgdGhpcy5ib3JkZXIpIHtcclxuXHRcdFx0aWYgKG1vdXNlWCA8PSB0aGlzLmJnQXJyYXlbMF0ud2lkdGgpIHtcclxuXHRcdFx0XHQvLyBjb25zb2xlLmxvZygnMycpO1xyXG5cdFx0XHRcdHJldHVybiB0aGlzLmJnQXJyYXlbM107XHJcblx0XHRcdH0gZWxzZSBpZiAobW91c2VYIDw9IHRoaXMuYmdBcnJheVswXS53aWR0aCArIHRoaXMuYmdBcnJheVsxXS53aWR0aCkge1xyXG5cdFx0XHRcdC8vIGNvbnNvbGUubG9nKCc0Jyk7XHJcblx0XHRcdFx0cmV0dXJuIHRoaXMuYmdBcnJheVs0XTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQvLyBjb25zb2xlLmxvZygnNScpO1xyXG5cdFx0XHRcdHJldHVybiB0aGlzLmJnQXJyYXlbNV07XHJcblx0XHRcdH1cclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdC8vIGNvbnNvbGUubG9nKCc2Jyk7XHJcblx0XHRcdHJldHVybiB0aGlzLmJnQXJyYXlbNl07XHJcblx0XHR9XHJcblx0fVxyXG5cdHJldHVybiBudWxsO1xyXG59O1xyXG5cclxuQmFja2dyb3VuZF9NYW5hZ2VyLnByb3RvdHlwZS5maW5kT3RoZXIgPSBmdW5jdGlvbihzb3VyY2UsIGRlc3RpbmF0aW9uKSB7XHJcblx0aWYgKHNvdXJjZS50eXBlID09PSAnd29yaycgJiYgZGVzdGluYXRpb24udHlwZSA9PT0gJ3dvcmsnKSB7XHJcblx0XHRpZiAoc291cmNlLmluY29tZUxldmVsID09PSBQZXJzb24uRURVTEVWRUwubG93KSB7XHJcblx0XHRcdGlmIChkZXN0aW5hdGlvbi5pbmNvbWVMZXZlbCA9PT0gUGVyc29uLkVEVUxFVkVMLm1pZCkgcmV0dXJuIHRoaXMuYmdBcnJheVsyXTtcclxuXHRcdFx0ZWxzZSBpZiAoZGVzdGluYXRpb24uaW5jb21lTGV2ZWwgPT09IFBlcnNvbi5FRFVMRVZFTC5oaWdoKSByZXR1cm4gdGhpcy5iZ0FycmF5WzFdO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSBpZiAoc291cmNlLmluY29tZUxldmVsID09PSBQZXJzb24uRURVTEVWRUwubWlkKSB7XHJcblx0XHRcdGlmIChkZXN0aW5hdGlvbi5pbmNvbWVMZXZlbCA9PT0gUGVyc29uLkVEVUxFVkVMLmxvdykgcmV0dXJuIHRoaXMuYmdBcnJheVsyXTtcclxuXHRcdFx0ZWxzZSBpZiAoZGVzdGluYXRpb24uaW5jb21lTGV2ZWwgPT09IFBlcnNvbi5FRFVMRVZFTC5oaWdoKSByZXR1cm4gdGhpcy5iZ0FycmF5WzBdO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSBpZiAoc291cmNlLmluY29tZUxldmVsID09PSBQZXJzb24uRURVTEVWRUwuaGlnaCkge1xyXG5cdFx0XHRpZiAoZGVzdGluYXRpb24uaW5jb21lTGV2ZWwgPT09IFBlcnNvbi5FRFVMRVZFTC5sb3cpIHJldHVybiB0aGlzLmJnQXJyYXlbMV07XHJcblx0XHRcdGVsc2UgaWYgKGRlc3RpbmF0aW9uLmluY29tZUxldmVsID09PSBQZXJzb24uRURVTEVWRUwubWlkKSByZXR1cm4gdGhpcy5iZ0FycmF5WzBdO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRlbHNlIGlmIChzb3VyY2UudHlwZSA9PT0gJ2hvdXNlJyAmJiBkZXN0aW5hdGlvbi50eXBlID09PSAnaG91c2UnKSB7XHJcblx0XHRpZiAoc291cmNlLmluY29tZUxldmVsID09PSBQZXJzb24uRURVTEVWRUwubG93KSB7XHJcblx0XHRcdGlmIChkZXN0aW5hdGlvbi5pbmNvbWVMZXZlbCA9PT0gUGVyc29uLkVEVUxFVkVMLm1pZCkgcmV0dXJuIHRoaXMuYmdBcnJheVs1XTtcclxuXHRcdFx0ZWxzZSBpZiAoZGVzdGluYXRpb24uaW5jb21lTGV2ZWwgPT09IFBlcnNvbi5FRFVMRVZFTC5oaWdoKSByZXR1cm4gdGhpcy5iZ0FycmF5WzRdO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSBpZiAoc291cmNlLmluY29tZUxldmVsID09PSBQZXJzb24uRURVTEVWRUwubWlkKSB7XHJcblx0XHRcdGlmIChkZXN0aW5hdGlvbi5pbmNvbWVMZXZlbCA9PT0gUGVyc29uLkVEVUxFVkVMLmxvdykgcmV0dXJuIHRoaXMuYmdBcnJheVs1XTtcclxuXHRcdFx0ZWxzZSBpZiAoZGVzdGluYXRpb24uaW5jb21lTGV2ZWwgPT09IFBlcnNvbi5FRFVMRVZFTC5oaWdoKSByZXR1cm4gdGhpcy5iZ0FycmF5WzNdO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSBpZiAoc291cmNlLmluY29tZUxldmVsID09PSBQZXJzb24uRURVTEVWRUwuaGlnaCkge1xyXG5cdFx0XHRpZiAoZGVzdGluYXRpb24uaW5jb21lTGV2ZWwgPT09IFBlcnNvbi5FRFVMRVZFTC5sb3cpIHJldHVybiB0aGlzLmJnQXJyYXlbNF07XHJcblx0XHRcdGVsc2UgaWYgKGRlc3RpbmF0aW9uLmluY29tZUxldmVsID09PSBQZXJzb24uRURVTEVWRUwubWlkKSByZXR1cm4gdGhpcy5iZ0FycmF5WzNdO1xyXG5cdFx0fVxyXG5cdH1cclxufTtcclxuXHJcbi8vIEJhY2tncm91bmRfTWFuYWdlci5wcm90b3R5cGUudXBkYXRlUmF0aW9zID0gZnVuY3Rpb24oZGVzdGluYXRpb24pIHtcclxuXHQvLyB3b3JrIDAgLSAyIGhvdXNlIDMgLSA1IHVuZW1wbG95ZWQgNlxyXG5CYWNrZ3JvdW5kX01hbmFnZXIucHJvdG90eXBlLnVwZGF0ZVJhdGlvcyA9IGZ1bmN0aW9uKCkge1xyXG5cdC8vIGlmIChkZXN0aW5hdGlvbi50eXBlID09PSAnd29yaycpIHtcclxuXHQvLyBcdHZhciBoUmF0aW9zID0gdXRpbC5yYXRpbyh0aGlzLmJnQXJyYXlbMF0ubnVtUGVvcGxlKCksIHRoaXMuYmdBcnJheVsxXS5udW1QZW9wbGUoKSwgdGhpcy5iZ0FycmF5WzJdLm51bVBlb3BsZSgpKTtcclxuXHQvLyB9XHJcblx0Ly8gZWxzZXtcclxuXHQvLyBcdHZhciBoUmF0aW9zID0gdXRpbC5yYXRpbyh0aGlzLmJnQXJyYXlbM10ubnVtUGVvcGxlKCksIHRoaXMuYmdBcnJheVs0XS5udW1QZW9wbGUoKSwgdGhpcy5iZ0FycmF5WzVdLm51bVBlb3BsZSgpKTtcclxuXHQvLyB9XHJcblx0Ly8gdmFyIGVtcGxveWVkID0gMDtcclxuXHQvLyBmb3IgKHZhciBqID0gMDsgaiA8IDY7IGorKylcclxuXHQvLyBcdGVtcGxveWVkICs9IHRoaXMuYmdBcnJheVtqXS5udW1QZW9wbGUoKTtcclxuXHQvLyB2YXIgdlJhdGlvcyA9IHV0aWwucmF0aW8odGhpcy5iZ0FycmF5WzZdLm51bVBlb3BsZSgpLCBlbXBsb3llZCk7XHJcblx0Ly8gZm9yICh2YXIgaSA9IDAgaW4gdGhpcy5iZ0FycmF5KSB7XHJcblx0Ly8gXHRpZiAoaSAhPT0gNikge1x0XHQvLyBJZiBub3QgdW5lbXBsb3llZCBiZ1xyXG5cdC8vIFx0XHRpZiAoaSA8IDMpIHtcdC8vIElmIHdvcmsgYmdcclxuXHQvLyBcdFx0XHR0aGlzLmJnQXJyYXlbaV0ubmV3SFJhdGlvID0gaFJhdGlvc1tpXTtcclxuXHQvLyBcdFx0XHR0aGlzLmJnQXJyYXlbaV0ubmV3VlJhdGlvID0gdlJhdGlvc1sxXSAvIDI7XHJcblx0Ly8gXHRcdH1cclxuXHQvLyBcdFx0ZWxzZSB7XHRcdFx0Ly8gSWYgaG91c2UgYmdcclxuXHQvLyBcdFx0XHR0aGlzLmJnQXJyYXlbaV0ubmV3SFJhdGlvID0gaFJhdGlvc1tpIC0gM107XHJcblx0Ly8gXHRcdFx0dGhpcy5iZ0FycmF5W2ldLm5ld1ZSYXRpbyA9IHZSYXRpb3NbMV0gLyAyO1xyXG5cdC8vIFx0XHR9XHJcblx0Ly8gXHR9XHJcblx0Ly8gXHRlbHNlIGJnQXJyYXlbaV0ubmV3VlJhdGlvID0gdlJhdGlvc1swXTsgLy8gVW5lbXBsb3llZCBiZ1xyXG5cdC8vIH1cclxuXHR2YXIgbG93U3VtID0gdGhpcy5iZ0FycmF5WzBdLm51bVBlb3BsZSgpICsgdGhpcy5iZ0FycmF5WzNdLm51bVBlb3BsZSgpO1xyXG5cdHZhciBtaWRTdW0gPSB0aGlzLmJnQXJyYXlbMV0ubnVtUGVvcGxlKCkgKyB0aGlzLmJnQXJyYXlbNF0ubnVtUGVvcGxlKCk7XHJcblx0dmFyIGhpZ2hTdW0gPSB0aGlzLmJnQXJyYXlbMl0ubnVtUGVvcGxlKCkgKyB0aGlzLmJnQXJyYXlbNV0ubnVtUGVvcGxlKCk7XHJcblx0Ly8gY29uc29sZS5sb2coJ2xvdycsIGxvd1N1bSwgJ21pZCcsIG1pZFN1bSwgJ2hpZ2gnLCBoaWdoU3VtKTtcclxuXHR2YXIgaFJhdGlvID0gdXRpbC5yYXRpbyhsb3dTdW0sIG1pZFN1bSwgaGlnaFN1bSwgdGhpcy5taW5SYXRpbyk7XHJcblx0dmFyIHdvcmtTdW0gPSB0aGlzLmJnQXJyYXlbMF0ubnVtUGVvcGxlKCkgKyB0aGlzLmJnQXJyYXlbMV0ubnVtUGVvcGxlKCkgKyB0aGlzLmJnQXJyYXlbMl0ubnVtUGVvcGxlKCk7XHJcblx0dmFyIGhvbWVTdW0gPSB0aGlzLmJnQXJyYXlbM10ubnVtUGVvcGxlKCkgKyB0aGlzLmJnQXJyYXlbNF0ubnVtUGVvcGxlKCkgKyB0aGlzLmJnQXJyYXlbNV0ubnVtUGVvcGxlKCk7XHJcblx0dmFyIHVuZW1TdW0gPSB0aGlzLmJnQXJyYXlbNl0ubnVtUGVvcGxlKCk7XHJcblx0dmFyIHZSYXRpbyA9IHV0aWwucmF0aW8od29ya1N1bSwgaG9tZVN1bSwgdW5lbVN1bSwgdGhpcy5taW5SYXRpbyk7XHJcblx0dmFyIGdXaWR0aCA9IHRoaXMuZ2FtZS53aWR0aDtcclxuXHR2YXIgZ0hlaWdodCA9IHRoaXMuZ2FtZS5oZWlnaHQgLSB0aGlzLmJvcmRlcjtcclxuXHJcblx0dmFyIG9mZnNldFggPSAwO1xyXG5cdHZhciBvZmZzZXRZID0gMDtcclxuXHR2YXIgd29ya0hlaWdodCA9IGdIZWlnaHQgKiB2UmF0aW8uYTtcclxuXHR2YXIgaG91c2VIZWlnaHQgPSBnSGVpZ2h0ICogdlJhdGlvLmI7XHJcblx0dmFyIHVuZW1IZWlnaHQgPSBnSGVpZ2h0ICogdlJhdGlvLmM7XHJcblx0Ly8gY29uc29sZS5sb2coZ1dpZHRoLCBnSGVpZ2h0LCB3b3JrU3VtLCBob21lU3VtLCB1bmVtU3VtLCBoUmF0aW8sIHZSYXRpbyk7XHJcblxyXG5cdHZhciBsb3dXb3JrID0ge3dpZHRoIDogZ1dpZHRoICogaFJhdGlvLmEsIGhlaWdodCA6IHdvcmtIZWlnaHQsIGNlbnRlciA6IG51bGx9O1xyXG5cdGxvd1dvcmsuY2VudGVyID0ge3ggOiBvZmZzZXRYICsgbG93V29yay53aWR0aCAvIDIsIHkgOiBvZmZzZXRZICsgd29ya0hlaWdodCAvIDJ9OztcclxuXHRvZmZzZXRYICs9IGxvd1dvcmsud2lkdGg7XHJcblx0dGhpcy5iZ0FycmF5WzBdLnVwZGF0ZVZhcnMobG93V29yayk7XHJcblx0dmFyIG1pZFdvcmsgPSB7d2lkdGggOiBnV2lkdGggKiBoUmF0aW8uYiwgaGVpZ2h0IDogd29ya0hlaWdodCwgY2VudGVyIDogbnVsbH07XHJcblx0bWlkV29yay5jZW50ZXIgPSB7eCA6IG9mZnNldFggKyBtaWRXb3JrLndpZHRoIC8gMiwgeSA6IG9mZnNldFkgKyB3b3JrSGVpZ2h0IC8gMn07XHJcblx0b2Zmc2V0WCArPSBtaWRXb3JrLndpZHRoO1xyXG5cdHRoaXMuYmdBcnJheVsxXS51cGRhdGVWYXJzKG1pZFdvcmspO1xyXG5cdHZhciBoaWdoV29yayA9IHt3aWR0aCA6IGdXaWR0aCAqIGhSYXRpby5jLCBoZWlnaHQgOiB3b3JrSGVpZ2h0LCBjZW50ZXIgOiBudWxsfVxyXG5cdGhpZ2hXb3JrLmNlbnRlciA9IHt4IDogb2Zmc2V0WCArIGhpZ2hXb3JrLndpZHRoIC8gMiwgeSA6IG9mZnNldFkgKyB3b3JrSGVpZ2h0IC8gMn07XHJcblx0b2Zmc2V0WCA9IDA7XHJcblx0b2Zmc2V0WSArPSB3b3JrSGVpZ2h0O1xyXG5cdHRoaXMuYmdBcnJheVsyXS51cGRhdGVWYXJzKGhpZ2hXb3JrKTtcclxuXHR2YXIgbG93SG91c2UgPSB7d2lkdGggOiBnV2lkdGggKiBoUmF0aW8uYSwgaGVpZ2h0IDogaG91c2VIZWlnaHQsIGNlbnRlciA6IG51bGx9O1xyXG5cdGxvd0hvdXNlLmNlbnRlciA9IHt4IDogb2Zmc2V0WCArIGxvd0hvdXNlLndpZHRoIC8gMiwgeSA6IG9mZnNldFkgKyBob3VzZUhlaWdodCAvIDJ9O1xyXG5cdG9mZnNldFggKz0gbG93SG91c2Uud2lkdGg7XHJcblx0dGhpcy5iZ0FycmF5WzNdLnVwZGF0ZVZhcnMobG93SG91c2UpO1xyXG5cdHZhciBtaWRIb3VzZSA9IHt3aWR0aCA6IGdXaWR0aCAqIGhSYXRpby5iLCBoZWlnaHQgOiBob3VzZUhlaWdodCwgY2VudGVyIDogbnVsbH07XHJcblx0bWlkSG91c2UuY2VudGVyID0ge3ggOiBvZmZzZXRYICsgbWlkSG91c2Uud2lkdGggLyAyLCB5IDogb2Zmc2V0WSArIGhvdXNlSGVpZ2h0IC8gMn07XHJcblx0b2Zmc2V0WCArPSBtaWRIb3VzZS53aWR0aDtcclxuXHR0aGlzLmJnQXJyYXlbNF0udXBkYXRlVmFycyhtaWRIb3VzZSk7XHJcblx0dmFyIGhpZ2hIb3VzZSA9IHt3aWR0aCA6IGdXaWR0aCAqIGhSYXRpby5jLCBoZWlnaHQgOiBob3VzZUhlaWdodCwgY2VudGVyIDogbnVsbH07XHJcblx0aGlnaEhvdXNlLmNlbnRlciA9IHt4IDogb2Zmc2V0WCArIGhpZ2hIb3VzZS53aWR0aCAvIDIsIHkgOiBvZmZzZXRZICsgaG91c2VIZWlnaHQgLyAyfTtcclxuXHRvZmZzZXRZICs9IGhvdXNlSGVpZ2h0O1xyXG5cdHRoaXMuYmdBcnJheVs1XS51cGRhdGVWYXJzKGhpZ2hIb3VzZSk7XHJcblx0dmFyIHVuZW1wbG95ZWQgPSB7d2lkdGggOiBnV2lkdGggKiAxLCBoZWlnaHQgOiB1bmVtSGVpZ2h0LCBjZW50ZXIgOiBudWxsfTtcclxuXHR1bmVtcGxveWVkLmNlbnRlciA9IHt4IDogdW5lbXBsb3llZC53aWR0aCAvIDIsIHkgOiBvZmZzZXRZICsgdW5lbUhlaWdodCAvIDJ9O1xyXG5cdHRoaXMuYmdBcnJheVs2XS51cGRhdGVWYXJzKHVuZW1wbG95ZWQpO1xyXG5cdC8vIGNvbnNvbGUubG9nKHZSYXRpb3MpO1xyXG5cdC8vIGZvciAodmFyIGJnIGluIHRoaXMuYmdBcnJheSkge1xyXG5cdC8vIFx0YmcgPSB0aGlzLmJnQXJyYXlbYmddO1xyXG5cdC8vIFx0YmcuZ3JvdXBfbWFuYWdlci51cGRhdGVWYXJzKCk7XHJcblx0Ly8gfVxyXG59O1xyXG5cclxuQmFja2dyb3VuZF9NYW5hZ2VyLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbigpIHtcclxuXHQvLyBmb3IgKHZhciBpIGluIHRoaXMuYmdBcnJheSkge1xyXG4gLy8gICAgXHRpZiAodGhpcy5iZ0FycmF5W2ldLmluY29tZUxldmVsID09PSBQZXJzb24uRURVTEVWRUwubWlkKSB7XHJcbiAvLyAgICBcdFx0dGhpcy5iZ0FycmF5W2ldLnggPSB0aGlzLmJnQXJyYXlbMF0uZ2V0VmFycygpWzJdO1xyXG4gLy8gICAgXHR9XHJcbiAvLyAgICBcdGVsc2UgaWYgKHRoaXMuYmdBcnJheVtpXS5pbmNvbWVMZXZlbCA9PT0gUGVyc29uLkVEVUxFVkVMLmhpZ2gpIHtcclxuIC8vICAgIFx0ICAgIHRoaXMuYmdBcnJheVtpXS54ID0gdGhpcy5iZ0FycmF5WzFdLmdldFZhcnMoKVswXSArIHRoaXMuYmdBcnJheVsxXS5nZXRWYXJzKClbMl07XHJcbiAvLyAgICBcdH1cclxuIC8vICAgIFx0dGhpcy5iZ0FycmF5W2ldLnkgPSAodGhpcy5iZ0FycmF5W2ldLmJhc2VZICogdGhpcy5iZ0FycmF5W2ldLnZSYXRpbyAqICh0aGlzLmdhbWUuaGVpZ2h0IC0gdGhpcy5ib3JkZXIpKSArIHRoaXMuYm9yZGVyO1xyXG5cdC8vIFx0dGhpcy5iZ0FycmF5W2ldLnVwZGF0ZSgpO1xyXG5cdC8vIH1cclxuXHQvLyB2YXIgdGVzdCA9IHRoaXMuYmdBcnJheVszXS5nZXRWYXJzQ2VudGVyKCk7XHJcbn07XHJcblxyXG5CYWNrZ3JvdW5kX01hbmFnZXIucHJvdG90eXBlLmVuZFF1aXQgPSBmdW5jdGlvbigpIHtcclxuICAgIHRoaXMuanVzdFF1aXQgPSBmYWxzZTtcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gQmFja2dyb3VuZF9NYW5hZ2VyOyIsIi8vY29udHJvbHMgZmxvY2tpbmcgZm9yIGEgZ3JvdXAgb2YgcGVyc29uIG9iamVjdHNcclxudmFyIHV0aWwgPSByZXF1aXJlKCcuLi91dGlscycpO1xyXG5cclxudmFyIEdyb3VwID0gZnVuY3Rpb24gKGdhbWUsIGNlbnRlclgsIGNlbnRlclksIHN0YXRlKSB7XHJcblx0dGhpcy5nYW1lID0gZ2FtZTtcclxuXHR0aGlzLm1lbWJlcnMgPSBbXTtcclxuXHR0aGlzLm1pbkRpc3QgPSAyMDtcclxuXHQvL3RoaXMubm9pc2UgPSAxMDtcclxuXHR0aGlzLmNlbnRlciA9IHt4IDogY2VudGVyWCwgeSA6IGNlbnRlcll9O1xyXG5cdHRoaXMuY2xpY2tEaXN0ID0gNTA7XHJcblx0dGhpcy5zZWxlY3RlZCA9IGZhbHNlO1xyXG5cdHRoaXMuc2VsZWN0aW9uID0gdGhpcy5nYW1lLmFkZC5zcHJpdGUodGhpcy5jZW50ZXIueCwgdGhpcy5jZW50ZXIueSwgJ3NlbGVjdGlvbicpO1xyXG5cdHRoaXMuc2VsZWN0aW9uLmFuY2hvci5zZXRUbygwLjUsIDAuNSk7XHJcblx0dGhpcy5zZWxlY3Rpb24ud2lkdGggPSAxMDA7XHJcblx0dGhpcy5zZWxlY3Rpb24uaGVpZ2h0ID0gMTAwO1xyXG5cdHRoaXMuc2VsZWN0aW9uLnZpc2libGUgPSBmYWxzZTtcclxuXHR0aGlzLnZlbG9jaXR5ID0ge3ggOiAwLCB5IDogMH07XHJcblx0dGhpcy5zcGVlZCA9IC4wNTtcclxuXHR0aGlzLnN0YXRlID0gc3RhdGU7XHJcblx0dGhpcy5ib29rID0gdGhpcy5nYW1lLmFkZC5zcHJpdGUodGhpcy5jZW50ZXIueCwgdGhpcy5jZW50ZXIueSwgJ2Jvb2snKTtcclxuXHR0aGlzLmJvb2suYW5jaG9yLnNldFRvKDAuNSwgMC41KTtcclxuXHR0aGlzLmJvb2sud2lkdGggPSAyNTtcclxuXHR0aGlzLmJvb2suaGVpZ2h0ID0gMjU7XHJcblx0dGhpcy5ib29rLnZpc2libGUgPSBmYWxzZTtcclxuXHR0aGlzLmxlYXJuaW5nVGltZSA9IC4wMTtcclxuICAgIHRoaXMuaG92ZXIgPSBmYWxzZTtcclxuICAgIHRoaXMubG9jayA9IHRoaXMuZ2FtZS5hZGQuc3ByaXRlKHRoaXMuY2VudGVyLngsIHRoaXMuY2VudGVyLnksICdsb2NrJyk7XHJcblx0dGhpcy5sb2NrLmFuY2hvci5zZXRUbygwLjUsIDAuNSk7XHJcblx0dGhpcy5sb2NrLndpZHRoID0gMjU7XHJcblx0dGhpcy5sb2NrLmhlaWdodCA9IDM1O1xyXG5cdHRoaXMubG9jay52aXNpYmxlID0gZmFsc2U7XHJcblx0dGhpcy5sb2NrVGltZSA9IDU7XHJcblx0dGhpcy5oYXBwaW5lc3NNb2RpZmllciA9IDA7XHJcblx0dGhpcy5zZWxlY3Rpb25XZWlnaHQgPSAyLjU7XHJcblx0dGhpcy5taW5TZWxlY3Rpb25TaXplID0gNDA7XHJcblx0dGhpcy5jbGlja1dlaWdodCA9IDEwO1xyXG5cdHRoaXMubWF4Q2xpY2tEaXN0ID0gNDA7XHJcblx0dGhpcy5taW5DbGlja0Rpc3QgPSAyMDtcclxuXHR0aGlzLm1heE1lbWJlcnMgPSAxMDtcclxuXHRcclxuXHR0aGlzLnN0YXRlLmlucHV0Lm9uRG93bi5hZGQodGhpcy5vbklucHV0RG93biwgdGhpcyk7XHJcbiAgICB0aGlzLnN0YXRlLmlucHV0LmFkZE1vdmVDYWxsYmFjayh0aGlzLm9uTW92ZSwgdGhpcyk7XHJcbn07XHJcbkdyb3VwLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEdyb3VwO1xyXG5Hcm91cC5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24oKSB7XHJcblx0Ly8gY29uc29sZS5sb2codGhpcy5jZW50ZXIpO1xyXG5cdC8vdXBkYXRlIGNlbnRlclxyXG5cdHZhciBuZXdYID0gdGhpcy5jZW50ZXIueCArIHRoaXMudmVsb2NpdHkueCAqIHRoaXMuc3BlZWQ7XHJcblx0dmFyIG5ld1kgPSB0aGlzLmNlbnRlci55ICsgdGhpcy52ZWxvY2l0eS55ICogdGhpcy5zcGVlZDtcclxuXHR0aGlzLmNoYW5nZUNlbnRlcih7eCA6IG5ld1gsIHkgOiBuZXdZfSk7XHJcblx0Zm9yICh2YXIgbWVtYmVyIGluIHRoaXMubWVtYmVycykge1xyXG5cdFx0bWVtYmVyID0gdGhpcy5tZW1iZXJzW21lbWJlcl07XHJcblx0XHR2YXIgdmVsb2NpdHkgPSB7eDowLCB5OjB9O1xyXG5cdFx0dmFyIGRpZmYgPSB7eDowLCB5OjB9O1xyXG5cdFx0ZGlmZi54ID0gdGhpcy5jZW50ZXIueCAtIG1lbWJlci54O1xyXG5cdFx0ZGlmZi55ID0gdGhpcy5jZW50ZXIueSAtIG1lbWJlci55O1xyXG5cdFx0dmVsb2NpdHkueCArPSBkaWZmLng7XHJcblx0XHR2ZWxvY2l0eS55ICs9IGRpZmYueTtcclxuXHRcdGZvciAodmFyIG90aGVyIGluIHRoaXMubWVtYmVycykge1xyXG5cdFx0XHRvdGhlciA9IHRoaXMubWVtYmVyc1tvdGhlcl07XHJcblx0XHRcdC8vaWdub3JlIHNlbGZcclxuXHRcdFx0aWYgKG90aGVyID09PSBtZW1iZXIpIHtcclxuXHRcdFx0XHRjb250aW51ZTtcclxuXHRcdFx0fVxyXG5cdFx0XHR2YXIgb0RpZmYgPSB7eDowLCB5OjB9O1xyXG5cdFx0XHRvRGlmZi54ID0gb3RoZXIueCAtIG1lbWJlci54O1xyXG5cdFx0XHRvRGlmZi55ID0gb3RoZXIueSAtIG1lbWJlci55O1xyXG5cdFx0XHR2YXIgdG90YWxEaXN0ID0gdXRpbC5oeXBvdGVudXNlKG9EaWZmLngsIG9EaWZmLnkpO1xyXG5cdFx0XHRpZiAodG90YWxEaXN0IDw9IHRoaXMubWluRGlzdCkge1xyXG5cdFx0XHRcdHZlbG9jaXR5LnggPSAtMSAqIG9EaWZmLng7XHJcblx0XHRcdFx0dmVsb2NpdHkueSA9IC0xICogb0RpZmYueTtcclxuXHRcdFx0XHQvLyB2ZWxvY2l0eS54IC09IG9EaWZmLng7XHJcblx0XHRcdFx0Ly8gdmVsb2NpdHkueSAtPSBvRGlmZi55O1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHQvLyBpZiAodXRpbC5oeXBvdGVudXNlKHZlbG9jaXR5LngsIHZlbG9jaXR5LnkpIDwgdGhpcy5taW5WZWxvY2l0eSkge1xyXG5cdFx0XHQvLyB2ZWxvY2l0eS54ID0gdmVsb2NpdHkueSA9IDA7XHJcblx0XHQvLyB9XHJcblx0XHRtZW1iZXIudmVsb2NpdHkgPSB2ZWxvY2l0eTtcclxuXHR9XHJcblxyXG5cdC8vIHZhciBhdmVyYWdlID0gMDtcclxuXHQvLyBmb3IgKHZhciBtZW1iZXIgaW4gdGhpcy5tZW1iZXJzKSB7XHJcblx0Ly8gXHRtZW1iZXIgPSB0aGlzLm1lbWJlcnNbbWVtYmVyXTtcclxuXHQvLyBcdHZhciBkaXN0ID0gdXRpbC5oeXBvdGVudXNlKHRoaXMuY2VudGVyLnggLSBtZW1iZXIueCwgdGhpcy5jZW50ZXIueSAtIG1lbWJlci55KTtcclxuXHQvLyBcdC8vIGlmIChkaXN0ID4gZnVydGhlc3QpIHtcclxuXHQvLyBcdC8vIFx0ZnVydGhlc3QgPSBkaXN0O1xyXG5cdC8vIFx0Ly8gfVxyXG5cdC8vIFx0YXZlcmFnZSArPSBkaXN0O1xyXG5cdC8vIH1cclxuXHQvLyBhdmVyYWdlIC89IHRoaXMubWVtYmVycy5sZW5ndGg7XHJcblx0Ly8gLy8gY29uc29sZS5sb2codGhpcy5zZWxlY3Rpb25XZWlnaHQpO1xyXG5cdC8vIHZhciBuZXdTZWxlY3Rpb25TaXplID0gYXZlcmFnZSAqIHRoaXMuc2VsZWN0aW9uV2VpZ2h0O1xyXG5cdC8vIGlmIChuZXdTZWxlY3Rpb25TaXplIDw9IHRoaXMubWluU2VsZWN0aW9uU2l6ZSkge1xyXG5cdC8vIFx0Ly8gY29uc29sZS5sb2coJ2EnKTtcclxuXHQvLyBcdG5ld1NlbGVjdGlvblNpemUgPSB0aGlzLm1pblNlbGVjdGlvblNpemU7XHJcblx0Ly8gfVxyXG5cdHZhciBuZXdDbGlja0Rpc3QgPSAwO1xyXG5cdGlmICh0aGlzLm1lbWJlcnMubGVuZ3RoID49IHRoaXMubWF4TWVtYmVycykge1xyXG5cdFx0bmV3Q2xpY2tEaXN0ID0gdGhpcy5tYXhDbGlja0Rpc3Q7XHJcblx0fSBlbHNlIHtcclxuXHRcdG5ld0NsaWNrRGlzdCA9IHRoaXMubWluQ2xpY2tEaXN0ICsgKHRoaXMubWF4Q2xpY2tEaXN0IC0gdGhpcy5taW5DbGlja0Rpc3QpICogKHRoaXMubWVtYmVycy5sZW5ndGggLyB0aGlzLm1heE1lbWJlcnMpO1xyXG5cdH1cclxuXHR0aGlzLmNsaWNrRGlzdCA9IG5ld0NsaWNrRGlzdDtcclxuXHR2YXIgbmV3U2VsZWN0aW9uU2l6ZSA9IHRoaXMubWluU2VsZWN0aW9uU2l6ZSArIHRoaXMubWVtYmVycy5sZW5ndGggKiB0aGlzLnNlbGVjdGlvbldlaWdodDtcclxuXHR0aGlzLnNlbGVjdGlvbi53aWR0aCA9IG5ld1NlbGVjdGlvblNpemU7XHJcblx0dGhpcy5zZWxlY3Rpb24uaGVpZ2h0ID0gbmV3U2VsZWN0aW9uU2l6ZTtcclxufTtcclxuR3JvdXAucHJvdG90eXBlLmFkZE1lbWJlciA9IGZ1bmN0aW9uKG1lbWJlcikge1xyXG5cdHRoaXMubWVtYmVycy5wdXNoKG1lbWJlcik7XHJcblx0bWVtYmVyLmdyb3VwID0gdGhpcztcclxuXHR0aGlzLm15TWFuYWdlci5iYWNrZ3JvdW5kLm15TWFuYWdlci51cGRhdGVSYXRpb3MoKTtcclxuXHQvLyBjb25zb2xlLmxvZyh0aGlzLm1lbWJlcnMpO1xyXG59O1xyXG5Hcm91cC5wcm90b3R5cGUub25JbnB1dERvd24gPSBmdW5jdGlvbigpIHtcclxuXHQvLyBjb25zb2xlLmxvZygnYScpO1xyXG5cdGlmICh0aGlzLnNlbGVjdGVkKSB7XHJcblx0XHR2YXIgYmcgPSB0aGlzLm15TWFuYWdlci5iYWNrZ3JvdW5kLm15TWFuYWdlci53aGVyZUNsaWNrZWQoKTtcclxuXHRcdC8vIGNvbnNvbGUubG9nKGJnKTtcclxuXHRcdHRoaXMubXlNYW5hZ2VyLmJhY2tncm91bmQubXlNYW5hZ2VyLnNlbmRUbyh0aGlzLm15TWFuYWdlci5iYWNrZ3JvdW5kLCBiZywgdGhpcyk7XHJcblx0XHR0aGlzLnNldFNlbGVjdGVkKGZhbHNlKTtcclxuXHR9IGVsc2UgaWYgKHRoaXMuY2xpY2tlZCgpKSB7XHJcblx0XHR0aGlzLmNsaWNrKCk7XHJcblx0fVxyXG59O1xyXG5Hcm91cC5wcm90b3R5cGUuc3RhcnRFZHVjYXRpb24gPSBmdW5jdGlvbigpIHtcclxuXHR0aGlzLmxlYXJuaW5nID0gZmFsc2U7XHJcblx0dGhpcy5ib29rLnZpc2libGUgPSB0cnVlO1xyXG5cdHRoaXMuc3RhdGUuZ2FtZS50aW1lLmV2ZW50cy5hZGQoUGhhc2VyLlRpbWVyLlNFQ09ORCAqIHRoaXMubGVhcm5pbmdUaW1lLCB0aGlzLmVuZEVkdWNhdGlvbiwgdGhpcyk7XHJcbn07XHJcbkdyb3VwLnByb3RvdHlwZS5lbmRFZHVjYXRpb24gPSBmdW5jdGlvbigpIHtcclxuXHRmb3IgKHZhciBtZW1iZXIgaW4gdGhpcy5tZW1iZXJzKSB7XHJcblx0XHR0aGlzLm1lbWJlcnNbbWVtYmVyXS5lZHVMZXZlbCArPSAxO1xyXG5cdH1cclxuXHR0aGlzLmxlYXJuaW5nID0gZmFsc2U7XHJcblx0dGhpcy5ib29rLnZpc2libGUgPSBmYWxzZTtcclxufTtcclxuR3JvdXAucHJvdG90eXBlLmNsaWNrZWQgPSBmdW5jdGlvbigpIHtcclxuICAgIGlmICh0aGlzLm1lbWJlcnMubGVuZ3RoID09IDApIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblx0dmFyIG1vdXNlWCA9IHRoaXMuZ2FtZS5pbnB1dC54O1xyXG5cdHZhciBtb3VzZVkgPSB0aGlzLmdhbWUuaW5wdXQueTtcclxuXHR2YXIgZGlmZlggPSBtb3VzZVggLSB0aGlzLmNlbnRlci54O1xyXG5cdHZhciBkaWZmWSA9IG1vdXNlWSAtIHRoaXMuY2VudGVyLnk7XHJcblx0dmFyIHRvdGFsRGlmZiA9IHV0aWwuaHlwb3RlbnVzZShkaWZmWCwgZGlmZlkpO1xyXG5cdGlmICh0b3RhbERpZmYgPD0gdGhpcy5jbGlja0Rpc3QpIHtcclxuXHRcdHJldHVybiB0cnVlO1xyXG5cdH1cclxuXHRyZXR1cm4gZmFsc2U7XHJcbn07XHJcbkdyb3VwLnByb3RvdHlwZS5jbGljayA9IGZ1bmN0aW9uKCkge1xyXG5cdGlmICh0aGlzLnNlbGVjdGVkKSB7XHJcbiAgICAgICAgLy8gdGhpcy5zdGF0ZS5obS5ncm91cFNlbGVjdGVkID0gZmFsc2U7XHJcblx0XHR0aGlzLnNldFNlbGVjdGVkKGZhbHNlKTtcclxuXHR9IGVsc2UgaWYgKCF0aGlzLmxvY2tlZCkge1xyXG4gICAgICAgIC8vIHRoaXMuc3RhdGUuaG0uZ3JvdXBTZWxlY3RlZCA9IHRydWU7XHJcblx0XHR0aGlzLnNldFNlbGVjdGVkKHRydWUpO1xyXG5cdH1cclxufTtcclxuR3JvdXAucHJvdG90eXBlLnNldFNlbGVjdGVkID0gZnVuY3Rpb24obmV3U2VsZWN0ZWQpIHtcclxuXHR0aGlzLnNlbGVjdGVkID0gbmV3U2VsZWN0ZWQ7XHJcblx0dGhpcy5zZWxlY3Rpb24udmlzaWJsZSA9IG5ld1NlbGVjdGVkO1xyXG4gICAgaWYgKG5ld1NlbGVjdGVkID09IHRydWUpIHtcclxuICAgICAgICB0aGlzLnN0YXRlLmhtLmdyb3VwU2VsZWN0ZWQgPSB0aGlzO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5obS5ncm91cFNlbGVjdGVkID09IHRoaXMpIHtcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5obS5ncm91cFNlbGVjdGVkID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcbkdyb3VwLnByb3RvdHlwZS5jaGFuZ2VDZW50ZXIgPSBmdW5jdGlvbihuZXdDZW50ZXIpIHtcclxuXHR0aGlzLnNlbGVjdGlvbi54ID0gbmV3Q2VudGVyLng7XHJcblx0dGhpcy5zZWxlY3Rpb24ueSA9IG5ld0NlbnRlci55O1xyXG5cdHRoaXMuYm9vay54ID0gbmV3Q2VudGVyLng7XHJcblx0dGhpcy5ib29rLnkgPSBuZXdDZW50ZXIueTtcclxuXHR0aGlzLmxvY2sueCA9IG5ld0NlbnRlci54O1xyXG5cdHRoaXMubG9jay55ID0gbmV3Q2VudGVyLnk7XHJcblx0dGhpcy5jZW50ZXIgPSBuZXdDZW50ZXI7XHJcbn07XHJcbkdyb3VwLnByb3RvdHlwZS5udW1QZW9wbGUgPSBmdW5jdGlvbigpIHtcclxuXHRyZXR1cm4gdGhpcy5tZW1iZXJzLmxlbmd0aDtcclxufTtcclxuR3JvdXAucHJvdG90eXBlLmxvd2VzdEVkdWNhdGlvbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIGxvd2VzdCA9IDM7XHJcbiAgICBmb3IgKHZhciBtZW1iZXIgaW4gdGhpcy5tZW1iZXJzKSB7XHJcbiAgICAgICAgbWVtYmVyID0gdGhpcy5tZW1iZXJzW21lbWJlcl07XHJcbiAgICAgICAgaWYgKG1lbWJlci5lZHVMZXZlbCA8IGxvd2VzdCkge1xyXG4gICAgICAgICAgICBsb3dlc3QgPSBtZW1iZXIuZWR1TGV2ZWw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGxvd2VzdDtcclxufTtcclxuR3JvdXAucHJvdG90eXBlLmF2ZXJhZ2VIYXBwaW5lc3MgPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBoYXBwaW5lc3MgPSAwO1xyXG4gICAgZm9yICh2YXIgbWVtYmVyIGluIHRoaXMubWVtYmVycykge1xyXG4gICAgICAgIG1lbWJlciA9IHRoaXMubWVtYmVyc1ttZW1iZXJdO1xyXG4gICAgICAgIGhhcHBpbmVzcyArPSBtZW1iZXIuaGFwcGluZXNzO1xyXG4gICAgfVxyXG4gICAgaGFwcGluZXNzIC89IHRoaXMubWVtYmVycy5sZW5ndGg7XHJcbiAgICByZXR1cm4gaGFwcGluZXNzO1xyXG59O1xyXG5Hcm91cC5wcm90b3R5cGUuYXZlcmFnZUZhdGlndWUgPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBmYXRpZ3VlID0gMDtcclxuICAgIGZvciAodmFyIG1lbWJlciBpbiB0aGlzLm1lbWJlcnMpIHtcclxuICAgICAgICBtZW1iZXIgPSB0aGlzLm1lbWJlcnNbbWVtYmVyXTtcclxuICAgICAgICBmYXRpZ3VlICs9IG1lbWJlci5mYXRpZ3VlO1xyXG4gICAgfVxyXG4gICAgZmF0aWd1ZSAvPSB0aGlzLm1lbWJlcnMubGVuZ3RoO1xyXG4gICAgcmV0dXJuIGZhdGlndWU7XHJcbn07XHJcbkdyb3VwLnByb3RvdHlwZS5pbmNvbWUgPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBpbmNvbWUgPSAwO1xyXG4gICAgZm9yICh2YXIgbWVtYmVyIGluIHRoaXMubWVtYmVycykge1xyXG4gICAgICAgIG1lbWJlciA9IHRoaXMubWVtYmVyc1ttZW1iZXJdO1xyXG4gICAgICAgIGluY29tZSArPSBtZW1iZXIuZ2V0VGF4KCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gaW5jb21lO1xyXG59O1xyXG4vLyBHcm91cC5wcm90b3R5cGUuaGFwcGluZXNzQ2hhbmdlID0gZnVuY3Rpb24oKSB7XHJcbiAgICBcclxuLy8gfTtcclxuLy8gR3JvdXAucHJvdG90eXBlLmluY29tZUNoYW5nZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgXHJcbi8vIH07XHJcbi8vIEdyb3VwLnByb3RvdHlwZS5tb3VzZURvd24gPSBmdW5jdGlvbigpIHtcclxuXHRcclxuLy8gfTtcclxuR3JvdXAucHJvdG90eXBlLm9uTW92ZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgaWYgKHRoaXMubWVtYmVycy5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIC8vIGNvbnNvbGUubG9nKHRoaXMubWVtYmVycyk7XHJcblx0dmFyIG1vdXNlWCA9IHRoaXMuZ2FtZS5pbnB1dC54O1xyXG5cdHZhciBtb3VzZVkgPSB0aGlzLmdhbWUuaW5wdXQueTtcclxuICAgIHZhciBkaXN0ID0gdXRpbC5oeXBvdGVudXNlKHRoaXMuY2VudGVyLnggLSBtb3VzZVgsIHRoaXMuY2VudGVyLnkgLSBtb3VzZVkpO1xyXG4gICAgaWYgKGRpc3QgPD0gdGhpcy5jbGlja0Rpc3QpIHtcclxuICAgICAgICBpZiAoIXRoaXMuc3RhdGUuaG0uZ3JvdXBTZWxlY3RlZCB8fCB0aGlzLnN0YXRlLmhtLmdyb3VwU2VsZWN0ZWQgPT0gdGhpcykge1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnYScpO1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmhhcHBpbmVzc01vZGlmaWVyKTtcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5obS5zaG93U3RhdGljKHtwZW9wbGUgOiB0aGlzLm51bVBlb3BsZSgpLCBlZHVjYXRpb24gOiB0aGlzLmxvd2VzdEVkdWNhdGlvbigpLCBoYXBwaW5lc3MgOiB0aGlzLmF2ZXJhZ2VIYXBwaW5lc3MoKSwgZmF0aWd1ZSA6IHRoaXMuYXZlcmFnZUZhdGlndWUoKSwgaW5jb21lIDogdGhpcy5pbmNvbWUoKSwgaGFwcGluZXNzTW9kaWZpZXIgOiB0aGlzLmhhcHBpbmVzc01vZGlmaWVyfSwgdGhpcy5jZW50ZXIueCwgdGhpcy5jZW50ZXIueSAtIDUwLCAxMDApO1xyXG4gICAgICAgICAgICB0aGlzLmhvdmVyID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmICh0aGlzLmhvdmVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaG92ZXIgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5obS5oaWRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnN0YXRlLmhtLmdyb3VwU2VsZWN0ZWQgPT0gdGhpcyAmJiB0aGlzLm15TWFuYWdlci5iYWNrZ3JvdW5kLm15TWFuYWdlci53aGVyZUNsaWNrZWQoKSAhPSB0aGlzLm15TWFuYWdlci5iYWNrZ3JvdW5kXHJcbiAgICAgICAgICAgICYmIHRoaXMubXlNYW5hZ2VyLmJhY2tncm91bmQubXlNYW5hZ2VyLmNhblRyYW5zZmVyKHRoaXMubXlNYW5hZ2VyLmJhY2tncm91bmQsIHRoaXMubXlNYW5hZ2VyLmJhY2tncm91bmQubXlNYW5hZ2VyLndoZXJlQ2xpY2tlZCgpLCB0aGlzKSkge1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnYScpO1xyXG4gICAgICAgICAgICB2YXIgYmdNYW5hZ2VyID0gdGhpcy5teU1hbmFnZXIuYmFja2dyb3VuZC5teU1hbmFnZXJcclxuICAgICAgICAgICAgdmFyIHRyYW5zZmVyVHlwZSA9IGJnTWFuYWdlci50cmFuc2ZlclR5cGUodGhpcy5teU1hbmFnZXIuYmFja2dyb3VuZCwgYmdNYW5hZ2VyLndoZXJlQ2xpY2tlZCgpLCB0aGlzKTtcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5obS5zaG93Q2hhbmdlKHRyYW5zZmVyVHlwZS5jYW4sIHtoYXBwaW5lc3NDaGFuZ2UgOiB0cmFuc2ZlclR5cGUuaGFwcGluZXNzQ2hhbmdlLCBpbmNvbWVDaGFuZ2UgOiB0cmFuc2ZlclR5cGUuaW5jb21lQ2hhbmdlfSwgbW91c2VYLCBtb3VzZVkpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdiJyk7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuaG0uaGlkZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxuLy8gR3JvdXAucHJvdG90eXBlLmhhcHBpbmVzc01vZGlmaWVyID0gZnVuY3Rpb24oKSB7XHJcbi8vICAgICByZXR1cm4gdGhpcy5oYXBwaW5lc3NNb2RpZmllcjtcclxuLy8gfTtcclxuR3JvdXAucHJvdG90eXBlLmFwcGx5SGFwcGluZXNzID0gZnVuY3Rpb24oKSB7XHJcblx0Ly8gY29uc29sZS5sb2coJ2FwcGx5Jyk7XHJcblx0dmFyIGZsYWcgPSBmYWxzZTtcclxuXHRmb3IgKHZhciBtZW1iZXIgaW4gdGhpcy5tZW1iZXJzKSB7XHJcblx0XHRtZW1iZXIgPSB0aGlzLm1lbWJlcnNbbWVtYmVyXTtcclxuXHRcdC8vIGNvbnNvbGUubG9nKG1lbWJlci5oYXBwaW5lc3MsIHRoaXMuaGFwcGluZXNzTW9kaWZpZXIpO1xyXG5cdFx0Ly8gY29uc29sZS5sb2dxbWVtYmVyLmhhcHBpbmVzcywgdGhpcy5oYXBwaW5lc3NNb2RpZmllcik7XHJcblx0XHRtZW1iZXIuaGFwcGluZXNzICs9IHRoaXMuaGFwcGluZXNzTW9kaWZpZXI7XHJcblx0XHQvLyBtZW1iZXIuaGFwcGluZXNzIC09IDUwO1xyXG5cdFx0aWYgKG1lbWJlci5oYXBwaW5lc3MgPiAxMDApIHtcclxuXHRcdFx0bWVtYmVyLmhhcHBpbmVzcyA9IDEwMDtcclxuXHRcdH0gZWxzZSBpZiAobWVtYmVyLmhhcHBpbmVzcyA8PSAwKSB7XHJcblx0XHRcdG1lbWJlci5oYXBwaW5lc3MgPSAwO1xyXG5cdFx0XHRmbGFnID0gdHJ1ZTtcclxuXHRcdH1cclxuXHR9XHJcblx0aWYgKGZsYWcpIHtcclxuXHRcdHRoaXMuZ2V0T3V0T2ZUb3duKCk7XHJcblx0fVxyXG59O1xyXG5Hcm91cC5wcm90b3R5cGUuYWRkRmF0aWd1ZSA9IGZ1bmN0aW9uKGFtdCkge1xyXG5cdC8vIGNvbnNvbGUubG9nKGFtdCk7XHJcblx0aWYgKHRoaXMubWVtYmVyc1swXS5mYXRpZ3VlIDw9IDAgJiYgYW10IDw9IDApIHtcclxuXHRcdHJldHVybjtcclxuXHR9XHJcblx0dmFyIGZsYWcgPSBmYWxzZTtcclxuXHRmb3IgKHZhciBtZW1iZXIgaW4gdGhpcy5tZW1iZXJzKSB7XHJcblx0XHR0aGlzLm1lbWJlcnNbbWVtYmVyXS5mYXRpZ3VlICs9IGFtdDtcclxuXHRcdGlmICh0aGlzLm1lbWJlcnNbbWVtYmVyXS5mYXRpZ3VlID49IDEwMCkge1xyXG5cdFx0XHRmbGFnID0gdHJ1ZTtcclxuXHRcdH1cclxuXHR9XHJcblx0aWYgKGZsYWcpIHtcclxuXHRcdC8vIGNvbnNvbGUubG9nKHRoaXMpO1xyXG5cdFx0dGhpcy5nZXRPdXRPZlRvd24oKTtcclxuXHRcdC8vY29uc29sZS5sb2coJ2ZhdGlndWUgdG9vIGRhbSBoaWdoJyk7XHJcblx0fVxyXG59O1xyXG5Hcm91cC5wcm90b3R5cGUuZ2V0T3V0T2ZUb3duID0gZnVuY3Rpb24oKSB7XHJcblx0dmFyIG5ld0JHID0gdGhpcy5teU1hbmFnZXIuYmFja2dyb3VuZC5teU1hbmFnZXIuYmFja2dyb3VuZEJ5KCdob3VzZScsIHRoaXMubXlNYW5hZ2VyLmJhY2tncm91bmQuaW5jb21lTGV2ZWwpO1xyXG5cdGlmICghbmV3QkcpIHtcclxuXHRcdGNvbnNvbGUubG9nKCdFUlJPUicpO1xyXG5cdFx0cmV0dXJuO1xyXG5cdH1cclxuXHR0aGlzLm15TWFuYWdlci5iYWNrZ3JvdW5kLm15TWFuYWdlci5zZW5kVG8odGhpcy5teU1hbmFnZXIuYmFja2dyb3VuZCwgbmV3QkcsIHRoaXMpO1xyXG5cdHRoaXMubG9ja0l0KCk7XHJcbn1cclxuR3JvdXAucHJvdG90eXBlLmxvY2tJdCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdGhpcy5sb2NrZWQgPSB0cnVlO1xyXG4gICAgdGhpcy5sb2NrLnZpc2libGUgPSB0cnVlO1xyXG5cdHRoaXMuc3RhdGUuZ2FtZS50aW1lLmV2ZW50cy5hZGQoUGhhc2VyLlRpbWVyLlNFQ09ORCAqIHRoaXMubG9ja1RpbWUsIHRoaXMuZW5kTG9jaywgdGhpcyk7XHJcbn07XHJcbkdyb3VwLnByb3RvdHlwZS5lbmRMb2NrID0gZnVuY3Rpb24oKSB7XHJcbiAgICB0aGlzLmxvY2tlZCA9IGZhbHNlO1xyXG4gICAgdGhpcy5sb2NrLnZpc2libGUgPSBmYWxzZTtcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gR3JvdXA7XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbiIsInZhciBVdGlsID0gcmVxdWlyZSgnLi4vdXRpbHMnKTtcclxudmFyIEdyb3VwID0gcmVxdWlyZSgnLi9ncm91cCcpO1xyXG5cclxudmFyIEdyb3VwTWFuYWdlciA9IGZ1bmN0aW9uIChnYW1lLCBzdGF0ZSkge1xyXG5cdHRoaXMuZ2FtZSA9IGdhbWU7XHJcblx0dGhpcy5tZW1iZXJzID0gW107XHJcblx0dGhpcy5zdGF0ZSA9IHN0YXRlO1xyXG5cdHRoaXMuc3BsaXRDaGFuY2UgPSAwLjE7XHJcblx0dGhpcy5tYXhTaXplID0gMjtcclxuXHR0aGlzLm1hcmdpbiA9IDUwO1xyXG5cdHRoaXMud2lkdGggPSAwO1xyXG5cdHRoaXMuaGVpZ2h0ID0gMDtcclxuXHR0aGlzLmNlbnRlciA9IHt4IDogMCwgeSA6IDB9O1xyXG59O1xyXG5Hcm91cE1hbmFnZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gR3JvdXBNYW5hZ2VyO1xyXG5Hcm91cE1hbmFnZXIucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uKCkge1xyXG5cdC8vIHRoaXMudXBkYXRlVmFycygpO1xyXG5cdC8vIGNvbnNvbGUubG9nKHRoaXMubWVtYmVycyk7XHJcblx0Ly8gY29uc29sZS5sb2codGhpcy5jZW50ZXIpO1xyXG5cdC8vdXBkYXRlIGJvdW5kc1xyXG5cdGlmICh0aGlzLmJhY2tncm91bmQpIHtcclxuXHRcdHZhciB2YXJzID0gdGhpcy5iYWNrZ3JvdW5kLmdldFZhcnNDZW50ZXIoKTtcclxuXHRcdHRoaXMud2lkdGggPSB2YXJzLndpZHRoO1xyXG5cdFx0dGhpcy5oZWlnaHQgPSB2YXJzLmhlaWdodDtcclxuXHRcdHRoaXMuY2VudGVyID0gdmFycy5jZW50ZXI7XHJcblx0XHQvLyBjb25zb2xlLmxvZyh2YXJzKTtcclxuXHR9IGVsc2Uge1xyXG5cdFx0cmV0dXJuO1xyXG5cdH1cclxuXHQvL3VwZGF0ZSBpbnRlci1ncm91cCBtb3ZlbWVudFxyXG5cdC8vIGNvbnNvbGUubG9nKE1hdGgucmFuZG9tKCkpO1xyXG5cdHZhciBsYXJnZXN0ID0gbnVsbDtcclxuXHR2YXIgbGFyZ2VzdFNpemUgPSAwO1xyXG5cdGZvciAodmFyIG1lbWJlciBpbiB0aGlzLm1lbWJlcnMpIHtcclxuXHRcdG1lbWJlciA9IHRoaXMubWVtYmVyc1ttZW1iZXJdO1xyXG5cdFx0dmFyIHNpemUgPSBtZW1iZXIubnVtUGVvcGxlKCk7XHJcblx0XHRpZiAoc2l6ZSA+PSBsYXJnZXN0U2l6ZSkge1xyXG5cdFx0XHRsYXJnZXN0U2l6ZSA9IHNpemU7XHJcblx0XHRcdGxhcmdlc3QgPSBtZW1iZXI7XHJcblx0XHR9XHJcblx0fVxyXG5cdGlmIChsYXJnZXN0U2l6ZSA+PSB0aGlzLm1heFNpemUpIHtcclxuXHRcdC8vIGNvbnNvbGUubG9nKCdzcGxpdCcpO1xyXG5cdFx0dmFyIG5ld0dyb3VwID0gbmV3IEdyb3VwKHRoaXMuZ2FtZSwgdGhpcy5jZW50ZXIueCwgdGhpcy5jZW50ZXIueSwgdGhpcy5zdGF0ZSk7XHJcblx0XHR0aGlzLmFkZE1lbWJlcihuZXdHcm91cCk7XHJcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGxhcmdlc3RTaXplIC8gMjsgaSsrKSB7XHJcblx0XHRcdHRoaXMudHJhbnNmZXJQZW9wbGUobGFyZ2VzdCwgbmV3R3JvdXAsIGxhcmdlc3QubWVtYmVyc1swXSk7XHJcblx0XHR9XHJcblx0fVxyXG5cdC8vdXBkYXRlIG1lbWJlcnNcclxuXHRmb3IgKG1lbWJlciBpbiB0aGlzLm1lbWJlcnMpIHtcclxuXHRcdHRoaXMubWVtYmVyc1ttZW1iZXJdLnVwZGF0ZSgpO1xyXG5cdH1cclxufTtcclxuR3JvdXBNYW5hZ2VyLnByb3RvdHlwZS51cGRhdGVWYXJzID0gZnVuY3Rpb24oKSB7XHJcblx0dmFyIHZhcnMgPSB0aGlzLmJhY2tncm91bmQuZ2V0VmFyc0NlbnRlcigpO1xyXG5cdHRoaXMud2lkdGggPSB2YXJzLndpZHRoO1xyXG5cdHRoaXMuaGVpZ2h0ID0gdmFycy5oZWlnaHQ7XHJcblx0dGhpcy5jZW50ZXIgPSB2YXJzLmNlbnRlcjtcclxuXHQvLyBjb25zb2xlLmxvZyh0aGlzLmJhY2tncm91bmQudHlwZSwgdGhpcy5iYWNrZ3JvdW5kLmluY29tZUxldmVsLCB2YXJzLndpZHRoLCB2YXJzLmhlaWdodCwgdmFycy5jZW50ZXIueCwgdmFycy5jZW50ZXIueSk7XHJcblx0dmFyIGxlZnRCb3VuZCA9IHRoaXMuY2VudGVyLnggLSB0aGlzLndpZHRoIC8gMjtcclxuXHR2YXIgcmlnaHRCb3VuZCA9IHRoaXMuY2VudGVyLnggKyB0aGlzLndpZHRoIC8gMjtcclxuXHR2YXIgdXBwZXJCb3VuZCA9IHRoaXMuY2VudGVyLnkgLSB0aGlzLmhlaWdodCAvIDI7XHJcblx0dmFyIGxvd2VyQm91bmQgPSB0aGlzLmNlbnRlci55ICsgdGhpcy5oZWlnaHQgLyAyO1xyXG5cclxuXHR2YXIgbXlCRyA9IHRoaXMuYmFja2dyb3VuZFxyXG5cdC8vIGNvbnNvbGUubG9nKG15QkcudHlwZSwgbXlCRy5pbmNvbWVMZXZlbCwgbGVmdEJvdW5kLCByaWdodEJvdW5kLCB1cHBlckJvdW5kLCBsb3dlckJvdW5kKVxyXG5cclxuXHRmb3IgKHZhciBtZW1iZXIgaW4gdGhpcy5tZW1iZXJzKSB7XHJcblx0XHRtZW1iZXIgPSB0aGlzLm1lbWJlcnNbbWVtYmVyXTtcclxuXHRcdGlmIChtZW1iZXIuY2VudGVyLnggLSB0aGlzLm1hcmdpbiA8PSBsZWZ0Qm91bmQgfHwgbWVtYmVyLmNlbnRlci54ICsgdGhpcy5tYXJnaW4gPj0gcmlnaHRCb3VuZCB8fCBtZW1iZXIuY2VudGVyLnkgLSB0aGlzLm1hcmdpbiA8PSB1cHBlckJvdW5kIHx8IG1lbWJlci5jZW50ZXIueSArIHRoaXMubWFyZ2luID49IGxvd2VyQm91bmQpIHtcclxuXHRcdFx0Y29uc29sZS5sb2coJ3BlcnNvbicsIG1lbWJlci5jZW50ZXIsIGxlZnRCb3VuZCwgcmlnaHRCb3VuZCwgdXBwZXJCb3VuZCwgbG93ZXJCb3VuZCk7XHJcblx0XHRcdGNvbnNvbGUubG9nKCdncm91cCBtYW5hZ2VyJywgdGhpcy5jZW50ZXIsIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KTtcclxuXHRcdFx0bWVtYmVyLmNlbnRlci54ID0gdGhpcy5jZW50ZXIueCAtIHRoaXMud2lkdGggLyAyICsgdGhpcy5tYXJnaW4gKyAodGhpcy53aWR0aCAtIHRoaXMubWFyZ2luICogMikgKiBNYXRoLnJhbmRvbSgpO1xyXG5cdFx0XHRtZW1iZXIuY2VudGVyLnkgPSB0aGlzLmNlbnRlci55IC0gdGhpcy5oZWlnaHQgLyAyICsgdGhpcy5tYXJnaW4gKyAodGhpcy5oZWlnaHQgLSB0aGlzLm1hcmdpbiAqIDIpICogTWF0aC5yYW5kb20oKTtcclxuXHRcdH1cclxuXHR9XHJcbn07XHJcbkdyb3VwTWFuYWdlci5wcm90b3R5cGUudHJhbnNmZXIgPSBmdW5jdGlvbihvdGhlckdNLCBteU1lbWJlcikge1xyXG5cdC8vIHZhciB0ZXN0VmFscyA9IG90aGVyR00uYmFja2dyb3VuZC5nZXRWYXJzQ2VudGVyKCk7XHJcblx0Ly8gY29uc29sZS5sb2coJ3RyYW5zZmVyIHRvJywgb3RoZXJHTS5iYWNrZ3JvdW5kLnR5cGUsIG90aGVyR00uYmFja2dyb3VuZC5pbmNvbWVMZXZlbCwgdGVzdFZhbHMuY2VudGVyLnksIHRlc3RWYWxzLnksIHRlc3RWYWxzLnZpc0hlaWdodCwgdGVzdFZhbHMudlJhdGlvKTtcclxuXHR2YXIgaW5kZXggPSB0aGlzLm1lbWJlcnMuaW5kZXhPZihteU1lbWJlcik7XHJcblx0dGhpcy5tZW1iZXJzLnNwbGljZShpbmRleCwgMSk7XHJcblx0b3RoZXJHTS5hZGRNZW1iZXIobXlNZW1iZXIpO1xyXG59O1xyXG5Hcm91cE1hbmFnZXIucHJvdG90eXBlLnRyYW5zZmVyUGVvcGxlID0gZnVuY3Rpb24oc291cmNlLCBkZXN0aW5hdGlvbiwgdFBlcnNvbikge1xyXG5cdHZhciBpbmRleCA9IHNvdXJjZS5tZW1iZXJzLmluZGV4T2YodFBlcnNvbik7XHJcblx0c291cmNlLm1lbWJlcnMuc3BsaWNlKGluZGV4LCAxKTtcclxuXHRkZXN0aW5hdGlvbi5hZGRNZW1iZXIodFBlcnNvbik7XHJcbn07XHJcbkdyb3VwTWFuYWdlci5wcm90b3R5cGUuYWRkTWVtYmVyID0gZnVuY3Rpb24obWVtYmVyKSB7XHJcblx0dGhpcy5tZW1iZXJzLnB1c2gobWVtYmVyKTtcclxuXHRtZW1iZXIubXlNYW5hZ2VyID0gdGhpcztcclxuXHRtZW1iZXIuY2VudGVyLnggPSB0aGlzLmNlbnRlci54IC0gdGhpcy53aWR0aCAvIDIgKyB0aGlzLm1hcmdpbiArICh0aGlzLndpZHRoIC0gdGhpcy5tYXJnaW4gKiAyKSAqIE1hdGgucmFuZG9tKCk7XHJcblx0bWVtYmVyLmNlbnRlci55ID0gdGhpcy5jZW50ZXIueSAtIHRoaXMuaGVpZ2h0IC8gMiArIHRoaXMubWFyZ2luICsgKHRoaXMuaGVpZ2h0IC0gdGhpcy5tYXJnaW4gKiAyKSAqIE1hdGgucmFuZG9tKCk7XHJcbn07XHJcbkdyb3VwTWFuYWdlci5wcm90b3R5cGUuYWRkUGVyc29uID0gZnVuY3Rpb24obmV3UGVyc29uKSB7XHJcblx0aWYgKHRoaXMubWVtYmVycy5sZW5ndGggPT0gMCkge1xyXG5cdFx0Ly8gY29uc29sZS5sb2codGhpcy5jZW50ZXIpO1xyXG5cdFx0dGhpcy5hZGRNZW1iZXIobmV3IEdyb3VwKHRoaXMuZ2FtZSwgdGhpcy5jZW50ZXIueCwgdGhpcy5jZW50ZXIueSwgdGhpcy5zdGF0ZSksIHRydWUpO1xyXG5cdFx0Ly8gY29uc29sZS5sb2coJ25ldyBncm91cCcpO1xyXG5cdH1cclxuXHR0aGlzLm1lbWJlcnNbMF0uYWRkTWVtYmVyKG5ld1BlcnNvbik7XHJcbn07XHJcbkdyb3VwTWFuYWdlci5wcm90b3R5cGUubnVtUGVvcGxlID0gZnVuY3Rpb24oKSB7XHJcblx0dmFyIGNvdW50ID0gMDtcclxuXHRmb3IgKHZhciBtZW1iZXIgaW4gdGhpcy5tZW1iZXJzKSB7XHJcblx0XHRtZW1iZXIgPSB0aGlzLm1lbWJlcnNbbWVtYmVyXTtcclxuXHRcdGNvdW50ICs9IG1lbWJlci5udW1QZW9wbGUoKTtcclxuXHR9XHJcblx0cmV0dXJuIGNvdW50O1xyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBHcm91cE1hbmFnZXI7XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuIiwidmFyIEhvdmVyTWVudSA9IGZ1bmN0aW9uIChnYW1lLCB4LCB5LCBzdGF0ZSkge1xyXG5cdFBoYXNlci5TcHJpdGUuY2FsbCh0aGlzLCBnYW1lLCB4LCB5LCAnYm9yZGVyZWQnKTtcclxuXHRnYW1lLmFkZC5leGlzdGluZyh0aGlzKTtcclxuXHR0aGlzLnggPSB4O1xyXG5cdHRoaXMueSA9IHk7XHJcbiAgICB0aGlzLmdyb3VwU2VsZWN0ZWQgPSBudWxsO1xyXG5cdHRoaXMud2lkdGggPSAyNTY7XHJcblx0dGhpcy5oZWlnaHQgPSAxMjg7XHJcbiAgICB0aGlzLnN0YXRpY1dpZHRoID0gMjU2O1xyXG4gICAgdGhpcy5zdGF0aWNIZWlnaHQgPSAxMjg7XHJcbiAgICB0aGlzLmNoYW5nZVdpZHRoID0gMjI0O1xyXG4gICAgdGhpcy5jaGFuZ2VIZWlnaHQgPSA2NDtcclxuICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcclxuXHRcclxuXHR0aGlzLnN0YXRpY1RleHQgPSB0aGlzLmdhbWUuYWRkLmdyb3VwKCk7XHJcblx0dGhpcy5jaGFuZ2VUZXh0ID0gdGhpcy5nYW1lLmFkZC5ncm91cCgpO1xyXG4gICAgdGhpcy52aXNpYmxlID0gZmFsc2U7XHJcblxyXG4gICAgdGhpcy5jaGV2cm9uID0gdGhpcy5nYW1lLmFkZC5zcHJpdGUodGhpcy54LCB0aGlzLnksICdjaGV2cm9ucycpO1xyXG4gICAgdGhpcy5jaGV2cm9uLmFuY2hvci5zZXRUbygwLjUsIDAuNSk7XHJcbiAgICB0aGlzLmNoZXZyb24ud2lkdGggPSA1MDtcclxuICAgIHRoaXMuY2hldnJvbi5oZWlnaHQgPSA1MDtcclxuICAgIHRoaXMuY2hldnJvbi55IC09IHRoaXMuaGVpZ2h0O1xyXG4gICAgdGhpcy5jaGV2cm9uLnggKz0gMjU7XHJcbiAgICBcclxuICAgIC8vIHRoaXMuc3RhdGUuaW5wdXQuYWRkTW92ZUNhbGxiYWNrKHRoaXMub25JbnB1dE1vdmUsIHRoaXMpO1xyXG5cdFxyXG5cdHRoaXMucGVvcGxlID0gdGhpcy5nYW1lLmFkZC50ZXh0KDEwLCAxMCwgJ1Blb3BsZTogMCcpO1xyXG5cdHRoaXMucGVvcGxlLmZvbnQgPSAnUm9ib3RvJztcclxuXHR0aGlzLnBlb3BsZS5mb250U2l6ZSA9IDE4O1xyXG5cdHRoaXMucGVvcGxlLmZpbGwgPSAnIzAwMDAwMCc7XHJcblx0XHJcblx0dGhpcy5lZHVjYXRpb24gPSB0aGlzLmdhbWUuYWRkLnRleHQoMTAsIDEwLCAnRWR1Y2F0aW9uOiBMb3cnKTtcclxuXHR0aGlzLmVkdWNhdGlvbi5mb250ID0gJ1JvYm90byc7XHJcblx0dGhpcy5lZHVjYXRpb24uZm9udFNpemUgPSAxODtcclxuXHR0aGlzLmVkdWNhdGlvbi5maWxsID0gJyMwMDAwMDAnO1xyXG5cdFxyXG5cdHRoaXMuaGFwcGluZXNzID0gdGhpcy5nYW1lLmFkZC50ZXh0KDEwLCAxMCwgJ0hhcHBpbmVzczogJTEwMCcpO1xyXG5cdHRoaXMuaGFwcGluZXNzLmZvbnQgPSAnUm9ib3RvJztcclxuXHR0aGlzLmhhcHBpbmVzcy5mb250U2l6ZSA9IDE4O1xyXG5cdHRoaXMuaGFwcGluZXNzLmZpbGwgPSAnIzAwMDAwMCc7XHJcblx0XHJcblx0dGhpcy5mYXRpZ3VlID0gdGhpcy5nYW1lLmFkZC50ZXh0KDEwLCAxMCwgJ0ZhdGlndWU6ICUwJyk7XHJcblx0dGhpcy5mYXRpZ3VlLmZvbnQgPSAnUm9ib3RvJztcclxuXHR0aGlzLmZhdGlndWUuZm9udFNpemUgPSAxODtcclxuXHR0aGlzLmZhdGlndWUuZmlsbCA9ICcjMDAwMDAwJztcclxuXHRcclxuICAgIHRoaXMuaW5jb21lID0gdGhpcy5nYW1lLmFkZC50ZXh0KDEwLCAxMCwgJ0luY29tZTogJDAnKTtcclxuXHR0aGlzLmluY29tZS5mb250ID0gJ1JvYm90byc7XHJcblx0dGhpcy5pbmNvbWUuZm9udFNpemUgPSAxODtcclxuXHR0aGlzLmluY29tZS5maWxsID0gJyMwMDAwMDAnO1xyXG4gICAgXHJcblx0dGhpcy5zdGF0aWNUZXh0LmFkZCh0aGlzLnBlb3BsZSk7XHJcblx0dGhpcy5zdGF0aWNUZXh0LmFkZCh0aGlzLmVkdWNhdGlvbik7XHJcbiAgICB0aGlzLmVkdWNhdGlvbi55ICs9IDIyICogMTtcclxuXHR0aGlzLnN0YXRpY1RleHQuYWRkKHRoaXMuaGFwcGluZXNzKTtcclxuICAgIHRoaXMuaGFwcGluZXNzLnkgKz0gMjIgKiAyO1xyXG5cdHRoaXMuc3RhdGljVGV4dC5hZGQodGhpcy5mYXRpZ3VlKTtcclxuICAgIHRoaXMuZmF0aWd1ZS55ICs9IDIyICogMztcclxuXHR0aGlzLnN0YXRpY1RleHQuYWRkKHRoaXMuaW5jb21lKTtcclxuICAgIHRoaXMuaW5jb21lLnkgKz0gMjIgKiA0O1xyXG4gICAgdGhpcy5zdGF0aWNUZXh0LmFkZCh0aGlzLmNoZXZyb24pO1xyXG4gICAgdGhpcy5zdGF0aWNUZXh0LnZpc2libGUgPSBmYWxzZTtcclxuICAgIHRoaXMuc3RhdGljVGV4dC54ID0gdGhpcy54O1xyXG4gICAgdGhpcy5zdGF0aWNUZXh0LnkgPSB0aGlzLnk7XHJcblx0XHJcblx0dGhpcy5oYXBwaW5lc3NDaGFuZ2UgPSB0aGlzLmdhbWUuYWRkLnRleHQoMTAsIDEwLCAnSGFwcGluZXNzID0nKTtcclxuXHR0aGlzLmhhcHBpbmVzc0NoYW5nZS5mb250ID0gJ1JvYm90byc7XHJcblx0dGhpcy5oYXBwaW5lc3NDaGFuZ2UuZm9udFNpemUgPSAxODtcclxuXHR0aGlzLmhhcHBpbmVzc0NoYW5nZS5maWxsID0gJyMwMDAwMDAnO1xyXG5cdFxyXG5cdHRoaXMuaW5jb21lQ2hhbmdlID0gdGhpcy5nYW1lLmFkZC50ZXh0KDEwLCAxMCwgJ0luY29tZSA9Jyk7XHJcblx0dGhpcy5pbmNvbWVDaGFuZ2UuZm9udCA9ICdSb2JvdG8nO1xyXG5cdHRoaXMuaW5jb21lQ2hhbmdlLmZvbnRTaXplID0gMTg7XHJcblx0dGhpcy5pbmNvbWVDaGFuZ2UuZmlsbCA9ICcjMDAwMDAwJztcclxuICAgIFxyXG4gICAgdGhpcy5jaGFuZ2VUZXh0LmFkZCh0aGlzLmhhcHBpbmVzc0NoYW5nZSk7XHJcbiAgICB0aGlzLmNoYW5nZVRleHQuYWRkKHRoaXMuaW5jb21lQ2hhbmdlKTtcclxuICAgIHRoaXMuaW5jb21lQ2hhbmdlLnkgKz0gMjIgKiAxO1xyXG4gICAgdGhpcy5jaGFuZ2VUZXh0LnZpc2libGUgPSBmYWxzZTtcclxuICAgIHRoaXMuY2hhbmdlVGV4dC54ID0gdGhpcy54O1xyXG4gICAgdGhpcy5jaGFuZ2VUZXh0LnkgPSB0aGlzLnk7XHJcbn07XHJcbkhvdmVyTWVudS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFBoYXNlci5TcHJpdGUucHJvdG90eXBlKTtcclxuSG92ZXJNZW51LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEhvdmVyTWVudTtcclxuSG92ZXJNZW51LnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbigpIHtcclxuXHRcclxufTtcclxuLy9wZW9wbGUsIGVkdWNhdGlvbiwgaGFwcGluZXNzLCBmYXRpZ3VlLCBpbmNvbWVcclxuSG92ZXJNZW51LnByb3RvdHlwZS5zaG93U3RhdGljID0gZnVuY3Rpb24oc3RhdGUsIHgsIHksIG92ZXIpIHtcclxuICAgIC8vIGNvbnNvbGUubG9nKCdzdGF0aWMnKTtcclxuICAgIHggLT0gdGhpcy53aWR0aCAvIDI7XHJcbiAgICB5IC09IHRoaXMuaGVpZ2h0O1xyXG5cdHRoaXMucGVvcGxlLnRleHQgPSAnUGVvcGxlOiAnICsgc3RhdGUucGVvcGxlO1xyXG4gICAgdGhpcy5lZHVjYXRpb24udGV4dCA9ICdFZHVjYXRpb246ICcgKyBzdGF0ZS5lZHVjYXRpb247XHJcbiAgICB0aGlzLmhhcHBpbmVzcy50ZXh0ID0gJ0hhcHBpbmVzczogJScgKyBzdGF0ZS5oYXBwaW5lc3M7XHJcbiAgICB0aGlzLmZhdGlndWUudGV4dCA9ICdGYXRpZ3VlOiAlJyArIHN0YXRlLmZhdGlndWU7XHJcbiAgICB0aGlzLmluY29tZS50ZXh0ID0gJ0luY29tZTogJCcgKyBzdGF0ZS5pbmNvbWU7XHJcbiAgICB2YXIgaGFwcGluZXNzTW9kaWZpZXIgPSBzdGF0ZS5oYXBwaW5lc3NNb2RpZmllcjtcclxuICAgIGlmIChoYXBwaW5lc3NNb2RpZmllciA9PSAtMykge1xyXG4gICAgICAgIHRoaXMuY2hldnJvbi5mcmFtZSA9IDI7XHJcbiAgICB9IGVsc2UgaWYgKGhhcHBpbmVzc01vZGlmaWVyID09IC0yKSB7XHJcbiAgICAgICAgdGhpcy5jaGV2cm9uLmZyYW1lID0gMTtcclxuICAgIH0gZWxzZSBpZiAoaGFwcGluZXNzTW9kaWZpZXIgPT0gLTEpIHtcclxuICAgICAgICB0aGlzLmNoZXZyb24uZnJhbWUgPSAwO1xyXG4gICAgfSBlbHNlIGlmIChoYXBwaW5lc3NNb2RpZmllciA9PSAwKSB7XHJcbiAgICAgICAgdGhpcy5jaGV2cm9uLmZyYW1lID0gMztcclxuICAgIH0gZWxzZSBpZiAoaGFwcGluZXNzTW9kaWZpZXIgPT0gMSkge1xyXG4gICAgICAgIHRoaXMuY2hldnJvbi5mcmFtZSA9IDQ7XHJcbiAgICB9IGVsc2UgaWYgKGhhcHBpbmVzc01vZGlmaWVyID09IDIpIHtcclxuICAgICAgICB0aGlzLmNoZXZyb24uZnJhbWUgPSA1O1xyXG4gICAgfSBlbHNlIGlmIChoYXBwaW5lc3NNb2RpZmllciA9PSAzKSB7XHJcbiAgICAgICAgdGhpcy5jaGV2cm9uLmZyYW1lID0gNjtcclxuICAgIH1cclxuICAgIHRoaXMuc3RhdGljVGV4dC52aXNpYmxlID0gdHJ1ZTtcclxuICAgIHRoaXMudmlzaWJsZSA9IHRydWU7XHJcbiAgICB0aGlzLndpZHRoID0gdGhpcy5zdGF0aWNXaWR0aDtcclxuICAgIHRoaXMuaGVpZ2h0ID0gdGhpcy5zdGF0aWNIZWlnaHQ7XHJcbiAgICB0aGlzLnggPSB4O1xyXG4gICAgdGhpcy55ID0geTtcclxuICAgIHRoaXMuc3RhdGljVGV4dC54ID0geDtcclxuICAgIHRoaXMuc3RhdGljVGV4dC55ID0geTtcclxuICAgIHRoaXMuYWRqdXN0U3RhdGljKG92ZXIpO1xyXG59O1xyXG4vL2hhcHBpbmVzc0NoYW5nZSwgaW5jb21lQ2hhbmdlXHJcbkhvdmVyTWVudS5wcm90b3R5cGUuc2hvd0NoYW5nZSA9IGZ1bmN0aW9uKGNhbiwgc3RhdGUsIHgsIHkpIHtcclxuICAgIGlmICghY2FuKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cdHRoaXMuaGFwcGluZXNzQ2hhbmdlLnRleHQgPSAnSGFwcGluZXNzIGNoYW5nZTogJyArIHN0YXRlLmhhcHBpbmVzc0NoYW5nZTtcclxuICAgIHRoaXMuaW5jb21lQ2hhbmdlLnRleHQgPSAnSW5jb21lIGNoYW5nZTogJyArIHN0YXRlLmluY29tZUNoYW5nZTtcclxuICAgIHRoaXMuY2hhbmdlVGV4dC52aXNpYmxlID0gdHJ1ZTtcclxuICAgIHRoaXMudmlzaWJsZSA9IHRydWU7XHJcbiAgICB0aGlzLndpZHRoID0gdGhpcy5jaGFuZ2VXaWR0aDtcclxuICAgIHRoaXMuaGVpZ2h0ID0gdGhpcy5jaGFuZ2VIZWlnaHQ7XHJcbiAgICB5IC09IHRoaXMuaGVpZ2h0O1xyXG4gICAgdGhpcy54ID0geDtcclxuICAgIHRoaXMueSA9IHk7XHJcbiAgICB0aGlzLmNoYW5nZVRleHQueCA9IHg7XHJcbiAgICB0aGlzLmNoYW5nZVRleHQueSA9IHk7XHJcbiAgICB0aGlzLmFkanVzdENoYW5nZSgpO1xyXG59O1xyXG5Ib3Zlck1lbnUucHJvdG90eXBlLmFkanVzdFN0YXRpYyA9IGZ1bmN0aW9uKG92ZXIpIHtcclxuICAgIHZhciBtYXhXaWR0aCA9IHRoaXMuZ2FtZS53aWR0aDtcclxuICAgIHZhciBtYXhIZWlnaHQgPSB0aGlzLmdhbWUuaGVpZ2h0O1xyXG4gICAgaWYgKHRoaXMueSAtIHRoaXMuaGVpZ2h0IDw9IDApIHsgLy8gb3ZlciB0b3Agb2Ygc2NyZWVuXHJcbiAgICAgICAgdGhpcy55ICs9IG92ZXI7XHJcbiAgICAgICAgdGhpcy55ICs9IHRoaXMuaGVpZ2h0O1xyXG4gICAgICAgIHRoaXMuc3RhdGljVGV4dC55ID0gdGhpcy55O1xyXG4gICAgICAgIHRoaXMuY2hhbmdlVGV4dC55ID0gdGhpcy55O1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMueCAtIHRoaXMud2lkdGggLyAyIDwgMCkgeyAvLyBvdmVyIGxlZnQgb2Ygc2NyZWVuXHJcbiAgICAgICAgdGhpcy54ICs9IHRoaXMud2lkdGggLyAyO1xyXG4gICAgICAgIHRoaXMuc3RhdGljVGV4dC54ID0gdGhpcy54O1xyXG4gICAgICAgIHRoaXMuY2hhbmdlVGV4dC54ID0gdGhpcy54O1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLnggKyB0aGlzLndpZHRoIC8gMiA+IG1heFdpZHRoKSB7IC8vIG92ZXIgcmlnaHQgb2Ygc2NyZWVuXHJcbiAgICAgICAgdGhpcy54IC09IHRoaXMud2lkdGggLyAyO1xyXG4gICAgICAgIHRoaXMuc3RhdGljVGV4dC54ID0gdGhpcy54O1xyXG4gICAgICAgIHRoaXMuY2hhbmdlVGV4dC54ID0gdGhpcy54O1xyXG4gICAgfVxyXG59O1xyXG5Ib3Zlck1lbnUucHJvdG90eXBlLmFkanVzdENoYW5nZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIG1heFdpZHRoID0gdGhpcy5nYW1lLndpZHRoO1xyXG4gICAgdmFyIG1heEhlaWdodCA9IHRoaXMuZ2FtZS5oZWlnaHQ7XHJcbiAgICBpZiAodGhpcy55IC0gdGhpcy5oZWlnaHQgPD0gMCkgeyAvLyBvdmVyIHRvcCBvZiBzY3JlZW5cclxuICAgICAgICB0aGlzLnkgKz0gdGhpcy5oZWlnaHQ7XHJcbiAgICAgICAgdGhpcy5zdGF0aWNUZXh0LnkgPSB0aGlzLnk7XHJcbiAgICAgICAgdGhpcy5jaGFuZ2VUZXh0LnkgPSB0aGlzLnk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy54ICsgdGhpcy53aWR0aCA+IG1heFdpZHRoKSB7IC8vIG92ZXIgcmlnaHQgb2Ygc2NyZWVuXHJcbiAgICAgICAgdGhpcy54IC09IHRoaXMud2lkdGg7XHJcbiAgICAgICAgdGhpcy5zdGF0aWNUZXh0LnggPSB0aGlzLng7XHJcbiAgICAgICAgdGhpcy5jaGFuZ2VUZXh0LnggPSB0aGlzLng7XHJcbiAgICB9XHJcbn07XHJcbkhvdmVyTWVudS5wcm90b3R5cGUuaGlkZSA9IGZ1bmN0aW9uKCkge1xyXG5cdHRoaXMuc3RhdGljVGV4dC52aXNpYmxlID0gZmFsc2U7XHJcbiAgICB0aGlzLmNoYW5nZVRleHQudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgdGhpcy52aXNpYmxlID0gZmFsc2U7XHJcbn07XHJcbi8vIEhvdmVyTWVudS5wcm90b3R5cGUub25JbnB1dE1vdmUgPSBmdW5jdGlvbigpIHtcclxuICAvLyBjb25zb2xlLmxvZygnbW92ZScpO1xyXG4gIFxyXG4vLyB9O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBIb3Zlck1lbnU7XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbiIsInZhciBQZXJzb24gPSBmdW5jdGlvbiAoZ2FtZSwgeCwgeSwgaWQpIHtcclxuXHRQaGFzZXIuU3ByaXRlLmNhbGwodGhpcywgZ2FtZSwgeCwgeSwgJ2FnZXMnKTtcclxuXHR0aGlzLmZyYW1lID0gMjtcclxuXHR0aGlzLnZlbG9jaXR5ID0ge3g6MCwgeTowfTtcclxuXHR0aGlzLndpZHRoID0gMTA7XHJcblx0dGhpcy5oZWlnaHQgPSAxMDtcclxuXHR0aGlzLnNwZWVkID0gLjA1O1xyXG5cdHRoaXMuaWQgPSBpZDtcclxuXHR0aGlzLmVkdUxldmVsID0gUGVyc29uLkVEVUxFVkVMLnVuZW1wbG95ZWQ7XHJcblx0dGhpcy5oYXBwaW5lc3MgPSAxMDA7XHJcbiAgICB0aGlzLmZhdGlndWUgPSAwO1xyXG4gICAgdGhpcy5oYXBwaW5lc3NNb2RpZmllciA9IDA7XHJcbiAgICB0aGlzLmFnZSA9IFBlcnNvbi5BR0UueW91bmc7XHJcbiAgICB0aGlzLnR1cm5Db3VudCA9IDA7XHJcbiAgICB0aGlzLmFnZVRocmVzaG9sZCA9IDU7XHJcbn07XHJcblBlcnNvbi5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFBoYXNlci5TcHJpdGUucHJvdG90eXBlKTtcclxuUGVyc29uLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFBlcnNvbjtcclxuXHJcblBlcnNvbi5FRFVMRVZFTCA9IHtcclxuXHR1bmVtcGxveWVkIDogLTEsXHJcblx0bG93ICA6IDAsXHJcblx0bWlkICA6IDEsXHJcblx0aGlnaCA6IDJcclxufTtcclxuXHJcblBlcnNvbi5JTkNPTUVTID0ge1xyXG5cdGxvdyA6IDEwLFxyXG5cdG1pZCA6IDIwLFxyXG5cdGhpZ2ggOiAzMFxyXG59O1xyXG5cclxuUGVyc29uLkFHRSA9IHtcclxuXHR5b3VuZyA6IDAsXHJcblx0YWR1bHQgOiAxLFxyXG5cdG9sZCA6IDJcclxufTtcclxuXHJcblBlcnNvbi5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24oKSB7XHJcblx0dGhpcy54ICs9IHRoaXMudmVsb2NpdHkueCAqIHRoaXMuc3BlZWQ7XHJcblx0dGhpcy55ICs9IHRoaXMudmVsb2NpdHkueSAqIHRoaXMuc3BlZWQ7XHJcblx0Ly9jb25zb2xlLmxvZyh0aGlzLnZlbG9jaXR5KTtcclxufTtcclxuXHJcblBlcnNvbi5wcm90b3R5cGUuYWdlVGljayA9IGZ1bmN0aW9uKCkge1xyXG5cdC8vIHRoaXMudHVybkNvdW50ICs9IDE7XHJcblx0Ly8gaWYgKHRoaXMudHVybkNvdW50ID49IHRoaXMuYWdlVGhyZXNob2xkKSB7XHJcblx0Ly8gXHQvLyBjb25zb2xlLmxvZygnaGFwcHkgYmlydGhkYXknKTtcclxuXHQvLyBcdGlmICh0aGlzLmFnZSA9PSAwKSB7XHJcblx0Ly8gXHRcdHRoaXMuYWdlID0gUGVyc29uLkFHRS5hZHVsdDtcclxuXHQvLyBcdFx0dGhpcy5mcmFtZSA9IDM7XHJcblx0Ly8gXHR9IGVsc2UgaWYgKHRoaXMuYWdlID09IDEpIHtcclxuXHQvLyBcdFx0dGhpcy5hZ2UgPSBQZXJzb24uQUdFLm9sZDtcclxuXHQvLyBcdFx0dGhpcy5mcmFtZSA9IDE7XHJcblx0Ly8gXHR9IGVsc2UgaWYgKHRoaXMuYWdlID09IDIpIHtcclxuXHJcblx0Ly8gXHR9XHJcblx0Ly8gfVxyXG59O1xyXG5cclxuUGVyc29uLnByb3RvdHlwZS5nZXRUYXggPSBmdW5jdGlvbigpIHtcclxuXHQvLyBjb25zb2xlLmxvZygnZ2V0IHRheCcsIHRoaXMuZ3JvdXAubXlNYW5hZ2VyLmJhY2tncm91bmQudHlwZSk7XHJcblx0aWYgKHRoaXMuZ3JvdXAubXlNYW5hZ2VyLmJhY2tncm91bmQudHlwZSA9PT0gJ2hvdXNlJykge1xyXG5cdFx0aWYgKHRoaXMuZ3JvdXAubXlNYW5hZ2VyLmJhY2tncm91bmQuaW5jb21lTGV2ZWwgPT09IFBlcnNvbi5FRFVMRVZFTC5sb3cpIHtcclxuXHRcdFx0Ly8gY29uc29sZS5sb2codGhpcy5ncm91cC5teU1hbmFnZXIuYmFja2dyb3VuZC5teU1hbmFnZXIuc3RhdGUudGF4TW9kLmxvdyk7XHJcblx0XHRcdHJldHVybiAtMSAqIFBlcnNvbi5JTkNPTUVTLmxvdztcclxuXHRcdH0gZWxzZSBpZiAodGhpcy5ncm91cC5teU1hbmFnZXIuYmFja2dyb3VuZC5pbmNvbWVMZXZlbCA9PT0gUGVyc29uLkVEVUxFVkVMLm1pZCkge1xyXG5cdFx0XHRyZXR1cm4gLTIgKiBQZXJzb24uSU5DT01FUy5taWQ7XHJcblx0XHR9IGVsc2UgaWYgKHRoaXMuZ3JvdXAubXlNYW5hZ2VyLmJhY2tncm91bmQuaW5jb21lTGV2ZWwgPT09IFBlcnNvbi5FRFVMRVZFTC5oaWdoKSB7XHJcblx0XHRcdHJldHVybiAtMyAqIFBlcnNvbi5JTkNPTUVTLmhpZ2g7XHJcblx0XHR9XHJcblx0fSBlbHNlIGlmICh0aGlzLmdyb3VwLm15TWFuYWdlci5iYWNrZ3JvdW5kLnR5cGUgPT09ICd3b3JrJykge1xyXG5cdFx0aWYgKHRoaXMuZ3JvdXAubXlNYW5hZ2VyLmJhY2tncm91bmQuaW5jb21lTGV2ZWwgPT09IFBlcnNvbi5FRFVMRVZFTC5sb3cpIHtcclxuXHRcdFx0cmV0dXJuIFBlcnNvbi5JTkNPTUVTLmxvdyAqIHRoaXMuZ3JvdXAubXlNYW5hZ2VyLmJhY2tncm91bmQubXlNYW5hZ2VyLnN0YXRlLnRheE1vZC5sb3c7XHJcblx0XHR9IGVsc2UgaWYgKHRoaXMuZ3JvdXAubXlNYW5hZ2VyLmJhY2tncm91bmQuaW5jb21lTGV2ZWwgPT09IFBlcnNvbi5FRFVMRVZFTC5taWQpIHtcclxuXHRcdFx0cmV0dXJuIFBlcnNvbi5JTkNPTUVTLm1pZCAqIHRoaXMuZ3JvdXAubXlNYW5hZ2VyLmJhY2tncm91bmQubXlNYW5hZ2VyLnN0YXRlLnRheE1vZC5taWQ7XHJcblx0XHR9IGVsc2UgaWYgKHRoaXMuZ3JvdXAubXlNYW5hZ2VyLmJhY2tncm91bmQuaW5jb21lTGV2ZWwgPT09IFBlcnNvbi5FRFVMRVZFTC5oaWdoKSB7XHJcblx0XHRcdHJldHVybiBQZXJzb24uSU5DT01FUy5oaWdoICogdGhpcy5ncm91cC5teU1hbmFnZXIuYmFja2dyb3VuZC5teU1hbmFnZXIuc3RhdGUudGF4TW9kLmhpZ2g7XHJcblx0XHR9XHJcblx0fVxyXG5cdHJldHVybiAwO1xyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBQZXJzb247IiwidmFyIFBsYXllciA9IGZ1bmN0aW9uIChnYW1lLCB4LCB5KSB7XG4gICAgUGhhc2VyLlNwcml0ZS5jYWxsKHRoaXMsIGdhbWUsIHgsIHksICd0ZXN0c3ByaXRlJyk7XG4gICAgZ2FtZS5hZGQuZXhpc3RpbmcodGhpcyk7XG5cdHRoaXMuc3BlZWQgPSAwLjE7XG59XG5cblBsYXllci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFBoYXNlci5TcHJpdGUucHJvdG90eXBlKTtcblBsYXllci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBQbGF5ZXI7XG5cbi8qKlxuICogQXV0b21hdGljYWxseSBjYWxsZWQgYnkgV29ybGQudXBkYXRlXG4gKi9cblBsYXllci5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24oKSB7XG5cdC8vdGhpcy54ICs9IHRoaXMudmVsb2NpdHk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFBsYXllcjtcbiIsInZhciBQcm9ncmVzc0JhciA9IHJlcXVpcmUoJy4vUHJvZ3Jlc3NCYXInKTtcclxuXHJcbnZhciBVSUJ1aWxkZXIgPSBmdW5jdGlvbihzZXRHYW1lU3RhdGUpIHtcclxuXHQvL0Vuc3VyZSB0aGF0IGNhbm5vdCBjcmVhdGUgbXVsdGlwbGUgaW5zdGFuY2VzIG9mIHRoaXMgY2xhc3NcclxuXHRpZihVSUJ1aWxkZXIucHJvdG90eXBlLmV4aXN0cykge1xyXG5cdFx0cmV0dXJuIFVJQnVpbGRlci5wcm90b3R5cGUuZXhpc3RpbmdSZWZlcmVuY2U7XHJcblx0fVxyXG5cdFxyXG5cdHRoaXMuZ2FtZVN0YXRlID0gc2V0R2FtZVN0YXRlO1xyXG5cdHRoaXMucmVuZGVyYWJsZXMgPSBbXTtcclxuXHQvL0NyZWF0ZSBhbmQgc3RvcmUgYSBncmFwaGljcyBvYmplY3QgKHVzZWQgZm9yIHN0dWZmIGxpa2UgZHJhd2luZyByZWN0YW5nbGVzKVxyXG5cdFVJQnVpbGRlci5wcm90b3R5cGUuZXhpc3RzID0gdHJ1ZTtcclxuXHRVSUJ1aWxkZXIucHJvdG90eXBlLmV4aXN0aW5nUmVmZXJlbmNlID0gdGhpcztcclxufTtcclxuXHJcblVJQnVpbGRlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBVSUJ1aWxkZXI7XHJcbi8vVGhlc2UgdmFyJ3MgaGVscCBjcmVhdGUgdGhlIHNpbmdsZXRvbiBmdW5jdGlvbmFsaXR5XHJcblVJQnVpbGRlci5wcm90b3R5cGUuZXhpc3RzID0gZmFsc2U7XHJcblVJQnVpbGRlci5wcm90b3R5cGUuZXhpc3RpbmdSZWZlcmVuY2UgPSBudWxsO1xyXG5cclxuLy9Vc2UgdGhpcyBmdW5jdGlvbiB0byBjcmVhdGUgYSBwcm9ncmVzcyBiYXJcclxuLy9Vc2FnZTogdHlwZTogY2FuIGJlIFwiZ3Jvd2luZ1wiIG9yIFwic2hyaW5raW5nXCIsIHRoaXMgd2lsbCBlZmZlY3QgaWYgYmFyIHN0YXJ0cyBhdCAwIGFuZCBnb2VzIHVwIG9yIHZpcyB2ZXJzYVxyXG4vL1x0XHQgbWF4VmFsdWU6IHNldHMgdGhlIG1heCB2YWx1ZSBvZiB0aGUgcHJvZ3Jlc3MgYmFyLCBpLmUuIHVzaW5nIDEwMCBjcmVhdGVzIGEgYmFyIGZyb20gMCB0byAxMDBcclxuLy9cdFx0IHgseTogc2V0cyBsb2NhdGlvblxyXG4vL1x0XHQgRE9OJ1QgRk9SR0VUIHRvIG92ZXJ3cml0ZSB0aGUgb25FdmVudCgpIGZ1bmN0aW9uIGZvciB0aGUgcHJvZ3Jlc3MgYmFyIGFmdGVyIGNyZWF0aW5nIGl0XHJcbi8vXHRcdFx0LW9uRXZlbnQoKSBpcyBhdXRvbWF0aWNhbGx5IGNhbGxlZCB3aGVuIGJhciBmaWxscy9zaHJpbmtzIHBhc3QgbGltaXQgKGRlcGVuZGluZyBvbiBiYXIgdHlwZSlcclxuVUlCdWlsZGVyLnByb3RvdHlwZS5idWlsZFByb2dyZXNzQmFyID0gZnVuY3Rpb24odHlwZSwgeCwgeSwgd2lkdGgsIGhlaWdodCwgbWF4VmFsdWUpIHtcclxuXHQvL2NyZWF0ZSBhbmQgZm9ybWF0IG5ldyBwcm9nIGJhclxyXG5cdHZhciBncmFwaGljcyA9IHRoaXMuZ2FtZVN0YXRlLmdhbWUuYWRkLmdyYXBoaWNzKDAsMCk7XHJcblx0dmFyIG5ld1Byb2dCYXIgPSBuZXcgUHJvZ3Jlc3NCYXIodHlwZSwgbWF4VmFsdWUsIGdyYXBoaWNzLCB0aGlzLnJlbmRlcmFibGVzKTtcclxuXHRuZXdQcm9nQmFyLnNldExvY2F0aW9uKHgseSk7XHJcblx0bmV3UHJvZ0Jhci5zZXRTaXplKHdpZHRoLCBoZWlnaHQpO1xyXG5cdC8vc3Vic2NyaWJlIHRvICdyZW5kZXJhYmxlcycgc28gdGhhdCByZW5kZXIoKSBpcyBjYWxsZWQgYXV0b21hdGljYWxseVxyXG5cdC8vIHRoaXMucmVuZGVyYWJsZXMuc3Vic2NyaWJlKG5ld1Byb2dCYXIpO1xyXG5cdHRoaXMucmVuZGVyYWJsZXMucHVzaChuZXdQcm9nQmFyKTtcclxuXHRyZXR1cm4gbmV3UHJvZ0JhcjtcclxufTtcclxuVUlCdWlsZGVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbigpIHtcclxuXHRmb3IgKHJlbmRlcmFibGUgaW4gdGhpcy5yZW5kZXJhYmxlcykge1xyXG5cdFx0dGhpcy5yZW5kZXJhYmxlc1tyZW5kZXJhYmxlXS5yZW5kZXIoKTtcclxuXHR9XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFVJQnVpbGRlcjsiLCIndXNlIHN0cmljdCc7XHJcblxyXG52YXIgZ2FtZSA9IG5ldyBQaGFzZXIuR2FtZSg4MDAsIDYwMCwgUGhhc2VyLkFVVE8sICctZ2FtZScpO1xyXG5cclxud2luZG93LlV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xyXG53aW5kb3cucGxheWVyU3RhdGUgPSB7XHJcbiAgICBjdXJyZW50TGV2ZWw6ICdHYW1lJ1xyXG59O1xyXG5cclxuXHJcbmdhbWUuc3RhdGUuYWRkKCdCb290JywgcmVxdWlyZSgnLi9zdGF0ZXMvYm9vdCcpKTtcclxuZ2FtZS5zdGF0ZS5hZGQoJ1NwbGFzaCcsIHJlcXVpcmUoJy4vc3RhdGVzL3NwbGFzaCcpKTtcclxuZ2FtZS5zdGF0ZS5hZGQoJ1ByZWxvYWRlcicsIHJlcXVpcmUoJy4vc3RhdGVzL3ByZWxvYWRlcicpKTtcclxuZ2FtZS5zdGF0ZS5hZGQoJ01lbnUnLCByZXF1aXJlKCcuL3N0YXRlcy9tZW51JykpO1xyXG5nYW1lLnN0YXRlLmFkZCgnR2FtZScsIHJlcXVpcmUoJy4vc3RhdGVzL2dhbWUnKSk7XHJcbmdhbWUuc3RhdGUuYWRkKCdHYW1lX092ZXInLCByZXF1aXJlKCcuL3N0YXRlcy9nYW1lX292ZXInKSk7XHJcblxyXG5nYW1lLnN0YXRlLnN0YXJ0KCdCb290Jyk7XHJcblxyXG4vL2dhbWUuc3RhZ2UuYmFja2dyb3VuZENvbG9yID0gXCIjZmZmZmZmXCI7XHJcbiIsInZhciBCb290ID0gZnVuY3Rpb24gKCkge307XG5cbm1vZHVsZS5leHBvcnRzID0gQm9vdDtcblxuQm9vdC5wcm90b3R5cGUgPSB7XG5cbiAgcHJlbG9hZDogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMubG9hZC5pbWFnZSgncHJlbG9hZGVyJywgJ2Fzc2V0cy9wcmVsb2FkZXIuZ2lmJyk7XG4gIH0sXG5cbiAgY3JlYXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5nYW1lLmlucHV0Lm1heFBvaW50ZXJzID0gMTtcblxuICAgIGlmICh0aGlzLmdhbWUuZGV2aWNlLmRlc2t0b3ApIHtcbiAgICAgIHRoaXMuZ2FtZS5zdGFnZS5zY2FsZS5wYWdlQWxpZ25Ib3Jpem9udGFsbHkgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmdhbWUuc2NhbGUuc2NhbGVNb2RlID0gUGhhc2VyLlNjYWxlTWFuYWdlci5TSE9XX0FMTDtcbiAgICAgIHRoaXMuZ2FtZS5zY2FsZS5taW5XaWR0aCA9ICA0ODA7XG4gICAgICB0aGlzLmdhbWUuc2NhbGUubWluSGVpZ2h0ID0gMjYwO1xuICAgICAgdGhpcy5nYW1lLnNjYWxlLm1heFdpZHRoID0gNjQwO1xuICAgICAgdGhpcy5nYW1lLnNjYWxlLm1heEhlaWdodCA9IDQ4MDtcbiAgICAgIHRoaXMuZ2FtZS5zY2FsZS5mb3JjZUxhbmRzY2FwZSA9IHRydWU7XG4gICAgICB0aGlzLmdhbWUuc2NhbGUucGFnZUFsaWduSG9yaXpvbnRhbGx5ID0gdHJ1ZTtcbiAgICAgIHRoaXMuZ2FtZS5zY2FsZS5zZXRTY3JlZW5TaXplKHRydWUpO1xuICAgIH1cblxuICAgIHRoaXMuZ2FtZS5zdGF0ZS5zdGFydCgnUHJlbG9hZGVyJyk7XG4gIH1cbn07XG4iLCJ2YXIgUGxheWVyID0gcmVxdWlyZSgnLi4vZW50aXRpZXMvcGxheWVyJyk7XHJcbnZhciBCYWNrZ3JvdW5kX01hbmFnZXIgPSByZXF1aXJlKCcuLi9lbnRpdGllcy9iYWNrZ3JvdW5kX21hbmFnZXInKTtcclxudmFyIFBlcnNvbiA9IHJlcXVpcmUoJy4uL2VudGl0aWVzL3BlcnNvbicpO1xyXG52YXIgR3JvdXAgPSByZXF1aXJlKCcuLi9lbnRpdGllcy9ncm91cCcpO1xyXG52YXIgR3JvdXBNYW5hZ2VyID0gcmVxdWlyZSgnLi4vZW50aXRpZXMvZ3JvdXBNYW5hZ2VyJyk7XHJcbnZhciBVSUJ1aWxkZXIgPSByZXF1aXJlKCcuLi9lbnRpdGllcy91aUJ1aWxkZXInKTtcclxudmFyIEhvdmVyTWVudSA9IHJlcXVpcmUoJy4uL2VudGl0aWVzL2hvdmVyTWVudScpO1xyXG52YXIgVXRpbHMgPSByZXF1aXJlKCcuLi91dGlscycpO1xyXG5cclxudmFyIEdhbWUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgdGhpcy50ZXN0ZW50aXR5ID0gbnVsbDtcclxuICAvL3RoaXMuZmxvY2tzID0gW107XHJcbiAgdGhpcy5iZ19tZyA9IG51bGw7XHJcbiAgLy8gdGhpcy5zZWxlY3RlZEdyb3VwID0gbnVsbDtcclxuICB0aGlzLm1vbmV5ID0gbnVsbDtcclxuICB0aGlzLm1vbmV5VmFsID0gMDtcclxuICB0aGlzLmN1ck1vbmV5ID0gMjAwMDtcclxuICB0aGlzLm1vbmV5VXBkYXRlRGVsYXkgPSAwLjAwMTtcclxuICB0aGlzLm1vbmV5SW5jcmVtZW50aW5nID0gZmFsc2U7XHJcbiAgdGhpcy5oYXBwaW5lc3NWYWwgPSAwO1xyXG4gIHRoaXMuY3VySGFwcGluZXNzID0gMDtcclxuICB0aGlzLmhhcHBpbmVzc1VwZGF0ZURlbGF5ID0gMC4wMDE7XHJcbiAgdGhpcy5oYXBwaW5lc3NJbmNyZW1lbnRpbmcgPSBmYWxzZTtcclxuICB0aGlzLnRheFRpbWUgPSAyO1xyXG4gIHRoaXMudGF4TW9kID0ge2xvdzogMSwgbWlkOiAxLCBoaWdoOiAxfTtcclxuICB0aGlzLm1pbkhhcHBpbmVzcyA9IDUwO1xyXG5cdHRoaXMuZmF0aWd1ZVBlclRpY2sgPSAxMDtcclxuXHQvLyB0aGlzLm1vbmV5Q2hhbmdlRmFkaW5nID0gZmFsc2U7XHJcblx0dGhpcy5tb25leUNoYW5nZUZhZGVEZWxheSA9IDAuMDE7XHJcblx0dGhpcy5tb25leUNoYW5nZUZhZGVSYXRlID0gMC4wMjU7XHJcblx0dGhpcy5tb25leUNoYW5nZUhvbGREZWxheSA9IDE7XHJcblx0dGhpcy5taWdyYW50RGVsYXkgPSAxO1xyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBHYW1lO1xyXG5cclxuR2FtZS5wcm90b3R5cGUgPSB7XHJcblxyXG4gIGNyZWF0ZTogZnVuY3Rpb24gKCkge1xyXG4gIFx0Y29uc29sZS5sb2coJ2ZvbycpO1xyXG5cdCAgLy8gY29uc29sZS5sb2codGhpcyk7XHJcbiAgICB0aGlzLmdhbWUuc3RhZ2UuYmFja2dyb3VuZENvbG9yID0gXCIjZWRlZGVkXCI7XHJcbiAgICB0aGlzLm1lbnVfYmcgPSB0aGlzLmdhbWUuYWRkLmltYWdlKDAsIDAsICdtZW51X2JnJyk7ICBcclxuICAgIHZhciB4ID0gKHRoaXMuZ2FtZS53aWR0aCAvIDIpIC0gMTAwO1xyXG4gICAgdmFyIHkgPSAodGhpcy5nYW1lLmhlaWdodCAvIDIpIC0gNTA7XHJcblxyXG4gICAgdGhpcy5iZ19tZyA9IG5ldyBCYWNrZ3JvdW5kX01hbmFnZXIodGhpcy5nYW1lLCB0aGlzKTtcclxuXHRcclxuICAgIHRoaXMuaW5wdXQub25Eb3duLmFkZCh0aGlzLm9uSW5wdXREb3duLCB0aGlzKTtcclxuXHRcclxuXHR0aGlzLm1vbmV5ID0gdGhpcy5nYW1lLmFkZC50ZXh0KDIwLCAxNSwgJyQwJyk7XHJcblx0dGhpcy5tb25leS5mb250ID0gXCJSb2JvdG9cIjtcclxuXHR0aGlzLm1vbmV5LmZvbnRTaXplID0gMjQ7XHJcblx0dGhpcy5tb25leS5maWxsID0gJyMwMDAwMDAnO1xyXG5cdHRoaXMubW9uZXkudGV4dCA9ICckMCc7XHJcblxyXG5cdHRoaXMubW9uZXlDaGFuZ2UgPSB0aGlzLmdhbWUuYWRkLnRleHQoMTIwLCAxNSwgJyQwJyk7XHJcblx0dGhpcy5tb25leUNoYW5nZS5mb250ID0gXCJSb2JvdG9cIjtcclxuXHR0aGlzLm1vbmV5Q2hhbmdlLmZvbnRTaXplID0gMjQ7XHJcblx0dGhpcy5tb25leUNoYW5nZS5maWxsID0gJyMwMDAwMDAnO1xyXG5cdHRoaXMubW9uZXlDaGFuZ2UudGV4dCA9ICcrJDAnO1xyXG5cdHRoaXMubW9uZXlDaGFuZ2UuYWxwaGEgPSAwO1xyXG5cclxuXHR0aGlzLnVpYiA9IG5ldyBVSUJ1aWxkZXIodGhpcyk7XHJcblx0dGhpcy5iYXIgPSB0aGlzLnVpYi5idWlsZFByb2dyZXNzQmFyKFwiZ3Jvd2luZ1wiLCB0aGlzLmdhbWUud2lkdGggLyAyLCAyNSwgMzAwLCAxNiwgMTAwIC0gdGhpcy5taW5IYXBwaW5lc3MpO1xyXG5cdC8vdGhpcy5iYXIuYWRkVmFsdWUoMTAwKTtcclxuXHR0aGlzLmhhcHB5ID0gdGhpcy5nYW1lLmFkZC5zcHJpdGUodGhpcy5nYW1lLndpZHRoICogLjI5LCAyNSwgJ2hhcHB5ZmFjZScpO1xyXG5cdHRoaXMuaGFwcHkuYW5jaG9yLnNldFRvKDAuNSwgMC41KTtcclxuXHJcbiAgLy8gVGF4IGJ1dHRvbnNcclxuICB0aGlzLnJlZFRheExvdyAgID0gdGhpcy5nYW1lLmFkZC5idXR0b24odGhpcy5iZ19tZy5iZ0FycmF5WzBdLmdldFZhcnNDZW50ZXIoKS5jZW50ZXIueCAtIDE1LCA3NSwgJ3RheFJlZHVjZScsIHRoaXMuZGVjVGF4TG93LCB0aGlzKTtcclxuICB0aGlzLnRleHRUYXhMb3cgID0gdGhpcy5nYW1lLmFkZC50ZXh0KHRoaXMuYmdfbWcuYmdBcnJheVswXS5nZXRWYXJzKClbMF0sIDc4LCAnJCQnKTtcclxuICB0aGlzLnRleHRUYXhMb3cuZm9udCA9IFwiUm9ib3RvXCI7XHJcbiAgdGhpcy50ZXh0VGF4TG93LmZvbnRTaXplID0gMTg7XHJcbiAgdGhpcy5hZGRUYXhMb3cgICA9IHRoaXMuZ2FtZS5hZGQuYnV0dG9uKHRoaXMuYmdfbWcuYmdBcnJheVswXS5nZXRWYXJzQ2VudGVyKCkuY2VudGVyLnggKyAxNSwgNzUsICd0YXhBZGQnLCB0aGlzLmluY1RheExvdywgdGhpcyk7XHJcbiAgdGhpcy5yZWRUYXhMb3cuYW5jaG9yLnNldFRvKC41LCAuNSk7XHJcbiAgdGhpcy50ZXh0VGF4TG93LmFuY2hvci5zZXRUbygwLCAuNSk7XHJcbiAgdGhpcy5hZGRUYXhMb3cuYW5jaG9yLnNldFRvKC41LCAuNSk7XHJcbiAgdGhpcy5yZWRUYXhNaWQgICA9IHRoaXMuZ2FtZS5hZGQuYnV0dG9uKHRoaXMuYmdfbWcuYmdBcnJheVsxXS5nZXRWYXJzQ2VudGVyKCkuY2VudGVyLnggLSAxNSwgNzUsICd0YXhSZWR1Y2UnLCB0aGlzLmRlY1RheE1pZCwgdGhpcyk7XHJcbiAgdGhpcy50ZXh0VGF4TWlkICA9IHRoaXMuZ2FtZS5hZGQudGV4dCh0aGlzLmJnX21nLmJnQXJyYXlbMV0uZ2V0VmFyc0NlbnRlcigpLmNlbnRlci54LCA3OCwgJyQkJyk7XHJcbiAgdGhpcy50ZXh0VGF4TWlkLmZvbnQgPSBcIlJvYm90b1wiO1xyXG4gIHRoaXMudGV4dFRheE1pZC5mb250U2l6ZSA9IDE4O1xyXG4gIHRoaXMuYWRkVGF4TWlkICAgPSB0aGlzLmdhbWUuYWRkLmJ1dHRvbih0aGlzLmJnX21nLmJnQXJyYXlbMV0uZ2V0VmFyc0NlbnRlcigpLmNlbnRlci54ICsgMTUsIDc1LCAndGF4QWRkJywgdGhpcy5pbmNUYXhNaWQsIHRoaXMpO1xyXG4gIHRoaXMucmVkVGF4TWlkLmFuY2hvci5zZXRUbyguNSwgLjUpO1xyXG4gIHRoaXMudGV4dFRheE1pZC5hbmNob3Iuc2V0VG8oMCwgLjUpO1xyXG4gIHRoaXMuYWRkVGF4TWlkLmFuY2hvci5zZXRUbyguNSwgLjUpO1xyXG4gIHRoaXMucmVkVGF4SGlnaCAgPSB0aGlzLmdhbWUuYWRkLmJ1dHRvbih0aGlzLmJnX21nLmJnQXJyYXlbMl0uZ2V0VmFyc0NlbnRlcigpLmNlbnRlci54IC0gMTUsIDc1LCAndGF4UmVkdWNlJywgdGhpcy5kZWNUYXhIaWdoLCB0aGlzKTtcclxuICB0aGlzLnRleHRUYXhIaWdoID0gdGhpcy5nYW1lLmFkZC50ZXh0KHRoaXMuYmdfbWcuYmdBcnJheVsxXS5nZXRWYXJzQ2VudGVyKCkuY2VudGVyLngsIDc4LCAnJCQnKTtcclxuICB0aGlzLnRleHRUYXhIaWdoLmZvbnQgPSBcIlJvYm90b1wiO1xyXG4gIHRoaXMudGV4dFRheEhpZ2guZm9udFNpemUgPSAxODtcclxuICB0aGlzLmFkZFRheEhpZ2ggID0gdGhpcy5nYW1lLmFkZC5idXR0b24odGhpcy5iZ19tZy5iZ0FycmF5WzJdLmdldFZhcnNDZW50ZXIoKS5jZW50ZXIueCArIDE1LCA3NSwgJ3RheEFkZCcsIHRoaXMuaW5jVGF4SGlnaCwgdGhpcyk7XHJcbiAgdGhpcy5yZWRUYXhIaWdoLmFuY2hvci5zZXRUbyguNSwgLjUpO1xyXG4gIHRoaXMudGV4dFRheEhpZ2guYW5jaG9yLnNldFRvKDAsIC41KTtcclxuICB0aGlzLmFkZFRheEhpZ2guYW5jaG9yLnNldFRvKC41LCAuNSk7XHJcblxyXG5cdHRoaXMuZ2FtZS50aW1lLmV2ZW50cy5hZGQoUGhhc2VyLlRpbWVyLlNFQ09ORCAqIHRoaXMudGF4VGltZSwgdGhpcy5jb2xsZWN0VGF4LCB0aGlzKTtcclxuICAgIHRoaXMuaG0gPSBuZXcgSG92ZXJNZW51KHRoaXMuZ2FtZSwgMjAwLCAyMDAsIHRoaXMpO1xyXG4gICAgLy8gdGhpcy5obS5hbmNob3Iuc2V0VG8oMC41LCAxKTtcclxuXHQvLyB0aGlzLmhtLnZpc2libGUgPSBmYWxzZTtcclxuXHR0aGlzLmdhbWUudGltZS5ldmVudHMuYWRkKFBoYXNlci5UaW1lci5TRUNPTkQgKiB0aGlzLm1vbmV5Q2hhbmdlRmFkZURlbGF5LCB0aGlzLmZhZGVNb25leUNoYW5nZSwgdGhpcyk7XHJcblx0Ly8gdGhpcy5nYW1lLnRpbWUuZXZlbnRzLmFkZChQaGFzZXIuVGltZXIuU0VDT05EICogdGhpcy5taWdyYW50RGVsYXksIHRoaXMuc3Bhd25NaWdyYW50LCB0aGlzKTtcclxuXHJcblx0dGhpcy5nYW1lLmlucHV0LmtleWJvYXJkLm9uUHJlc3NDYWxsYmFjayA9IHRoaXMuc3Bhd25NaWdyYW50Tm9SZXBlYXQ7XHJcblx0dGhpcy5nYW1lLmlucHV0LmtleWJvYXJkLnN0YXRlID0gdGhpcztcclxuXHR0aGlzLmdhbWUuaW5wdXQua2V5Ym9hcmQudXRpbHMgPSBVdGlscztcclxuICB0aGlzLmlucHV0LmFkZE1vdmVDYWxsYmFjayh0aGlzLm9uTW91c2VNb3ZlLCB0aGlzKTtcclxuICB9LFxyXG4gIHRlc3RGdW46IGZ1bmN0aW9uKCkge1xyXG4gIFx0Ly8gY29uc29sZS5sb2coJ2Z1bicpO1xyXG4gIFx0XHR0aGlzLnNwYXduTWlncmFudE5vUmVwZWF0KClcclxuICB9LFxyXG4gIHVwZGF0ZTogZnVuY3Rpb24gKCkge1xyXG5cdHRoaXMuYmdfbWcudXBkYXRlKCk7XHJcblx0Ly90aGlzLmdtLnVwZGF0ZSgpO1xyXG5cdHRoaXMudWliLnJlbmRlcigpO1xyXG5cdHZhciBoYXBwaW5lc3MgPSAwO1xyXG5cdCAgZm9yICh2YXIgYmcgaW4gdGhpcy5iZ19tZy5iZ0FycmF5KSB7XHJcblx0XHQgIGZvciAodmFyIGdyb3VwIGluIHRoaXMuYmdfbWcuYmdBcnJheVtiZ10uZ3JvdXBfbWFuYWdlci5tZW1iZXJzKSB7XHJcblx0XHRcdCAgZm9yICh2YXIgcGVyc29uIGluIHRoaXMuYmdfbWcuYmdBcnJheVtiZ10uZ3JvdXBfbWFuYWdlci5tZW1iZXJzW2dyb3VwXS5tZW1iZXJzKSB7XHJcblx0XHRcdFx0ICBoYXBwaW5lc3MgKz0gdGhpcy5iZ19tZy5iZ0FycmF5W2JnXS5ncm91cF9tYW5hZ2VyLm1lbWJlcnNbZ3JvdXBdLm1lbWJlcnNbcGVyc29uXS5oYXBwaW5lc3M7XHJcblx0XHRcdCAgfVxyXG5cdFx0ICB9XHJcblx0ICB9XHJcblx0ICBoYXBwaW5lc3MgLz0gdGhpcy5iZ19tZy5udW1QZW9wbGUoKTtcclxuXHQgIHRoaXMuc2V0SGFwcGluZXNzKGhhcHBpbmVzcyk7XHJcblx0ICBoYXBwaW5lc3MgLT0gdGhpcy5taW5IYXBwaW5lc3M7XHJcblx0ICAvLyBjb25zb2xlLmxvZyhoYXBwaW5lc3MpO1xyXG5cdCAgLy8gY29uc29sZS5sb2coaGFwcGluZXNzKTtcclxuICAgIHRoaXMucmVkVGF4TG93LnggICA9IHRoaXMuYmdfbWcuYmdBcnJheVswXS5nZXRWYXJzQ2VudGVyKCkuY2VudGVyLnggLSAzMDtcclxuICAgIHRoaXMudGV4dFRheExvdy54ICA9IHRoaXMuYmdfbWcuYmdBcnJheVswXS5nZXRWYXJzQ2VudGVyKCkuY2VudGVyLnggLSAxNTtcclxuICAgIHRoaXMuYWRkVGF4TG93LnggICA9IHRoaXMuYmdfbWcuYmdBcnJheVswXS5nZXRWYXJzQ2VudGVyKCkuY2VudGVyLnggKyAzMDtcclxuICAgIHRoaXMucmVkVGF4TWlkLnggICA9IHRoaXMuYmdfbWcuYmdBcnJheVsxXS5nZXRWYXJzQ2VudGVyKCkuY2VudGVyLnggLSAzMDtcclxuICAgIHRoaXMudGV4dFRheE1pZC54ICA9IHRoaXMuYmdfbWcuYmdBcnJheVsxXS5nZXRWYXJzQ2VudGVyKCkuY2VudGVyLnggLSAxNTtcclxuICAgIHRoaXMuYWRkVGF4TWlkLnggICA9IHRoaXMuYmdfbWcuYmdBcnJheVsxXS5nZXRWYXJzQ2VudGVyKCkuY2VudGVyLnggKyAzMDtcclxuICAgIHRoaXMucmVkVGF4SGlnaC54ICA9IHRoaXMuYmdfbWcuYmdBcnJheVsyXS5nZXRWYXJzQ2VudGVyKCkuY2VudGVyLnggLSAzMDtcclxuICAgIHRoaXMudGV4dFRheEhpZ2gueCA9IHRoaXMuYmdfbWcuYmdBcnJheVsyXS5nZXRWYXJzQ2VudGVyKCkuY2VudGVyLnggLSAxNTtcclxuICAgIHRoaXMuYWRkVGF4SGlnaC54ICA9IHRoaXMuYmdfbWcuYmdBcnJheVsyXS5nZXRWYXJzQ2VudGVyKCkuY2VudGVyLnggKyAzMDtcclxuXHJcbiAgICBpZiAodGhpcy5jdXJIYXBwaW5lc3MgPCB0aGlzLm1pbkhhcHBpbmVzcykge1xyXG4gICAgICB0aGlzLmdhbWUuc3RhdGUuc3RhcnQoJ0dhbWVfT3ZlcicpO1xyXG4gIFx0fVxyXG4gIFx0Ly8gY29uc29sZS5sb2codGhpcy5tb25leUNoYW5nZS5hbHBoYSk7XHJcbiAgfSxcclxuXHJcbiAgb25JbnB1dERvd246IGZ1bmN0aW9uICgpIHtcclxuICAgICB2YXIgYmcgPSB0aGlzLmJnX21nLndoZXJlQ2xpY2tlZCgpO1xyXG4gICAgIHZhciBnbSA9IGJnLmdyb3VwX21hbmFnZXI7XHJcblx0ICAgY29uc29sZS5sb2codGhpcy5pbnB1dC54LCB0aGlzLmlucHV0LnksIGdtLmNlbnRlciwgZ20ud2lkdGgsIGdtLmhlaWdodCk7XHJcbiAgfSxcclxuICBvbk1vdXNlTW92ZTogZnVuY3Rpb24gKCkge1xyXG4gICAgLy8gdmFyIGhlcmUgPSB0aGlzLmJnX21nLndoZXJlQ2xpY2tlZCgpO1xyXG4gICAgLy8gY29uc29sZS5sb2codGhpcy5pbnB1dC54LCB0aGlzLmlucHV0LnksIGhlcmUudHlwZSwgaGVyZS5pbmNvbWVMZXZlbCwgaGVyZS53aWR0aCwgaGVyZS5oZWlnaHQpO1xyXG4gIH0sXHJcbiAgc3Bhd25NaWdyYW50OiBmdW5jdGlvbiAoKSB7XHJcbiAgXHQvLyB2YXIgbmV3TWlncmFudCA9IG5ldyBQZXJzb24odGhpcy5nYW1lLCB0aGlzLmdhbWUud2lkdGggLyAyLCB0aGlzLmdhbWUuaGVpZ2h0ICsgMTUpO1xyXG4gIFx0dmFyIG5ld01pZ3JhbnQgPSBuZXcgUGVyc29uKHRoaXMuZ2FtZSwgdGhpcy5nYW1lLndpZHRoIC8gMiArIE1hdGgucmFuZG9tKCkgKiA4MDAgLSA0MDAsIHRoaXMuZ2FtZS5oZWlnaHQgKyAxNSk7XHJcbiAgXHR0aGlzLmdhbWUuYWRkLmV4aXN0aW5nKG5ld01pZ3JhbnQpO1xyXG4gIFx0dmFyIGJnID0gdGhpcy5iZ19tZy5iZ0FycmF5WzZdO1xyXG4gIFx0YmcuZ3JvdXBfbWFuYWdlci5hZGRQZXJzb24obmV3TWlncmFudCk7XHJcbiAgXHR0aGlzLmdhbWUudGltZS5ldmVudHMuYWRkKFBoYXNlci5UaW1lci5TRUNPTkQgKiB0aGlzLm1pZ3JhbnREZWxheSwgdGhpcy5zcGF3bk1pZ3JhbnQsIHRoaXMpO1xyXG4gIFx0Ly8gY29uc29sZS5sb2coYmcpXHJcbiAgfSxcclxuICBzcGF3bk1pZ3JhbnROb1JlcGVhdDogZnVuY3Rpb24gKCkge1xyXG4gIFx0Ly8gY29uc29sZS5sb2codGhpcyk7XHJcblx0ICAgdmFyIG5ld01pZ3JhbnQgPSBuZXcgUGVyc29uKHRoaXMuZ2FtZSwgdGhpcy5nYW1lLndpZHRoIC8gMiArIE1hdGgucmFuZG9tKCkgKiA4MDAgLSA0MDAsIHRoaXMuZ2FtZS5oZWlnaHQgKyAxNSk7XHJcbiAgXHR0aGlzLmdhbWUuYWRkLmV4aXN0aW5nKG5ld01pZ3JhbnQpO1xyXG4gIFx0Ly8gY29uc29sZS5sb2codGhpcy5zdGF0ZSk7c1xyXG4gIFx0dmFyIGJnID0gdGhpcy5zdGF0ZS5iZ19tZy5iZ0FycmF5WzZdO1xyXG4gIFx0YmcuZ3JvdXBfbWFuYWdlci5hZGRQZXJzb24obmV3TWlncmFudCk7XHJcblxyXG4gIFx0Ly8gY29uc29sZS5sb2codGhpcy51dGlscy5yYXRpbygwLCAwLCAwLCAuMikpO1xyXG4gIH0sXHJcbiAgY29sbGVjdFRheDogZnVuY3Rpb24gKCkge1xyXG5cdCAgLy8gY29uc29sZS5sb2coJ2NvbGxlY3QgdGF4Jyk7XHJcblx0ICB2YXIgdGF4ZXMgPSAwO1xyXG5cdCAgZm9yICh2YXIgYmcgaW4gdGhpcy5iZ19tZy5iZ0FycmF5KSB7XHJcblx0XHQgIGZvciAodmFyIGdyb3VwIGluIHRoaXMuYmdfbWcuYmdBcnJheVtiZ10uZ3JvdXBfbWFuYWdlci5tZW1iZXJzKSB7XHJcblx0ICBcdFx0Ly8gY29uc29sZS5sb2codGhpcy5iZ19tZy5iZ0FycmF5W2JnXS5ncm91cF9tYW5hZ2VyLm1lbWJlcnNbZ3JvdXBdLCB0aGlzLmJnX21nLmJnQXJyYXlbYmddLmdyb3VwX21hbmFnZXIubWVtYmVyc1tncm91cF0uaGFwcGluZXNzTW9kaWZpZXIpO1xyXG5cdFx0XHQgIGZvciAodmFyIHBlcnNvbiBpbiB0aGlzLmJnX21nLmJnQXJyYXlbYmddLmdyb3VwX21hbmFnZXIubWVtYmVyc1tncm91cF0ubWVtYmVycykge1xyXG5cdFx0XHRcdCAgdGF4ZXMgKz0gdGhpcy5iZ19tZy5iZ0FycmF5W2JnXS5ncm91cF9tYW5hZ2VyLm1lbWJlcnNbZ3JvdXBdLm1lbWJlcnNbcGVyc29uXS5nZXRUYXgoKTtcclxuXHRcdFx0XHQgIHRoaXMuYmdfbWcuYmdBcnJheVtiZ10uZ3JvdXBfbWFuYWdlci5tZW1iZXJzW2dyb3VwXS5tZW1iZXJzW3BlcnNvbl0uYWdlVGljaygpO1xyXG5cdFx0XHQgIH1cclxuXHRcdFx0ICBpZiAodGhpcy5iZ19tZy5iZ0FycmF5W2JnXS5ncm91cF9tYW5hZ2VyLmJhY2tncm91bmQudHlwZSA9PSAnd29yaycpIHtcclxuXHRcdFx0ICBcdHRoaXMuYmdfbWcuYmdBcnJheVtiZ10uZ3JvdXBfbWFuYWdlci5tZW1iZXJzW2dyb3VwXS5hZGRGYXRpZ3VlKHRoaXMuZmF0aWd1ZVBlclRpY2spO1xyXG5cdFx0XHQgIH0gZWxzZSB7XHJcblx0XHRcdCAgXHR0aGlzLmJnX21nLmJnQXJyYXlbYmddLmdyb3VwX21hbmFnZXIubWVtYmVyc1tncm91cF0uYWRkRmF0aWd1ZSgtMSAqIHRoaXMuZmF0aWd1ZVBlclRpY2spO1xyXG5cdFx0XHQgIH1cclxuXHRcdFx0ICBpZiAodGhpcy5iZ19tZy5iZ0FycmF5W2JnXS5ncm91cF9tYW5hZ2VyLm1lbWJlcnNbZ3JvdXBdKSB7XHJcblx0XHRcdCAgXHQvLyBjb25zb2xlLmxvZygnYScpO1xyXG5cdFx0XHQgIFx0Ly8gY29uc29sZS5sb2codGhpcy5iZ19tZy5iZ0FycmF5W2JnXS5ncm91cF9tYW5hZ2VyLm1lbWJlcnNbZ3JvdXBdLCB0aGlzLmJnX21nLmJnQXJyYXlbYmddLmdyb3VwX21hbmFnZXIubWVtYmVyc1tncm91cF0uaGFwcGluZXNzTW9kaWZpZXIpO1xyXG5cdFx0XHQgIFx0dGhpcy5iZ19tZy5iZ0FycmF5W2JnXS5ncm91cF9tYW5hZ2VyLm1lbWJlcnNbZ3JvdXBdLmFwcGx5SGFwcGluZXNzKCk7XHJcblx0XHRcdCAgfVxyXG5cdFx0ICB9XHJcblx0ICB9XHJcblx0ICB0aGlzLmFkZE1vbmV5KHRheGVzKTtcclxuXHQgIHRoaXMubW9uZXlDaGFuZ2UudGV4dCA9ICgodGF4ZXMgPj0gMCkgPyAnKycgOiAnLScpICsgJyQnICsgdGF4ZXM7XHJcblx0ICB0aGlzLm1vbmV5Q2hhbmdlLmZpbGwgPSAodGF4ZXMgPj0gMCkgPyAnIzE2ZmIwNCcgOiAnI2ZmMDAwMCc7XHJcblx0ICB0aGlzLm1vbmV5Q2hhbmdlLmFscGhhID0gMTtcclxuXHQgIHRoaXMubW9uZXlDaGFuZ2VIb2xkID0gdHJ1ZTtcclxuXHJcblx0ICB0aGlzLmdhbWUudGltZS5ldmVudHMuYWRkKFBoYXNlci5UaW1lci5TRUNPTkQgKiB0aGlzLnRheFRpbWUsIHRoaXMuY29sbGVjdFRheCwgdGhpcyk7XHJcbiAgfSxcclxuICBmYWRlTW9uZXlDaGFuZ2U6IGZ1bmN0aW9uICgpIHtcclxuICBcdFx0Ly8gY29uc29sZS5sb2codGhpcy5tb25leUNoYW5nZS5hbHBoYSk7XHJcbiAgXHRcdGlmICh0aGlzLm1vbmV5Q2hhbmdlSG9sZCkge1xyXG4gIFx0XHRcdHRoaXMubW9uZXlDaGFuZ2VIb2xkID0gZmFsc2U7XHJcbiAgXHRcdFx0dGhpcy5nYW1lLnRpbWUuZXZlbnRzLmFkZChQaGFzZXIuVGltZXIuU0VDT05EICogdGhpcy5tb25leUNoYW5nZUhvbGREZWxheSwgdGhpcy5mYWRlTW9uZXlDaGFuZ2UsIHRoaXMpO1xyXG4gIFx0XHR9IGVsc2Uge1xyXG5cdCAgXHRcdHRoaXMubW9uZXlDaGFuZ2UuYWxwaGEgLT0gdGhpcy5tb25leUNoYW5nZUZhZGVSYXRlO1xyXG5cdCAgXHRcdHRoaXMuZ2FtZS50aW1lLmV2ZW50cy5hZGQoUGhhc2VyLlRpbWVyLlNFQ09ORCAqIHRoaXMubW9uZXlDaGFuZ2VGYWRlRGVsYXksIHRoaXMuZmFkZU1vbmV5Q2hhbmdlLCB0aGlzKTtcclxuXHQgIFx0fVxyXG4gIH0sXHJcbiAgc2V0SGFwcGluZXNzOiBmdW5jdGlvbiAoYW10KSB7XHJcblx0ICB0aGlzLmN1ckhhcHBpbmVzcyA9IGFtdDtcclxuXHQgIGlmICghdGhpcy5oYXBwaW5lc3NJbmNyZW1lbnRpbmcpIHtcclxuXHRcdCAgdGhpcy5nYW1lLnRpbWUuZXZlbnRzLmFkZChQaGFzZXIuVGltZXIuU0VDT05EICogdGhpcy5oYXBwaW5lc3NVcGRhdGVEZWxheSwgdGhpcy5pbmNyZW1lbnRIYXBwaW5lc3MsIHRoaXMpO1xyXG5cdFx0ICB0aGlzLmhhcHBpbmVzc0luY3JlbWVudGluZyA9IHRydWU7XHJcblx0ICB9XHJcbiAgfSxcclxuICBpbmNyZW1lbnRIYXBwaW5lc3M6IGZ1bmN0aW9uICgpIHtcclxuXHRpZiAodGhpcy5oYXBwaW5lc3NWYWwgPT09IHRoaXMuY3VySGFwcGluZXNzKSB7XHJcblx0XHR0aGlzLmhhcHBpbmVzc0luY3JlbWVudGluZyA9IGZhbHNlO1xyXG5cdFx0cmV0dXJuO1xyXG5cdH1cclxuXHRpZiAodGhpcy5jdXJIYXBwaW5lc3MgPiB0aGlzLmhhcHBpbmVzc1ZhbCkge1xyXG5cdFx0dGhpcy5iYXIuYWRkVmFsdWUoMSk7XHJcblx0XHR0aGlzLmhhcHBpbmVzc1ZhbCArPSAxO1xyXG5cdH0gZWxzZSBpZiAodGhpcy5jdXJIYXBwaW5lc3MgPCB0aGlzLmhhcHBpbmVzc1ZhbCkge1xyXG5cdFx0dGhpcy5iYXIuYWRkVmFsdWUoLTEpO1xyXG5cdFx0dGhpcy5oYXBwaW5lc3NWYWwgLT0gMTtcclxuXHR9XHJcblx0dGhpcy5nYW1lLnRpbWUuZXZlbnRzLmFkZChQaGFzZXIuVGltZXIuU0VDT05EICogdGhpcy5oYXBwaW5lc3NVcGRhdGVEZWxheSwgdGhpcy5pbmNyZW1lbnRIYXBwaW5lc3MsIHRoaXMpO1xyXG4gIH0sXHJcbiAgYWRkTW9uZXk6IGZ1bmN0aW9uIChhbXQpIHtcclxuXHQgIHRoaXMuY3VyTW9uZXkgKz0gYW10O1xyXG5cdCAgLy90aGlzLm1vbmV5LnRleHQgPSAnJCcgKyBuZXdNb25leTtcclxuXHQgIGlmICghdGhpcy5tb25leUluY3JlbWVudGluZykge1xyXG5cdFx0dGhpcy5nYW1lLnRpbWUuZXZlbnRzLmFkZChQaGFzZXIuVGltZXIuU0VDT05EICogdGhpcy5tb25leVVwZGF0ZURlbGF5LCB0aGlzLmluY3JlbWVudE1vbmV5LCB0aGlzKTtcclxuXHRcdHRoaXMubW9uZXlJbmNyZW1lbnRpbmcgPSB0cnVlO1xyXG5cdCAgfVxyXG4gIH0sXHJcbiAgaW5jcmVtZW50TW9uZXk6IGZ1bmN0aW9uICgpIHtcclxuXHRpZiAodGhpcy5tb25leVZhbCA9PT0gdGhpcy5jdXJNb25leSkge1xyXG5cdFx0dGhpcy5tb25leUluY3JlbWVudGluZyA9IGZhbHNlO1xyXG5cdFx0cmV0dXJuO1xyXG5cdH1cclxuXHRpZiAodGhpcy5jdXJNb25leSA+IHRoaXMubW9uZXlWYWwpIHtcclxuXHRcdHRoaXMubW9uZXlWYWwgKz0gNTtcclxuXHR9IGVsc2UgaWYgKHRoaXMuY3VyTW9uZXkgPCB0aGlzLm1vbmV5VmFsKSB7XHJcblx0XHR0aGlzLm1vbmV5VmFsIC09IDU7XHJcblx0fVxyXG5cdHRoaXMubW9uZXkudGV4dCA9ICckJyArIHRoaXMubW9uZXlWYWw7XHJcblx0dGhpcy5nYW1lLnRpbWUuZXZlbnRzLmFkZChQaGFzZXIuVGltZXIuU0VDT05EICogdGhpcy5tb25leVVwZGF0ZURlbGF5LCB0aGlzLmluY3JlbWVudE1vbmV5LCB0aGlzKTtcclxuICB9LFxyXG4gIGRlY1RheExvdzogZnVuY3Rpb24gKCkge1xyXG4gICAgaWYgKHRoaXMudGF4TW9kLmxvdyA9PSAxKSB7XHJcbiAgICAgIHRoaXMudGF4TW9kLmxvdyA9IC41O1xyXG4gICAgICB0aGlzLnRleHRUYXhMb3cudGV4dCA9ICckJztcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHRoaXMudGF4TW9kLmxvdyA9PSAxLjUpIHtcclxuICAgICAgdGhpcy50YXhNb2QubG93ID0gMTtcclxuICAgICAgdGhpcy50ZXh0VGF4TG93LnRleHQgPSAnJCQnO1xyXG4gICAgfVxyXG4gIH0sXHJcbiAgaW5jVGF4TG93OiBmdW5jdGlvbiAoKSB7XHJcbiAgICBpZiAodGhpcy50YXhNb2QubG93ID09IC41KSB7XHJcbiAgICAgIHRoaXMudGF4TW9kLmxvdyA9IDE7XHJcbiAgICAgIHRoaXMudGV4dFRheExvdy50ZXh0ID0gJyQkJztcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHRoaXMudGF4TW9kLmxvdyA9PSAxKSB7XHJcbiAgICAgIHRoaXMudGF4TW9kLmxvdyA9IDEuNTtcclxuICAgICAgdGhpcy50ZXh0VGF4TG93LnRleHQgPSAnJCQkJztcclxuICAgIH1cclxuICB9LFxyXG4gIGRlY1RheE1pZDogZnVuY3Rpb24gKCkge1xyXG4gICAgaWYgKHRoaXMudGF4TW9kLm1pZCA9PSAxKSB7XHJcbiAgICAgIHRoaXMudGF4TW9kLm1pZCA9IC41O1xyXG4gICAgICB0aGlzLnRleHRUYXhNaWQudGV4dCA9ICckJztcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHRoaXMudGF4TW9kLm1pZCA9PSAxLjUpIHtcclxuICAgICAgdGhpcy50YXhNb2QubWlkID0gMTtcclxuICAgICAgdGhpcy50ZXh0VGF4TWlkLnRleHQgPSAnJCQnO1xyXG4gICAgfVxyXG4gIH0sXHJcbiAgaW5jVGF4TWlkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICBpZiAodGhpcy50YXhNb2QubWlkID09IC41KSB7XHJcbiAgICAgIHRoaXMudGF4TW9kLm1pZCA9IDE7XHJcbiAgICAgIHRoaXMudGV4dFRheE1pZC50ZXh0ID0gJyQkJztcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHRoaXMudGF4TW9kLm1pZCA9PSAxKSB7XHJcbiAgICAgIHRoaXMudGF4TW9kLm1pZCA9IDEuNTtcclxuICAgICAgdGhpcy50ZXh0VGF4TWlkLnRleHQgPSAnJCQkJztcclxuICAgIH1cclxuICB9LFxyXG4gIGRlY1RheEhpZ2g6IGZ1bmN0aW9uICgpIHtcclxuICAgIGlmICh0aGlzLnRheE1vZC5oaWdoID09IDEpIHtcclxuICAgICAgdGhpcy50YXhNb2QuaGlnaCA9IC41O1xyXG4gICAgICB0aGlzLnRleHRUYXhIaWdoLnRleHQgPSAnJCc7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICh0aGlzLnRheE1vZC5oaWdoID09IDEuNSkge1xyXG4gICAgICB0aGlzLnRheE1vZC5oaWdoID0gMTtcclxuICAgICAgdGhpcy50ZXh0VGF4SGlnaC50ZXh0ID0gJyQkJztcclxuICAgIH1cclxuICB9LFxyXG4gIGluY1RheEhpZ2g6IGZ1bmN0aW9uICgpIHtcclxuICAgIGlmICh0aGlzLnRheE1vZC5oaWdoID09IC41KSB7XHJcbiAgICAgIHRoaXMudGF4TW9kLmhpZ2ggPSAxO1xyXG4gICAgICB0aGlzLnRleHRUYXhIaWdoLnRleHQgPSAnJCQnO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodGhpcy50YXhNb2QuaGlnaCA9PSAxKSB7XHJcbiAgICAgIHRoaXMudGF4TW9kLmhpZ2ggPSAxLjU7XHJcbiAgICAgIHRoaXMudGV4dFRheEhpZ2gudGV4dCA9ICckJCQnO1xyXG4gICAgfVxyXG4gIH1cclxufTtcclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbiIsInZhciBHYW1lX092ZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgdGhpcy50ZXh0ID0gbnVsbDtcclxuICB0aGlzLnRleHRTbWFsbCA9IG51bGw7XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IEdhbWVfT3ZlcjtcclxuXHJcbkdhbWVfT3Zlci5wcm90b3R5cGUgPSB7XHJcblxyXG4gIGNyZWF0ZTogZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHggPSB0aGlzLmdhbWUud2lkdGggLyAyO1xyXG4gICAgdmFyIHkgPSB0aGlzLmdhbWUuaGVpZ2h0IC8gMjtcclxuXHJcbiAgICB2YXIgc3R5bGUgPSB7IGZvbnQ6IFwiUm9ib3RvXCIsIGZvbnRTaXplOiA2NCwgZmlsbDogXCIjMDAwMDAwXCIsIGFsaWduOiBcImNlbnRlclwiIH07XHJcbiAgICB2YXIgc21hbGxTdHlsZSA9IHsgZm9udDogXCJSb2JvdG9cIiwgZm9udFNpemU6IDMyLCBmaWxsOiBcIiMwMDAwMDBcIiwgYWxpZ246IFwibGVmdFwiIH07XHJcblxyXG4gICAgdGhpcy50ZXh0ID0gdGhpcy5hZGQudGV4dCh4IC0gMzAwLCB5IC0gMjAwLCBcIkdhbWUgT3ZlclwiLCBzdHlsZSk7XHJcbiAgICB0aGlzLnRleHRTbWFsbCA9IHRoaXMuYWRkLnRleHQoeCAtIDMwMCwgeSAtIDEwMCwgXCJ5b3VyIGhhcHBpbmVzcyB3ZW50IHVuZGVyIDUwJVxcblwiICsgXCJjbGljayB0byBjb250aW51ZVwiLCBzbWFsbFN0eWxlKTtcclxuICAgIHRoaXMuZ2FtZS50aW1lLmV2ZW50cy5hZGQoUGhhc2VyLlRpbWVyLlNFQ09ORCAqIDMsIHRoaXMuZG9UaGluZywgdGhpcyk7XHJcbiAgfSxcclxuXHJcbiAgdXBkYXRlOiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gIH0sXHJcblxyXG4gIGRvVGhpbmc6IGZ1bmN0aW9uKCkge1xyXG4gICAgdGhpcy5pbnB1dC5vbkRvd24uYWRkKHRoaXMub25Eb3duLCB0aGlzKTtcclxuICB9LFxyXG5cclxuICBvbkRvd246IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMuZ2FtZS5zdGF0ZS5zdGFydCgnTWVudScpO1xyXG4gIH1cclxufTsiLCJ2YXIgTWVudSA9IGZ1bmN0aW9uICgpIHtcclxuICB0aGlzLnRleHQgPSBudWxsO1xyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBNZW51O1xyXG5cclxuTWVudS5wcm90b3R5cGUgPSB7XHJcblxyXG4gIGNyZWF0ZTogZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHggPSB0aGlzLmdhbWUud2lkdGggLyAyO1xyXG4gICAgdmFyIHkgPSB0aGlzLmdhbWUuaGVpZ2h0IC8gMjtcclxuXHJcbiAgICB2YXIgc3R5bGUgPSB7IGZvbnQ6IFwiUm9ib3RvXCIsIGZvbnRTaXplOiA2NCwgZmlsbDogXCIjMDAwMDAwXCIsIGFsaWduOiBcImNlbnRlclwiIH07XHJcblxyXG4gICAgdGhpcy50ZXh0ID0gdGhpcy5hZGQudGV4dCh4LCB5LCBcIkNsaWNrIHRvIFN0YXJ0XCIsIHN0eWxlKTtcclxuICAgIHRoaXMudGV4dC5hbmNob3Iuc2V0VG8oLjUsIC41KTtcclxuICAgIHRoaXMuaW5wdXQub25Eb3duLmFkZCh0aGlzLm9uRG93biwgdGhpcyk7XHJcbiAgfSxcclxuXHJcbiAgdXBkYXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgfSxcclxuXHJcbiAgb25Eb3duOiBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLmdhbWUuc3RhdGUuc3RhcnQocGxheWVyU3RhdGUuY3VycmVudExldmVsKTtcclxuICB9XHJcbn07XHJcbiIsInZhciBQcmVsb2FkZXIgPSBmdW5jdGlvbiAoZ2FtZSkge1xyXG4gIHRoaXMuYXNzZXQgPSBudWxsO1xyXG4gIHRoaXMucmVhZHkgPSBmYWxzZTtcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gUHJlbG9hZGVyO1xyXG5cclxuUHJlbG9hZGVyLnByb3RvdHlwZSA9IHtcclxuXHJcbiAgcHJlbG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgdGhpcy5hc3NldCA9IHRoaXMuYWRkLnNwcml0ZSgzMjAsIDI0MCwgJ3ByZWxvYWRlcicpO1xyXG4gICAgdGhpcy5hc3NldC5hbmNob3Iuc2V0VG8oMC41LCAwLjUpO1xyXG5cclxuICAgIHRoaXMubG9hZC5vbkxvYWRDb21wbGV0ZS5hZGRPbmNlKHRoaXMub25Mb2FkQ29tcGxldGUsIHRoaXMpO1xyXG4gICAgdGhpcy5sb2FkLnNldFByZWxvYWRTcHJpdGUodGhpcy5hc3NldCk7XHJcbiAgICB0aGlzLmxvYWQuaW1hZ2UoJ3Rlc3RzcHJpdGUnLCAnYXNzZXRzL3Rlc3QucG5nJyk7XHJcbiAgICB0aGlzLmxvYWQuaW1hZ2UoJ21lbnVfYmcnLCAnYXNzZXRzL21lbnVfYmcucG5nJyk7XHJcbiAgICB0aGlzLmxvYWQuaW1hZ2UoJ2JhY2tncm91bmQnLCAnYXNzZXRzL3NlY3RvckJHLnBuZycpXHJcbiAgICB0aGlzLmxvYWQuaW1hZ2UoJ3BlcnNvbicsICdhc3NldHMvcGVyc29uLnBuZycpO1xyXG4gICAgdGhpcy5sb2FkLmltYWdlKCdzZWxlY3Rpb24nLCAnYXNzZXRzL3NlbGVjdGlvbi5wbmcnKTtcclxuICAgIHRoaXMubG9hZC5pbWFnZSgnYm9vaycsICdhc3NldHMvYm9vay5wbmcnKTtcclxuICAgIHRoaXMubG9hZC5pbWFnZSgneW91bmcnLCAnYXNzZXRzL3lvdW5nLnBuZycpO1xyXG4gICAgdGhpcy5sb2FkLmltYWdlKCdhZHVsdCcsICdhc3NldHMvYWR1bHQucG5nJyk7XHJcbiAgICB0aGlzLmxvYWQuaW1hZ2UoJ29sZCcsICdhc3NldHMvb2xkLnBuZycpO1xyXG4gICAgdGhpcy5sb2FkLmltYWdlKCd0YXhSZWR1Y2UnLCAnYXNzZXRzL3RheFJlZHVjZS5wbmcnKTtcclxuICAgIHRoaXMubG9hZC5pbWFnZSgndGF4QWRkJywgJ2Fzc2V0cy90YXhBZGQucG5nJyk7XHJcbiAgICB0aGlzLmxvYWQuaW1hZ2UoJ2xvY2snLCAnYXNzZXRzL2xvY2sucG5nJyk7XHJcbiAgICB0aGlzLmxvYWQuYXRsYXNKU09OSGFzaCgnY2hldnJvbnMnLCAnYXNzZXRzL2NoZXZyb25zLnBuZycsICdhc3NldHMvY2hldnJvbnMuanNvbicpO1xyXG4gICAgdGhpcy5sb2FkLmF0bGFzSlNPTkhhc2goJ2FnZXMnLCAnYXNzZXRzL2FnZXMucG5nJywgJ2Fzc2V0cy9hZ2VzLmpzb24nKTtcclxuICAgIHRoaXMubG9hZC5pbWFnZSgnaGFwcHlmYWNlJywgJ2Fzc2V0cy9oYXBweWZhY2VfYmV0dGVyLnBuZycpO1xyXG4gICAgdGhpcy5sb2FkLmltYWdlKCdib3JkZXJlZCcsICdhc3NldHMvYm9yZGVyZWQucG5nJyk7XHJcbiAgICB0aGlzLmxvYWQuaW1hZ2UoJ2xvd19kb2xsYXInLCAnYXNzZXRzL2xvd19kb2xsYXIucG5nJyk7XHJcbiAgICB0aGlzLmxvYWQuaW1hZ2UoJ21lZF9kb2xsYXInLCAnYXNzZXRzL21lZF9kb2xsYXIucG5nJyk7XHJcbiAgICB0aGlzLmxvYWQuaW1hZ2UoJ2hpZ2hfZG9sbGFyJywgJ2Fzc2V0cy9oaWdoX2RvbGxhci5wbmcnKTtcclxuICAgIHRoaXMubG9hZC5zY3JpcHQoJ3dlYmZvbnQnLCAnLy9hamF4Lmdvb2dsZWFwaXMuY29tL2FqYXgvbGlicy93ZWJmb250LzEuNC43L3dlYmZvbnQuanMnKTtcclxuICB9LFxyXG5cclxuICBjcmVhdGU6IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMuYXNzZXQuY3JvcEVuYWJsZWQgPSBmYWxzZTtcclxuICB9LFxyXG5cclxuICB1cGRhdGU6IGZ1bmN0aW9uICgpIHtcclxuICAgIGlmICghIXRoaXMucmVhZHkpIHtcclxuICAgICAgdGhpcy5nYW1lLnN0YXRlLnN0YXJ0KCdHYW1lJyk7XHJcbiAgICB9XHJcbiAgfSxcclxuXHJcbiAgb25Mb2FkQ29tcGxldGU6IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMucmVhZHkgPSB0cnVlO1xyXG4gIH1cclxufTtcclxuIiwidmFyIFNwbGFzaCA9IGZ1bmN0aW9uICgpIHtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gU3BsYXNoO1xuXG5TcGxhc2gucHJvdG90eXBlID0ge1xuICBjcmVhdGU6IGZ1bmN0aW9uICgpIHtcbiAgfVxufTsiLCJ2YXIgVXRpbHMgPSB7XHJcbiAgICBjb250YWluc09iamVjdDogZnVuY3Rpb24ob2JqLCBsaXN0KSB7XHJcbiAgICAgICAgdmFyIGk7XHJcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGxpc3RbaV0gPT09IG9iaikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH0sXHJcblx0aHlwb3RlbnVzZTogZnVuY3Rpb24oYSwgYikge1xyXG5cdFx0cmV0dXJuIE1hdGguc3FydChNYXRoLnBvdyhhLCAyKSArIE1hdGgucG93KGIsIDIpKTtcclxuXHR9LFxyXG5cdHJhdGlvOiBmdW5jdGlvbihhLCBiLCBjLCBtaW4pIHtcclxuXHRcdGlmIChhID09IDAgJiYgYiA9PSAwICYmIGMgPT0gMCkge1xyXG5cdFx0XHRyZXR1cm4ge2EgOiAxIC8gMywgYiA6IDEgLyAzLCBjIDogMSAvIDN9O1xyXG5cdFx0fVxyXG5cdFx0dmFyIHN1bSA9IGEgKyBiICsgY1xyXG5cdFx0Ly8gdmFyIGFSYXRpbyA9IChhID09IDApID8gMCA6IGEgLyBzdW07XHJcblx0XHQvLyB2YXIgYlJhdGlvID0gKGIgPT0gMCkgPyAwIDogYiAvIHN1bTtcclxuXHRcdC8vIHZhciBjUmF0aW8gPSAoYyA9PSAwKSA/IDAgOiBjIC8gc3VtO1xyXG5cdFx0dmFyIGFSYXRpbyA9IGEgLyBzdW07XHJcblx0XHR2YXIgYlJhdGlvID0gYiAvIHN1bTtcclxuXHRcdHZhciBjUmF0aW8gPSBjIC8gc3VtO1xyXG5cclxuXHRcdC8vIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxKSB7XHJcblx0XHQvLyBcdHJldHVybiBbYSAvIGFdO1xyXG5cdFx0Ly8gfVxyXG5cdFx0Ly8gZWxzZSBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMikge1xyXG5cdFx0Ly8gXHRyZXR1cm4gW2EgLyAoYSArIGIpLCBiIC8gKGEgKyBiKV07XHJcblx0XHQvLyB9XHJcblx0XHQvLyBlbHNlIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAzKSB7XHJcblx0XHQvLyBcdHJldHVybiBbYSAvIChhICsgYiArIGMpLCBiIC8gKGEgKyBiICsgYyksIGMgLyAoYSArIGIgKyBjKV07XHJcblx0XHQvLyB9XHJcblx0XHQvLyBlbHNlIHtcclxuXHRcdC8vIFx0cmV0dXJuIFtdO1xyXG5cdFx0Ly8gfVxyXG5cdFx0Ly8gY29uc29sZS5sb2coJ3V0aWwgcmVjaWV2ZXMnLCBhLCBiLCBjLCBhUmF0aW8sIGJSYXRpbywgY1JhdGlvKTtcclxuXHRcdGlmIChhUmF0aW8gPCBtaW4pIHtcclxuXHRcdFx0aWYgKGJSYXRpbyA8IG1pbikge1xyXG5cdFx0XHRcdC8vIGNvbnNvbGUubG9nKGFSYXRpbywgYlJhdGlvLCBjUmF0aW8pO1xyXG5cdFx0XHRcdHZhciBkaWZmQSA9IG1pbiAtIGFSYXRpbztcclxuXHRcdFx0XHR2YXIgZGlmZkIgPSBtaW4gLSBiUmF0aW87XHJcblx0XHRcdFx0Ly8gY29uc29sZS5sb2coY1JhdGlvLCBkaWZmQSwgZGlmZkIpO1xyXG5cdFx0XHRcdGNSYXRpbyAtPSBkaWZmQSArIGRpZmZCO1xyXG5cdFx0XHRcdGFSYXRpbyA9IG1pbjtcclxuXHRcdFx0XHRiUmF0aW8gPSBtaW47XHJcblx0XHRcdH0gZWxzZSBpZiAoY1JhdGlvIDwgbWluKSB7XHJcblx0XHRcdFx0dmFyIGRpZmZBID0gbWluIC0gYVJhdGlvO1xyXG5cdFx0XHRcdHZhciBkaWZmQyA9IG1pbiAtIGNSYXRpbztcclxuXHRcdFx0XHQvLyBjb25zb2xlLmxvZyhhUmF0aW8sIGJSYXRpbywgZGlmZkEsIGRpZmZDKTtcclxuXHRcdFx0XHRiUmF0aW8gLT0gZGlmZkEgKyBkaWZmQztcclxuXHRcdFx0XHQvLyBjb25zb2xlLmxvZyhiUmF0aW8pO1xyXG5cdFx0XHRcdGFSYXRpbyA9IG1pbjtcclxuXHRcdFx0XHRjUmF0aW8gPSBtaW47XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0dmFyIGRpZmYgPSBtaW4gLSBhUmF0aW87XHJcblx0XHRcdFx0aWYgKGJSYXRpbyAtIGRpZmYgLyAyIDwgbWluKSB7XHJcblx0XHRcdFx0XHR2YXIgYWxsb3dlZCA9IGJSYXRpbyAtIG1pbjtcclxuXHRcdFx0XHRcdHZhciBuZWVkZWQgPSBkaWZmIC0gYWxsb3dlZDtcclxuXHRcdFx0XHRcdGJSYXRpbyA9IG1pbjtcclxuXHRcdFx0XHRcdGNSYXRpbyAtPSBuZWVkZWQ7XHJcblx0XHRcdFx0XHRhUmF0aW8gPSBtaW47XHJcblx0XHRcdFx0fSBlbHNlIGlmIChjUmF0aW8gLSBkaWZmIC8gMiA8IG1pbikge1xyXG5cdFx0XHRcdFx0dmFyIGFsbG93ZWQgPSBjUmF0aW8gLSBtaW47XHJcblx0XHRcdFx0XHR2YXIgbmVlZGVkID0gZGlmZiAtIGFsbG93ZWQ7XHJcblx0XHRcdFx0XHRjUmF0aW8gPSBtaW47XHJcblx0XHRcdFx0XHRiUmF0aW8gLT0gbmVlZGVkO1xyXG5cdFx0XHRcdFx0YVJhdGlvID0gbWluO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRhUmF0aW8gPSBtaW47XHJcblx0XHRcdFx0XHRiUmF0aW8gLT0gZGlmZiAvIDI7XHJcblx0XHRcdFx0XHRjUmF0aW8gLT0gZGlmZiAvIDI7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9IGVsc2UgaWYgKGJSYXRpbyA8IG1pbikge1xyXG5cdFx0XHRpZiAoY1JhdGlvIDwgbWluKSB7XHJcblx0XHRcdFx0dmFyIGRpZmZCID0gbWluIC0gYlJhdGlvO1xyXG5cdFx0XHRcdHZhciBkaWZmQyA9IG1pbiAtIGNSYXRpbztcclxuXHRcdFx0XHRhUmF0aW8gLT0gZGlmZkIgKyBkaWZmQztcclxuXHRcdFx0XHRiUmF0aW8gPSBtaW47XHJcblx0XHRcdFx0Y1JhdGlvID0gbWluO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHZhciBkaWZmID0gbWluIC0gYlJhdGlvO1xyXG5cdFx0XHRcdGlmIChhUmF0aW8gLSBkaWZmIC8gMiA8IG1pbikge1xyXG5cdFx0XHRcdFx0dmFyIGFsbG93ZWQgPSBhUmF0aW8gLSBtaW47XHJcblx0XHRcdFx0XHR2YXIgbmVlZGVkID0gZGlmZiAtIGFsbG93ZWQ7XHJcblx0XHRcdFx0XHRhUmF0aW8gPSBtaW47XHJcblx0XHRcdFx0XHRjUmF0aW8gLT0gbmVlZGVkO1xyXG5cdFx0XHRcdFx0YlJhdGlvID0gbWluO1xyXG5cdFx0XHRcdH0gZWxzZSBpZiAoY1JhdGlvIC0gZGlmZiAvIDIgPCBtaW4pIHtcclxuXHRcdFx0XHRcdHZhciBhbGxvd2VkID0gY1JhdGlvIC0gbWluO1xyXG5cdFx0XHRcdFx0dmFyIG5lZWRlZCA9IGRpZmYgLSBhbGxvd2VkO1xyXG5cdFx0XHRcdFx0Y1JhdGlvID0gbWluO1xyXG5cdFx0XHRcdFx0YVJhdGlvIC09IG5lZWRlZDtcclxuXHRcdFx0XHRcdGJSYXRpbyA9IG1pbjtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0YlJhdGlvID0gbWluO1xyXG5cdFx0XHRcdFx0YVJhdGlvIC09IGRpZmYgLyAyO1xyXG5cdFx0XHRcdFx0Y1JhdGlvIC09IGRpZmYgLyAyO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSBlbHNlIGlmIChjUmF0aW8gPCBtaW4pIHtcclxuXHRcdFx0Ly8gY29uc29sZS5sb2coJ2Nhc2UgYScpO1xyXG5cdFx0XHR2YXIgZGlmZiA9IG1pbiAtIGNSYXRpbztcclxuXHRcdFx0aWYgKGFSYXRpbyAtIGRpZmYgLyAyIDwgbWluKSB7XHJcblx0XHRcdFx0Ly8gY29uc29sZS5sb2coJ2Nhc2UgYicpO1xyXG5cdFx0XHRcdHZhciBhbGxvd2VkID0gYVJhdGlvIC0gbWluO1xyXG5cdFx0XHRcdHZhciBuZWVkZWQgPSBkaWZmIC0gYWxsb3dlZDtcclxuXHRcdFx0XHRhUmF0aW8gPSBtaW47XHJcblx0XHRcdFx0YlJhdGlvIC09IG5lZWRlZDtcclxuXHRcdFx0XHRjUmF0aW8gPSBtaW47XHJcblx0XHRcdH0gZWxzZSBpZiAoYlJhdGlvIC0gZGlmZiAvIDIgPCBtaW4pIHtcclxuXHRcdFx0XHQvLyBjb25zb2xlLmxvZygnY2FzZSBjJyk7XHJcblx0XHRcdFx0dmFyIGFsbG93ZWQgPSBiUmF0aW8gLSBtaW47XHJcblx0XHRcdFx0dmFyIG5lZWRlZCA9IGRpZmYgLSBhbGxvd2VkO1xyXG5cdFx0XHRcdGJSYXRpbyA9IG1pbjtcclxuXHRcdFx0XHRhUmF0aW8gLT0gbmVlZGVkO1xyXG5cdFx0XHRcdGNSYXRpbyA9IG1pbjtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQvLyBjb25zb2xlLmxvZygnY2FzZSBkJyk7XHJcblx0XHRcdFx0Y1JhdGlvID0gbWluO1xyXG5cdFx0XHRcdGFSYXRpbyAtPSBkaWZmIC8gMjtcclxuXHRcdFx0XHRjUmF0aW8gLT0gZGlmZiAvIDI7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdC8vIGNvbnNvbGUubG9nKCd1dGlsIHJldHVybnMnLCBhUmF0aW8sIGJSYXRpbywgY1JhdGlvKTtcclxuXHRcdHJldHVybiB7YSA6IGFSYXRpbywgYiA6IGJSYXRpbywgYyA6IGNSYXRpb307XHJcblx0fVxyXG59O1xyXG5cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gVXRpbHM7Il19
=======
},{}]},{},["C:\\HACKUCSC\\src\\js\\main.js"])
<<<<<<< HEAD
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvZW50aXRpZXMvUHJvZ3Jlc3NCYXIuanMiLCJzcmMvanMvZW50aXRpZXMvYmFja2dyb3VuZC5qcyIsInNyYy9qcy9lbnRpdGllcy9iYWNrZ3JvdW5kX21hbmFnZXIuanMiLCJzcmMvanMvZW50aXRpZXMvZ3JvdXAuanMiLCJzcmMvanMvZW50aXRpZXMvZ3JvdXBNYW5hZ2VyLmpzIiwic3JjL2pzL2VudGl0aWVzL2hvdmVyTWVudS5qcyIsInNyYy9qcy9lbnRpdGllcy9wZXJzb24uanMiLCJzcmMvanMvZW50aXRpZXMvcGxheWVyLmpzIiwic3JjL2pzL2VudGl0aWVzL3VpQnVpbGRlci5qcyIsInNyYy9qcy9tYWluLmpzIiwic3JjL2pzL3N0YXRlcy9ib290LmpzIiwic3JjL2pzL3N0YXRlcy9nYW1lLmpzIiwic3JjL2pzL3N0YXRlcy9nYW1lX292ZXIuanMiLCJzcmMvanMvc3RhdGVzL21lbnUuanMiLCJzcmMvanMvc3RhdGVzL3ByZWxvYWRlci5qcyIsInNyYy9qcy9zdGF0ZXMvc3BsYXNoLmpzIiwic3JjL2pzL3V0aWxzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDL0dBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaEVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNyVkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDOVRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3RKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbkZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMzQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDN0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BVQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiLy9OT1RFOiBET04nVCBVU0UgdGhpcyBjb2RlIHRvIGNyZWF0ZSBhIFByb2dyZXNzQmFyLiBJbnN0ZWFkLCB1c2UgdGhlIFVJQnVpbGRlciBvYmplY3QgYW5kIGNhbGwgYnVpbGRQcm9ncmVzc0JhclxyXG5cclxudmFyIFByb2dyZXNzQmFyID0gZnVuY3Rpb24oc2V0VHlwZSwgc2V0TWF4VmFsdWUsIHNldEdyYXBoaWNzLCBzZXRSZW5kZXJhYmxlcykge1xyXG5cdHRoaXMudHlwZSA9IHNldFR5cGU7IC8vVHdvIHR5cGVzLCBcImdyb3dpbmdcIiAoc3RhcnRzIGF0IDAsIHRyaWdnZXJzIGV2ZW50IHdoZW4gZnVsbCkgXHJcblx0XHRcdFx0XHRcdCAvL2FuZCBcInNocmlua2luZ1wiIChzdGFydHMgZnVsbCwgdHJpZ2dlcnMgYXQgMClcclxuXHR0aGlzLmJnQm9yZGVyU2l6ZSA9IDI7XHRcdFx0Ly9kZWZhdWx0IHNpemUgb2YgYmFja2dyb3VuZCBib3JkZXJcclxuXHR0aGlzLmJnQm9yZGVyQ29sb3IgPSAweDAwMDAwO1x0Ly9kZWZhdWx0IGNvbG9yIG9mIGJhY2tncm91bmQgYm9yZGVyXHJcblx0dGhpcy5iZ0NvbG9yID0gMHhmZmZmZmY7XHRcdC8vZGVmYXVsdCBjb2xvciBvZiBiYWNrZ3JvdW5kXHJcblx0dGhpcy5wYWRkaW5nSG9yaXogPSAxMDtcdFx0XHQvL2RlZmF1bHQgc3VtIG9mIHBhZGRpbmcgb24gbGVmdCBhbmQgcmlnaHQgc2lkZSBpbm5lciB2YWx1ZSBiYXJcclxuXHR0aGlzLnBhZGRpbmdWZXJ0ID0gMTA7XHRcdFx0Ly9kZWZhdWx0IHN1bSAoaS5lLiBoYWxmIG9uIGVhY2ggc2lkZSkgb2YgdmVydGljYWwgcGFkZGluZyBvZiBpbm5lciB2YWx1ZSBiYXJcclxuXHQvLyB0aGlzLnZhbHVlQm9yZGVyU2l6ZSA9IDE7XHRcdC8vZGVmYXVsdCBzaXplIG9mIHZhbHVlIGJvcmRlclxyXG5cdC8vIHRoaXMudmFsdWVCb3JkZXJDb2xvciA9IDB4ODg4OEZGOyAvL2RlZmF1bHQgY29sb3Igb2YgdmFsdWUgYm9yZGVyXHJcblx0dGhpcy52YWx1ZUNvbG9yID0gMHgwMDAwMDA7XHRcdC8vZGVmYXVsdCBjb2xvciBvZiBpbm5lciB2YWx1ZSBiYXJcclxuXHR0aGlzLnggPSBudWxsO1xyXG5cdHRoaXMueSA9IG51bGw7XHJcblx0dGhpcy53aWR0aCA9IG51bGw7XHJcblx0dGhpcy5oZWlnaHQgPSBudWxsO1xyXG5cdHRoaXMubWF4VmFsdWUgPSBzZXRNYXhWYWx1ZTtcclxuXHR0aGlzLmdyYXBoaWNzID0gc2V0R3JhcGhpY3M7IC8vc3RvcmUgZ3JhcGhpY3MgY2xhc3MgKHVzZWQgdG8gZHJhdyBiYXIpXHJcblx0dGhpcy5yZW5kZXJhYmxlcyA9IHNldFJlbmRlcmFibGVzO1xyXG5cdFxyXG5cdHRoaXMub25FdmVudCA9IGZ1bmN0aW9uKCkge307IC8vb3ZlcndyaXRlIHRoaXMgZnVuY3Rpb24gdG8gbWFrZSB3aGF0ZXZlciB5b3Ugd2FudCBoYXBwZW4gd2hlbiBwcm9ncmVzc0JhciByZWFjaGVzIGxpbWl0XHJcblx0XHJcblx0Ly9zd2l0Y2godGhpcy50eXBlKSB7XHJcblx0Ly9jYXNlICdncm93aW5nJyA6IFxyXG5cdGlmKHNldFR5cGUgPT09ICdncm93aW5nJykge1xyXG5cdFx0dGhpcy52YWx1ZSA9IDA7XHJcblx0XHQvL3RyeVRyaWdnZXIgaXMgY2FsbGVkIGF1dG9tYXRpY2FsbHkgd2hlbiB5b3UgYWRkL3N1YnRyYWN0IHZhbHVlLCBhbmQgd2lsbCB0cmlnZ2VyIHRoZSBvbkV2ZW50KCkgZnVuY3Rpb25cclxuXHRcdHRoaXMudHJ5VHJpZ2dlciA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZih0aGlzLnZhbHVlID49IHRoaXMubWF4VmFsdWUpIHtcclxuXHRcdFx0XHR0aGlzLm9uRXZlbnQoKTtcclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHRcdC8vYnJlYWs7XHJcblx0fVxyXG5cdGVsc2UgaWYoc2V0VHlwZSA9PT0gJ3Nocmlua2luZycpIHtcclxuXHQvL2Nhc2UgJ3Nocmlua2luZycgOlxyXG5cdFx0dGhpcy52YWx1ZSA9IHRoaXMubWF4VmFsdWU7XHJcblx0XHR0aGlzLnRyeVRyaWdnZXIgPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0aWYodGhpcy52YWx1ZSA8PSAwKSB7XHJcblx0XHRcdFx0dGhpcy5vbkV2ZW50KCk7XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblx0fVxyXG59O1xyXG5cclxuUHJvZ3Jlc3NCYXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gUHJvZ3Jlc3NCYXI7XHJcblxyXG5Qcm9ncmVzc0Jhci5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uKCkge1xyXG5cdHRoaXMuZ3JhcGhpY3MuY2xlYXIoKTtcclxuXHR0aGlzLnJlbmRlcmFibGVzLnVuc3Vic2NyaWJlKHRoaXMpO1xyXG59O1xyXG5cclxuLy9UbyBzdWJ0cmFjdCB2YWx1ZSwganVzdCB1c2UgbmVnYXRpdmUgbnVtYmVycyBhcyBhcmd1bWVudCBpLmUuIGZvby5hZGRWYWx1ZSgtNSk7XHJcblByb2dyZXNzQmFyLnByb3RvdHlwZS5hZGRWYWx1ZSA9IGZ1bmN0aW9uIChhZGRUaGlzKSB7XHJcblx0dGhpcy52YWx1ZSArPSBhZGRUaGlzO1xyXG5cdGlmKHRoaXMudmFsdWUgPiB0aGlzLm1heFZhbHVlKSB7XHJcblx0XHR0aGlzLnZhbHVlID0gdGhpcy5tYXhWYWx1ZTtcclxuXHR9XHJcblx0aWYodGhpcy52YWx1ZSA8IDApIHtcclxuXHRcdHRoaXMudmFsdWUgPSAwO1xyXG5cdH1cclxuXHR0aGlzLnRyeVRyaWdnZXIoKTtcclxufTtcclxuXHJcbi8vU2V0cyB0aGUgbG9jYXRpb24gd2hlcmUgcHJvZ3Jlc3MgYmFyIGlzIHJlbmRlcmVkXHJcblByb2dyZXNzQmFyLnByb3RvdHlwZS5zZXRMb2NhdGlvbiA9IGZ1bmN0aW9uKHNldFgsIHNldFkpIHtcclxuXHR0aGlzLnggPSBzZXRYO1xyXG5cdHRoaXMueSA9IHNldFk7XHJcbn07XHJcblxyXG4vL1NldHMgdGhlIHNpemUgb2YgdGhlIHByb2dyZXNzIGJhclxyXG5Qcm9ncmVzc0Jhci5wcm90b3R5cGUuc2V0U2l6ZSA9IGZ1bmN0aW9uKHNldFdpZHRoLCBzZXRIZWlnaHQpIHtcclxuXHR0aGlzLndpZHRoID0gc2V0V2lkdGg7XHJcblx0dGhpcy5oZWlnaHQgPSBzZXRIZWlnaHQ7XHJcbn07XHJcblxyXG5Qcm9ncmVzc0Jhci5wcm90b3R5cGUuc2V0U3R5bGUgPSBmdW5jdGlvbihiZ0JvcmRlclNpemUsIGJnQm9yZGVyQ29sb3IsIGJnQ29sb3IsIHBhZGRpbmdIb3JpeiwgcGFkZGluZ1ZlcnQsIHZhbHVlQm9yZGVyU2l6ZSwgdmFsdWVCb3JkZXJDb2xvciwgdmFsdWVDb2xvcikge1xyXG5cdHRoaXMuYmdCb3JkZXJTaXplID0gYmdCb3JkZXJTaXplO1xyXG5cdHRoaXMuYmdCb3JkZXJDb2xvciA9IGJnQm9yZGVyQ29sb3I7XHJcblx0dGhpcy5iZ0NvbG9yID0gYmdDb2xvcjtcclxuXHR0aGlzLnBhZGRpbmdIb3JpeiA9IHBhZGRpbmdIb3JpejtcclxuXHR0aGlzLnBhZGRpbmdWZXJ0ID0gcGFkZGluZ1ZlcnQ7XHJcblx0dGhpcy52YWx1ZUJvcmRlclNpemUgPSB2YWx1ZUJvcmRlclNpemU7XHJcblx0dGhpcy52YWx1ZUJvcmRlckNvbG9yID0gdmFsdWVCb3JkZXJDb2xvcjtcclxuXHR0aGlzLnZhbHVlQ29sb3IgPSB2YWx1ZUNvbG9yO1xyXG59O1xyXG5cclxuLy91cGRhdGUgZm9yIHByb2dyZXNzIGJhciwgY2FsbGVkIGp1c3QgYmVmb3JlIGRyYXdpbmcgcHJvZ3Jlc3MgYmFyXHJcbi8vT3ZlcndyaXRlIHRoaXMgZnVuY3Rpb24gaWYgZGVzaXJlZFxyXG5Qcm9ncmVzc0Jhci5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24oKSB7fTtcclxuXHJcbi8vUmVuZGVycyBwcm9ncmVzc0JhclxyXG5Qcm9ncmVzc0Jhci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24oKSB7XHJcblx0dGhpcy51cGRhdGUoKTtcclxuXHR0aGlzLmdyYXBoaWNzLmNsZWFyKCk7XHJcblx0Ly9EcmF3IGJhY2tncm91bmQgb2YgYmFyXHJcblx0dGhpcy5ncmFwaGljcy5saW5lU3R5bGUodGhpcy5iZ0JvcmRlclNpemUsIHRoaXMuYmdCb3JkZXJDb2xvciwgMSk7IC8vc2V0cyBib3JkZXIgY29sb3IgYW5kIHNpemVcclxuXHR0aGlzLmdyYXBoaWNzLmJlZ2luRmlsbCh0aGlzLmJnQ29sb3IpOyAvL3NldHMgY29sb3Igb2YgYmFja2dyb3VuZCBmaWxsXHJcblx0dGhpcy5ncmFwaGljcy5kcmF3UmVjdCh0aGlzLngtdGhpcy53aWR0aC8yLCB0aGlzLnktdGhpcy5oZWlnaHQvMiwgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xyXG5cdHRoaXMuZ3JhcGhpY3MuZW5kRmlsbCgpO1xyXG5cdC8vRHJhdyB2YWx1ZSBvZiBiYXJcclxuXHR2YXIgcGVyY2VudGFnZSA9IHRoaXMudmFsdWUgLyB0aGlzLm1heFZhbHVlO1xyXG5cdHZhciBiYXJXaWR0aCA9IHRoaXMud2lkdGggLSB0aGlzLnBhZGRpbmdIb3JpejtcclxuXHR2YXIgYmFySGVpZ2h0ID0gdGhpcy5oZWlnaHQgLSB0aGlzLnBhZGRpbmdWZXJ0O1xyXG5cdHRoaXMuZ3JhcGhpY3MubGluZVN0eWxlKHRoaXMudmFsdWVCb3JkZXJTaXplLCB0aGlzLnZhbHVlQm9yZGVyQ29sb3IsIDEpO1xyXG5cdHRoaXMuZ3JhcGhpY3MuYmVnaW5GaWxsKHRoaXMudmFsdWVDb2xvcik7XHJcblx0dGhpcy5ncmFwaGljcy5kcmF3UmVjdCh0aGlzLngtKGJhcldpZHRoLzIpLCB0aGlzLnktKGJhckhlaWdodC8yKSwgYmFyV2lkdGgqcGVyY2VudGFnZSwgYmFySGVpZ2h0KTtcclxuXHR0aGlzLmdyYXBoaWNzLmVuZEZpbGwoKTtcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gUHJvZ3Jlc3NCYXI7IiwidmFyIEdyb3VwX01hbmFnZXIgPSByZXF1aXJlKCcuL2dyb3VwTWFuYWdlcicpO1xyXG52YXIgUGVyc29uID0gcmVxdWlyZSgnLi9wZXJzb24nKTtcclxuXHJcbnZhciBCYWNrZ3JvdW5kID0gZnVuY3Rpb24gKGdhbWUsIGJhc2VYLCBiYXNlWSwgaFJhdGlvLCB2UmF0aW8sIGluY29tZSwgdHlwZSwgc3RhdGUpIHtcclxuICAgIFBoYXNlci5TcHJpdGUuY2FsbCh0aGlzLCBnYW1lLCAoYmFzZVggKiBoUmF0aW8gKiBnYW1lLndpZHRoKSwgKGJhc2VZICogdlJhdGlvICogZ2FtZS5oZWlnaHQpICsgMTAwLCAnYmFja2dyb3VuZCcpO1xyXG4gICAgZ2FtZS5hZGQuZXhpc3RpbmcodGhpcyk7XHJcbiAgICB0aGlzLmJhc2VYID0gYmFzZVg7XHJcbiAgICB0aGlzLmJhc2VZID0gYmFzZVk7XHJcbiAgICB0aGlzLmhSYXRpbyA9IGhSYXRpbztcclxuICAgIHRoaXMudlJhdGlvID0gdlJhdGlvO1xyXG4gICAgdGhpcy5uZXdIUmF0aW8gPSBoUmF0aW87XHJcbiAgICB0aGlzLm5ld1ZSYXRpbyA9IHZSYXRpbztcclxuICAgIHRoaXMubWluUmF0aW8gPSAuMTtcclxuICAgIHRoaXMubWF4UmF0aW8gPSAuNjtcclxuICAgIHRoaXMuZ3JvdXBfbWFuYWdlciA9IG5ldyBHcm91cF9NYW5hZ2VyKHRoaXMuZ2FtZSwgc3RhdGUpO1xyXG5cdHRoaXMuZ3JvdXBfbWFuYWdlci5iYWNrZ3JvdW5kID0gdGhpcztcclxuICAgXHR0aGlzLnR5cGUgPSB0eXBlO1xyXG4gICAgdGhpcy5pbmNvbWVMZXZlbCA9IGluY29tZTtcclxuXHR0aGlzLnN0YXRlID0gc3RhdGVcclxufTtcclxuXHJcbkJhY2tncm91bmQucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShQaGFzZXIuU3ByaXRlLnByb3RvdHlwZSk7XHJcbkJhY2tncm91bmQucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQmFja2dyb3VuZDtcclxuXHJcbkJhY2tncm91bmQucHJvdG90eXBlLmdldFZhcnMgPSBmdW5jdGlvbigpIHtcclxuICAgIC8vcmV0dXJuIHggJiB5IGFuZCB3aWR0aCAmIGhlaWdodCBvZiB2aXNpYmxlXHJcbiAgICByZXR1cm4gW3RoaXMueCwgdGhpcy55LCB0aGlzLmhSYXRpbyAqICh0aGlzLmdhbWUud2lkdGgpLCB0aGlzLnZSYXRpbyAqICh0aGlzLmdhbWUuaGVpZ2h0IC0gdGhpcy5teU1hbmFnZXIuYm9yZGVyKV07XHJcbn07XHJcblxyXG5CYWNrZ3JvdW5kLnByb3RvdHlwZS5nZXRWYXJzQ2VudGVyID0gZnVuY3Rpb24oKSB7XHJcbiAgICAvLyAvL3JldHVybiB4ICYgeSBvZiBjZW50ZXIgYW5kIHdpZHRoICYgaGVpZ2h0IG9mIHZpc2libGVcclxuICAgIHZhciB2aXNXaWR0aCA9IHRoaXMuaFJhdGlvICogKHRoaXMuZ2FtZS53aWR0aCk7XHJcbiAgICB2YXIgdmlzSGVpZ2h0ID0gdGhpcy52UmF0aW8gKiAodGhpcy5nYW1lLmhlaWdodCAtIHRoaXMubXlNYW5hZ2VyLmJvcmRlcik7XHJcbiAgICByZXR1cm4ge3dpZHRoIDogdmlzV2lkdGgsIGhlaWdodCA6IHZpc0hlaWdodCwgY2VudGVyIDoge3ggOiB0aGlzLnggKyB2aXNXaWR0aCAvIDIsIHkgOiB0aGlzLnkgKyB2aXNIZWlnaHQgLyAyfX07XHJcbn07XHJcblxyXG5CYWNrZ3JvdW5kLnByb3RvdHlwZS5udW1QZW9wbGUgPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBudW0gPSB0aGlzLmdyb3VwX21hbmFnZXIubnVtUGVvcGxlKCk7XHJcbiAgICBpZiAobnVtID09PSAwKSByZXR1cm4gMTtcclxuICAgIGVsc2UgcmV0dXJuIG51bTtcclxufTtcclxuXHJcbkJhY2tncm91bmQucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uKCkge1xyXG5cdGlmICh0aGlzLm5ld0hSYXRpbyA8IHRoaXMubWluUmF0aW8pIHRoaXMubmV3SFJhdGlvID0gdGhpcy5taW5SYXRpbztcclxuICAgIGlmICh0aGlzLm5ld1ZSYXRpbyA8IHRoaXMubWluUmF0aW8pIHRoaXMubmV3VlJhdGlvID0gdGhpcy5taW5SYXRpbztcclxuICAgIGlmICh0aGlzLm5ld0hSYXRpbyA+IHRoaXMubWF4UmF0aW8pIHRoaXMubmV3SFJhdGlvID0gdGhpcy5tYXhSYXRpbztcclxuICAgIGlmICh0aGlzLm5ld1ZSYXRpbyA+IHRoaXMubWF4UmF0aW8pIHRoaXMubmV3VlJhdGlvID0gdGhpcy5tYXhSYXRpbztcclxuICAgIGlmICh0aGlzLmhSYXRpbyAhPT0gdGhpcy5uZXdIUmF0aW8pIHtcclxuICAgICAgICBpZiAodGhpcy5oUmF0aW8gKyAuMDEgPCB0aGlzLm5ld0hSYXRpbykgdGhpcy5oUmF0aW8gKz0gLjAxO1xyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMuaFJhdGlvIC0gLjAxID4gdGhpcy5uZXdIUmF0aW8pIHRoaXMuaFJhdGlvIC09IC4wMTtcclxuICAgICAgICBlbHNlIHRoaXMuaFJhdGlvID0gdGhpcy5uZXdIUmF0aW87XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy52UmF0aW8gIT09IHRoaXMubmV3VlJhdGlvKSB7XHJcbiAgICAgICAgaWYgKHRoaXMudlJhdGlvICsgLjAxIDwgdGhpcy5uZXdWUmF0aW8pIHRoaXMudlJhdGlvICs9IC4wMTtcclxuICAgICAgICBlbHNlIGlmICh0aGlzLnZSYXRpbyAtIC4wMSA+IHRoaXMubmV3VlJhdGlvKSB0aGlzLnZSYXRpbyAtPSAuMDE7XHJcbiAgICAgICAgZWxzZSB0aGlzLnZSYXRpbyA9IHRoaXMubmV3VlJhdGlvO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMudHlwZSA9PT0gJ3VuZW1wbG95ZWQnKVxyXG4gICAgICAgIHRoaXMuaFJhdGlvID0gMTtcclxuICAgIHRoaXMuZ3JvdXBfbWFuYWdlci51cGRhdGUoKTtcclxufTtcclxuXHJcblxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBCYWNrZ3JvdW5kOyIsIi8vQ29udHJvbHMgYmFja2dyb3VuZCBlbGVtZW50c1xyXG5cclxudmFyIEJhY2tncm91bmQgPSByZXF1aXJlKCcuL2JhY2tncm91bmQnKTtcclxudmFyIFBlcnNvbiA9IHJlcXVpcmUoJy4vcGVyc29uJyk7XHJcbnZhciB1dGlsID0gcmVxdWlyZSgnLi4vdXRpbHMnKTtcclxuXHJcbnZhciBHcm91cCA9IHJlcXVpcmUoJy4vZ3JvdXAnKTtcclxuXHJcbnZhciBCYWNrZ3JvdW5kX01hbmFnZXIgPSBmdW5jdGlvbihnYW1lLCBzdGF0ZSkge1xyXG5cdHRoaXMuZ2FtZSA9IGdhbWU7XHJcblx0dGhpcy5zdGF0ZSA9IHN0YXRlO1xyXG5cdC8vQ3JlYXRlIGFycmF5IG9mIGJhY2tncm91bmRzXHJcblx0dGhpcy5iZ0FycmF5ID0gW1xyXG5cdFx0bmV3IEJhY2tncm91bmQodGhpcy5nYW1lLCAwLCAwLCAuMzMsIC4zMywgUGVyc29uLkVEVUxFVkVMLmxvdyAsICd3b3JrJyAsIHN0YXRlKSxcdC8vIHRoaXMuYmdBcnJheVswXSA9PSB3b3JrTG93XHJcblx0XHRuZXcgQmFja2dyb3VuZCh0aGlzLmdhbWUsIDEsIDAsIC4zMywgLjMzLCBQZXJzb24uRURVTEVWRUwubWlkICwgJ3dvcmsnICwgc3RhdGUpLFx0Ly8gdGhpcy5iZ0FycmF5WzFdID09IHdvcmtNaWRcclxuXHRcdG5ldyBCYWNrZ3JvdW5kKHRoaXMuZ2FtZSwgMiwgMCwgLjMzLCAuMzMsIFBlcnNvbi5FRFVMRVZFTC5oaWdoLCAnd29yaycgLCBzdGF0ZSksXHQvLyB0aGlzLmJnQXJyYXlbMl0gPT0gd29ya01pZFxyXG5cdFx0bmV3IEJhY2tncm91bmQodGhpcy5nYW1lLCAwLCAxLCAuMzMsIC4zMywgUGVyc29uLkVEVUxFVkVMLmxvdyAsICdob3VzZScsIHN0YXRlKSxcdC8vIHRoaXMuYmdBcnJheVszXSA9PSBob3VzZUxvd1xyXG5cdFx0bmV3IEJhY2tncm91bmQodGhpcy5nYW1lLCAxLCAxLCAuMzMsIC4zMywgUGVyc29uLkVEVUxFVkVMLm1pZCAsICdob3VzZScsIHN0YXRlKSxcdC8vIHRoaXMuYmdBcnJheVs0XSA9PSBob3VzZU1pZFxyXG5cdFx0bmV3IEJhY2tncm91bmQodGhpcy5nYW1lLCAyLCAxLCAuMzMsIC4zMywgUGVyc29uLkVEVUxFVkVMLmhpZ2gsICdob3VzZScsIHN0YXRlKSxcdC8vIHRoaXMuYmdBcnJheVs1XSA9PSBob3VzZU1pZFxyXG5cdFx0bmV3IEJhY2tncm91bmQodGhpcy5nYW1lLCAwLCAyLCAgIDEsIC4zMywgJycsICAgICAgICAgICAgICAndW5lbXBsb3llZCcsIHN0YXRlKVx0XHQvLyB0aGlzLmJnQXJyYXlbNl0gPT0gdW5lbXBsb3llZFxyXG5cdF07XHJcblx0Zm9yIChiZyBpbiB0aGlzLmJnQXJyYXkpIHtcclxuXHRcdHRoaXMuYmdBcnJheVtiZ10ubXlNYW5hZ2VyID0gdGhpcztcclxuXHR9XHJcblx0XHJcblx0Zm9yICh2YXIgaSBpbiB0aGlzLmJnQXJyYXkpIHtcclxuXHRcdGlmICh0aGlzLmJnQXJyYXlbaV0udHlwZSA9PSAnd29yaycpIHtcclxuXHRcdFx0aWYgKHRoaXMuYmdBcnJheVtpXS5pbmNvbWVMZXZlbCA9PT0gUGVyc29uLkVEVUxFVkVMLmxvdykge1xyXG5cdFx0XHRcdHRoaXMuYmdBcnJheVtpXS50aW50ID0gMHhlZDVjNWE7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSBpZiAodGhpcy5iZ0FycmF5W2ldLmluY29tZUxldmVsID09PSBQZXJzb24uRURVTEVWRUwubWlkKSB7XHJcblx0XHRcdFx0dGhpcy5iZ0FycmF5W2ldLnRpbnQgPSAweDZhZTI0NjtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIGlmICh0aGlzLmJnQXJyYXlbaV0uaW5jb21lTGV2ZWwgPT09IFBlcnNvbi5FRFVMRVZFTC5oaWdoKSB7XHJcblx0XHRcdFx0dGhpcy5iZ0FycmF5W2ldLnRpbnQgPSAweDJiNTllMjtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0ZWxzZSBpZiAodGhpcy5iZ0FycmF5W2ldLnR5cGUgPT0gJ2hvdXNlJykge1xyXG5cdFx0XHRpZiAodGhpcy5iZ0FycmF5W2ldLmluY29tZUxldmVsID09PSBQZXJzb24uRURVTEVWRUwubG93KSB7XHJcblx0XHRcdFx0dGhpcy5iZ0FycmF5W2ldLnRpbnQgPSAweGVkODE4MDtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIGlmICh0aGlzLmJnQXJyYXlbaV0uaW5jb21lTGV2ZWwgPT09IFBlcnNvbi5FRFVMRVZFTC5taWQpIHtcclxuXHRcdFx0XHR0aGlzLmJnQXJyYXlbaV0udGludCA9IDB4OTRlYTc5O1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2UgaWYgKHRoaXMuYmdBcnJheVtpXS5pbmNvbWVMZXZlbCA9PT0gUGVyc29uLkVEVUxFVkVMLmhpZ2gpIHtcclxuXHRcdFx0XHR0aGlzLmJnQXJyYXlbaV0udGludCA9IDB4NTQ3NmRkO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRlbHNlIHsgLy8gVW5lbXBsb3llZCBiYWNrZ3JvdW5kXHJcblx0XHRcdHRoaXMuYmdBcnJheVtpXS50aW50ID0gMHg4MDgwODA7XHJcblx0XHR9XHJcblx0XHR0aGlzLmJvcmRlciA9IDEwMDtcclxuXHR9XHJcblx0XHJcblx0Ly8gdmFyIHRlc3QgPSB0aGlzLmJnQXJyYXlbNl0uZ3JvdXBfbWFuYWdlcjtcclxuXHQvLyB2YXIgdGVzdEZsb2NrID0gbmV3IEdyb3VwKHRoaXMuZ2FtZSwgdGhpcy5nYW1lLndpZHRoIC8gMiArIDEwMCwgKHRoaXMuZ2FtZS5oZWlnaHQgLSB0aGlzLmJvcmRlcikgLyAyICsgMTAwLCBzdGF0ZSk7XHJcbiAvLyAgICBmb3IgKHZhciBpID0gMDsgaSA8IDEwOyBpKyspIHtcclxuIC8vICAgIFx0dmFyIHRlc3RQZXJzb24gPSBuZXcgUGVyc29uKHRoaXMuZ2FtZSwgdGhpcy5nYW1lLndpZHRoIC8gMiArIGkgKiAxNSwgKHRoaXMuZ2FtZS5oZWlnaHQgLSB0aGlzLmJvcmRlcikgLyAyICsgaSAqIDE1LCBpKTtcclxuIC8vICAgIFx0dGhpcy5nYW1lLmFkZC5leGlzdGluZyh0ZXN0UGVyc29uKTtcclxuIC8vICAgIFx0dGVzdEZsb2NrLmFkZE1lbWJlcih0ZXN0UGVyc29uKTtcclxuIC8vICAgIH1cclxuIC8vICAgIHRlc3QuYWRkTWVtYmVyKHRlc3RGbG9jayk7XHJcblx0Ly8gdGVzdEZsb2NrID0gbmV3IEdyb3VwKHRoaXMuZ2FtZSwgdGhpcy5nYW1lLndpZHRoIC8gMiAtIDEwMCwgKHRoaXMuZ2FtZS5oZWlnaHQgLSB0aGlzLmJvcmRlcikgLyAyICsgMTAwLCBzdGF0ZSk7XHJcblx0Ly8gZm9yICh2YXIgaSA9IDA7IGkgPCAxMDsgaSsrKSB7XHJcbiAgICBcdC8vIHZhciB0ZXN0UGVyc29uID0gbmV3IFBlcnNvbih0aGlzLmdhbWUsIHRoaXMuZ2FtZS53aWR0aCAvIDIgKyBpICogMTUgLSAxMDAsICh0aGlzLmdhbWUuaGVpZ2h0IC0gdGhpcy5ib3JkZXIpIC8gMiArIGkgKiAxNSArIDEwMCwgaSk7XHJcbiAgICBcdC8vIHRoaXMuZ2FtZS5hZGQuZXhpc3RpbmcodGVzdFBlcnNvbik7XHJcbiAgICBcdC8vIHRlc3RGbG9jay5hZGRNZW1iZXIodGVzdFBlcnNvbik7XHJcbiAgICAvLyB9XHJcbiAgICAvLyB0ZXN0LmFkZE1lbWJlcih0ZXN0RmxvY2spO1xyXG59O1xyXG5cclxuQmFja2dyb3VuZF9NYW5hZ2VyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEJhY2tncm91bmRfTWFuYWdlcjtcclxuXHJcbi8qQmFja2dyb3VuZF9NYW5hZ2VyLkJHTkFNRVMgPSB7XHJcblx0XHR3b3JrTG93ICAgIDogdGhpcy5iZ0FycmF5WzBdLFxyXG5cdFx0d29ya01pZCAgICA6IHRoaXMuYmdBcnJheVsxXSxcclxuXHRcdHdvcmtIaWdoICAgOiB0aGlzLmJnQXJyYXlbMl0sXHJcblx0XHRob3VzZUxvdyAgIDogdGhpcy5iZ0FycmF5WzNdLFxyXG5cdFx0aG91c2VNaWQgICA6IHRoaXMuYmdBcnJheVs0XSxcclxuXHRcdGhvdXNlSGlnaCAgOiB0aGlzLmJnQXJyYXlbNV0sXHJcblx0XHR1bmVtcGxveWVkIDogdGhpcy5iZ0FycmF5WzZdXHJcbn07Ki9cclxuXHJcbkJhY2tncm91bmRfTWFuYWdlci5wcm90b3R5cGUuc2VuZFRvID0gZnVuY3Rpb24oc291cmNlLCBkZXN0aW5hdGlvbiwgZ3JvdXApIHtcclxuXHQvLyBjb25zb2xlLmxvZygnc2VuZCB0bycsIHNvdXJjZSwgZGVzdGluYXRpb24sIGdyb3VwKTtcclxuXHQvLyBjb25zb2xlLmxvZyhkZXN0aW5hdGlvbik7XHJcblx0Ly8gY29uc29sZS5sb2coc291cmNlLCBkZXN0aW5hdGlvbik7XHJcblx0aWYgKGRlc3RpbmF0aW9uID09PSBudWxsKSB7XHJcblx0XHRyZXR1cm47XHJcblx0fVxyXG5cdHZhciB0cmFuc1R5cGUgPSB0aGlzLnRyYW5zZmVyVHlwZShzb3VyY2UsIGRlc3RpbmF0aW9uLCBncm91cClcclxuXHQvLyBjb25zb2xlLmxvZyhzb3VyY2UsIGRlc3RpbmF0aW9uLCBncm91cCwgdHJhbnNUeXBlKTtcclxuXHRpZiAodHJhbnNUeXBlLmNhbikge1x0Ly8gQ2hlY2sgaWYgdGhleSBjYW4gdHJhbnNmZXIgdXBcclxuXHRcdC8vIGNvbnNvbGUubG9nKCdjYW4nKTtcclxuXHRcdHNvdXJjZS5ncm91cF9tYW5hZ2VyLnRyYW5zZmVyKGRlc3RpbmF0aW9uLmdyb3VwX21hbmFnZXIsIGdyb3VwLCB0cmFuc1R5cGUuaGFwcGluZXNzKTtcclxuXHRcdGlmICh0cmFuc1R5cGUuZWR1Y2F0ZSkge1xyXG5cdFx0XHRncm91cC5zdGFydEVkdWNhdGlvbigpO1xyXG5cdFx0fVxyXG5cdFx0aWYgKHNvdXJjZS5pbmNvbWVMZXZlbCAhPT0gZGVzdGluYXRpb24uaW5jb21lTGV2ZWwpIHtcclxuXHRcdFx0dGhpcy51cGRhdGVSYXRpb3MoZGVzdGluYXRpb24pO1xyXG5cdFx0fVxyXG4gICAgICAgIGdyb3VwLmhhcHBpbmVzc01vZGlmaWVyID0gdHJhbnNUeXBlLmhhcHBpbmVzc01vZGlmaWVyO1xyXG5cdH1cclxuXHQvLyBjb25zb2xlLmxvZyhncm91cC5oYXBwaW5lc3NNb2RpZmllcik7XHJcbn07XHJcbkJhY2tncm91bmRfTWFuYWdlci5wcm90b3R5cGUubnVtUGVvcGxlID0gZnVuY3Rpb24oKSB7XHJcblx0dmFyIGNvdW50ID0gMDtcclxuXHRmb3IgKHZhciBpIGluIHRoaXMuYmdBcnJheSkge1xyXG5cdFx0Y291bnQgKz0gdGhpcy5iZ0FycmF5W2ldLmdyb3VwX21hbmFnZXIubnVtUGVvcGxlKCk7XHJcblx0fVxyXG5cdHJldHVybiBjb3VudDtcclxufTtcclxuQmFja2dyb3VuZF9NYW5hZ2VyLnByb3RvdHlwZS50cmFuc2ZlclR5cGUgPSBmdW5jdGlvbihzb3VyY2UsIGRlc3RpbmF0aW9uLCBncm91cCkge1xyXG4gICAgaWYgKGRlc3RpbmF0aW9uID09IG51bGwpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblx0dmFyIGdyb3VwRWR1ID0gZ3JvdXAubWVtYmVyc1swXS5lZHVMZXZlbDtcclxuXHR2YXIgY2FuID0gdGhpcy5jYW5UcmFuc2Zlcihzb3VyY2UsIGRlc3RpbmF0aW9uLCBncm91cCk7XHJcblx0Ly8gY29uc29sZS5sb2coZGVzdGluYXRpb24pO1xyXG5cdC8vIGNvbnNvbGUubG9nKGRlc3RpbmF0aW9uLnR5cGUsIGRlc3RpbmF0aW9uLmluY29tZUxldmVsKTtcclxuXHR2YXIgZWR1Y2F0ZSA9IChkZXN0aW5hdGlvbi50eXBlID09PSAnaG91c2UnICYmIGRlc3RpbmF0aW9uLmluY29tZUxldmVsKSA+IGdyb3VwRWR1O1xyXG4gICAgdmFyIGhhcHBpbmVzc01vZGlmaWVyID0gMDtcclxuICAgIGlmICh0aGlzLnN0YXRlLmN1ck1vbmV5IDwgMCkge1xyXG4gICAgXHRoYXBwaW5lc3NNb2RpZmllciAtPSAxO1xyXG4gICAgXHR0aGlzLm5lZ01vbmV5ID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHRoaXMubmVnTW9uZXkpe1xyXG4gICAgXHRoYXBwaW5lc3NNb2RpZmllciArPSAxO1xyXG4gICAgfVxyXG4gICAgaWYgKGRlc3RpbmF0aW9uLnR5cGUgPT0gJ3VuZW1wbG95ZWQnICYmIHNvdXJjZS50eXBlICE9ICd1bmVtcGxveWVkJykge1xyXG4gICAgXHQvLyBjb25zb2xlLmxvZygndW5lbXBsb3ltZW50Jyk7XHJcbiAgICAgICAgaGFwcGluZXNzTW9kaWZpZXIgLT0gMTtcclxuICAgIH1cclxuICAgIGlmIChkZXN0aW5hdGlvbi5pbmNvbWVMZXZlbCA8IGdyb3VwRWR1KSB7XHJcbiAgICBcdC8vIGNvbnNvbGUubG9nKCdlZHVjYXRpb24nKTtcclxuICAgICAgICBoYXBwaW5lc3NNb2RpZmllciAtPSBncm91cEVkdSAtIGRlc3RpbmF0aW9uLmluY29tZUxldmVsO1xyXG4gICAgfVxyXG4gICAgaWYgKGRlc3RpbmF0aW9uLnR5cGUgPT0gJ2hvdXNlJykge1xyXG4gICAgXHQvLyBjb25zb2xlLmxvZygnaG91c2luZycpO1xyXG4gICAgXHRoYXBwaW5lc3NNb2RpZmllciArPSAxO1xyXG4gICAgfVxyXG4gICAgaWYgKGRlc3RpbmF0aW9uLnR5cGUgPT0gJ3dvcmsnKSB7XHJcbiAgICBcdC8vIGNvbnNvbGUubG9nKCd0YXgnLCBkZXN0aW5hdGlvbi5pbmNvbWVMZXZlbCwgdGhpcy5zdGF0ZS50YXhNb2QubG93KTtcclxuICAgIFx0aWYgKGRlc3RpbmF0aW9uLmluY29tZUxldmVsID09IDApIHtcclxuXHQgICAgXHRpZiAodGhpcy5zdGF0ZS50YXhNb2QubG93ID09IC41KSB7XHJcblx0ICAgIFx0XHRoYXBwaW5lc3NNb2RpZmllciArPSAxO1xyXG5cdCAgICBcdH0gZWxzZSBpZiAodGhpcy5zdGF0ZS50YXhNb2QubG93ID09IDEpIHtcclxuXHQgICAgXHRcdFxyXG5cdCAgICBcdH0gZWxzZSBpZiAodGhpcy5zdGF0ZS50YXhNb2QubG93ID09IDEuNSkge1xyXG5cdCAgICBcdFx0aGFwcGluZXNzTW9kaWZpZXIgLT0gMTtcclxuXHQgICAgXHR9XHJcbiAgICBcdH0gZWxzZSBpZiAoZGVzdGluYXRpb24uaW5jb21lTGV2ZWwgPT0gMSkge1xyXG5cdCAgICBcdGlmICh0aGlzLnN0YXRlLnRheE1vZC5taWQgPT0gLjUpIHtcclxuXHQgICAgXHRcdGhhcHBpbmVzc01vZGlmaWVyICs9IDE7XHJcblx0ICAgIFx0fSBlbHNlIGlmICh0aGlzLnN0YXRlLnRheE1vZC5taWQgPT0gMSkge1xyXG5cdCAgICBcdFx0XHJcblx0ICAgIFx0fSBlbHNlIGlmICh0aGlzLnN0YXRlLnRheE1vZC5taWQgPT0gMS41KSB7XHJcblx0ICAgIFx0XHRoYXBwaW5lc3NNb2RpZmllciAtPSAxO1xyXG5cdCAgICBcdH1cclxuICAgIFx0fSBlbHNlIGlmIChkZXN0aW5hdGlvbi5pbmNvbWVMZXZlbCA9PSAyKSB7XHJcblx0ICAgIFx0aWYgKHRoaXMuc3RhdGUudGF4TW9kLmhpZ2ggPT0gLjUpIHtcclxuXHQgICAgXHRcdGhhcHBpbmVzc01vZGlmaWVyICs9IDE7XHJcblx0ICAgIFx0fSBlbHNlIGlmICh0aGlzLnN0YXRlLnRheE1vZC5oaWdoID09IDEpIHtcclxuXHJcblx0ICAgIFx0fSBlbHNlIGlmICh0aGlzLnN0YXRlLnRheE1vZC5oaWdoID09IDEuNSkge1xyXG5cdCAgICBcdFx0aGFwcGluZXNzTW9kaWZpZXIgLT0gMTtcclxuXHQgICAgXHR9XHJcbiAgICBcdH1cclxuIFx0fVxyXG4gXHQvLyBjb25zb2xlLmxvZyhoYXBwaW5lc3NNb2RpZmllciwgZ3JvdXAuaGFwcGluZXNzTW9kaWZpZXIpO1xyXG4gICAgdmFyIGhhcHBpbmVzc0NoYW5nZSA9IGhhcHBpbmVzc01vZGlmaWVyIC0gZ3JvdXAuaGFwcGluZXNzTW9kaWZpZXI7XHJcbiAgICAvLyBjb25zb2xlLmxvZyhoYXBwaW5lc3NDaGFuZ2UsIGhhcHBpbmVzc01vZGlmaWVyLCBncm91cC5oYXBwaW5lc3NNb2RpZmllcik7XHJcbiAgICB2YXIgaW5jb21lQ2hhbmdlID0gMDtcclxuICAgIHZhciBiYXNlSW5jb21lID0gZ3JvdXAuaW5jb21lKCk7XHJcbiAgICB2YXIgbmV3SW5jb21lID0gMDtcclxuICAgIHZhciBudW1QZW9wbGUgPSBncm91cC5udW1QZW9wbGUoKTtcclxuICAgIGlmIChkZXN0aW5hdGlvbi50eXBlID09ICd3b3JrJykge1xyXG4gICAgXHQvLyBjb25zb2xlLmxvZygndGF4JywgZGVzdGluYXRpb24uaW5jb21lTGV2ZWwsIHRoaXMuc3RhdGUudGF4TW9kLmxvdyk7XHJcbiAgICBcdGlmIChkZXN0aW5hdGlvbi5pbmNvbWVMZXZlbCA9PSAwKSB7XHJcblx0ICAgIFx0bmV3SW5jb21lICs9IG51bVBlb3BsZSAqIFBlcnNvbi5JTkNPTUVTLmxvdyAqIHRoaXMuc3RhdGUudGF4TW9kLmxvdztcclxuICAgIFx0fSBlbHNlIGlmIChkZXN0aW5hdGlvbi5pbmNvbWVMZXZlbCA9PSAxKSB7XHJcblx0ICAgIFx0bmV3SW5jb21lICs9IG51bVBlb3BsZSAqIFBlcnNvbi5JTkNPTUVTLm1pZCAqIHRoaXMuc3RhdGUudGF4TW9kLm1pZDtcclxuICAgIFx0fSBlbHNlIGlmIChkZXN0aW5hdGlvbi5pbmNvbWVMZXZlbCA9PSAyKSB7XHJcblx0ICAgIFx0bmV3SW5jb21lICs9IG51bVBlb3BsZSAqIFBlcnNvbi5JTkNPTUVTLmhpZ2ggKiB0aGlzLnN0YXRlLnRheE1vZC5oaWdoO1xyXG4gICAgXHR9XHJcbiBcdH0gZWxzZSBpZiAoZGVzdGluYXRpb24udHlwZSA9PSAnaG9tZScpIHtcclxuIFx0XHRpZiAoZGVzdGluYXRpb24uaW5jb21lTGV2ZWwgPT0gMCkge1xyXG5cdCAgICBcdG5ld0luY29tZSAtPSBudW1QZW9wbGUgKiBQZXJzb24uSU5DT01FUy5sb3c7XHJcbiAgICBcdH0gZWxzZSBpZiAoZGVzdGluYXRpb24uaW5jb21lTGV2ZWwgPT0gMSkge1xyXG5cdCAgICBcdG5ld0luY29tZSAtPSBudW1QZW9wbGUgKiBQZXJzb24uSU5DT01FUy5taWQ7XHJcbiAgICBcdH0gZWxzZSBpZiAoZGVzdGluYXRpb24uaW5jb21lTGV2ZWwgPT0gMikge1xyXG5cdCAgICBcdG5ld0luY29tZSAtPSBudW1QZW9wbGUgKiBQZXJzb24uSU5DT01FUy5oaWdoO1xyXG4gICAgXHR9XHJcbiBcdH1cclxuIFx0Ly8gY29uc29sZS5sb2cobmV3SW5jb21lLCBiYXNlSW5jb21lKVxyXG4gXHR2YXIgaW5jb21lQ2hhbmdlID0gbmV3SW5jb21lIC0gYmFzZUluY29tZTtcclxuIFx0Ly8gY29uc29sZS5sb2coaGFwcGluZXNzTW9kaWZpZXIpO1xyXG5cdHJldHVybiB7Y2FuIDogY2FuLCBlZHVjYXRlIDogZWR1Y2F0ZSwgaGFwcGluZXNzQ2hhbmdlIDogaGFwcGluZXNzQ2hhbmdlLCBpbmNvbWVDaGFuZ2UgOiBpbmNvbWVDaGFuZ2UsIGhhcHBpbmVzc01vZGlmaWVyIDogaGFwcGluZXNzTW9kaWZpZXJ9O1xyXG59O1xyXG5CYWNrZ3JvdW5kX01hbmFnZXIucHJvdG90eXBlLmNhblRyYW5zZmVyID0gZnVuY3Rpb24oc291cmNlLCBkZXN0aW5hdGlvbiwgZ3JvdXApIHtcclxuXHQvLyBjb25zb2xlLmxvZyhzb3VyY2UsIGRlc3RpbmF0aW9uLCBncm91cCk7XHJcblx0aWYgKHNvdXJjZSA9PT0gbnVsbCB8fCBkZXN0aW5hdGlvbiA9PT0gbnVsbCkgcmV0dXJuIGZhbHNlO1xyXG5cdGlmIChzb3VyY2UudHlwZSA9PSBkZXN0aW5hdGlvbi50eXBlICYmIHNvdXJjZS5pbmNvbWVMZXZlbCA9PSBkZXN0aW5hdGlvbi5pbmNvbWVMZXZlbCkge1xyXG5cdFx0cmV0dXJuIGZhbHNlO1xyXG5cdH1cclxuXHR2YXIgc291cmNlRWR1ID0gZ3JvdXAubWVtYmVyc1swXS5lZHVMZXZlbDtcclxuXHRpZiAoZGVzdGluYXRpb24udHlwZSA9PT0gJ3VuZW1wbG95ZWQnKSB7XHJcblx0XHRyZXR1cm4gdHJ1ZTtcclxuXHR9XHJcblx0aWYgKHNvdXJjZUVkdSA9PT0gUGVyc29uLkVEVUxFVkVMLnVuZW1wbG95ZWQpIHtcclxuXHRcdGlmIChkZXN0aW5hdGlvbi5pbmNvbWVMZXZlbCA9PT0gUGVyc29uLkVEVUxFVkVMLmxvdyAmJiBkZXN0aW5hdGlvbi50eXBlID09PSAnaG91c2UnKSB7XHJcblx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0fVxyXG5cdH0gZWxzZSBpZiAoc291cmNlRWR1ID09PSBQZXJzb24uRURVTEVWRUwubG93KSB7XHJcblx0XHRpZiAoZGVzdGluYXRpb24uaW5jb21lTGV2ZWwgPT09IFBlcnNvbi5FRFVMRVZFTC5sb3cpIHtcclxuXHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHR9IGVsc2UgaWYgKGRlc3RpbmF0aW9uLmluY29tZUxldmVsID09PSBQZXJzb24uRURVTEVWRUwubWlkKSB7XHJcblx0XHRcdGlmIChkZXN0aW5hdGlvbi50eXBlID09PSAnaG91c2UnKSB7XHJcblx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9IGVsc2UgaWYgKHNvdXJjZUVkdSA9PT0gUGVyc29uLkVEVUxFVkVMLm1pZCkge1xyXG5cdFx0aWYgKGRlc3RpbmF0aW9uLmluY29tZUxldmVsID09PSBQZXJzb24uRURVTEVWRUwubG93KSB7XHJcblx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0fSBlbHNlIGlmIChkZXN0aW5hdGlvbi5pbmNvbWVMZXZlbCA9PT0gUGVyc29uLkVEVUxFVkVMLm1pZCkge1xyXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdH0gZWxzZSBpZiAoZGVzdGluYXRpb24uaW5jb21lTGV2ZWwgPT09IFBlcnNvbi5FRFVMRVZFTC5oaWdoKSB7XHJcblx0XHRcdGlmIChkZXN0aW5hdGlvbi50eXBlID09PSAnaG91c2UnKSB7XHJcblx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9IGVsc2UgaWYgKHNvdXJjZUVkdSA9PT0gUGVyc29uLkVEVUxFVkVMLmhpZ2gpIHtcclxuXHRcdHJldHVybiB0cnVlO1xyXG5cdH1cclxuXHRyZXR1cm4gZmFsc2U7XHJcbn07XHJcbkJhY2tncm91bmRfTWFuYWdlci5wcm90b3R5cGUuYmFja2dyb3VuZEJ5ID0gZnVuY3Rpb24odHlwZSwgaW5jb21lTGV2ZWwpIHtcclxuXHRmb3IgKHZhciBiZyBpbiB0aGlzLmJnQXJyYXkpIHtcclxuXHRcdGJnID0gdGhpcy5iZ0FycmF5W2JnXTtcclxuXHRcdGlmIChiZy50eXBlID09IHR5cGUgJiYgYmcuaW5jb21lTGV2ZWwgPT0gaW5jb21lTGV2ZWwpIHtcclxuXHRcdFx0cmV0dXJuIGJnO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRyZXR1cm4gbnVsbDtcclxufTtcclxuXHJcbkJhY2tncm91bmRfTWFuYWdlci5wcm90b3R5cGUud2hlcmVDbGlja2VkID0gZnVuY3Rpb24oKSB7XHJcblx0Zm9yICh2YXIgaSBpbiB0aGlzLmJnQXJyYXkpIHtcclxuXHRcdHZhciBjdXJEaW1lbnNpb25zID0gdGhpcy5iZ0FycmF5W2ldLmdldFZhcnMoKTtcclxuXHRcdHZhciBtb3VzZVggPSB0aGlzLmdhbWUuaW5wdXQueDtcclxuXHRcdHZhciBtb3VzZVkgPSB0aGlzLmdhbWUuaW5wdXQueTtcclxuXHRcdC8vIGlmKGkgPT0gNikgY29uc29sZS5sb2coJ2N1ckRpbWVuc2lvbnM6ICcgKyBjdXJEaW1lbnNpb25zKTtcclxuXHRcdGlmIChtb3VzZVggPiBjdXJEaW1lbnNpb25zWzBdICYmIG1vdXNlWCA8PSBjdXJEaW1lbnNpb25zWzBdICsgY3VyRGltZW5zaW9uc1syXSkge1xyXG5cdFx0XHRpZiAobW91c2VZID4gY3VyRGltZW5zaW9uc1sxXSAmJiBtb3VzZVkgPD0gY3VyRGltZW5zaW9uc1sxXSArIGN1ckRpbWVuc2lvbnNbM10pIHtcclxuXHRcdFx0XHRyZXR1cm4gdGhpcy5iZ0FycmF5W2ldO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cdHJldHVybiBudWxsO1xyXG59O1xyXG5cclxuQmFja2dyb3VuZF9NYW5hZ2VyLnByb3RvdHlwZS5maW5kT3RoZXIgPSBmdW5jdGlvbihzb3VyY2UsIGRlc3RpbmF0aW9uKSB7XHJcblx0aWYgKHNvdXJjZS50eXBlID09PSAnd29yaycgJiYgZGVzdGluYXRpb24udHlwZSA9PT0gJ3dvcmsnKSB7XHJcblx0XHRpZiAoc291cmNlLmluY29tZUxldmVsID09PSBQZXJzb24uRURVTEVWRUwubG93KSB7XHJcblx0XHRcdGlmIChkZXN0aW5hdGlvbi5pbmNvbWVMZXZlbCA9PT0gUGVyc29uLkVEVUxFVkVMLm1pZCkgcmV0dXJuIHRoaXMuYmdBcnJheVsyXTtcclxuXHRcdFx0ZWxzZSBpZiAoZGVzdGluYXRpb24uaW5jb21lTGV2ZWwgPT09IFBlcnNvbi5FRFVMRVZFTC5oaWdoKSByZXR1cm4gdGhpcy5iZ0FycmF5WzFdO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSBpZiAoc291cmNlLmluY29tZUxldmVsID09PSBQZXJzb24uRURVTEVWRUwubWlkKSB7XHJcblx0XHRcdGlmIChkZXN0aW5hdGlvbi5pbmNvbWVMZXZlbCA9PT0gUGVyc29uLkVEVUxFVkVMLmxvdykgcmV0dXJuIHRoaXMuYmdBcnJheVsyXTtcclxuXHRcdFx0ZWxzZSBpZiAoZGVzdGluYXRpb24uaW5jb21lTGV2ZWwgPT09IFBlcnNvbi5FRFVMRVZFTC5oaWdoKSByZXR1cm4gdGhpcy5iZ0FycmF5WzBdO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSBpZiAoc291cmNlLmluY29tZUxldmVsID09PSBQZXJzb24uRURVTEVWRUwuaGlnaCkge1xyXG5cdFx0XHRpZiAoZGVzdGluYXRpb24uaW5jb21lTGV2ZWwgPT09IFBlcnNvbi5FRFVMRVZFTC5sb3cpIHJldHVybiB0aGlzLmJnQXJyYXlbMV07XHJcblx0XHRcdGVsc2UgaWYgKGRlc3RpbmF0aW9uLmluY29tZUxldmVsID09PSBQZXJzb24uRURVTEVWRUwubWlkKSByZXR1cm4gdGhpcy5iZ0FycmF5WzBdO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRlbHNlIGlmIChzb3VyY2UudHlwZSA9PT0gJ2hvdXNlJyAmJiBkZXN0aW5hdGlvbi50eXBlID09PSAnaG91c2UnKSB7XHJcblx0XHRpZiAoc291cmNlLmluY29tZUxldmVsID09PSBQZXJzb24uRURVTEVWRUwubG93KSB7XHJcblx0XHRcdGlmIChkZXN0aW5hdGlvbi5pbmNvbWVMZXZlbCA9PT0gUGVyc29uLkVEVUxFVkVMLm1pZCkgcmV0dXJuIHRoaXMuYmdBcnJheVs1XTtcclxuXHRcdFx0ZWxzZSBpZiAoZGVzdGluYXRpb24uaW5jb21lTGV2ZWwgPT09IFBlcnNvbi5FRFVMRVZFTC5oaWdoKSByZXR1cm4gdGhpcy5iZ0FycmF5WzRdO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSBpZiAoc291cmNlLmluY29tZUxldmVsID09PSBQZXJzb24uRURVTEVWRUwubWlkKSB7XHJcblx0XHRcdGlmIChkZXN0aW5hdGlvbi5pbmNvbWVMZXZlbCA9PT0gUGVyc29uLkVEVUxFVkVMLmxvdykgcmV0dXJuIHRoaXMuYmdBcnJheVs1XTtcclxuXHRcdFx0ZWxzZSBpZiAoZGVzdGluYXRpb24uaW5jb21lTGV2ZWwgPT09IFBlcnNvbi5FRFVMRVZFTC5oaWdoKSByZXR1cm4gdGhpcy5iZ0FycmF5WzNdO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSBpZiAoc291cmNlLmluY29tZUxldmVsID09PSBQZXJzb24uRURVTEVWRUwuaGlnaCkge1xyXG5cdFx0XHRpZiAoZGVzdGluYXRpb24uaW5jb21lTGV2ZWwgPT09IFBlcnNvbi5FRFVMRVZFTC5sb3cpIHJldHVybiB0aGlzLmJnQXJyYXlbNF07XHJcblx0XHRcdGVsc2UgaWYgKGRlc3RpbmF0aW9uLmluY29tZUxldmVsID09PSBQZXJzb24uRURVTEVWRUwubWlkKSByZXR1cm4gdGhpcy5iZ0FycmF5WzNdO1xyXG5cdFx0fVxyXG5cdH1cclxufTtcclxuXHJcbkJhY2tncm91bmRfTWFuYWdlci5wcm90b3R5cGUudXBkYXRlUmF0aW9zID0gZnVuY3Rpb24oZGVzdGluYXRpb24pIHtcclxuXHRpZiAoZGVzdGluYXRpb24udHlwZSA9PT0gJ3dvcmsnKSB7XHJcblx0XHR2YXIgaFJhdGlvcyA9IHV0aWwucmF0aW8odGhpcy5iZ0FycmF5WzBdLm51bVBlb3BsZSgpLCB0aGlzLmJnQXJyYXlbMV0ubnVtUGVvcGxlKCksIHRoaXMuYmdBcnJheVsyXS5udW1QZW9wbGUoKSk7XHJcblx0fVxyXG5cdGVsc2V7XHJcblx0XHR2YXIgaFJhdGlvcyA9IHV0aWwucmF0aW8odGhpcy5iZ0FycmF5WzNdLm51bVBlb3BsZSgpLCB0aGlzLmJnQXJyYXlbNF0ubnVtUGVvcGxlKCksIHRoaXMuYmdBcnJheVs1XS5udW1QZW9wbGUoKSk7XHJcblx0fVxyXG5cdHZhciBlbXBsb3llZCA9IDA7XHJcblx0Zm9yICh2YXIgaiA9IDA7IGogPCA2OyBqKyspXHJcblx0XHRlbXBsb3llZCArPSB0aGlzLmJnQXJyYXlbal0ubnVtUGVvcGxlKCk7XHJcblx0dmFyIHZSYXRpb3MgPSB1dGlsLnJhdGlvKHRoaXMuYmdBcnJheVs2XS5udW1QZW9wbGUoKSwgZW1wbG95ZWQpO1xyXG5cdGZvciAodmFyIGkgPSAwIGluIHRoaXMuYmdBcnJheSkge1xyXG5cdFx0aWYgKGkgIT09IDYpIHtcdFx0Ly8gSWYgbm90IHVuZW1wbG95ZWQgYmdcclxuXHRcdFx0aWYgKGkgPCAzKSB7XHQvLyBJZiB3b3JrIGJnXHJcblx0XHRcdFx0dGhpcy5iZ0FycmF5W2ldLm5ld0hSYXRpbyA9IGhSYXRpb3NbaV07XHJcblx0XHRcdFx0dGhpcy5iZ0FycmF5W2ldLm5ld1ZSYXRpbyA9IHZSYXRpb3NbMV0gLyAyO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2Uge1x0XHRcdC8vIElmIGhvdXNlIGJnXHJcblx0XHRcdFx0dGhpcy5iZ0FycmF5W2ldLm5ld0hSYXRpbyA9IGhSYXRpb3NbaSAtIDNdO1xyXG5cdFx0XHRcdHRoaXMuYmdBcnJheVtpXS5uZXdWUmF0aW8gPSB2UmF0aW9zWzFdIC8gMjtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0ZWxzZSBiZ0FycmF5W2ldLm5ld1ZSYXRpbyA9IHZSYXRpb3NbMF07IC8vIFVuZW1wbG95ZWQgYmdcclxuXHR9XHJcblx0Ly8gY29uc29sZS5sb2codlJhdGlvcyk7XHJcblx0Zm9yICh2YXIgYmcgaW4gdGhpcy5iZ0FycmF5KSB7XHJcblx0XHRiZyA9IHRoaXMuYmdBcnJheVtiZ107XHJcblx0XHRiZy5ncm91cF9tYW5hZ2VyLnVwZGF0ZVZhcnMoKTtcclxuXHR9XHJcbn07XHJcblxyXG5CYWNrZ3JvdW5kX01hbmFnZXIucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uKCkge1xyXG5cdGZvciAodmFyIGkgaW4gdGhpcy5iZ0FycmF5KSB7XHJcbiAgICBcdGlmICh0aGlzLmJnQXJyYXlbaV0uaW5jb21lTGV2ZWwgPT09IFBlcnNvbi5FRFVMRVZFTC5taWQpIHtcclxuICAgIFx0XHR0aGlzLmJnQXJyYXlbaV0ueCA9IHRoaXMuYmdBcnJheVswXS5nZXRWYXJzKClbMl07XHJcbiAgICBcdH1cclxuICAgIFx0ZWxzZSBpZiAodGhpcy5iZ0FycmF5W2ldLmluY29tZUxldmVsID09PSBQZXJzb24uRURVTEVWRUwuaGlnaCkge1xyXG4gICAgXHQgICAgdGhpcy5iZ0FycmF5W2ldLnggPSB0aGlzLmJnQXJyYXlbMV0uZ2V0VmFycygpWzBdICsgdGhpcy5iZ0FycmF5WzFdLmdldFZhcnMoKVsyXTtcclxuICAgIFx0fVxyXG4gICAgXHR0aGlzLmJnQXJyYXlbaV0ueSA9ICh0aGlzLmJnQXJyYXlbaV0uYmFzZVkgKiB0aGlzLmJnQXJyYXlbaV0udlJhdGlvICogKHRoaXMuZ2FtZS5oZWlnaHQgLSB0aGlzLmJvcmRlcikpICsgdGhpcy5ib3JkZXI7XHJcblx0XHR0aGlzLmJnQXJyYXlbaV0udXBkYXRlKCk7XHJcblx0fVxyXG5cdHZhciB0ZXN0ID0gdGhpcy5iZ0FycmF5WzNdLmdldFZhcnNDZW50ZXIoKTtcclxufTtcclxuXHJcbkJhY2tncm91bmRfTWFuYWdlci5wcm90b3R5cGUuZW5kUXVpdCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdGhpcy5qdXN0UXVpdCA9IGZhbHNlO1xyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBCYWNrZ3JvdW5kX01hbmFnZXI7IiwiLy9jb250cm9scyBmbG9ja2luZyBmb3IgYSBncm91cCBvZiBwZXJzb24gb2JqZWN0c1xyXG52YXIgdXRpbCA9IHJlcXVpcmUoJy4uL3V0aWxzJyk7XHJcblxyXG52YXIgR3JvdXAgPSBmdW5jdGlvbiAoZ2FtZSwgY2VudGVyWCwgY2VudGVyWSwgc3RhdGUpIHtcclxuXHR0aGlzLmdhbWUgPSBnYW1lO1xyXG5cdHRoaXMubWVtYmVycyA9IFtdO1xyXG5cdHRoaXMubWluRGlzdCA9IDIwO1xyXG5cdC8vdGhpcy5ub2lzZSA9IDEwO1xyXG5cdHRoaXMuY2VudGVyID0ge3ggOiBjZW50ZXJYLCB5IDogY2VudGVyWX07XHJcblx0dGhpcy5jbGlja0Rpc3QgPSA1MDtcclxuXHR0aGlzLnNlbGVjdGVkID0gZmFsc2U7XHJcblx0dGhpcy5zZWxlY3Rpb24gPSB0aGlzLmdhbWUuYWRkLnNwcml0ZSh0aGlzLmNlbnRlci54LCB0aGlzLmNlbnRlci55LCAnc2VsZWN0aW9uJyk7XHJcblx0dGhpcy5zZWxlY3Rpb24uYW5jaG9yLnNldFRvKDAuNSwgMC41KTtcclxuXHR0aGlzLnNlbGVjdGlvbi53aWR0aCA9IDEwMDtcclxuXHR0aGlzLnNlbGVjdGlvbi5oZWlnaHQgPSAxMDA7XHJcblx0dGhpcy5zZWxlY3Rpb24udmlzaWJsZSA9IGZhbHNlO1xyXG5cdHRoaXMudmVsb2NpdHkgPSB7eCA6IDAsIHkgOiAwfTtcclxuXHR0aGlzLnNwZWVkID0gLjA1O1xyXG5cdHRoaXMuc3RhdGUgPSBzdGF0ZTtcclxuXHR0aGlzLmJvb2sgPSB0aGlzLmdhbWUuYWRkLnNwcml0ZSh0aGlzLmNlbnRlci54LCB0aGlzLmNlbnRlci55LCAnYm9vaycpO1xyXG5cdHRoaXMuYm9vay5hbmNob3Iuc2V0VG8oMC41LCAwLjUpO1xyXG5cdHRoaXMuYm9vay52aXNpYmxlID0gZmFsc2U7XHJcblx0dGhpcy5sZWFybmluZ1RpbWUgPSAuMDE7XHJcbiAgICB0aGlzLmhvdmVyID0gZmFsc2U7XHJcbiAgICB0aGlzLmxvY2sgPSB0aGlzLmdhbWUuYWRkLnNwcml0ZSh0aGlzLmNlbnRlci54LCB0aGlzLmNlbnRlci55LCAnbG9jaycpO1xyXG5cdHRoaXMubG9jay5hbmNob3Iuc2V0VG8oMC41LCAwLjUpO1xyXG5cdHRoaXMubG9jay53aWR0aCA9IDI1O1xyXG5cdHRoaXMubG9jay5oZWlnaHQgPSAzNTtcclxuXHR0aGlzLmxvY2sudmlzaWJsZSA9IGZhbHNlO1xyXG5cdHRoaXMubG9ja1RpbWUgPSA1O1xyXG5cdHRoaXMuaGFwcGluZXNzTW9kaWZpZXIgPSAwO1xyXG5cdHRoaXMuc2VsZWN0aW9uV2VpZ2h0ID0gMi41O1xyXG5cdHRoaXMubWluU2VsZWN0aW9uU2l6ZSA9IDQwO1xyXG5cdFxyXG5cdHRoaXMuc3RhdGUuaW5wdXQub25Eb3duLmFkZCh0aGlzLm9uSW5wdXREb3duLCB0aGlzKTtcclxuICAgIHRoaXMuc3RhdGUuaW5wdXQuYWRkTW92ZUNhbGxiYWNrKHRoaXMub25Nb3ZlLCB0aGlzKTtcclxufTtcclxuR3JvdXAucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gR3JvdXA7XHJcbkdyb3VwLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbigpIHtcclxuXHQvLyBjb25zb2xlLmxvZyh0aGlzLmNlbnRlcik7XHJcblx0Ly91cGRhdGUgY2VudGVyXHJcblx0dmFyIG5ld1ggPSB0aGlzLmNlbnRlci54ICsgdGhpcy52ZWxvY2l0eS54ICogdGhpcy5zcGVlZDtcclxuXHR2YXIgbmV3WSA9IHRoaXMuY2VudGVyLnkgKyB0aGlzLnZlbG9jaXR5LnkgKiB0aGlzLnNwZWVkO1xyXG5cdHRoaXMuY2hhbmdlQ2VudGVyKHt4IDogbmV3WCwgeSA6IG5ld1l9KTtcclxuXHRmb3IgKHZhciBtZW1iZXIgaW4gdGhpcy5tZW1iZXJzKSB7XHJcblx0XHRtZW1iZXIgPSB0aGlzLm1lbWJlcnNbbWVtYmVyXTtcclxuXHRcdHZhciB2ZWxvY2l0eSA9IHt4OjAsIHk6MH07XHJcblx0XHR2YXIgZGlmZiA9IHt4OjAsIHk6MH07XHJcblx0XHRkaWZmLnggPSB0aGlzLmNlbnRlci54IC0gbWVtYmVyLng7XHJcblx0XHRkaWZmLnkgPSB0aGlzLmNlbnRlci55IC0gbWVtYmVyLnk7XHJcblx0XHR2ZWxvY2l0eS54ICs9IGRpZmYueDtcclxuXHRcdHZlbG9jaXR5LnkgKz0gZGlmZi55O1xyXG5cdFx0Zm9yICh2YXIgb3RoZXIgaW4gdGhpcy5tZW1iZXJzKSB7XHJcblx0XHRcdG90aGVyID0gdGhpcy5tZW1iZXJzW290aGVyXTtcclxuXHRcdFx0Ly9pZ25vcmUgc2VsZlxyXG5cdFx0XHRpZiAob3RoZXIgPT09IG1lbWJlcikge1xyXG5cdFx0XHRcdGNvbnRpbnVlO1xyXG5cdFx0XHR9XHJcblx0XHRcdHZhciBvRGlmZiA9IHt4OjAsIHk6MH07XHJcblx0XHRcdG9EaWZmLnggPSBvdGhlci54IC0gbWVtYmVyLng7XHJcblx0XHRcdG9EaWZmLnkgPSBvdGhlci55IC0gbWVtYmVyLnk7XHJcblx0XHRcdHZhciB0b3RhbERpc3QgPSB1dGlsLmh5cG90ZW51c2Uob0RpZmYueCwgb0RpZmYueSk7XHJcblx0XHRcdGlmICh0b3RhbERpc3QgPD0gdGhpcy5taW5EaXN0KSB7XHJcblx0XHRcdFx0dmVsb2NpdHkueCA9IC0xICogb0RpZmYueDtcclxuXHRcdFx0XHR2ZWxvY2l0eS55ID0gLTEgKiBvRGlmZi55O1xyXG5cdFx0XHRcdC8vIHZlbG9jaXR5LnggLT0gb0RpZmYueDtcclxuXHRcdFx0XHQvLyB2ZWxvY2l0eS55IC09IG9EaWZmLnk7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdC8vIGlmICh1dGlsLmh5cG90ZW51c2UodmVsb2NpdHkueCwgdmVsb2NpdHkueSkgPCB0aGlzLm1pblZlbG9jaXR5KSB7XHJcblx0XHRcdC8vIHZlbG9jaXR5LnggPSB2ZWxvY2l0eS55ID0gMDtcclxuXHRcdC8vIH1cclxuXHRcdG1lbWJlci52ZWxvY2l0eSA9IHZlbG9jaXR5O1xyXG5cdH1cclxuXHJcblx0Ly8gdmFyIGF2ZXJhZ2UgPSAwO1xyXG5cdC8vIGZvciAodmFyIG1lbWJlciBpbiB0aGlzLm1lbWJlcnMpIHtcclxuXHQvLyBcdG1lbWJlciA9IHRoaXMubWVtYmVyc1ttZW1iZXJdO1xyXG5cdC8vIFx0dmFyIGRpc3QgPSB1dGlsLmh5cG90ZW51c2UodGhpcy5jZW50ZXIueCAtIG1lbWJlci54LCB0aGlzLmNlbnRlci55IC0gbWVtYmVyLnkpO1xyXG5cdC8vIFx0Ly8gaWYgKGRpc3QgPiBmdXJ0aGVzdCkge1xyXG5cdC8vIFx0Ly8gXHRmdXJ0aGVzdCA9IGRpc3Q7XHJcblx0Ly8gXHQvLyB9XHJcblx0Ly8gXHRhdmVyYWdlICs9IGRpc3Q7XHJcblx0Ly8gfVxyXG5cdC8vIGF2ZXJhZ2UgLz0gdGhpcy5tZW1iZXJzLmxlbmd0aDtcclxuXHQvLyAvLyBjb25zb2xlLmxvZyh0aGlzLnNlbGVjdGlvbldlaWdodCk7XHJcblx0Ly8gdmFyIG5ld1NlbGVjdGlvblNpemUgPSBhdmVyYWdlICogdGhpcy5zZWxlY3Rpb25XZWlnaHQ7XHJcblx0Ly8gaWYgKG5ld1NlbGVjdGlvblNpemUgPD0gdGhpcy5taW5TZWxlY3Rpb25TaXplKSB7XHJcblx0Ly8gXHQvLyBjb25zb2xlLmxvZygnYScpO1xyXG5cdC8vIFx0bmV3U2VsZWN0aW9uU2l6ZSA9IHRoaXMubWluU2VsZWN0aW9uU2l6ZTtcclxuXHQvLyB9XHJcblx0dmFyIG5ld1NlbGVjdGlvblNpemUgPSB0aGlzLm1pblNlbGVjdGlvblNpemUgKyB0aGlzLm1lbWJlcnMubGVuZ3RoICogdGhpcy5zZWxlY3Rpb25XZWlnaHQ7XHJcblx0dGhpcy5zZWxlY3Rpb24ud2lkdGggPSBuZXdTZWxlY3Rpb25TaXplO1xyXG5cdHRoaXMuc2VsZWN0aW9uLmhlaWdodCA9IG5ld1NlbGVjdGlvblNpemU7XHJcbn07XHJcbkdyb3VwLnByb3RvdHlwZS5hZGRNZW1iZXIgPSBmdW5jdGlvbihtZW1iZXIpIHtcclxuXHR0aGlzLm1lbWJlcnMucHVzaChtZW1iZXIpO1xyXG5cdG1lbWJlci5ncm91cCA9IHRoaXM7XHJcblx0Ly8gY29uc29sZS5sb2codGhpcy5tZW1iZXJzKTtcclxufTtcclxuR3JvdXAucHJvdG90eXBlLm9uSW5wdXREb3duID0gZnVuY3Rpb24oKSB7XHJcblx0Ly8gY29uc29sZS5sb2coJ2EnKTtcclxuXHRpZiAodGhpcy5zZWxlY3RlZCkge1xyXG5cdFx0dmFyIGJnID0gdGhpcy5teU1hbmFnZXIuYmFja2dyb3VuZC5teU1hbmFnZXIud2hlcmVDbGlja2VkKCk7XHJcblx0XHR0aGlzLm15TWFuYWdlci5iYWNrZ3JvdW5kLm15TWFuYWdlci5zZW5kVG8odGhpcy5teU1hbmFnZXIuYmFja2dyb3VuZCwgYmcsIHRoaXMpO1xyXG5cdFx0dGhpcy5zZXRTZWxlY3RlZChmYWxzZSk7XHJcblx0fSBlbHNlIGlmICh0aGlzLmNsaWNrZWQoKSkge1xyXG5cdFx0dGhpcy5jbGljaygpO1xyXG5cdH1cclxufTtcclxuR3JvdXAucHJvdG90eXBlLnN0YXJ0RWR1Y2F0aW9uID0gZnVuY3Rpb24oKSB7XHJcblx0dGhpcy5sZWFybmluZyA9IGZhbHNlO1xyXG5cdHRoaXMuYm9vay52aXNpYmxlID0gdHJ1ZTtcclxuXHR0aGlzLnN0YXRlLmdhbWUudGltZS5ldmVudHMuYWRkKFBoYXNlci5UaW1lci5TRUNPTkQgKiB0aGlzLmxlYXJuaW5nVGltZSwgdGhpcy5lbmRFZHVjYXRpb24sIHRoaXMpO1xyXG59O1xyXG5Hcm91cC5wcm90b3R5cGUuZW5kRWR1Y2F0aW9uID0gZnVuY3Rpb24oKSB7XHJcblx0Zm9yICh2YXIgbWVtYmVyIGluIHRoaXMubWVtYmVycykge1xyXG5cdFx0dGhpcy5tZW1iZXJzW21lbWJlcl0uZWR1TGV2ZWwgKz0gMTtcclxuXHR9XHJcblx0dGhpcy5sZWFybmluZyA9IGZhbHNlO1xyXG5cdHRoaXMuYm9vay52aXNpYmxlID0gZmFsc2U7XHJcbn07XHJcbkdyb3VwLnByb3RvdHlwZS5jbGlja2VkID0gZnVuY3Rpb24oKSB7XHJcbiAgICBpZiAodGhpcy5tZW1iZXJzLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cdHZhciBtb3VzZVggPSB0aGlzLmdhbWUuaW5wdXQueDtcclxuXHR2YXIgbW91c2VZID0gdGhpcy5nYW1lLmlucHV0Lnk7XHJcblx0dmFyIGRpZmZYID0gbW91c2VYIC0gdGhpcy5jZW50ZXIueDtcclxuXHR2YXIgZGlmZlkgPSBtb3VzZVkgLSB0aGlzLmNlbnRlci55O1xyXG5cdHZhciB0b3RhbERpZmYgPSB1dGlsLmh5cG90ZW51c2UoZGlmZlgsIGRpZmZZKTtcclxuXHRpZiAodG90YWxEaWZmIDw9IHRoaXMuY2xpY2tEaXN0KSB7XHJcblx0XHRyZXR1cm4gdHJ1ZTtcclxuXHR9XHJcblx0cmV0dXJuIGZhbHNlO1xyXG59O1xyXG5Hcm91cC5wcm90b3R5cGUuY2xpY2sgPSBmdW5jdGlvbigpIHtcclxuXHRpZiAodGhpcy5zZWxlY3RlZCkge1xyXG4gICAgICAgIC8vIHRoaXMuc3RhdGUuaG0uZ3JvdXBTZWxlY3RlZCA9IGZhbHNlO1xyXG5cdFx0dGhpcy5zZXRTZWxlY3RlZChmYWxzZSk7XHJcblx0fSBlbHNlIGlmICghdGhpcy5sb2NrZWQpIHtcclxuICAgICAgICAvLyB0aGlzLnN0YXRlLmhtLmdyb3VwU2VsZWN0ZWQgPSB0cnVlO1xyXG5cdFx0dGhpcy5zZXRTZWxlY3RlZCh0cnVlKTtcclxuXHR9XHJcbn07XHJcbkdyb3VwLnByb3RvdHlwZS5zZXRTZWxlY3RlZCA9IGZ1bmN0aW9uKG5ld1NlbGVjdGVkKSB7XHJcblx0dGhpcy5zZWxlY3RlZCA9IG5ld1NlbGVjdGVkO1xyXG5cdHRoaXMuc2VsZWN0aW9uLnZpc2libGUgPSBuZXdTZWxlY3RlZDtcclxuICAgIGlmIChuZXdTZWxlY3RlZCA9PSB0cnVlKSB7XHJcbiAgICAgICAgdGhpcy5zdGF0ZS5obS5ncm91cFNlbGVjdGVkID0gdGhpcztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuaG0uZ3JvdXBTZWxlY3RlZCA9PSB0aGlzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuaG0uZ3JvdXBTZWxlY3RlZCA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59O1xyXG5Hcm91cC5wcm90b3R5cGUuY2hhbmdlQ2VudGVyID0gZnVuY3Rpb24obmV3Q2VudGVyKSB7XHJcblx0dGhpcy5zZWxlY3Rpb24ueCA9IG5ld0NlbnRlci54O1xyXG5cdHRoaXMuc2VsZWN0aW9uLnkgPSBuZXdDZW50ZXIueTtcclxuXHR0aGlzLmJvb2sueCA9IG5ld0NlbnRlci54O1xyXG5cdHRoaXMuYm9vay55ID0gbmV3Q2VudGVyLnk7XHJcblx0dGhpcy5sb2NrLnggPSBuZXdDZW50ZXIueDtcclxuXHR0aGlzLmxvY2sueSA9IG5ld0NlbnRlci55O1xyXG5cdHRoaXMuY2VudGVyID0gbmV3Q2VudGVyO1xyXG59O1xyXG5Hcm91cC5wcm90b3R5cGUubnVtUGVvcGxlID0gZnVuY3Rpb24oKSB7XHJcblx0cmV0dXJuIHRoaXMubWVtYmVycy5sZW5ndGg7XHJcbn07XHJcbkdyb3VwLnByb3RvdHlwZS5sb3dlc3RFZHVjYXRpb24gPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBsb3dlc3QgPSAzO1xyXG4gICAgZm9yICh2YXIgbWVtYmVyIGluIHRoaXMubWVtYmVycykge1xyXG4gICAgICAgIG1lbWJlciA9IHRoaXMubWVtYmVyc1ttZW1iZXJdO1xyXG4gICAgICAgIGlmIChtZW1iZXIuZWR1TGV2ZWwgPCBsb3dlc3QpIHtcclxuICAgICAgICAgICAgbG93ZXN0ID0gbWVtYmVyLmVkdUxldmVsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBsb3dlc3Q7XHJcbn07XHJcbkdyb3VwLnByb3RvdHlwZS5hdmVyYWdlSGFwcGluZXNzID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgaGFwcGluZXNzID0gMDtcclxuICAgIGZvciAodmFyIG1lbWJlciBpbiB0aGlzLm1lbWJlcnMpIHtcclxuICAgICAgICBtZW1iZXIgPSB0aGlzLm1lbWJlcnNbbWVtYmVyXTtcclxuICAgICAgICBoYXBwaW5lc3MgKz0gbWVtYmVyLmhhcHBpbmVzcztcclxuICAgIH1cclxuICAgIGhhcHBpbmVzcyAvPSB0aGlzLm1lbWJlcnMubGVuZ3RoO1xyXG4gICAgcmV0dXJuIGhhcHBpbmVzcztcclxufTtcclxuR3JvdXAucHJvdG90eXBlLmF2ZXJhZ2VGYXRpZ3VlID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgZmF0aWd1ZSA9IDA7XHJcbiAgICBmb3IgKHZhciBtZW1iZXIgaW4gdGhpcy5tZW1iZXJzKSB7XHJcbiAgICAgICAgbWVtYmVyID0gdGhpcy5tZW1iZXJzW21lbWJlcl07XHJcbiAgICAgICAgZmF0aWd1ZSArPSBtZW1iZXIuZmF0aWd1ZTtcclxuICAgIH1cclxuICAgIGZhdGlndWUgLz0gdGhpcy5tZW1iZXJzLmxlbmd0aDtcclxuICAgIHJldHVybiBmYXRpZ3VlO1xyXG59O1xyXG5Hcm91cC5wcm90b3R5cGUuaW5jb21lID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgaW5jb21lID0gMDtcclxuICAgIGZvciAodmFyIG1lbWJlciBpbiB0aGlzLm1lbWJlcnMpIHtcclxuICAgICAgICBtZW1iZXIgPSB0aGlzLm1lbWJlcnNbbWVtYmVyXTtcclxuICAgICAgICBpbmNvbWUgKz0gbWVtYmVyLmdldFRheCgpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGluY29tZTtcclxufTtcclxuLy8gR3JvdXAucHJvdG90eXBlLmhhcHBpbmVzc0NoYW5nZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgXHJcbi8vIH07XHJcbi8vIEdyb3VwLnByb3RvdHlwZS5pbmNvbWVDaGFuZ2UgPSBmdW5jdGlvbigpIHtcclxuICAgIFxyXG4vLyB9O1xyXG4vLyBHcm91cC5wcm90b3R5cGUubW91c2VEb3duID0gZnVuY3Rpb24oKSB7XHJcblx0XHJcbi8vIH07XHJcbkdyb3VwLnByb3RvdHlwZS5vbk1vdmUgPSBmdW5jdGlvbigpIHtcclxuICAgIGlmICh0aGlzLm1lbWJlcnMubGVuZ3RoID09IDApIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblx0dmFyIG1vdXNlWCA9IHRoaXMuZ2FtZS5pbnB1dC54O1xyXG5cdHZhciBtb3VzZVkgPSB0aGlzLmdhbWUuaW5wdXQueTtcclxuICAgIHZhciBkaXN0ID0gdXRpbC5oeXBvdGVudXNlKHRoaXMuY2VudGVyLnggLSBtb3VzZVgsIHRoaXMuY2VudGVyLnkgLSBtb3VzZVkpO1xyXG4gICAgaWYgKGRpc3QgPD0gdGhpcy5jbGlja0Rpc3QpIHtcclxuICAgICAgICBpZiAoIXRoaXMuc3RhdGUuaG0uZ3JvdXBTZWxlY3RlZCB8fCB0aGlzLnN0YXRlLmhtLmdyb3VwU2VsZWN0ZWQgPT0gdGhpcykge1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnYScpO1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmhhcHBpbmVzc01vZGlmaWVyKTtcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5obS5zaG93U3RhdGljKHtwZW9wbGUgOiB0aGlzLm51bVBlb3BsZSgpLCBlZHVjYXRpb24gOiB0aGlzLmxvd2VzdEVkdWNhdGlvbigpLCBoYXBwaW5lc3MgOiB0aGlzLmF2ZXJhZ2VIYXBwaW5lc3MoKSwgZmF0aWd1ZSA6IHRoaXMuYXZlcmFnZUZhdGlndWUoKSwgaW5jb21lIDogdGhpcy5pbmNvbWUoKSwgaGFwcGluZXNzTW9kaWZpZXIgOiB0aGlzLmhhcHBpbmVzc01vZGlmaWVyfSwgdGhpcy5jZW50ZXIueCwgdGhpcy5jZW50ZXIueSAtIDUwLCAxMDApO1xyXG4gICAgICAgICAgICB0aGlzLmhvdmVyID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmICh0aGlzLmhvdmVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaG92ZXIgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5obS5oaWRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnN0YXRlLmhtLmdyb3VwU2VsZWN0ZWQgPT0gdGhpcyAmJiB0aGlzLm15TWFuYWdlci5iYWNrZ3JvdW5kLm15TWFuYWdlci53aGVyZUNsaWNrZWQoKSAhPSB0aGlzLm15TWFuYWdlci5iYWNrZ3JvdW5kXHJcbiAgICAgICAgICAgICYmIHRoaXMubXlNYW5hZ2VyLmJhY2tncm91bmQubXlNYW5hZ2VyLmNhblRyYW5zZmVyKHRoaXMubXlNYW5hZ2VyLmJhY2tncm91bmQsIHRoaXMubXlNYW5hZ2VyLmJhY2tncm91bmQubXlNYW5hZ2VyLndoZXJlQ2xpY2tlZCgpLCB0aGlzKSkge1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnYScpO1xyXG4gICAgICAgICAgICB2YXIgYmdNYW5hZ2VyID0gdGhpcy5teU1hbmFnZXIuYmFja2dyb3VuZC5teU1hbmFnZXJcclxuICAgICAgICAgICAgdmFyIHRyYW5zZmVyVHlwZSA9IGJnTWFuYWdlci50cmFuc2ZlclR5cGUodGhpcy5teU1hbmFnZXIuYmFja2dyb3VuZCwgYmdNYW5hZ2VyLndoZXJlQ2xpY2tlZCgpLCB0aGlzKTtcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5obS5zaG93Q2hhbmdlKHRyYW5zZmVyVHlwZS5jYW4sIHtoYXBwaW5lc3NDaGFuZ2UgOiB0cmFuc2ZlclR5cGUuaGFwcGluZXNzQ2hhbmdlLCBpbmNvbWVDaGFuZ2UgOiB0cmFuc2ZlclR5cGUuaW5jb21lQ2hhbmdlfSwgbW91c2VYLCBtb3VzZVkpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdiJyk7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuaG0uaGlkZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxuLy8gR3JvdXAucHJvdG90eXBlLmhhcHBpbmVzc01vZGlmaWVyID0gZnVuY3Rpb24oKSB7XHJcbi8vICAgICByZXR1cm4gdGhpcy5oYXBwaW5lc3NNb2RpZmllcjtcclxuLy8gfTtcclxuR3JvdXAucHJvdG90eXBlLmFwcGx5SGFwcGluZXNzID0gZnVuY3Rpb24oKSB7XHJcblx0Ly8gY29uc29sZS5sb2coJ2FwcGx5Jyk7XHJcblx0dmFyIGZsYWcgPSBmYWxzZTtcclxuXHRmb3IgKHZhciBtZW1iZXIgaW4gdGhpcy5tZW1iZXJzKSB7XHJcblx0XHRtZW1iZXIgPSB0aGlzLm1lbWJlcnNbbWVtYmVyXTtcclxuXHRcdC8vIGNvbnNvbGUubG9nKG1lbWJlci5oYXBwaW5lc3MsIHRoaXMuaGFwcGluZXNzTW9kaWZpZXIpO1xyXG5cdFx0Ly8gY29uc29sZS5sb2dxbWVtYmVyLmhhcHBpbmVzcywgdGhpcy5oYXBwaW5lc3NNb2RpZmllcik7XHJcblx0XHRtZW1iZXIuaGFwcGluZXNzICs9IHRoaXMuaGFwcGluZXNzTW9kaWZpZXI7XHJcblx0XHQvLyBtZW1iZXIuaGFwcGluZXNzIC09IDUwO1xyXG5cdFx0aWYgKG1lbWJlci5oYXBwaW5lc3MgPiAxMDApIHtcclxuXHRcdFx0bWVtYmVyLmhhcHBpbmVzcyA9IDEwMDtcclxuXHRcdH0gZWxzZSBpZiAobWVtYmVyLmhhcHBpbmVzcyA8PSAwKSB7XHJcblx0XHRcdG1lbWJlci5oYXBwaW5lc3MgPSAwO1xyXG5cdFx0XHRmbGFnID0gdHJ1ZTtcclxuXHRcdH1cclxuXHR9XHJcblx0aWYgKGZsYWcpIHtcclxuXHRcdHRoaXMuZ2V0T3V0T2ZUb3duKCk7XHJcblx0fVxyXG59O1xyXG5Hcm91cC5wcm90b3R5cGUuYWRkRmF0aWd1ZSA9IGZ1bmN0aW9uKGFtdCkge1xyXG5cdC8vIGNvbnNvbGUubG9nKGFtdCk7XHJcblx0aWYgKHRoaXMubWVtYmVyc1swXS5mYXRpZ3VlIDw9IDAgJiYgYW10IDw9IDApIHtcclxuXHRcdHJldHVybjtcclxuXHR9XHJcblx0dmFyIGZsYWcgPSBmYWxzZTtcclxuXHRmb3IgKHZhciBtZW1iZXIgaW4gdGhpcy5tZW1iZXJzKSB7XHJcblx0XHR0aGlzLm1lbWJlcnNbbWVtYmVyXS5mYXRpZ3VlICs9IGFtdDtcclxuXHRcdGlmICh0aGlzLm1lbWJlcnNbbWVtYmVyXS5mYXRpZ3VlID49IDEwMCkge1xyXG5cdFx0XHRmbGFnID0gdHJ1ZTtcclxuXHRcdH1cclxuXHR9XHJcblx0aWYgKGZsYWcpIHtcclxuXHRcdC8vIGNvbnNvbGUubG9nKHRoaXMpO1xyXG5cdFx0dGhpcy5nZXRPdXRPZlRvd24oKTtcclxuXHRcdC8vY29uc29sZS5sb2coJ2ZhdGlndWUgdG9vIGRhbSBoaWdoJyk7XHJcblx0fVxyXG59O1xyXG5Hcm91cC5wcm90b3R5cGUuZ2V0T3V0T2ZUb3duID0gZnVuY3Rpb24oKSB7XHJcblx0dmFyIG5ld0JHID0gdGhpcy5teU1hbmFnZXIuYmFja2dyb3VuZC5teU1hbmFnZXIuYmFja2dyb3VuZEJ5KCdob3VzZScsIHRoaXMubXlNYW5hZ2VyLmJhY2tncm91bmQuaW5jb21lTGV2ZWwpO1xyXG5cdGlmICghbmV3QkcpIHtcclxuXHRcdGNvbnNvbGUubG9nKCdFUlJPUicpO1xyXG5cdFx0cmV0dXJuO1xyXG5cdH1cclxuXHR0aGlzLm15TWFuYWdlci5iYWNrZ3JvdW5kLm15TWFuYWdlci5zZW5kVG8odGhpcy5teU1hbmFnZXIuYmFja2dyb3VuZCwgbmV3QkcsIHRoaXMpO1xyXG5cdHRoaXMubG9ja0l0KCk7XHJcbn1cclxuR3JvdXAucHJvdG90eXBlLmxvY2tJdCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdGhpcy5sb2NrZWQgPSB0cnVlO1xyXG4gICAgdGhpcy5sb2NrLnZpc2libGUgPSB0cnVlO1xyXG5cdHRoaXMuc3RhdGUuZ2FtZS50aW1lLmV2ZW50cy5hZGQoUGhhc2VyLlRpbWVyLlNFQ09ORCAqIHRoaXMubG9ja1RpbWUsIHRoaXMuZW5kTG9jaywgdGhpcyk7XHJcbn07XHJcbkdyb3VwLnByb3RvdHlwZS5lbmRMb2NrID0gZnVuY3Rpb24oKSB7XHJcbiAgICB0aGlzLmxvY2tlZCA9IGZhbHNlO1xyXG4gICAgdGhpcy5sb2NrLnZpc2libGUgPSBmYWxzZTtcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gR3JvdXA7XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbiIsInZhciBVdGlsID0gcmVxdWlyZSgnLi4vdXRpbHMnKTtcclxudmFyIEdyb3VwID0gcmVxdWlyZSgnLi9ncm91cCcpO1xyXG5cclxudmFyIEdyb3VwTWFuYWdlciA9IGZ1bmN0aW9uIChnYW1lLCBzdGF0ZSkge1xyXG5cdHRoaXMuZ2FtZSA9IGdhbWU7XHJcblx0dGhpcy5tZW1iZXJzID0gW107XHJcblx0dGhpcy5zdGF0ZSA9IHN0YXRlO1xyXG5cdHRoaXMuc3BsaXRDaGFuY2UgPSAwLjE7XHJcblx0dGhpcy5tYXhTaXplID0gODtcclxuXHR0aGlzLm1hcmdpbiA9IDUwO1xyXG59O1xyXG5Hcm91cE1hbmFnZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gR3JvdXBNYW5hZ2VyO1xyXG5Hcm91cE1hbmFnZXIucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uKCkge1xyXG5cdC8vIGNvbnNvbGUubG9nKHRoaXMubWVtYmVycyk7XHJcblx0Ly8gY29uc29sZS5sb2codGhpcy5jZW50ZXIpO1xyXG5cdC8vdXBkYXRlIGJvdW5kc1xyXG5cdGlmICh0aGlzLmJhY2tncm91bmQpIHtcclxuXHRcdHZhciB2YXJzID0gdGhpcy5iYWNrZ3JvdW5kLmdldFZhcnNDZW50ZXIoKTtcclxuXHRcdHRoaXMud2lkdGggPSB2YXJzLndpZHRoO1xyXG5cdFx0dGhpcy5oZWlnaHQgPSB2YXJzLmhlaWdodDtcclxuXHRcdHRoaXMuY2VudGVyID0gdmFycy5jZW50ZXI7XHJcblx0XHQvLyBjb25zb2xlLmxvZyh2YXJzKTtcclxuXHR9IGVsc2Uge1xyXG5cdFx0cmV0dXJuO1xyXG5cdH1cclxuXHQvL3VwZGF0ZSBpbnRlci1ncm91cCBtb3ZlbWVudFxyXG5cdC8vIGNvbnNvbGUubG9nKE1hdGgucmFuZG9tKCkpO1xyXG5cdHZhciBsYXJnZXN0ID0gbnVsbDtcclxuXHR2YXIgbGFyZ2VzdFNpemUgPSAwO1xyXG5cdGZvciAodmFyIG1lbWJlciBpbiB0aGlzLm1lbWJlcnMpIHtcclxuXHRcdG1lbWJlciA9IHRoaXMubWVtYmVyc1ttZW1iZXJdO1xyXG5cdFx0dmFyIHNpemUgPSBtZW1iZXIubnVtUGVvcGxlKCk7XHJcblx0XHRpZiAoc2l6ZSA+PSBsYXJnZXN0U2l6ZSkge1xyXG5cdFx0XHRsYXJnZXN0U2l6ZSA9IHNpemU7XHJcblx0XHRcdGxhcmdlc3QgPSBtZW1iZXI7XHJcblx0XHR9XHJcblx0fVxyXG5cdGlmIChsYXJnZXN0U2l6ZSA+PSB0aGlzLm1heFNpemUpIHtcclxuXHRcdC8vIGNvbnNvbGUubG9nKCdzcGxpdCcpO1xyXG5cdFx0dmFyIG5ld0dyb3VwID0gbmV3IEdyb3VwKHRoaXMuZ2FtZSwgdGhpcy5jZW50ZXIueCwgdGhpcy5jZW50ZXIueSwgdGhpcy5zdGF0ZSk7XHJcblx0XHR0aGlzLmFkZE1lbWJlcihuZXdHcm91cCk7XHJcblx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGxhcmdlc3RTaXplIC8gMjsgaSsrKSB7XHJcblx0XHRcdHRoaXMudHJhbnNmZXJQZW9wbGUobGFyZ2VzdCwgbmV3R3JvdXAsIGxhcmdlc3QubWVtYmVyc1swXSk7XHJcblx0XHR9XHJcblx0fVxyXG5cdC8vdXBkYXRlIG1lbWJlciB2ZWxvY2l0eVxyXG5cdC8vIGZvciAodmFyIG1lbWJlciBpbiB0aGlzLm1lbWJlcnMpIHtcclxuXHQvLyBcdG1lbWJlciA9IHRoaXMubWVtYmVyc1ttZW1iZXJdO1xyXG5cdC8vIFx0dmFyIHZlbG9jaXR5ID0ge3ggOiAwLCB5IDogMH07XHJcblx0Ly8gXHQvLyBjb25zb2xlLmxvZyh0aGlzLmNlbnRlciwgbWVtYmVyLmNlbnRlcik7XHJcblx0Ly8gXHR2YXIgZGlmZlggPSB0aGlzLmNlbnRlci54IC0gbWVtYmVyLmNlbnRlci54O1xyXG5cdC8vIFx0dmFyIGRpZmZZID0gdGhpcy5jZW50ZXIueSAtIG1lbWJlci5jZW50ZXIueTtcclxuXHQvLyBcdHZlbG9jaXR5LnggPSBkaWZmWDtcclxuXHQvLyBcdHZlbG9jaXR5LnkgPSBkaWZmWTtcclxuXHQvLyBcdGZvciAodmFyIG90aGVyIGluIHRoaXMubWVtYmVycykge1xyXG5cdC8vIFx0XHRvdGhlciA9IHRoaXMubWVtYmVyc1tvdGhlcl07XHJcblx0Ly8gXHRcdGlmIChvdGhlciA9PT0gbWVtYmVyKSB7XHJcblx0Ly8gXHRcdFx0Y29udGludWU7XHJcblx0Ly8gXHRcdH1cclxuXHQvLyBcdFx0dmFyIG9EaWZmeCA9IG90aGVyLmNlbnRlci54IC0gbWVtYmVyLmNlbnRlci54O1xyXG5cdC8vIFx0XHR2YXIgb0RpZmZ5ID0gb3RoZXIuY2VudGVyLnkgLSBtZW1iZXIuY2VudGVyLnk7XHJcblx0Ly8gXHRcdHZhciBoeXAgPSBVdGlsLmh5cG90ZW51c2Uob0RpZmZ4LCBvRGlmZnkpO1xyXG5cdC8vIFx0XHQvL2NvbnNvbGUubG9nKGh5cCk7XHJcblx0Ly8gXHRcdGlmIChoeXAgPD0gdGhpcy5taW5EaXN0KSB7XHJcblx0Ly8gXHRcdFx0Ly8gY29uc29sZS5sb2coJ2InLCBoeXApO1xyXG5cdC8vIFx0XHRcdHZlbG9jaXR5LnggPSAtMSAqIG9EaWZmeDtcclxuXHQvLyBcdFx0XHR2ZWxvY2l0eS55ID0gLTEgKiBvRGlmZnk7XHJcblx0Ly8gXHRcdFx0Ly8gY29uc29sZS5sb2codmVsb2NpdHkpO1xyXG5cdC8vIFx0XHRcdGlmICh2ZWxvY2l0eS54IDw9IDAgJiYgdmVsb2NpdHkueSA8PSAwKSB7XHJcblx0Ly8gXHRcdFx0XHQvLyBjb25zb2xlLmxvZygnYzMnKTtcclxuXHQvLyBcdFx0XHRcdC8vIHZlbG9jaXR5LnggPSAxMCAqIE1hdGgucmFuZG9tIC0gNTtcclxuXHQvLyBcdFx0XHRcdC8vIHZlbG9jaXR5LnkgPSAxMCAqIE1hdGgucmFuZG9tIC0gNTtcclxuXHQvLyBcdFx0XHRcdG1lbWJlci5jZW50ZXIueCArPSA1MCAqIE1hdGgucmFuZG9tKCkgLSAyNTtcclxuXHQvLyBcdFx0XHRcdG1lbWJlci5jZW50ZXIueSArPSA1MCAqIE1hdGgucmFuZG9tKCkgLSAyNTtcclxuXHQvLyBcdFx0XHR9XHJcblx0Ly8gXHRcdFx0YnJlYWs7XHJcblx0Ly8gXHRcdH0gZWxzZSB7XHJcblx0Ly8gXHRcdFx0Ly8gY29uc29sZS5sb2coJ2EnKTtcclxuXHQvLyBcdFx0fVxyXG5cdC8vIFx0fVxyXG5cdC8vIFx0bWVtYmVyLnZlbG9jaXR5ID0gdmVsb2NpdHk7XHJcblx0Ly8gfVxyXG5cdC8vdXBkYXRlIG1lbWJlcnNcclxuXHRmb3IgKG1lbWJlciBpbiB0aGlzLm1lbWJlcnMpIHtcclxuXHRcdHRoaXMubWVtYmVyc1ttZW1iZXJdLnVwZGF0ZSgpO1xyXG5cdH1cclxufTtcclxuR3JvdXBNYW5hZ2VyLnByb3RvdHlwZS51cGRhdGVWYXJzID0gZnVuY3Rpb24oKSB7XHJcblx0dmFyIHZhcnMgPSB0aGlzLmJhY2tncm91bmQuZ2V0VmFyc0NlbnRlcigpO1xyXG5cdHRoaXMud2lkdGggPSB2YXJzLndpZHRoO1xyXG5cdHRoaXMuaGVpZ2h0ID0gdmFycy5oZWlnaHQ7XHJcblx0dGhpcy5jZW50ZXIgPSB2YXJzLmNlbnRlcjtcclxuXHRmb3IgKHZhciBtZW1iZXIgaW4gdGhpcy5tZW1iZXJzKSB7XHJcblx0XHRtZW1iZXIgPSB0aGlzLm1lbWJlcnNbbWVtYmVyXTtcclxuXHRcdG1lbWJlci5jZW50ZXIueCA9IHRoaXMuY2VudGVyLnggLSB0aGlzLndpZHRoIC8gMiArIHRoaXMubWFyZ2luICsgKHRoaXMud2lkdGggLSB0aGlzLm1hcmdpbikgKiBNYXRoLnJhbmRvbSgpO1xyXG5cdFx0bWVtYmVyLmNlbnRlci55ID0gdGhpcy5jZW50ZXIueSAtIHRoaXMuaGVpZ2h0IC8gMiArIHRoaXMubWFyZ2luICsgKHRoaXMuaGVpZ2h0IC0gdGhpcy5tYXJnaW4pICogTWF0aC5yYW5kb20oKTtcclxuXHR9XHJcbn07XHJcbkdyb3VwTWFuYWdlci5wcm90b3R5cGUudHJhbnNmZXIgPSBmdW5jdGlvbihvdGhlckdNLCBteU1lbWJlcikge1xyXG5cdC8vIHZhciB0ZXN0VmFscyA9IG90aGVyR00uYmFja2dyb3VuZC5nZXRWYXJzQ2VudGVyKCk7XHJcblx0Ly8gY29uc29sZS5sb2coJ3RyYW5zZmVyIHRvJywgb3RoZXJHTS5iYWNrZ3JvdW5kLnR5cGUsIG90aGVyR00uYmFja2dyb3VuZC5pbmNvbWVMZXZlbCwgdGVzdFZhbHMuY2VudGVyLnksIHRlc3RWYWxzLnksIHRlc3RWYWxzLnZpc0hlaWdodCwgdGVzdFZhbHMudlJhdGlvKTtcclxuXHR2YXIgaW5kZXggPSB0aGlzLm1lbWJlcnMuaW5kZXhPZihteU1lbWJlcik7XHJcblx0dGhpcy5tZW1iZXJzLnNwbGljZShpbmRleCwgMSk7XHJcblx0b3RoZXJHTS5hZGRNZW1iZXIobXlNZW1iZXIpO1xyXG59O1xyXG5Hcm91cE1hbmFnZXIucHJvdG90eXBlLnRyYW5zZmVyUGVvcGxlID0gZnVuY3Rpb24oc291cmNlLCBkZXN0aW5hdGlvbiwgdFBlcnNvbikge1xyXG5cdHZhciBpbmRleCA9IHNvdXJjZS5tZW1iZXJzLmluZGV4T2YodFBlcnNvbik7XHJcblx0c291cmNlLm1lbWJlcnMuc3BsaWNlKGluZGV4LCAxKTtcclxuXHRkZXN0aW5hdGlvbi5hZGRNZW1iZXIodFBlcnNvbik7XHJcbn07XHJcbkdyb3VwTWFuYWdlci5wcm90b3R5cGUuYWRkTWVtYmVyID0gZnVuY3Rpb24obWVtYmVyKSB7XHJcblx0dGhpcy5tZW1iZXJzLnB1c2gobWVtYmVyKTtcclxuXHRtZW1iZXIubXlNYW5hZ2VyID0gdGhpcztcclxuXHRtZW1iZXIuY2VudGVyLnggPSB0aGlzLmNlbnRlci54IC0gdGhpcy53aWR0aCAvIDIgKyB0aGlzLm1hcmdpbiArICh0aGlzLndpZHRoIC0gdGhpcy5tYXJnaW4pICogTWF0aC5yYW5kb20oKTtcclxuXHRtZW1iZXIuY2VudGVyLnkgPSB0aGlzLmNlbnRlci55IC0gdGhpcy5oZWlnaHQgLyAyICsgdGhpcy5tYXJnaW4gKyAodGhpcy5oZWlnaHQgLSB0aGlzLm1hcmdpbikgKiBNYXRoLnJhbmRvbSgpO1xyXG5cdC8vIHZhciBzbWFsbGVyID0gKHRoaXMud2lkdGggPCB0aGlzLmhlaWdodCkgPyB0aGlzLndpZHRoIDogdGhpcy5oZWlnaHQ7XHJcblx0Ly8gdGhpcy5taW5EaXN0ID0gc21hbGxlciAvIHRoaXMubWVtYmVycy5sZW5ndGg7XHJcblx0Ly8gdGhpcy5taW5EaXN0ID0gc21hbGxlciAvIDI7XHJcblx0Ly8gY29uc29sZS5sb2codGhpcy5taW5EaXN0KTtcclxuXHQvLyBjb25zb2xlLmxvZyh0aGlzLm1pbkRpc3QpO1xyXG59O1xyXG5Hcm91cE1hbmFnZXIucHJvdG90eXBlLmFkZFBlcnNvbiA9IGZ1bmN0aW9uKG5ld1BlcnNvbikge1xyXG5cdGlmICh0aGlzLm1lbWJlcnMubGVuZ3RoID09IDApIHtcclxuXHRcdC8vIGNvbnNvbGUubG9nKHRoaXMuY2VudGVyKTtcclxuXHRcdHRoaXMuYWRkTWVtYmVyKG5ldyBHcm91cCh0aGlzLmdhbWUsIHRoaXMuY2VudGVyLngsIHRoaXMuY2VudGVyLnksIHRoaXMuc3RhdGUpKTtcclxuXHRcdC8vIGNvbnNvbGUubG9nKCduZXcgZ3JvdXAnKTtcclxuXHR9XHJcblx0dGhpcy5tZW1iZXJzWzBdLmFkZE1lbWJlcihuZXdQZXJzb24pO1xyXG59O1xyXG5Hcm91cE1hbmFnZXIucHJvdG90eXBlLm51bVBlb3BsZSA9IGZ1bmN0aW9uKCkge1xyXG5cdHZhciBjb3VudCA9IDA7XHJcblx0Zm9yICh2YXIgbWVtYmVyIGluIHRoaXMubWVtYmVycykge1xyXG5cdFx0bWVtYmVyID0gdGhpcy5tZW1iZXJzW21lbWJlcl07XHJcblx0XHRjb3VudCArPSBtZW1iZXIubnVtUGVvcGxlKCk7XHJcblx0fVxyXG5cdHJldHVybiBjb3VudDtcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gR3JvdXBNYW5hZ2VyO1xyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbiIsInZhciBIb3Zlck1lbnUgPSBmdW5jdGlvbiAoZ2FtZSwgeCwgeSwgc3RhdGUpIHtcclxuXHRQaGFzZXIuU3ByaXRlLmNhbGwodGhpcywgZ2FtZSwgeCwgeSwgJ2JvcmRlcmVkJyk7XHJcblx0Z2FtZS5hZGQuZXhpc3RpbmcodGhpcyk7XHJcblx0dGhpcy54ID0geDtcclxuXHR0aGlzLnkgPSB5O1xyXG4gICAgdGhpcy5ncm91cFNlbGVjdGVkID0gbnVsbDtcclxuXHR0aGlzLndpZHRoID0gMjU2O1xyXG5cdHRoaXMuaGVpZ2h0ID0gMTI4O1xyXG4gICAgdGhpcy5zdGF0aWNXaWR0aCA9IDI1NjtcclxuICAgIHRoaXMuc3RhdGljSGVpZ2h0ID0gMTI4O1xyXG4gICAgdGhpcy5jaGFuZ2VXaWR0aCA9IDIyNDtcclxuICAgIHRoaXMuY2hhbmdlSGVpZ2h0ID0gNjQ7XHJcbiAgICB0aGlzLnN0YXRlID0gc3RhdGU7XHJcblx0XHJcblx0dGhpcy5zdGF0aWNUZXh0ID0gdGhpcy5nYW1lLmFkZC5ncm91cCgpO1xyXG5cdHRoaXMuY2hhbmdlVGV4dCA9IHRoaXMuZ2FtZS5hZGQuZ3JvdXAoKTtcclxuICAgIHRoaXMudmlzaWJsZSA9IGZhbHNlO1xyXG5cclxuICAgIHRoaXMuY2hldnJvbiA9IHRoaXMuZ2FtZS5hZGQuc3ByaXRlKHRoaXMueCwgdGhpcy55LCAnY2hldnJvbnMnKTtcclxuICAgIHRoaXMuY2hldnJvbi5hbmNob3Iuc2V0VG8oMC41LCAwLjUpO1xyXG4gICAgdGhpcy5jaGV2cm9uLmZyYW1lID0gMztcclxuICAgIHRoaXMuY2hldnJvbi55IC09IHRoaXMuaGVpZ2h0O1xyXG4gICAgdGhpcy5jaGV2cm9uLnggKz0gMjU7XHJcbiAgICBcclxuICAgIC8vIHRoaXMuc3RhdGUuaW5wdXQuYWRkTW92ZUNhbGxiYWNrKHRoaXMub25JbnB1dE1vdmUsIHRoaXMpO1xyXG5cdFxyXG5cdHRoaXMucGVvcGxlID0gdGhpcy5nYW1lLmFkZC50ZXh0KDEwLCAxMCwgJ1Blb3BsZTogMCcpO1xyXG5cdHRoaXMucGVvcGxlLmZvbnQgPSAnUm9ib3RvJztcclxuXHR0aGlzLnBlb3BsZS5mb250U2l6ZSA9IDE4O1xyXG5cdHRoaXMucGVvcGxlLmZpbGwgPSAnIzAwMDAwMCc7XHJcblx0XHJcblx0dGhpcy5lZHVjYXRpb24gPSB0aGlzLmdhbWUuYWRkLnRleHQoMTAsIDEwLCAnRWR1Y2F0aW9uOiBMb3cnKTtcclxuXHR0aGlzLmVkdWNhdGlvbi5mb250ID0gJ1JvYm90byc7XHJcblx0dGhpcy5lZHVjYXRpb24uZm9udFNpemUgPSAxODtcclxuXHR0aGlzLmVkdWNhdGlvbi5maWxsID0gJyMwMDAwMDAnO1xyXG5cdFxyXG5cdHRoaXMuaGFwcGluZXNzID0gdGhpcy5nYW1lLmFkZC50ZXh0KDEwLCAxMCwgJ0hhcHBpbmVzczogJTEwMCcpO1xyXG5cdHRoaXMuaGFwcGluZXNzLmZvbnQgPSAnUm9ib3RvJztcclxuXHR0aGlzLmhhcHBpbmVzcy5mb250U2l6ZSA9IDE4O1xyXG5cdHRoaXMuaGFwcGluZXNzLmZpbGwgPSAnIzAwMDAwMCc7XHJcblx0XHJcblx0dGhpcy5mYXRpZ3VlID0gdGhpcy5nYW1lLmFkZC50ZXh0KDEwLCAxMCwgJ0ZhdGlndWU6ICUwJyk7XHJcblx0dGhpcy5mYXRpZ3VlLmZvbnQgPSAnUm9ib3RvJztcclxuXHR0aGlzLmZhdGlndWUuZm9udFNpemUgPSAxODtcclxuXHR0aGlzLmZhdGlndWUuZmlsbCA9ICcjMDAwMDAwJztcclxuXHRcclxuICAgIHRoaXMuaW5jb21lID0gdGhpcy5nYW1lLmFkZC50ZXh0KDEwLCAxMCwgJ0luY29tZTogJDAnKTtcclxuXHR0aGlzLmluY29tZS5mb250ID0gJ1JvYm90byc7XHJcblx0dGhpcy5pbmNvbWUuZm9udFNpemUgPSAxODtcclxuXHR0aGlzLmluY29tZS5maWxsID0gJyMwMDAwMDAnO1xyXG4gICAgXHJcblx0dGhpcy5zdGF0aWNUZXh0LmFkZCh0aGlzLnBlb3BsZSk7XHJcblx0dGhpcy5zdGF0aWNUZXh0LmFkZCh0aGlzLmVkdWNhdGlvbik7XHJcbiAgICB0aGlzLmVkdWNhdGlvbi55ICs9IDIyICogMTtcclxuXHR0aGlzLnN0YXRpY1RleHQuYWRkKHRoaXMuaGFwcGluZXNzKTtcclxuICAgIHRoaXMuaGFwcGluZXNzLnkgKz0gMjIgKiAyO1xyXG5cdHRoaXMuc3RhdGljVGV4dC5hZGQodGhpcy5mYXRpZ3VlKTtcclxuICAgIHRoaXMuZmF0aWd1ZS55ICs9IDIyICogMztcclxuXHR0aGlzLnN0YXRpY1RleHQuYWRkKHRoaXMuaW5jb21lKTtcclxuICAgIHRoaXMuaW5jb21lLnkgKz0gMjIgKiA0O1xyXG4gICAgdGhpcy5zdGF0aWNUZXh0LmFkZCh0aGlzLmNoZXZyb24pO1xyXG4gICAgdGhpcy5zdGF0aWNUZXh0LnZpc2libGUgPSBmYWxzZTtcclxuICAgIHRoaXMuc3RhdGljVGV4dC54ID0gdGhpcy54O1xyXG4gICAgdGhpcy5zdGF0aWNUZXh0LnkgPSB0aGlzLnk7XHJcblx0XHJcblx0dGhpcy5oYXBwaW5lc3NDaGFuZ2UgPSB0aGlzLmdhbWUuYWRkLnRleHQoMTAsIDEwLCAnSGFwcGluZXNzID0nKTtcclxuXHR0aGlzLmhhcHBpbmVzc0NoYW5nZS5mb250ID0gJ1JvYm90byc7XHJcblx0dGhpcy5oYXBwaW5lc3NDaGFuZ2UuZm9udFNpemUgPSAxODtcclxuXHR0aGlzLmhhcHBpbmVzc0NoYW5nZS5maWxsID0gJyMwMDAwMDAnO1xyXG5cdFxyXG5cdHRoaXMuaW5jb21lQ2hhbmdlID0gdGhpcy5nYW1lLmFkZC50ZXh0KDEwLCAxMCwgJ0luY29tZSA9Jyk7XHJcblx0dGhpcy5pbmNvbWVDaGFuZ2UuZm9udCA9ICdSb2JvdG8nO1xyXG5cdHRoaXMuaW5jb21lQ2hhbmdlLmZvbnRTaXplID0gMTg7XHJcblx0dGhpcy5pbmNvbWVDaGFuZ2UuZmlsbCA9ICcjMDAwMDAwJztcclxuICAgIFxyXG4gICAgdGhpcy5jaGFuZ2VUZXh0LmFkZCh0aGlzLmhhcHBpbmVzc0NoYW5nZSk7XHJcbiAgICB0aGlzLmNoYW5nZVRleHQuYWRkKHRoaXMuaW5jb21lQ2hhbmdlKTtcclxuICAgIHRoaXMuaW5jb21lQ2hhbmdlLnkgKz0gMjIgKiAxO1xyXG4gICAgdGhpcy5jaGFuZ2VUZXh0LnZpc2libGUgPSBmYWxzZTtcclxuICAgIHRoaXMuY2hhbmdlVGV4dC54ID0gdGhpcy54O1xyXG4gICAgdGhpcy5jaGFuZ2VUZXh0LnkgPSB0aGlzLnk7XHJcbn07XHJcbkhvdmVyTWVudS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFBoYXNlci5TcHJpdGUucHJvdG90eXBlKTtcclxuSG92ZXJNZW51LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEhvdmVyTWVudTtcclxuSG92ZXJNZW51LnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbigpIHtcclxuXHRcclxufTtcclxuLy9wZW9wbGUsIGVkdWNhdGlvbiwgaGFwcGluZXNzLCBmYXRpZ3VlLCBpbmNvbWVcclxuSG92ZXJNZW51LnByb3RvdHlwZS5zaG93U3RhdGljID0gZnVuY3Rpb24oc3RhdGUsIHgsIHksIG92ZXIpIHtcclxuICAgIHggLT0gdGhpcy53aWR0aCAvIDI7XHJcbiAgICB5IC09IHRoaXMuaGVpZ2h0O1xyXG5cdHRoaXMucGVvcGxlLnRleHQgPSAnUGVvcGxlOiAnICsgc3RhdGUucGVvcGxlO1xyXG4gICAgdGhpcy5lZHVjYXRpb24udGV4dCA9ICdFZHVjYXRpb246ICcgKyBzdGF0ZS5lZHVjYXRpb247XHJcbiAgICB0aGlzLmhhcHBpbmVzcy50ZXh0ID0gJ0hhcHBpbmVzczogJScgKyBzdGF0ZS5oYXBwaW5lc3M7XHJcbiAgICB0aGlzLmZhdGlndWUudGV4dCA9ICdGYXRpZ3VlOiAlJyArIHN0YXRlLmZhdGlndWU7XHJcbiAgICB0aGlzLmluY29tZS50ZXh0ID0gJ0luY29tZTogJCcgKyBzdGF0ZS5pbmNvbWU7XHJcbiAgICB2YXIgaGFwcGluZXNzTW9kaWZpZXIgPSBzdGF0ZS5oYXBwaW5lc3NNb2RpZmllcjtcclxuICAgIGlmIChoYXBwaW5lc3NNb2RpZmllciA9PSAtMykge1xyXG4gICAgICAgIHRoaXMuY2hldnJvbi5mcmFtZSA9IDA7XHJcbiAgICB9IGVsc2UgaWYgKGhhcHBpbmVzc01vZGlmaWVyID09IC0yKSB7XHJcbiAgICAgICAgdGhpcy5jaGV2cm9uLmZyYW1lID0gMTtcclxuICAgIH0gZWxzZSBpZiAoaGFwcGluZXNzTW9kaWZpZXIgPT0gLTEpIHtcclxuICAgICAgICB0aGlzLmNoZXZyb24uZnJhbWUgPSAyO1xyXG4gICAgfSBlbHNlIGlmIChoYXBwaW5lc3NNb2RpZmllciA9PSAwKSB7XHJcbiAgICAgICAgdGhpcy5jaGV2cm9uLmZyYW1lID0gMztcclxuICAgIH0gZWxzZSBpZiAoaGFwcGluZXNzTW9kaWZpZXIgPT0gMSkge1xyXG4gICAgICAgIHRoaXMuY2hldnJvbi5mcmFtZSA9IDQ7XHJcbiAgICB9IGVsc2UgaWYgKGhhcHBpbmVzc01vZGlmaWVyID09IDIpIHtcclxuICAgICAgICB0aGlzLmNoZXZyb24uZnJhbWUgPSA1O1xyXG4gICAgfSBlbHNlIGlmIChoYXBwaW5lc3NNb2RpZmllciA9PSAzKSB7XHJcbiAgICAgICAgdGhpcy5jaGV2cm9uLmZyYW1lID0gNjtcclxuICAgIH1cclxuICAgIHRoaXMuc3RhdGljVGV4dC52aXNpYmxlID0gdHJ1ZTtcclxuICAgIHRoaXMudmlzaWJsZSA9IHRydWU7XHJcbiAgICB0aGlzLndpZHRoID0gdGhpcy5zdGF0aWNXaWR0aDtcclxuICAgIHRoaXMuaGVpZ2h0ID0gdGhpcy5zdGF0aWNIZWlnaHQ7XHJcbiAgICB0aGlzLnggPSB4O1xyXG4gICAgdGhpcy55ID0geTtcclxuICAgIHRoaXMuc3RhdGljVGV4dC54ID0geDtcclxuICAgIHRoaXMuc3RhdGljVGV4dC55ID0geTtcclxuICAgIHRoaXMuYWRqdXN0U3RhdGljKG92ZXIpO1xyXG59O1xyXG4vL2hhcHBpbmVzc0NoYW5nZSwgaW5jb21lQ2hhbmdlXHJcbkhvdmVyTWVudS5wcm90b3R5cGUuc2hvd0NoYW5nZSA9IGZ1bmN0aW9uKGNhbiwgc3RhdGUsIHgsIHkpIHtcclxuICAgIGlmICghY2FuKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cdHRoaXMuaGFwcGluZXNzQ2hhbmdlLnRleHQgPSAnSGFwcGluZXNzIGNoYW5nZTogJyArIHN0YXRlLmhhcHBpbmVzc0NoYW5nZTtcclxuICAgIHRoaXMuaW5jb21lQ2hhbmdlLnRleHQgPSAnSW5jb21lIGNoYW5nZTogJyArIHN0YXRlLmluY29tZUNoYW5nZTtcclxuICAgIHRoaXMuY2hhbmdlVGV4dC52aXNpYmxlID0gdHJ1ZTtcclxuICAgIHRoaXMudmlzaWJsZSA9IHRydWU7XHJcbiAgICB0aGlzLndpZHRoID0gdGhpcy5jaGFuZ2VXaWR0aDtcclxuICAgIHRoaXMuaGVpZ2h0ID0gdGhpcy5jaGFuZ2VIZWlnaHQ7XHJcbiAgICB5IC09IHRoaXMuaGVpZ2h0O1xyXG4gICAgdGhpcy54ID0geDtcclxuICAgIHRoaXMueSA9IHk7XHJcbiAgICB0aGlzLmNoYW5nZVRleHQueCA9IHg7XHJcbiAgICB0aGlzLmNoYW5nZVRleHQueSA9IHk7XHJcbiAgICB0aGlzLmFkanVzdENoYW5nZSgpO1xyXG59O1xyXG5Ib3Zlck1lbnUucHJvdG90eXBlLmFkanVzdFN0YXRpYyA9IGZ1bmN0aW9uKG92ZXIpIHtcclxuICAgIHZhciBtYXhXaWR0aCA9IHRoaXMuZ2FtZS53aWR0aDtcclxuICAgIHZhciBtYXhIZWlnaHQgPSB0aGlzLmdhbWUuaGVpZ2h0O1xyXG4gICAgaWYgKHRoaXMueSAtIHRoaXMuaGVpZ2h0IDw9IDApIHsgLy8gb3ZlciB0b3Agb2Ygc2NyZWVuXHJcbiAgICAgICAgdGhpcy55ICs9IG92ZXI7XHJcbiAgICAgICAgdGhpcy55ICs9IHRoaXMuaGVpZ2h0O1xyXG4gICAgICAgIHRoaXMuc3RhdGljVGV4dC55ID0gdGhpcy55O1xyXG4gICAgICAgIHRoaXMuY2hhbmdlVGV4dC55ID0gdGhpcy55O1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMueCAtIHRoaXMud2lkdGggLyAyIDwgMCkgeyAvLyBvdmVyIGxlZnQgb2Ygc2NyZWVuXHJcbiAgICAgICAgdGhpcy54ICs9IHRoaXMud2lkdGggLyAyO1xyXG4gICAgICAgIHRoaXMuc3RhdGljVGV4dC54ID0gdGhpcy54O1xyXG4gICAgICAgIHRoaXMuY2hhbmdlVGV4dC54ID0gdGhpcy54O1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLnggKyB0aGlzLndpZHRoIC8gMiA+IG1heFdpZHRoKSB7IC8vIG92ZXIgcmlnaHQgb2Ygc2NyZWVuXHJcbiAgICAgICAgdGhpcy54IC09IHRoaXMud2lkdGggLyAyO1xyXG4gICAgICAgIHRoaXMuc3RhdGljVGV4dC54ID0gdGhpcy54O1xyXG4gICAgICAgIHRoaXMuY2hhbmdlVGV4dC54ID0gdGhpcy54O1xyXG4gICAgfVxyXG59O1xyXG5Ib3Zlck1lbnUucHJvdG90eXBlLmFkanVzdENoYW5nZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIG1heFdpZHRoID0gdGhpcy5nYW1lLndpZHRoO1xyXG4gICAgdmFyIG1heEhlaWdodCA9IHRoaXMuZ2FtZS5oZWlnaHQ7XHJcbiAgICBpZiAodGhpcy55IC0gdGhpcy5oZWlnaHQgPD0gMCkgeyAvLyBvdmVyIHRvcCBvZiBzY3JlZW5cclxuICAgICAgICB0aGlzLnkgKz0gdGhpcy5oZWlnaHQ7XHJcbiAgICAgICAgdGhpcy5zdGF0aWNUZXh0LnkgPSB0aGlzLnk7XHJcbiAgICAgICAgdGhpcy5jaGFuZ2VUZXh0LnkgPSB0aGlzLnk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy54ICsgdGhpcy53aWR0aCA+IG1heFdpZHRoKSB7IC8vIG92ZXIgcmlnaHQgb2Ygc2NyZWVuXHJcbiAgICAgICAgdGhpcy54IC09IHRoaXMud2lkdGg7XHJcbiAgICAgICAgdGhpcy5zdGF0aWNUZXh0LnggPSB0aGlzLng7XHJcbiAgICAgICAgdGhpcy5jaGFuZ2VUZXh0LnggPSB0aGlzLng7XHJcbiAgICB9XHJcbn07XHJcbkhvdmVyTWVudS5wcm90b3R5cGUuaGlkZSA9IGZ1bmN0aW9uKCkge1xyXG5cdHRoaXMuc3RhdGljVGV4dC52aXNpYmxlID0gZmFsc2U7XHJcbiAgICB0aGlzLmNoYW5nZVRleHQudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgdGhpcy52aXNpYmxlID0gZmFsc2U7XHJcbn07XHJcbi8vIEhvdmVyTWVudS5wcm90b3R5cGUub25JbnB1dE1vdmUgPSBmdW5jdGlvbigpIHtcclxuICAvLyBjb25zb2xlLmxvZygnbW92ZScpO1xyXG4gIFxyXG4vLyB9O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBIb3Zlck1lbnU7XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbiIsInZhciBQZXJzb24gPSBmdW5jdGlvbiAoZ2FtZSwgeCwgeSwgaWQpIHtcclxuXHRQaGFzZXIuU3ByaXRlLmNhbGwodGhpcywgZ2FtZSwgeCwgeSwgJ2FnZXMnKTtcclxuXHR0aGlzLmZyYW1lID0gMjtcclxuXHR0aGlzLnZlbG9jaXR5ID0ge3g6MCwgeTowfTtcclxuXHR0aGlzLndpZHRoID0gMTA7XHJcblx0dGhpcy5oZWlnaHQgPSAxMDtcclxuXHR0aGlzLnNwZWVkID0gLjA1O1xyXG5cdHRoaXMuaWQgPSBpZDtcclxuXHR0aGlzLmVkdUxldmVsID0gUGVyc29uLkVEVUxFVkVMLnVuZW1wbG95ZWQ7XHJcblx0dGhpcy5oYXBwaW5lc3MgPSAxMDA7XHJcbiAgICB0aGlzLmZhdGlndWUgPSAwO1xyXG4gICAgdGhpcy5oYXBwaW5lc3NNb2RpZmllciA9IDA7XHJcbiAgICB0aGlzLmFnZSA9IFBlcnNvbi5BR0UueW91bmc7XHJcbiAgICB0aGlzLnR1cm5Db3VudCA9IDA7XHJcbiAgICB0aGlzLmFnZVRocmVzaG9sZCA9IDU7XHJcbn07XHJcblBlcnNvbi5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFBoYXNlci5TcHJpdGUucHJvdG90eXBlKTtcclxuUGVyc29uLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFBlcnNvbjtcclxuXHJcblBlcnNvbi5FRFVMRVZFTCA9IHtcclxuXHR1bmVtcGxveWVkIDogLTEsXHJcblx0bG93ICA6IDAsXHJcblx0bWlkICA6IDEsXHJcblx0aGlnaCA6IDJcclxufTtcclxuXHJcblBlcnNvbi5JTkNPTUVTID0ge1xyXG5cdGxvdyA6IDEwLFxyXG5cdG1pZCA6IDIwLFxyXG5cdGhpZ2ggOiAzMFxyXG59O1xyXG5cclxuUGVyc29uLkFHRSA9IHtcclxuXHR5b3VuZyA6IDAsXHJcblx0YWR1bHQgOiAxLFxyXG5cdG9sZCA6IDJcclxufTtcclxuXHJcblBlcnNvbi5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24oKSB7XHJcblx0dGhpcy54ICs9IHRoaXMudmVsb2NpdHkueCAqIHRoaXMuc3BlZWQ7XHJcblx0dGhpcy55ICs9IHRoaXMudmVsb2NpdHkueSAqIHRoaXMuc3BlZWQ7XHJcblx0Ly9jb25zb2xlLmxvZyh0aGlzLnZlbG9jaXR5KTtcclxufTtcclxuXHJcblBlcnNvbi5wcm90b3R5cGUuYWdlVGljayA9IGZ1bmN0aW9uKCkge1xyXG5cdC8vIHRoaXMudHVybkNvdW50ICs9IDE7XHJcblx0Ly8gaWYgKHRoaXMudHVybkNvdW50ID49IHRoaXMuYWdlVGhyZXNob2xkKSB7XHJcblx0Ly8gXHQvLyBjb25zb2xlLmxvZygnaGFwcHkgYmlydGhkYXknKTtcclxuXHQvLyBcdGlmICh0aGlzLmFnZSA9PSAwKSB7XHJcblx0Ly8gXHRcdHRoaXMuYWdlID0gUGVyc29uLkFHRS5hZHVsdDtcclxuXHQvLyBcdFx0dGhpcy5mcmFtZSA9IDM7XHJcblx0Ly8gXHR9IGVsc2UgaWYgKHRoaXMuYWdlID09IDEpIHtcclxuXHQvLyBcdFx0dGhpcy5hZ2UgPSBQZXJzb24uQUdFLm9sZDtcclxuXHQvLyBcdFx0dGhpcy5mcmFtZSA9IDE7XHJcblx0Ly8gXHR9IGVsc2UgaWYgKHRoaXMuYWdlID09IDIpIHtcclxuXHJcblx0Ly8gXHR9XHJcblx0Ly8gfVxyXG59O1xyXG5cclxuUGVyc29uLnByb3RvdHlwZS5nZXRUYXggPSBmdW5jdGlvbigpIHtcclxuXHQvLyBjb25zb2xlLmxvZygnZ2V0IHRheCcsIHRoaXMuZ3JvdXAubXlNYW5hZ2VyLmJhY2tncm91bmQudHlwZSk7XHJcblx0aWYgKHRoaXMuZ3JvdXAubXlNYW5hZ2VyLmJhY2tncm91bmQudHlwZSA9PT0gJ2hvdXNlJykge1xyXG5cdFx0aWYgKHRoaXMuZ3JvdXAubXlNYW5hZ2VyLmJhY2tncm91bmQuaW5jb21lTGV2ZWwgPT09IFBlcnNvbi5FRFVMRVZFTC5sb3cpIHtcclxuXHRcdFx0Ly8gY29uc29sZS5sb2codGhpcy5ncm91cC5teU1hbmFnZXIuYmFja2dyb3VuZC5teU1hbmFnZXIuc3RhdGUudGF4TW9kLmxvdyk7XHJcblx0XHRcdHJldHVybiAtMSAqIFBlcnNvbi5JTkNPTUVTLmxvdztcclxuXHRcdH0gZWxzZSBpZiAodGhpcy5ncm91cC5teU1hbmFnZXIuYmFja2dyb3VuZC5pbmNvbWVMZXZlbCA9PT0gUGVyc29uLkVEVUxFVkVMLm1pZCkge1xyXG5cdFx0XHRyZXR1cm4gLTIgKiBQZXJzb24uSU5DT01FUy5taWQ7XHJcblx0XHR9IGVsc2UgaWYgKHRoaXMuZ3JvdXAubXlNYW5hZ2VyLmJhY2tncm91bmQuaW5jb21lTGV2ZWwgPT09IFBlcnNvbi5FRFVMRVZFTC5oaWdoKSB7XHJcblx0XHRcdHJldHVybiAtMyAqIFBlcnNvbi5JTkNPTUVTLmhpZ2g7XHJcblx0XHR9XHJcblx0fSBlbHNlIGlmICh0aGlzLmdyb3VwLm15TWFuYWdlci5iYWNrZ3JvdW5kLnR5cGUgPT09ICd3b3JrJykge1xyXG5cdFx0aWYgKHRoaXMuZ3JvdXAubXlNYW5hZ2VyLmJhY2tncm91bmQuaW5jb21lTGV2ZWwgPT09IFBlcnNvbi5FRFVMRVZFTC5sb3cpIHtcclxuXHRcdFx0cmV0dXJuIFBlcnNvbi5JTkNPTUVTLmxvdyAqIHRoaXMuZ3JvdXAubXlNYW5hZ2VyLmJhY2tncm91bmQubXlNYW5hZ2VyLnN0YXRlLnRheE1vZC5sb3c7XHJcblx0XHR9IGVsc2UgaWYgKHRoaXMuZ3JvdXAubXlNYW5hZ2VyLmJhY2tncm91bmQuaW5jb21lTGV2ZWwgPT09IFBlcnNvbi5FRFVMRVZFTC5taWQpIHtcclxuXHRcdFx0cmV0dXJuIFBlcnNvbi5JTkNPTUVTLm1pZCAqIHRoaXMuZ3JvdXAubXlNYW5hZ2VyLmJhY2tncm91bmQubXlNYW5hZ2VyLnN0YXRlLnRheE1vZC5taWQ7XHJcblx0XHR9IGVsc2UgaWYgKHRoaXMuZ3JvdXAubXlNYW5hZ2VyLmJhY2tncm91bmQuaW5jb21lTGV2ZWwgPT09IFBlcnNvbi5FRFVMRVZFTC5oaWdoKSB7XHJcblx0XHRcdHJldHVybiBQZXJzb24uSU5DT01FUy5oaWdoICogdGhpcy5ncm91cC5teU1hbmFnZXIuYmFja2dyb3VuZC5teU1hbmFnZXIuc3RhdGUudGF4TW9kLmhpZ2g7XHJcblx0XHR9XHJcblx0fVxyXG5cdHJldHVybiAwO1xyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBQZXJzb247IiwidmFyIFBsYXllciA9IGZ1bmN0aW9uIChnYW1lLCB4LCB5KSB7XHJcbiAgICBQaGFzZXIuU3ByaXRlLmNhbGwodGhpcywgZ2FtZSwgeCwgeSwgJ3Rlc3RzcHJpdGUnKTtcclxuICAgIGdhbWUuYWRkLmV4aXN0aW5nKHRoaXMpO1xyXG5cdHRoaXMuc3BlZWQgPSAwLjE7XHJcbn1cclxuXHJcblBsYXllci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFBoYXNlci5TcHJpdGUucHJvdG90eXBlKTtcclxuUGxheWVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFBsYXllcjtcclxuXHJcbi8qKlxyXG4gKiBBdXRvbWF0aWNhbGx5IGNhbGxlZCBieSBXb3JsZC51cGRhdGVcclxuICovXHJcblBsYXllci5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24oKSB7XHJcblx0Ly90aGlzLnggKz0gdGhpcy52ZWxvY2l0eTtcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gUGxheWVyO1xyXG4iLCJ2YXIgUHJvZ3Jlc3NCYXIgPSByZXF1aXJlKCcuL1Byb2dyZXNzQmFyJyk7XHJcblxyXG52YXIgVUlCdWlsZGVyID0gZnVuY3Rpb24oc2V0R2FtZVN0YXRlKSB7XHJcblx0Ly9FbnN1cmUgdGhhdCBjYW5ub3QgY3JlYXRlIG11bHRpcGxlIGluc3RhbmNlcyBvZiB0aGlzIGNsYXNzXHJcblx0aWYoVUlCdWlsZGVyLnByb3RvdHlwZS5leGlzdHMpIHtcclxuXHRcdHJldHVybiBVSUJ1aWxkZXIucHJvdG90eXBlLmV4aXN0aW5nUmVmZXJlbmNlO1xyXG5cdH1cclxuXHRcclxuXHR0aGlzLmdhbWVTdGF0ZSA9IHNldEdhbWVTdGF0ZTtcclxuXHR0aGlzLnJlbmRlcmFibGVzID0gW107XHJcblx0Ly9DcmVhdGUgYW5kIHN0b3JlIGEgZ3JhcGhpY3Mgb2JqZWN0ICh1c2VkIGZvciBzdHVmZiBsaWtlIGRyYXdpbmcgcmVjdGFuZ2xlcylcclxuXHRVSUJ1aWxkZXIucHJvdG90eXBlLmV4aXN0cyA9IHRydWU7XHJcblx0VUlCdWlsZGVyLnByb3RvdHlwZS5leGlzdGluZ1JlZmVyZW5jZSA9IHRoaXM7XHJcbn07XHJcblxyXG5VSUJ1aWxkZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gVUlCdWlsZGVyO1xyXG4vL1RoZXNlIHZhcidzIGhlbHAgY3JlYXRlIHRoZSBzaW5nbGV0b24gZnVuY3Rpb25hbGl0eVxyXG5VSUJ1aWxkZXIucHJvdG90eXBlLmV4aXN0cyA9IGZhbHNlO1xyXG5VSUJ1aWxkZXIucHJvdG90eXBlLmV4aXN0aW5nUmVmZXJlbmNlID0gbnVsbDtcclxuXHJcbi8vVXNlIHRoaXMgZnVuY3Rpb24gdG8gY3JlYXRlIGEgcHJvZ3Jlc3MgYmFyXHJcbi8vVXNhZ2U6IHR5cGU6IGNhbiBiZSBcImdyb3dpbmdcIiBvciBcInNocmlua2luZ1wiLCB0aGlzIHdpbGwgZWZmZWN0IGlmIGJhciBzdGFydHMgYXQgMCBhbmQgZ29lcyB1cCBvciB2aXMgdmVyc2FcclxuLy9cdFx0IG1heFZhbHVlOiBzZXRzIHRoZSBtYXggdmFsdWUgb2YgdGhlIHByb2dyZXNzIGJhciwgaS5lLiB1c2luZyAxMDAgY3JlYXRlcyBhIGJhciBmcm9tIDAgdG8gMTAwXHJcbi8vXHRcdCB4LHk6IHNldHMgbG9jYXRpb25cclxuLy9cdFx0IERPTidUIEZPUkdFVCB0byBvdmVyd3JpdGUgdGhlIG9uRXZlbnQoKSBmdW5jdGlvbiBmb3IgdGhlIHByb2dyZXNzIGJhciBhZnRlciBjcmVhdGluZyBpdFxyXG4vL1x0XHRcdC1vbkV2ZW50KCkgaXMgYXV0b21hdGljYWxseSBjYWxsZWQgd2hlbiBiYXIgZmlsbHMvc2hyaW5rcyBwYXN0IGxpbWl0IChkZXBlbmRpbmcgb24gYmFyIHR5cGUpXHJcblVJQnVpbGRlci5wcm90b3R5cGUuYnVpbGRQcm9ncmVzc0JhciA9IGZ1bmN0aW9uKHR5cGUsIHgsIHksIHdpZHRoLCBoZWlnaHQsIG1heFZhbHVlKSB7XHJcblx0Ly9jcmVhdGUgYW5kIGZvcm1hdCBuZXcgcHJvZyBiYXJcclxuXHR2YXIgZ3JhcGhpY3MgPSB0aGlzLmdhbWVTdGF0ZS5nYW1lLmFkZC5ncmFwaGljcygwLDApO1xyXG5cdHZhciBuZXdQcm9nQmFyID0gbmV3IFByb2dyZXNzQmFyKHR5cGUsIG1heFZhbHVlLCBncmFwaGljcywgdGhpcy5yZW5kZXJhYmxlcyk7XHJcblx0bmV3UHJvZ0Jhci5zZXRMb2NhdGlvbih4LHkpO1xyXG5cdG5ld1Byb2dCYXIuc2V0U2l6ZSh3aWR0aCwgaGVpZ2h0KTtcclxuXHQvL3N1YnNjcmliZSB0byAncmVuZGVyYWJsZXMnIHNvIHRoYXQgcmVuZGVyKCkgaXMgY2FsbGVkIGF1dG9tYXRpY2FsbHlcclxuXHQvLyB0aGlzLnJlbmRlcmFibGVzLnN1YnNjcmliZShuZXdQcm9nQmFyKTtcclxuXHR0aGlzLnJlbmRlcmFibGVzLnB1c2gobmV3UHJvZ0Jhcik7XHJcblx0cmV0dXJuIG5ld1Byb2dCYXI7XHJcbn07XHJcblVJQnVpbGRlci5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24oKSB7XHJcblx0Zm9yIChyZW5kZXJhYmxlIGluIHRoaXMucmVuZGVyYWJsZXMpIHtcclxuXHRcdHRoaXMucmVuZGVyYWJsZXNbcmVuZGVyYWJsZV0ucmVuZGVyKCk7XHJcblx0fVxyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBVSUJ1aWxkZXI7IiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxudmFyIGdhbWUgPSBuZXcgUGhhc2VyLkdhbWUoODAwLCA2MDAsIFBoYXNlci5BVVRPLCAnLWdhbWUnKTtcclxuXHJcbndpbmRvdy5VdGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcclxud2luZG93LnBsYXllclN0YXRlID0ge1xyXG4gICAgY3VycmVudExldmVsOiAnR2FtZSdcclxufTtcclxuXHJcblxyXG5nYW1lLnN0YXRlLmFkZCgnQm9vdCcsIHJlcXVpcmUoJy4vc3RhdGVzL2Jvb3QnKSk7XHJcbmdhbWUuc3RhdGUuYWRkKCdTcGxhc2gnLCByZXF1aXJlKCcuL3N0YXRlcy9zcGxhc2gnKSk7XHJcbmdhbWUuc3RhdGUuYWRkKCdQcmVsb2FkZXInLCByZXF1aXJlKCcuL3N0YXRlcy9wcmVsb2FkZXInKSk7XHJcbmdhbWUuc3RhdGUuYWRkKCdNZW51JywgcmVxdWlyZSgnLi9zdGF0ZXMvbWVudScpKTtcclxuZ2FtZS5zdGF0ZS5hZGQoJ0dhbWUnLCByZXF1aXJlKCcuL3N0YXRlcy9nYW1lJykpO1xyXG5nYW1lLnN0YXRlLmFkZCgnR2FtZV9PdmVyJywgcmVxdWlyZSgnLi9zdGF0ZXMvZ2FtZV9vdmVyJykpO1xyXG5cclxuZ2FtZS5zdGF0ZS5zdGFydCgnQm9vdCcpO1xyXG5cclxuLy9nYW1lLnN0YWdlLmJhY2tncm91bmRDb2xvciA9IFwiI2ZmZmZmZlwiO1xyXG4iLCJ2YXIgQm9vdCA9IGZ1bmN0aW9uICgpIHt9O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBCb290O1xyXG5cclxuQm9vdC5wcm90b3R5cGUgPSB7XHJcblxyXG4gIHByZWxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMubG9hZC5pbWFnZSgncHJlbG9hZGVyJywgJ2Fzc2V0cy9wcmVsb2FkZXIuZ2lmJyk7XHJcbiAgfSxcclxuXHJcbiAgY3JlYXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLmdhbWUuaW5wdXQubWF4UG9pbnRlcnMgPSAxO1xyXG5cclxuICAgIGlmICh0aGlzLmdhbWUuZGV2aWNlLmRlc2t0b3ApIHtcclxuICAgICAgdGhpcy5nYW1lLnN0YWdlLnNjYWxlLnBhZ2VBbGlnbkhvcml6b250YWxseSA9IHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLmdhbWUuc2NhbGUuc2NhbGVNb2RlID0gUGhhc2VyLlNjYWxlTWFuYWdlci5TSE9XX0FMTDtcclxuICAgICAgdGhpcy5nYW1lLnNjYWxlLm1pbldpZHRoID0gIDQ4MDtcclxuICAgICAgdGhpcy5nYW1lLnNjYWxlLm1pbkhlaWdodCA9IDI2MDtcclxuICAgICAgdGhpcy5nYW1lLnNjYWxlLm1heFdpZHRoID0gNjQwO1xyXG4gICAgICB0aGlzLmdhbWUuc2NhbGUubWF4SGVpZ2h0ID0gNDgwO1xyXG4gICAgICB0aGlzLmdhbWUuc2NhbGUuZm9yY2VMYW5kc2NhcGUgPSB0cnVlO1xyXG4gICAgICB0aGlzLmdhbWUuc2NhbGUucGFnZUFsaWduSG9yaXpvbnRhbGx5ID0gdHJ1ZTtcclxuICAgICAgdGhpcy5nYW1lLnNjYWxlLnNldFNjcmVlblNpemUodHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5nYW1lLnN0YXRlLnN0YXJ0KCdQcmVsb2FkZXInKTtcclxuICB9XHJcbn07XHJcbiIsInZhciBQbGF5ZXIgPSByZXF1aXJlKCcuLi9lbnRpdGllcy9wbGF5ZXInKTtcclxudmFyIEJhY2tncm91bmRfTWFuYWdlciA9IHJlcXVpcmUoJy4uL2VudGl0aWVzL2JhY2tncm91bmRfbWFuYWdlcicpO1xyXG52YXIgUGVyc29uID0gcmVxdWlyZSgnLi4vZW50aXRpZXMvcGVyc29uJyk7XHJcbnZhciBHcm91cCA9IHJlcXVpcmUoJy4uL2VudGl0aWVzL2dyb3VwJyk7XHJcbnZhciBHcm91cE1hbmFnZXIgPSByZXF1aXJlKCcuLi9lbnRpdGllcy9ncm91cE1hbmFnZXInKTtcclxudmFyIFVJQnVpbGRlciA9IHJlcXVpcmUoJy4uL2VudGl0aWVzL3VpQnVpbGRlcicpO1xyXG52YXIgSG92ZXJNZW51ID0gcmVxdWlyZSgnLi4vZW50aXRpZXMvaG92ZXJNZW51Jyk7XHJcblxyXG52YXIgR2FtZSA9IGZ1bmN0aW9uICgpIHtcclxuICB0aGlzLnRlc3RlbnRpdHkgPSBudWxsO1xyXG4gIC8vdGhpcy5mbG9ja3MgPSBbXTtcclxuICB0aGlzLmJnX21nID0gbnVsbDtcclxuICAvLyB0aGlzLnNlbGVjdGVkR3JvdXAgPSBudWxsO1xyXG4gIHRoaXMubW9uZXkgPSBudWxsO1xyXG4gIHRoaXMubW9uZXlWYWwgPSAwO1xyXG4gIHRoaXMuY3VyTW9uZXkgPSAyMDAwO1xyXG4gIHRoaXMubW9uZXlVcGRhdGVEZWxheSA9IDAuMDAxO1xyXG4gIHRoaXMubW9uZXlJbmNyZW1lbnRpbmcgPSBmYWxzZTtcclxuICB0aGlzLmhhcHBpbmVzc1ZhbCA9IDA7XHJcbiAgdGhpcy5jdXJIYXBwaW5lc3MgPSAwO1xyXG4gIHRoaXMuaGFwcGluZXNzVXBkYXRlRGVsYXkgPSAwLjAwMTtcclxuICB0aGlzLmhhcHBpbmVzc0luY3JlbWVudGluZyA9IGZhbHNlO1xyXG4gIHRoaXMudGF4VGltZSA9IDM7XHJcbiAgdGhpcy50YXhNb2QgPSB7bG93OiAxLCBtaWQ6IDEsIGhpZ2g6IDF9O1xyXG4gIHRoaXMubWluSGFwcGluZXNzID0gNTA7XHJcblx0dGhpcy5mYXRpZ3VlUGVyVGljayA9IDEwO1xyXG5cdC8vIHRoaXMubW9uZXlDaGFuZ2VGYWRpbmcgPSBmYWxzZTtcclxuXHR0aGlzLm1vbmV5Q2hhbmdlRmFkZURlbGF5ID0gMC4wMTtcclxuXHR0aGlzLm1vbmV5Q2hhbmdlRmFkZVJhdGUgPSAwLjAyNTtcclxuXHR0aGlzLm1vbmV5Q2hhbmdlSG9sZERlbGF5ID0gMTtcclxuXHR0aGlzLm1pZ3JhbnREZWxheSA9IDE7XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IEdhbWU7XHJcblxyXG5HYW1lLnByb3RvdHlwZSA9IHtcclxuXHJcbiAgY3JlYXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgXHQvLyBjb25zb2xlLmxvZygnZm9vNScpO1xyXG5cdCAgLy8gY29uc29sZS5sb2codGhpcyk7XHJcbiAgICB0aGlzLmdhbWUuc3RhZ2UuYmFja2dyb3VuZENvbG9yID0gXCIjZWRlZGVkXCI7XHJcbiAgICB0aGlzLm1lbnVfYmcgPSB0aGlzLmdhbWUuYWRkLmltYWdlKDAsIDAsICdtZW51X2JnJyk7ICBcclxuICAgIHZhciB4ID0gKHRoaXMuZ2FtZS53aWR0aCAvIDIpIC0gMTAwO1xyXG4gICAgdmFyIHkgPSAodGhpcy5nYW1lLmhlaWdodCAvIDIpIC0gNTA7XHJcblxyXG4gICAgdGhpcy5iZ19tZyA9IG5ldyBCYWNrZ3JvdW5kX01hbmFnZXIodGhpcy5nYW1lLCB0aGlzKTtcclxuXHRcclxuICAgIHRoaXMuaW5wdXQub25Eb3duLmFkZCh0aGlzLm9uSW5wdXREb3duLCB0aGlzKTtcclxuXHRcclxuXHR0aGlzLm1vbmV5ID0gdGhpcy5nYW1lLmFkZC50ZXh0KDIwLCAxNSwgJyQwJyk7XHJcblx0dGhpcy5tb25leS5mb250ID0gXCJSb2JvdG9cIjtcclxuXHR0aGlzLm1vbmV5LmZvbnRTaXplID0gMjQ7XHJcblx0dGhpcy5tb25leS5maWxsID0gJyMwMDAwMDAnO1xyXG5cdHRoaXMubW9uZXkudGV4dCA9ICckMCc7XHJcblxyXG5cdHRoaXMubW9uZXlDaGFuZ2UgPSB0aGlzLmdhbWUuYWRkLnRleHQoMTIwLCAxNSwgJyQwJyk7XHJcblx0dGhpcy5tb25leUNoYW5nZS5mb250ID0gXCJSb2JvdG9cIjtcclxuXHR0aGlzLm1vbmV5Q2hhbmdlLmZvbnRTaXplID0gMjQ7XHJcblx0dGhpcy5tb25leUNoYW5nZS5maWxsID0gJyMwMDAwMDAnO1xyXG5cdHRoaXMubW9uZXlDaGFuZ2UudGV4dCA9ICcrJDAnO1xyXG5cdHRoaXMubW9uZXlDaGFuZ2UuYWxwaGEgPSAwO1xyXG5cclxuXHR0aGlzLnVpYiA9IG5ldyBVSUJ1aWxkZXIodGhpcyk7XHJcblx0dGhpcy5iYXIgPSB0aGlzLnVpYi5idWlsZFByb2dyZXNzQmFyKFwiZ3Jvd2luZ1wiLCB0aGlzLmdhbWUud2lkdGggLyAyLCAyNSwgMzAwLCAxNiwgMTAwIC0gdGhpcy5taW5IYXBwaW5lc3MpO1xyXG5cdC8vdGhpcy5iYXIuYWRkVmFsdWUoMTAwKTtcclxuXHR0aGlzLmhhcHB5ID0gdGhpcy5nYW1lLmFkZC5zcHJpdGUodGhpcy5nYW1lLndpZHRoICogLjI5LCAyNSwgJ2hhcHB5ZmFjZScpO1xyXG5cdHRoaXMuaGFwcHkuYW5jaG9yLnNldFRvKDAuNSwgMC41KTtcclxuXHJcbiAgLy8gVGF4IGJ1dHRvbnNcclxuICB0aGlzLnJlZFRheExvdyAgID0gdGhpcy5nYW1lLmFkZC5idXR0b24odGhpcy5iZ19tZy5iZ0FycmF5WzBdLmdldFZhcnNDZW50ZXIoKS5jZW50ZXIueCAtIDE1LCA3NSwgJ3RheFJlZHVjZScsIHRoaXMuZGVjVGF4TG93LCB0aGlzKTtcclxuICB0aGlzLnRleHRUYXhMb3cgID0gdGhpcy5nYW1lLmFkZC50ZXh0KHRoaXMuYmdfbWcuYmdBcnJheVswXS5nZXRWYXJzKClbMF0sIDc4LCAnJCQnKTtcclxuICB0aGlzLnRleHRUYXhMb3cuZm9udCA9IFwiUm9ib3RvXCI7XHJcbiAgdGhpcy50ZXh0VGF4TG93LmZvbnRTaXplID0gMTg7XHJcbiAgdGhpcy5hZGRUYXhMb3cgICA9IHRoaXMuZ2FtZS5hZGQuYnV0dG9uKHRoaXMuYmdfbWcuYmdBcnJheVswXS5nZXRWYXJzQ2VudGVyKCkuY2VudGVyLnggKyAxNSwgNzUsICd0YXhBZGQnLCB0aGlzLmluY1RheExvdywgdGhpcyk7XHJcbiAgdGhpcy5yZWRUYXhMb3cuYW5jaG9yLnNldFRvKC41LCAuNSk7XHJcbiAgdGhpcy50ZXh0VGF4TG93LmFuY2hvci5zZXRUbygwLCAuNSk7XHJcbiAgdGhpcy5hZGRUYXhMb3cuYW5jaG9yLnNldFRvKC41LCAuNSk7XHJcbiAgdGhpcy5yZWRUYXhNaWQgICA9IHRoaXMuZ2FtZS5hZGQuYnV0dG9uKHRoaXMuYmdfbWcuYmdBcnJheVsxXS5nZXRWYXJzQ2VudGVyKCkuY2VudGVyLnggLSAxNSwgNzUsICd0YXhSZWR1Y2UnLCB0aGlzLmRlY1RheE1pZCwgdGhpcyk7XHJcbiAgdGhpcy50ZXh0VGF4TWlkICA9IHRoaXMuZ2FtZS5hZGQudGV4dCh0aGlzLmJnX21nLmJnQXJyYXlbMV0uZ2V0VmFyc0NlbnRlcigpLmNlbnRlci54LCA3OCwgJyQkJyk7XHJcbiAgdGhpcy50ZXh0VGF4TWlkLmZvbnQgPSBcIlJvYm90b1wiO1xyXG4gIHRoaXMudGV4dFRheE1pZC5mb250U2l6ZSA9IDE4O1xyXG4gIHRoaXMuYWRkVGF4TWlkICAgPSB0aGlzLmdhbWUuYWRkLmJ1dHRvbih0aGlzLmJnX21nLmJnQXJyYXlbMV0uZ2V0VmFyc0NlbnRlcigpLmNlbnRlci54ICsgMTUsIDc1LCAndGF4QWRkJywgdGhpcy5pbmNUYXhNaWQsIHRoaXMpO1xyXG4gIHRoaXMucmVkVGF4TWlkLmFuY2hvci5zZXRUbyguNSwgLjUpO1xyXG4gIHRoaXMudGV4dFRheE1pZC5hbmNob3Iuc2V0VG8oMCwgLjUpO1xyXG4gIHRoaXMuYWRkVGF4TWlkLmFuY2hvci5zZXRUbyguNSwgLjUpO1xyXG4gIHRoaXMucmVkVGF4SGlnaCAgPSB0aGlzLmdhbWUuYWRkLmJ1dHRvbih0aGlzLmJnX21nLmJnQXJyYXlbMl0uZ2V0VmFyc0NlbnRlcigpLmNlbnRlci54IC0gMTUsIDc1LCAndGF4UmVkdWNlJywgdGhpcy5kZWNUYXhIaWdoLCB0aGlzKTtcclxuICB0aGlzLnRleHRUYXhIaWdoID0gdGhpcy5nYW1lLmFkZC50ZXh0KHRoaXMuYmdfbWcuYmdBcnJheVsxXS5nZXRWYXJzQ2VudGVyKCkuY2VudGVyLngsIDc4LCAnJCQnKTtcclxuICB0aGlzLnRleHRUYXhIaWdoLmZvbnQgPSBcIlJvYm90b1wiO1xyXG4gIHRoaXMudGV4dFRheEhpZ2guZm9udFNpemUgPSAxODtcclxuICB0aGlzLmFkZFRheEhpZ2ggID0gdGhpcy5nYW1lLmFkZC5idXR0b24odGhpcy5iZ19tZy5iZ0FycmF5WzJdLmdldFZhcnNDZW50ZXIoKS5jZW50ZXIueCArIDE1LCA3NSwgJ3RheEFkZCcsIHRoaXMuaW5jVGF4SGlnaCwgdGhpcyk7XHJcbiAgdGhpcy5yZWRUYXhIaWdoLmFuY2hvci5zZXRUbyguNSwgLjUpO1xyXG4gIHRoaXMudGV4dFRheEhpZ2guYW5jaG9yLnNldFRvKDAsIC41KTtcclxuICB0aGlzLmFkZFRheEhpZ2guYW5jaG9yLnNldFRvKC41LCAuNSk7XHJcblxyXG5cdHRoaXMuZ2FtZS50aW1lLmV2ZW50cy5hZGQoUGhhc2VyLlRpbWVyLlNFQ09ORCAqIHRoaXMudGF4VGltZSwgdGhpcy5jb2xsZWN0VGF4LCB0aGlzKTtcclxuICAgIHRoaXMuaG0gPSBuZXcgSG92ZXJNZW51KHRoaXMuZ2FtZSwgMjAwLCAyMDAsIHRoaXMpO1xyXG4gICAgLy8gdGhpcy5obS5hbmNob3Iuc2V0VG8oMC41LCAxKTtcclxuXHQvLyB0aGlzLmhtLnZpc2libGUgPSBmYWxzZTtcclxuXHR0aGlzLmdhbWUudGltZS5ldmVudHMuYWRkKFBoYXNlci5UaW1lci5TRUNPTkQgKiB0aGlzLm1vbmV5Q2hhbmdlRmFkZURlbGF5LCB0aGlzLmZhZGVNb25leUNoYW5nZSwgdGhpcyk7XHJcblx0dGhpcy5nYW1lLnRpbWUuZXZlbnRzLmFkZChQaGFzZXIuVGltZXIuU0VDT05EICogdGhpcy5taWdyYW50RGVsYXksIHRoaXMuc3Bhd25NaWdyYW50LCB0aGlzKTtcclxuICB9LFxyXG5cclxuICB1cGRhdGU6IGZ1bmN0aW9uICgpIHtcclxuXHR0aGlzLmJnX21nLnVwZGF0ZSgpO1xyXG5cdC8vdGhpcy5nbS51cGRhdGUoKTtcclxuXHR0aGlzLnVpYi5yZW5kZXIoKTtcclxuXHR2YXIgaGFwcGluZXNzID0gMDtcclxuXHQgIGZvciAodmFyIGJnIGluIHRoaXMuYmdfbWcuYmdBcnJheSkge1xyXG5cdFx0ICBmb3IgKHZhciBncm91cCBpbiB0aGlzLmJnX21nLmJnQXJyYXlbYmddLmdyb3VwX21hbmFnZXIubWVtYmVycykge1xyXG5cdFx0XHQgIGZvciAodmFyIHBlcnNvbiBpbiB0aGlzLmJnX21nLmJnQXJyYXlbYmddLmdyb3VwX21hbmFnZXIubWVtYmVyc1tncm91cF0ubWVtYmVycykge1xyXG5cdFx0XHRcdCAgaGFwcGluZXNzICs9IHRoaXMuYmdfbWcuYmdBcnJheVtiZ10uZ3JvdXBfbWFuYWdlci5tZW1iZXJzW2dyb3VwXS5tZW1iZXJzW3BlcnNvbl0uaGFwcGluZXNzO1xyXG5cdFx0XHQgIH1cclxuXHRcdCAgfVxyXG5cdCAgfVxyXG5cdCAgaGFwcGluZXNzIC89IHRoaXMuYmdfbWcubnVtUGVvcGxlKCk7XHJcblx0ICB0aGlzLnNldEhhcHBpbmVzcyhoYXBwaW5lc3MpO1xyXG5cdCAgaGFwcGluZXNzIC09IHRoaXMubWluSGFwcGluZXNzO1xyXG5cdCAgLy8gY29uc29sZS5sb2coaGFwcGluZXNzKTtcclxuXHQgIC8vIGNvbnNvbGUubG9nKGhhcHBpbmVzcyk7XHJcbiAgICB0aGlzLnJlZFRheExvdy54ICAgPSB0aGlzLmJnX21nLmJnQXJyYXlbMF0uZ2V0VmFyc0NlbnRlcigpLmNlbnRlci54IC0gMzA7XHJcbiAgICB0aGlzLnRleHRUYXhMb3cueCAgPSB0aGlzLmJnX21nLmJnQXJyYXlbMF0uZ2V0VmFyc0NlbnRlcigpLmNlbnRlci54IC0gMTU7XHJcbiAgICB0aGlzLmFkZFRheExvdy54ICAgPSB0aGlzLmJnX21nLmJnQXJyYXlbMF0uZ2V0VmFyc0NlbnRlcigpLmNlbnRlci54ICsgMzA7XHJcbiAgICB0aGlzLnJlZFRheE1pZC54ICAgPSB0aGlzLmJnX21nLmJnQXJyYXlbMV0uZ2V0VmFyc0NlbnRlcigpLmNlbnRlci54IC0gMzA7XHJcbiAgICB0aGlzLnRleHRUYXhNaWQueCAgPSB0aGlzLmJnX21nLmJnQXJyYXlbMV0uZ2V0VmFyc0NlbnRlcigpLmNlbnRlci54IC0gMTU7XHJcbiAgICB0aGlzLmFkZFRheE1pZC54ICAgPSB0aGlzLmJnX21nLmJnQXJyYXlbMV0uZ2V0VmFyc0NlbnRlcigpLmNlbnRlci54ICsgMzA7XHJcbiAgICB0aGlzLnJlZFRheEhpZ2gueCAgPSB0aGlzLmJnX21nLmJnQXJyYXlbMl0uZ2V0VmFyc0NlbnRlcigpLmNlbnRlci54IC0gMzA7XHJcbiAgICB0aGlzLnRleHRUYXhIaWdoLnggPSB0aGlzLmJnX21nLmJnQXJyYXlbMl0uZ2V0VmFyc0NlbnRlcigpLmNlbnRlci54IC0gMTU7XHJcbiAgICB0aGlzLmFkZFRheEhpZ2gueCAgPSB0aGlzLmJnX21nLmJnQXJyYXlbMl0uZ2V0VmFyc0NlbnRlcigpLmNlbnRlci54ICsgMzA7XHJcblxyXG4gICAgaWYgKHRoaXMuY3VySGFwcGluZXNzIDwgdGhpcy5taW5IYXBwaW5lc3MpIHtcclxuICAgICAgdGhpcy5nYW1lLnN0YXRlLnN0YXJ0KCdHYW1lX092ZXInKTtcclxuICBcdH1cclxuICBcdC8vIGNvbnNvbGUubG9nKHRoaXMubW9uZXlDaGFuZ2UuYWxwaGEpO1xyXG4gIH0sXHJcblxyXG4gIG9uSW5wdXREb3duOiBmdW5jdGlvbiAoKSB7XHJcblx0IC8vIGNvbnNvbGUubG9nKHRoaXMuZ2FtZS53aWR0aCwgdGhpcy5nYW1lLmhlaWdodCk7XHJcbiAgfSxcclxuICBzcGF3bk1pZ3JhbnQ6IGZ1bmN0aW9uICgpIHtcclxuICBcdC8vIGNvbnNvbGUubG9nKCdzcGF3bicpO1xyXG4gIFx0Ly8gdmFyIG5ld01pZ3JhbnQgPSBuZXcgUGVyc29uKHRoaXMuZ2FtZSwgdGhpcy5nYW1lLndpZHRoIC8gMiwgdGhpcy5nYW1lLmhlaWdodCArIDE1KTtcclxuICBcdHZhciBuZXdNaWdyYW50ID0gbmV3IFBlcnNvbih0aGlzLmdhbWUsIHRoaXMuZ2FtZS53aWR0aCAvIDIgKyBNYXRoLnJhbmRvbSgpICogODAwIC0gNDAwLCB0aGlzLmdhbWUuaGVpZ2h0ICsgMTUpO1xyXG4gIFx0dGhpcy5nYW1lLmFkZC5leGlzdGluZyhuZXdNaWdyYW50KTtcclxuICBcdHZhciBiZyA9IHRoaXMuYmdfbWcuYmdBcnJheVs2XTtcclxuICBcdGJnLmdyb3VwX21hbmFnZXIuYWRkUGVyc29uKG5ld01pZ3JhbnQpO1xyXG4gIFx0dGhpcy5nYW1lLnRpbWUuZXZlbnRzLmFkZChQaGFzZXIuVGltZXIuU0VDT05EICogdGhpcy5taWdyYW50RGVsYXksIHRoaXMuc3Bhd25NaWdyYW50LCB0aGlzKTtcclxuICBcdC8vIGNvbnNvbGUubG9nKGJnKVxyXG4gIH0sXHJcbiAgY29sbGVjdFRheDogZnVuY3Rpb24gKCkge1xyXG5cdCAgLy8gY29uc29sZS5sb2coJ2NvbGxlY3QgdGF4Jyk7XHJcblx0ICB2YXIgdGF4ZXMgPSAwO1xyXG5cdCAgZm9yICh2YXIgYmcgaW4gdGhpcy5iZ19tZy5iZ0FycmF5KSB7XHJcbiAgICAgIHZhciBkaW1pbmlzaGluZyA9IGZhbHNlO1xyXG4gICAgICB2YXIgbWF4TnVtID0gMTAwMDA7XHJcbiAgICAgIHZhciBjdXJOdW0gPSAwO1xyXG4gICAgICB2YXIgZGltRmFjdG9yID0gMTtcclxuICAgICAgaWYgKGJnID09IDEgfHwgYmcgPT0gMikge1xyXG4gICAgICAgIGRpbWluaXNoaW5nID0gdHJ1ZTtcclxuICAgICAgICBtYXhOdW0gPSB0aGlzLmJnX21nLmJnQXJyYXlbYmcgLSAxXTtcclxuICAgICAgfVxyXG4gICAgICBmb3IgKHZhciBncm91cCBpbiB0aGlzLmJnX21nLmJnQXJyYXlbYmddLmdyb3VwX21hbmFnZXIubWVtYmVycykge1xyXG5cdCAgXHRcdC8vIGNvbnNvbGUubG9nKHRoaXMuYmdfbWcuYmdBcnJheVtiZ10uZ3JvdXBfbWFuYWdlci5tZW1iZXJzW2dyb3VwXSwgdGhpcy5iZ19tZy5iZ0FycmF5W2JnXS5ncm91cF9tYW5hZ2VyLm1lbWJlcnNbZ3JvdXBdLmhhcHBpbmVzc01vZGlmaWVyKTtcclxuXHRcdFx0ICBmb3IgKHZhciBwZXJzb24gaW4gdGhpcy5iZ19tZy5iZ0FycmF5W2JnXS5ncm91cF9tYW5hZ2VyLm1lbWJlcnNbZ3JvdXBdLm1lbWJlcnMpIHtcclxuXHRcdFx0XHQgIGlmIChkaW1pbmlzaGluZykgeyAgXHJcbiAgICAgICAgICAgIGN1ck51bSsrO1xyXG4gICAgICAgICAgICBpZiAoY3VyTnVtID4gbWF4TnVtKSB7XHJcbiAgICAgICAgICAgICAgaWYgKGN1ck51bSA+IDEwKSBkaW1GYWN0b3IgPSAwO1xyXG4gICAgICAgICAgICAgIGVsc2UgZGltRmFjdG9yID0gLjEgKiAoMTAgLSBjdXJOdW0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZiAodGhpcy5iZ19tZy5iZ0FycmF5W2JnXS5ncm91cF9tYW5hZ2VyLmJhY2tncm91bmQudHlwZSA9PSAnd29yaycpIHtcclxuICAgICAgICAgICAgdGF4ZXMgKz0gdGhpcy5iZ19tZy5iZ0FycmF5W2JnXS5ncm91cF9tYW5hZ2VyLm1lbWJlcnNbZ3JvdXBdLm1lbWJlcnNbcGVyc29uXS5nZXRUYXgoKSAqIGRpbUZhY3RvcjtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0YXhlcyArPSB0aGlzLmJnX21nLmJnQXJyYXlbYmddLmdyb3VwX21hbmFnZXIubWVtYmVyc1tncm91cF0ubWVtYmVyc1twZXJzb25dLmdldFRheCgpO1xyXG4gICAgICAgICAgfVxyXG5cdFx0XHRcdCAgdGhpcy5iZ19tZy5iZ0FycmF5W2JnXS5ncm91cF9tYW5hZ2VyLm1lbWJlcnNbZ3JvdXBdLm1lbWJlcnNbcGVyc29uXS5hZ2VUaWNrKCk7XHJcblx0XHRcdCAgfVxyXG5cdFx0XHQgIGlmICh0aGlzLmJnX21nLmJnQXJyYXlbYmddLmdyb3VwX21hbmFnZXIuYmFja2dyb3VuZC50eXBlID09ICd3b3JrJykge1xyXG5cdFx0XHQgIFx0dGhpcy5iZ19tZy5iZ0FycmF5W2JnXS5ncm91cF9tYW5hZ2VyLm1lbWJlcnNbZ3JvdXBdLmFkZEZhdGlndWUodGhpcy5mYXRpZ3VlUGVyVGljayk7XHJcblx0XHRcdCAgfSBlbHNlIHtcclxuXHRcdFx0ICBcdHRoaXMuYmdfbWcuYmdBcnJheVtiZ10uZ3JvdXBfbWFuYWdlci5tZW1iZXJzW2dyb3VwXS5hZGRGYXRpZ3VlKC0xICogdGhpcy5mYXRpZ3VlUGVyVGljayk7XHJcblx0XHRcdCAgfVxyXG5cdFx0XHQgIGlmICh0aGlzLmJnX21nLmJnQXJyYXlbYmddLmdyb3VwX21hbmFnZXIubWVtYmVyc1tncm91cF0pIHtcclxuXHRcdFx0ICBcdC8vIGNvbnNvbGUubG9nKCdhJyk7XHJcblx0XHRcdCAgXHQvLyBjb25zb2xlLmxvZyh0aGlzLmJnX21nLmJnQXJyYXlbYmddLmdyb3VwX21hbmFnZXIubWVtYmVyc1tncm91cF0sIHRoaXMuYmdfbWcuYmdBcnJheVtiZ10uZ3JvdXBfbWFuYWdlci5tZW1iZXJzW2dyb3VwXS5oYXBwaW5lc3NNb2RpZmllcik7XHJcblx0XHRcdCAgXHR0aGlzLmJnX21nLmJnQXJyYXlbYmddLmdyb3VwX21hbmFnZXIubWVtYmVyc1tncm91cF0uYXBwbHlIYXBwaW5lc3MoKTtcclxuXHRcdFx0ICB9XHJcblx0XHQgIH1cclxuXHQgIH1cclxuXHQgIHRoaXMuYWRkTW9uZXkodGF4ZXMpO1xyXG5cdCAgdGhpcy5tb25leUNoYW5nZS50ZXh0ID0gKCh0YXhlcyA+PSAwKSA/ICcrJyA6ICctJykgKyAnJCcgKyB0YXhlcztcclxuXHQgIHRoaXMubW9uZXlDaGFuZ2UuZmlsbCA9ICh0YXhlcyA+PSAwKSA/ICcjMTZmYjA0JyA6ICcjZmYwMDAwJztcclxuXHQgIHRoaXMubW9uZXlDaGFuZ2UuYWxwaGEgPSAxO1xyXG5cdCAgdGhpcy5tb25leUNoYW5nZUhvbGQgPSB0cnVlO1xyXG5cclxuXHQgIHRoaXMuZ2FtZS50aW1lLmV2ZW50cy5hZGQoUGhhc2VyLlRpbWVyLlNFQ09ORCAqIHRoaXMudGF4VGltZSwgdGhpcy5jb2xsZWN0VGF4LCB0aGlzKTtcclxuICB9LFxyXG4gIGZhZGVNb25leUNoYW5nZTogZnVuY3Rpb24gKCkge1xyXG4gIFx0XHQvLyBjb25zb2xlLmxvZyh0aGlzLm1vbmV5Q2hhbmdlLmFscGhhKTtcclxuICBcdFx0aWYgKHRoaXMubW9uZXlDaGFuZ2VIb2xkKSB7XHJcbiAgXHRcdFx0dGhpcy5tb25leUNoYW5nZUhvbGQgPSBmYWxzZTtcclxuICBcdFx0XHR0aGlzLmdhbWUudGltZS5ldmVudHMuYWRkKFBoYXNlci5UaW1lci5TRUNPTkQgKiB0aGlzLm1vbmV5Q2hhbmdlSG9sZERlbGF5LCB0aGlzLmZhZGVNb25leUNoYW5nZSwgdGhpcyk7XHJcbiAgXHRcdH0gZWxzZSB7XHJcblx0ICBcdFx0dGhpcy5tb25leUNoYW5nZS5hbHBoYSAtPSB0aGlzLm1vbmV5Q2hhbmdlRmFkZVJhdGU7XHJcblx0ICBcdFx0dGhpcy5nYW1lLnRpbWUuZXZlbnRzLmFkZChQaGFzZXIuVGltZXIuU0VDT05EICogdGhpcy5tb25leUNoYW5nZUZhZGVEZWxheSwgdGhpcy5mYWRlTW9uZXlDaGFuZ2UsIHRoaXMpO1xyXG5cdCAgXHR9XHJcbiAgfSxcclxuICBzZXRIYXBwaW5lc3M6IGZ1bmN0aW9uIChhbXQpIHtcclxuXHQgIHRoaXMuY3VySGFwcGluZXNzID0gYW10O1xyXG5cdCAgaWYgKCF0aGlzLmhhcHBpbmVzc0luY3JlbWVudGluZykge1xyXG5cdFx0ICB0aGlzLmdhbWUudGltZS5ldmVudHMuYWRkKFBoYXNlci5UaW1lci5TRUNPTkQgKiB0aGlzLmhhcHBpbmVzc1VwZGF0ZURlbGF5LCB0aGlzLmluY3JlbWVudEhhcHBpbmVzcywgdGhpcyk7XHJcblx0XHQgIHRoaXMuaGFwcGluZXNzSW5jcmVtZW50aW5nID0gdHJ1ZTtcclxuXHQgIH1cclxuICB9LFxyXG4gIGluY3JlbWVudEhhcHBpbmVzczogZnVuY3Rpb24gKCkge1xyXG5cdGlmICh0aGlzLmhhcHBpbmVzc1ZhbCA9PT0gdGhpcy5jdXJIYXBwaW5lc3MpIHtcclxuXHRcdHRoaXMuaGFwcGluZXNzSW5jcmVtZW50aW5nID0gZmFsc2U7XHJcblx0XHRyZXR1cm47XHJcblx0fVxyXG5cdGlmICh0aGlzLmN1ckhhcHBpbmVzcyA+IHRoaXMuaGFwcGluZXNzVmFsKSB7XHJcblx0XHR0aGlzLmJhci5hZGRWYWx1ZSgxKTtcclxuXHRcdHRoaXMuaGFwcGluZXNzVmFsICs9IDE7XHJcblx0fSBlbHNlIGlmICh0aGlzLmN1ckhhcHBpbmVzcyA8IHRoaXMuaGFwcGluZXNzVmFsKSB7XHJcblx0XHR0aGlzLmJhci5hZGRWYWx1ZSgtMSk7XHJcblx0XHR0aGlzLmhhcHBpbmVzc1ZhbCAtPSAxO1xyXG5cdH1cclxuXHR0aGlzLmdhbWUudGltZS5ldmVudHMuYWRkKFBoYXNlci5UaW1lci5TRUNPTkQgKiB0aGlzLmhhcHBpbmVzc1VwZGF0ZURlbGF5LCB0aGlzLmluY3JlbWVudEhhcHBpbmVzcywgdGhpcyk7XHJcbiAgfSxcclxuICBhZGRNb25leTogZnVuY3Rpb24gKGFtdCkge1xyXG5cdCAgdGhpcy5jdXJNb25leSArPSBhbXQ7XHJcblx0ICAvL3RoaXMubW9uZXkudGV4dCA9ICckJyArIG5ld01vbmV5O1xyXG5cdCAgaWYgKCF0aGlzLm1vbmV5SW5jcmVtZW50aW5nKSB7XHJcblx0XHR0aGlzLmdhbWUudGltZS5ldmVudHMuYWRkKFBoYXNlci5UaW1lci5TRUNPTkQgKiB0aGlzLm1vbmV5VXBkYXRlRGVsYXksIHRoaXMuaW5jcmVtZW50TW9uZXksIHRoaXMpO1xyXG5cdFx0dGhpcy5tb25leUluY3JlbWVudGluZyA9IHRydWU7XHJcblx0ICB9XHJcbiAgfSxcclxuICBpbmNyZW1lbnRNb25leTogZnVuY3Rpb24gKCkge1xyXG5cdGlmICh0aGlzLm1vbmV5VmFsID09PSB0aGlzLmN1ck1vbmV5KSB7XHJcblx0XHR0aGlzLm1vbmV5SW5jcmVtZW50aW5nID0gZmFsc2U7XHJcblx0XHRyZXR1cm47XHJcblx0fVxyXG5cdGlmICh0aGlzLmN1ck1vbmV5ID4gdGhpcy5tb25leVZhbCkge1xyXG5cdFx0dGhpcy5tb25leVZhbCArPSAxMDtcclxuXHR9IGVsc2UgaWYgKHRoaXMuY3VyTW9uZXkgPCB0aGlzLm1vbmV5VmFsKSB7XHJcblx0XHR0aGlzLm1vbmV5VmFsIC09IDEwO1xyXG5cdH1cclxuXHR0aGlzLm1vbmV5LnRleHQgPSAnJCcgKyB0aGlzLm1vbmV5VmFsO1xyXG5cdHRoaXMuZ2FtZS50aW1lLmV2ZW50cy5hZGQoUGhhc2VyLlRpbWVyLlNFQ09ORCAqIHRoaXMubW9uZXlVcGRhdGVEZWxheSwgdGhpcy5pbmNyZW1lbnRNb25leSwgdGhpcyk7XHJcbiAgfSxcclxuICBkZWNUYXhMb3c6IGZ1bmN0aW9uICgpIHtcclxuICAgIGlmICh0aGlzLnRheE1vZC5sb3cgPT0gMSkge1xyXG4gICAgICB0aGlzLnRheE1vZC5sb3cgPSAuNTtcclxuICAgICAgdGhpcy50ZXh0VGF4TG93LnRleHQgPSAnJCc7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICh0aGlzLnRheE1vZC5sb3cgPT0gMS41KSB7XHJcbiAgICAgIHRoaXMudGF4TW9kLmxvdyA9IDE7XHJcbiAgICAgIHRoaXMudGV4dFRheExvdy50ZXh0ID0gJyQkJztcclxuICAgIH1cclxuICB9LFxyXG4gIGluY1RheExvdzogZnVuY3Rpb24gKCkge1xyXG4gICAgaWYgKHRoaXMudGF4TW9kLmxvdyA9PSAuNSkge1xyXG4gICAgICB0aGlzLnRheE1vZC5sb3cgPSAxO1xyXG4gICAgICB0aGlzLnRleHRUYXhMb3cudGV4dCA9ICckJCc7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICh0aGlzLnRheE1vZC5sb3cgPT0gMSkge1xyXG4gICAgICB0aGlzLnRheE1vZC5sb3cgPSAxLjU7XHJcbiAgICAgIHRoaXMudGV4dFRheExvdy50ZXh0ID0gJyQkJCc7XHJcbiAgICB9XHJcbiAgfSxcclxuICBkZWNUYXhNaWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgIGlmICh0aGlzLnRheE1vZC5taWQgPT0gMSkge1xyXG4gICAgICB0aGlzLnRheE1vZC5taWQgPSAuNTtcclxuICAgICAgdGhpcy50ZXh0VGF4TWlkLnRleHQgPSAnJCc7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICh0aGlzLnRheE1vZC5taWQgPT0gMS41KSB7XHJcbiAgICAgIHRoaXMudGF4TW9kLm1pZCA9IDE7XHJcbiAgICAgIHRoaXMudGV4dFRheE1pZC50ZXh0ID0gJyQkJztcclxuICAgIH1cclxuICB9LFxyXG4gIGluY1RheE1pZDogZnVuY3Rpb24gKCkge1xyXG4gICAgaWYgKHRoaXMudGF4TW9kLm1pZCA9PSAuNSkge1xyXG4gICAgICB0aGlzLnRheE1vZC5taWQgPSAxO1xyXG4gICAgICB0aGlzLnRleHRUYXhNaWQudGV4dCA9ICckJCc7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICh0aGlzLnRheE1vZC5taWQgPT0gMSkge1xyXG4gICAgICB0aGlzLnRheE1vZC5taWQgPSAxLjU7XHJcbiAgICAgIHRoaXMudGV4dFRheE1pZC50ZXh0ID0gJyQkJCc7XHJcbiAgICB9XHJcbiAgfSxcclxuICBkZWNUYXhIaWdoOiBmdW5jdGlvbiAoKSB7XHJcbiAgICBpZiAodGhpcy50YXhNb2QuaGlnaCA9PSAxKSB7XHJcbiAgICAgIHRoaXMudGF4TW9kLmhpZ2ggPSAuNTtcclxuICAgICAgdGhpcy50ZXh0VGF4SGlnaC50ZXh0ID0gJyQnO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodGhpcy50YXhNb2QuaGlnaCA9PSAxLjUpIHtcclxuICAgICAgdGhpcy50YXhNb2QuaGlnaCA9IDE7XHJcbiAgICAgIHRoaXMudGV4dFRheEhpZ2gudGV4dCA9ICckJCc7XHJcbiAgICB9XHJcbiAgfSxcclxuICBpbmNUYXhIaWdoOiBmdW5jdGlvbiAoKSB7XHJcbiAgICBpZiAodGhpcy50YXhNb2QuaGlnaCA9PSAuNSkge1xyXG4gICAgICB0aGlzLnRheE1vZC5oaWdoID0gMTtcclxuICAgICAgdGhpcy50ZXh0VGF4SGlnaC50ZXh0ID0gJyQkJztcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHRoaXMudGF4TW9kLmhpZ2ggPT0gMSkge1xyXG4gICAgICB0aGlzLnRheE1vZC5oaWdoID0gMS41O1xyXG4gICAgICB0aGlzLnRleHRUYXhIaWdoLnRleHQgPSAnJCQkJztcclxuICAgIH1cclxuICB9XHJcbn07XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG4iLCJ2YXIgR2FtZV9PdmVyID0gZnVuY3Rpb24gKCkge1xyXG4gIHRoaXMudGV4dCA9IG51bGw7XHJcbiAgdGhpcy50ZXh0U21hbGwgPSBudWxsO1xyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBHYW1lX092ZXI7XHJcblxyXG5HYW1lX092ZXIucHJvdG90eXBlID0ge1xyXG5cclxuICBjcmVhdGU6IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciB4ID0gdGhpcy5nYW1lLndpZHRoIC8gMjtcclxuICAgIHZhciB5ID0gdGhpcy5nYW1lLmhlaWdodCAvIDI7XHJcblxyXG4gICAgdmFyIHN0eWxlID0geyBmb250OiBcIlJvYm90b1wiLCBmb250U2l6ZTogNjQsIGZpbGw6IFwiIzAwMDAwMFwiLCBhbGlnbjogXCJjZW50ZXJcIiB9O1xyXG4gICAgdmFyIHNtYWxsU3R5bGUgPSB7IGZvbnQ6IFwiUm9ib3RvXCIsIGZvbnRTaXplOiAzMiwgZmlsbDogXCIjMDAwMDAwXCIsIGFsaWduOiBcImxlZnRcIiB9O1xyXG5cclxuICAgIHRoaXMudGV4dCA9IHRoaXMuYWRkLnRleHQoeCAtIDMwMCwgeSAtIDIwMCwgXCJHYW1lIE92ZXJcIiwgc3R5bGUpO1xyXG4gICAgdGhpcy50ZXh0U21hbGwgPSB0aGlzLmFkZC50ZXh0KHggLSAzMDAsIHkgLSAxMDAsIFwieW91ciBoYXBwaW5lc3Mgd2VudCB1bmRlciA1MCVcXG5cIiArIFwiY2xpY2sgdG8gY29udGludWVcIiwgc21hbGxTdHlsZSk7XHJcbiAgICB0aGlzLmdhbWUudGltZS5ldmVudHMuYWRkKFBoYXNlci5UaW1lci5TRUNPTkQgKiAzLCB0aGlzLmRvVGhpbmcsIHRoaXMpO1xyXG4gIH0sXHJcblxyXG4gIHVwZGF0ZTogZnVuY3Rpb24gKCkge1xyXG5cclxuICB9LFxyXG5cclxuICBkb1RoaW5nOiBmdW5jdGlvbigpIHtcclxuICAgIHRoaXMuaW5wdXQub25Eb3duLmFkZCh0aGlzLm9uRG93biwgdGhpcyk7XHJcbiAgfSxcclxuXHJcbiAgb25Eb3duOiBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLmdhbWUuc3RhdGUuc3RhcnQoJ01lbnUnKTtcclxuICB9XHJcbn07IiwidmFyIE1lbnUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgdGhpcy50ZXh0ID0gbnVsbDtcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gTWVudTtcclxuXHJcbk1lbnUucHJvdG90eXBlID0ge1xyXG5cclxuICBjcmVhdGU6IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciB4ID0gdGhpcy5nYW1lLndpZHRoIC8gMjtcclxuICAgIHZhciB5ID0gdGhpcy5nYW1lLmhlaWdodCAvIDI7XHJcblxyXG4gICAgdmFyIHN0eWxlID0geyBmb250OiBcIlJvYm90b1wiLCBmb250U2l6ZTogNjQsIGZpbGw6IFwiIzAwMDAwMFwiLCBhbGlnbjogXCJjZW50ZXJcIiB9O1xyXG5cclxuICAgIHRoaXMudGV4dCA9IHRoaXMuYWRkLnRleHQoeCwgeSwgXCJDbGljayB0byBTdGFydFwiLCBzdHlsZSk7XHJcbiAgICB0aGlzLnRleHQuYW5jaG9yLnNldFRvKC41LCAuNSk7XHJcbiAgICB0aGlzLmlucHV0Lm9uRG93bi5hZGQodGhpcy5vbkRvd24sIHRoaXMpO1xyXG4gIH0sXHJcblxyXG4gIHVwZGF0ZTogZnVuY3Rpb24gKCkge1xyXG4gIH0sXHJcblxyXG4gIG9uRG93bjogZnVuY3Rpb24gKCkge1xyXG4gICAgdGhpcy5nYW1lLnN0YXRlLnN0YXJ0KHBsYXllclN0YXRlLmN1cnJlbnRMZXZlbCk7XHJcbiAgfVxyXG59O1xyXG4iLCJ2YXIgUHJlbG9hZGVyID0gZnVuY3Rpb24gKGdhbWUpIHtcclxuICB0aGlzLmFzc2V0ID0gbnVsbDtcclxuICB0aGlzLnJlYWR5ID0gZmFsc2U7XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFByZWxvYWRlcjtcclxuXHJcblByZWxvYWRlci5wcm90b3R5cGUgPSB7XHJcblxyXG4gIHByZWxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMuYXNzZXQgPSB0aGlzLmFkZC5zcHJpdGUoMzIwLCAyNDAsICdwcmVsb2FkZXInKTtcclxuICAgIHRoaXMuYXNzZXQuYW5jaG9yLnNldFRvKDAuNSwgMC41KTtcclxuXHJcbiAgICB0aGlzLmxvYWQub25Mb2FkQ29tcGxldGUuYWRkT25jZSh0aGlzLm9uTG9hZENvbXBsZXRlLCB0aGlzKTtcclxuICAgIHRoaXMubG9hZC5zZXRQcmVsb2FkU3ByaXRlKHRoaXMuYXNzZXQpO1xyXG4gICAgdGhpcy5sb2FkLmltYWdlKCd0ZXN0c3ByaXRlJywgJ2Fzc2V0cy90ZXN0LnBuZycpO1xyXG4gICAgdGhpcy5sb2FkLmltYWdlKCdtZW51X2JnJywgJ2Fzc2V0cy9tZW51X2JnLnBuZycpO1xyXG4gICAgdGhpcy5sb2FkLmltYWdlKCdiYWNrZ3JvdW5kJywgJ2Fzc2V0cy9zZWN0b3JCRy5wbmcnKVxyXG4gICAgdGhpcy5sb2FkLmltYWdlKCdwZXJzb24nLCAnYXNzZXRzL3BlcnNvbi5wbmcnKTtcclxuICAgIHRoaXMubG9hZC5pbWFnZSgnc2VsZWN0aW9uJywgJ2Fzc2V0cy9zZWxlY3Rpb24ucG5nJyk7XHJcbiAgICB0aGlzLmxvYWQuaW1hZ2UoJ2Jvb2snLCAnYXNzZXRzL2Jvb2sucG5nJyk7XHJcbiAgICB0aGlzLmxvYWQuaW1hZ2UoJ3lvdW5nJywgJ2Fzc2V0cy95b3VuZy5wbmcnKTtcclxuICAgIHRoaXMubG9hZC5pbWFnZSgnYWR1bHQnLCAnYXNzZXRzL2FkdWx0LnBuZycpO1xyXG4gICAgdGhpcy5sb2FkLmltYWdlKCdvbGQnLCAnYXNzZXRzL29sZC5wbmcnKTtcclxuICAgIHRoaXMubG9hZC5pbWFnZSgndGF4UmVkdWNlJywgJ2Fzc2V0cy90YXhSZWR1Y2UucG5nJyk7XHJcbiAgICB0aGlzLmxvYWQuaW1hZ2UoJ3RheEFkZCcsICdhc3NldHMvdGF4QWRkLnBuZycpO1xyXG4gICAgdGhpcy5sb2FkLmltYWdlKCdsb2NrJywgJ2Fzc2V0cy9sb2NrLnBuZycpO1xyXG4gICAgdGhpcy5sb2FkLnNwcml0ZXNoZWV0KCdjaGV2cm9ucycsICdhc3NldHMvY2hldnJvbl9zaGVldC5wbmcnLCA0MCwgNTApO1xyXG4gICAgLy8gdGhpcy5sb2FkLmF0bGFzSlNPTkhhc2goJ2NoZXZyb25zJywgJ2Fzc2V0cy9jaGV2cm9ucy5wbmcnLCAnYXNzZXRzL2NoZXZyb25zLmpzb24nKTtcclxuICAgIHRoaXMubG9hZC5hdGxhc0pTT05IYXNoKCdhZ2VzJywgJ2Fzc2V0cy9hZ2VzLnBuZycsICdhc3NldHMvYWdlcy5qc29uJyk7XHJcbiAgICB0aGlzLmxvYWQuaW1hZ2UoJ2hhcHB5ZmFjZScsICdhc3NldHMvaGFwcHlmYWNlX2JldHRlci5wbmcnKTtcclxuICAgIHRoaXMubG9hZC5pbWFnZSgnYm9yZGVyZWQnLCAnYXNzZXRzL2JvcmRlcmVkLnBuZycpO1xyXG4gICAgdGhpcy5sb2FkLmltYWdlKCdsb3dfZG9sbGFyJywgJ2Fzc2V0cy9sb3dfZG9sbGFyLnBuZycpO1xyXG4gICAgdGhpcy5sb2FkLmltYWdlKCdtZWRfZG9sbGFyJywgJ2Fzc2V0cy9tZWRfZG9sbGFyLnBuZycpO1xyXG4gICAgdGhpcy5sb2FkLmltYWdlKCdoaWdoX2RvbGxhcicsICdhc3NldHMvaGlnaF9kb2xsYXIucG5nJyk7XHJcbiAgICB0aGlzLmxvYWQuc2NyaXB0KCd3ZWJmb250JywgJy8vYWpheC5nb29nbGVhcGlzLmNvbS9hamF4L2xpYnMvd2ViZm9udC8xLjQuNy93ZWJmb250LmpzJyk7XHJcbiAgfSxcclxuXHJcbiAgY3JlYXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLmFzc2V0LmNyb3BFbmFibGVkID0gZmFsc2U7XHJcbiAgfSxcclxuXHJcbiAgdXBkYXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICBpZiAoISF0aGlzLnJlYWR5KSB7XHJcbiAgICAgIHRoaXMuZ2FtZS5zdGF0ZS5zdGFydCgnR2FtZScpO1xyXG4gICAgfVxyXG4gIH0sXHJcblxyXG4gIG9uTG9hZENvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLnJlYWR5ID0gdHJ1ZTtcclxuICB9XHJcbn07XHJcbiIsInZhciBTcGxhc2ggPSBmdW5jdGlvbiAoKSB7XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFNwbGFzaDtcclxuXHJcblNwbGFzaC5wcm90b3R5cGUgPSB7XHJcbiAgY3JlYXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgfVxyXG59OyIsInZhciBVdGlscyA9IHtcclxuICAgIGNvbnRhaW5zT2JqZWN0OiBmdW5jdGlvbihvYmosIGxpc3QpIHtcclxuICAgICAgICB2YXIgaTtcclxuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAobGlzdFtpXSA9PT0gb2JqKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfSxcclxuXHRoeXBvdGVudXNlOiBmdW5jdGlvbihhLCBiKSB7XHJcblx0XHRyZXR1cm4gTWF0aC5zcXJ0KE1hdGgucG93KGEsIDIpICsgTWF0aC5wb3coYiwgMikpO1xyXG5cdH0sXHJcblx0cmF0aW86IGZ1bmN0aW9uKGEsIGIsIGMpIHtcclxuXHRcdGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxKSB7XHJcblx0XHRcdHJldHVybiBbYSAvIGFdO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMikge1xyXG5cdFx0XHRyZXR1cm4gW2EgLyAoYSArIGIpLCBiIC8gKGEgKyBiKV07XHJcblx0XHR9XHJcblx0XHRlbHNlIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAzKSB7XHJcblx0XHRcdHJldHVybiBbYSAvIChhICsgYiArIGMpLCBiIC8gKGEgKyBiICsgYyksIGMgLyAoYSArIGIgKyBjKV07XHJcblx0XHR9XHJcblx0XHRlbHNlIHtcclxuXHRcdFx0cmV0dXJuIFtdO1xyXG5cdFx0fVxyXG5cdH1cclxufTtcclxuXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFV0aWxzOyJdfQ==
=======
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvZW50aXRpZXMvUHJvZ3Jlc3NCYXIuanMiLCJzcmMvanMvZW50aXRpZXMvYmFja2dyb3VuZC5qcyIsInNyYy9qcy9lbnRpdGllcy9iYWNrZ3JvdW5kX21hbmFnZXIuanMiLCJzcmMvanMvZW50aXRpZXMvZ3JvdXAuanMiLCJzcmMvanMvZW50aXRpZXMvZ3JvdXBNYW5hZ2VyLmpzIiwic3JjL2pzL2VudGl0aWVzL2hvdmVyTWVudS5qcyIsInNyYy9qcy9lbnRpdGllcy9wZXJzb24uanMiLCJzcmMvanMvZW50aXRpZXMvcGxheWVyLmpzIiwic3JjL2pzL2VudGl0aWVzL3VpQnVpbGRlci5qcyIsInNyYy9qcy9tYWluLmpzIiwic3JjL2pzL3N0YXRlcy9ib290LmpzIiwic3JjL2pzL3N0YXRlcy9nYW1lLmpzIiwic3JjL2pzL3N0YXRlcy9nYW1lX292ZXIuanMiLCJzcmMvanMvc3RhdGVzL21lbnUuanMiLCJzcmMvanMvc3RhdGVzL3ByZWxvYWRlci5qcyIsInNyYy9qcy9zdGF0ZXMvc3BsYXNoLmpzIiwic3JjL2pzL3V0aWxzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDL0dBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaEVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNyVkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDOVRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3RKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDNUZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMzQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDN0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaFRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCIvL05PVEU6IERPTidUIFVTRSB0aGlzIGNvZGUgdG8gY3JlYXRlIGEgUHJvZ3Jlc3NCYXIuIEluc3RlYWQsIHVzZSB0aGUgVUlCdWlsZGVyIG9iamVjdCBhbmQgY2FsbCBidWlsZFByb2dyZXNzQmFyXHJcblxyXG52YXIgUHJvZ3Jlc3NCYXIgPSBmdW5jdGlvbihzZXRUeXBlLCBzZXRNYXhWYWx1ZSwgc2V0R3JhcGhpY3MsIHNldFJlbmRlcmFibGVzKSB7XHJcblx0dGhpcy50eXBlID0gc2V0VHlwZTsgLy9Ud28gdHlwZXMsIFwiZ3Jvd2luZ1wiIChzdGFydHMgYXQgMCwgdHJpZ2dlcnMgZXZlbnQgd2hlbiBmdWxsKSBcclxuXHRcdFx0XHRcdFx0IC8vYW5kIFwic2hyaW5raW5nXCIgKHN0YXJ0cyBmdWxsLCB0cmlnZ2VycyBhdCAwKVxyXG5cdHRoaXMuYmdCb3JkZXJTaXplID0gMjtcdFx0XHQvL2RlZmF1bHQgc2l6ZSBvZiBiYWNrZ3JvdW5kIGJvcmRlclxyXG5cdHRoaXMuYmdCb3JkZXJDb2xvciA9IDB4MDAwMDA7XHQvL2RlZmF1bHQgY29sb3Igb2YgYmFja2dyb3VuZCBib3JkZXJcclxuXHR0aGlzLmJnQ29sb3IgPSAweGZmZmZmZjtcdFx0Ly9kZWZhdWx0IGNvbG9yIG9mIGJhY2tncm91bmRcclxuXHR0aGlzLnBhZGRpbmdIb3JpeiA9IDEwO1x0XHRcdC8vZGVmYXVsdCBzdW0gb2YgcGFkZGluZyBvbiBsZWZ0IGFuZCByaWdodCBzaWRlIGlubmVyIHZhbHVlIGJhclxyXG5cdHRoaXMucGFkZGluZ1ZlcnQgPSAxMDtcdFx0XHQvL2RlZmF1bHQgc3VtIChpLmUuIGhhbGYgb24gZWFjaCBzaWRlKSBvZiB2ZXJ0aWNhbCBwYWRkaW5nIG9mIGlubmVyIHZhbHVlIGJhclxyXG5cdC8vIHRoaXMudmFsdWVCb3JkZXJTaXplID0gMTtcdFx0Ly9kZWZhdWx0IHNpemUgb2YgdmFsdWUgYm9yZGVyXHJcblx0Ly8gdGhpcy52YWx1ZUJvcmRlckNvbG9yID0gMHg4ODg4RkY7IC8vZGVmYXVsdCBjb2xvciBvZiB2YWx1ZSBib3JkZXJcclxuXHR0aGlzLnZhbHVlQ29sb3IgPSAweDAwMDAwMDtcdFx0Ly9kZWZhdWx0IGNvbG9yIG9mIGlubmVyIHZhbHVlIGJhclxyXG5cdHRoaXMueCA9IG51bGw7XHJcblx0dGhpcy55ID0gbnVsbDtcclxuXHR0aGlzLndpZHRoID0gbnVsbDtcclxuXHR0aGlzLmhlaWdodCA9IG51bGw7XHJcblx0dGhpcy5tYXhWYWx1ZSA9IHNldE1heFZhbHVlO1xyXG5cdHRoaXMuZ3JhcGhpY3MgPSBzZXRHcmFwaGljczsgLy9zdG9yZSBncmFwaGljcyBjbGFzcyAodXNlZCB0byBkcmF3IGJhcilcclxuXHR0aGlzLnJlbmRlcmFibGVzID0gc2V0UmVuZGVyYWJsZXM7XHJcblx0XHJcblx0dGhpcy5vbkV2ZW50ID0gZnVuY3Rpb24oKSB7fTsgLy9vdmVyd3JpdGUgdGhpcyBmdW5jdGlvbiB0byBtYWtlIHdoYXRldmVyIHlvdSB3YW50IGhhcHBlbiB3aGVuIHByb2dyZXNzQmFyIHJlYWNoZXMgbGltaXRcclxuXHRcclxuXHQvL3N3aXRjaCh0aGlzLnR5cGUpIHtcclxuXHQvL2Nhc2UgJ2dyb3dpbmcnIDogXHJcblx0aWYoc2V0VHlwZSA9PT0gJ2dyb3dpbmcnKSB7XHJcblx0XHR0aGlzLnZhbHVlID0gMDtcclxuXHRcdC8vdHJ5VHJpZ2dlciBpcyBjYWxsZWQgYXV0b21hdGljYWxseSB3aGVuIHlvdSBhZGQvc3VidHJhY3QgdmFsdWUsIGFuZCB3aWxsIHRyaWdnZXIgdGhlIG9uRXZlbnQoKSBmdW5jdGlvblxyXG5cdFx0dGhpcy50cnlUcmlnZ2VyID0gZnVuY3Rpb24oKSB7XHJcblx0XHRcdGlmKHRoaXMudmFsdWUgPj0gdGhpcy5tYXhWYWx1ZSkge1xyXG5cdFx0XHRcdHRoaXMub25FdmVudCgpO1xyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cdFx0Ly9icmVhaztcclxuXHR9XHJcblx0ZWxzZSBpZihzZXRUeXBlID09PSAnc2hyaW5raW5nJykge1xyXG5cdC8vY2FzZSAnc2hyaW5raW5nJyA6XHJcblx0XHR0aGlzLnZhbHVlID0gdGhpcy5tYXhWYWx1ZTtcclxuXHRcdHRoaXMudHJ5VHJpZ2dlciA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZih0aGlzLnZhbHVlIDw9IDApIHtcclxuXHRcdFx0XHR0aGlzLm9uRXZlbnQoKTtcclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHR9XHJcbn07XHJcblxyXG5Qcm9ncmVzc0Jhci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBQcm9ncmVzc0JhcjtcclxuXHJcblByb2dyZXNzQmFyLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24oKSB7XHJcblx0dGhpcy5ncmFwaGljcy5jbGVhcigpO1xyXG5cdHRoaXMucmVuZGVyYWJsZXMudW5zdWJzY3JpYmUodGhpcyk7XHJcbn07XHJcblxyXG4vL1RvIHN1YnRyYWN0IHZhbHVlLCBqdXN0IHVzZSBuZWdhdGl2ZSBudW1iZXJzIGFzIGFyZ3VtZW50IGkuZS4gZm9vLmFkZFZhbHVlKC01KTtcclxuUHJvZ3Jlc3NCYXIucHJvdG90eXBlLmFkZFZhbHVlID0gZnVuY3Rpb24gKGFkZFRoaXMpIHtcclxuXHR0aGlzLnZhbHVlICs9IGFkZFRoaXM7XHJcblx0aWYodGhpcy52YWx1ZSA+IHRoaXMubWF4VmFsdWUpIHtcclxuXHRcdHRoaXMudmFsdWUgPSB0aGlzLm1heFZhbHVlO1xyXG5cdH1cclxuXHRpZih0aGlzLnZhbHVlIDwgMCkge1xyXG5cdFx0dGhpcy52YWx1ZSA9IDA7XHJcblx0fVxyXG5cdHRoaXMudHJ5VHJpZ2dlcigpO1xyXG59O1xyXG5cclxuLy9TZXRzIHRoZSBsb2NhdGlvbiB3aGVyZSBwcm9ncmVzcyBiYXIgaXMgcmVuZGVyZWRcclxuUHJvZ3Jlc3NCYXIucHJvdG90eXBlLnNldExvY2F0aW9uID0gZnVuY3Rpb24oc2V0WCwgc2V0WSkge1xyXG5cdHRoaXMueCA9IHNldFg7XHJcblx0dGhpcy55ID0gc2V0WTtcclxufTtcclxuXHJcbi8vU2V0cyB0aGUgc2l6ZSBvZiB0aGUgcHJvZ3Jlc3MgYmFyXHJcblByb2dyZXNzQmFyLnByb3RvdHlwZS5zZXRTaXplID0gZnVuY3Rpb24oc2V0V2lkdGgsIHNldEhlaWdodCkge1xyXG5cdHRoaXMud2lkdGggPSBzZXRXaWR0aDtcclxuXHR0aGlzLmhlaWdodCA9IHNldEhlaWdodDtcclxufTtcclxuXHJcblByb2dyZXNzQmFyLnByb3RvdHlwZS5zZXRTdHlsZSA9IGZ1bmN0aW9uKGJnQm9yZGVyU2l6ZSwgYmdCb3JkZXJDb2xvciwgYmdDb2xvciwgcGFkZGluZ0hvcml6LCBwYWRkaW5nVmVydCwgdmFsdWVCb3JkZXJTaXplLCB2YWx1ZUJvcmRlckNvbG9yLCB2YWx1ZUNvbG9yKSB7XHJcblx0dGhpcy5iZ0JvcmRlclNpemUgPSBiZ0JvcmRlclNpemU7XHJcblx0dGhpcy5iZ0JvcmRlckNvbG9yID0gYmdCb3JkZXJDb2xvcjtcclxuXHR0aGlzLmJnQ29sb3IgPSBiZ0NvbG9yO1xyXG5cdHRoaXMucGFkZGluZ0hvcml6ID0gcGFkZGluZ0hvcml6O1xyXG5cdHRoaXMucGFkZGluZ1ZlcnQgPSBwYWRkaW5nVmVydDtcclxuXHR0aGlzLnZhbHVlQm9yZGVyU2l6ZSA9IHZhbHVlQm9yZGVyU2l6ZTtcclxuXHR0aGlzLnZhbHVlQm9yZGVyQ29sb3IgPSB2YWx1ZUJvcmRlckNvbG9yO1xyXG5cdHRoaXMudmFsdWVDb2xvciA9IHZhbHVlQ29sb3I7XHJcbn07XHJcblxyXG4vL3VwZGF0ZSBmb3IgcHJvZ3Jlc3MgYmFyLCBjYWxsZWQganVzdCBiZWZvcmUgZHJhd2luZyBwcm9ncmVzcyBiYXJcclxuLy9PdmVyd3JpdGUgdGhpcyBmdW5jdGlvbiBpZiBkZXNpcmVkXHJcblByb2dyZXNzQmFyLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbigpIHt9O1xyXG5cclxuLy9SZW5kZXJzIHByb2dyZXNzQmFyXHJcblByb2dyZXNzQmFyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbigpIHtcclxuXHR0aGlzLnVwZGF0ZSgpO1xyXG5cdHRoaXMuZ3JhcGhpY3MuY2xlYXIoKTtcclxuXHQvL0RyYXcgYmFja2dyb3VuZCBvZiBiYXJcclxuXHR0aGlzLmdyYXBoaWNzLmxpbmVTdHlsZSh0aGlzLmJnQm9yZGVyU2l6ZSwgdGhpcy5iZ0JvcmRlckNvbG9yLCAxKTsgLy9zZXRzIGJvcmRlciBjb2xvciBhbmQgc2l6ZVxyXG5cdHRoaXMuZ3JhcGhpY3MuYmVnaW5GaWxsKHRoaXMuYmdDb2xvcik7IC8vc2V0cyBjb2xvciBvZiBiYWNrZ3JvdW5kIGZpbGxcclxuXHR0aGlzLmdyYXBoaWNzLmRyYXdSZWN0KHRoaXMueC10aGlzLndpZHRoLzIsIHRoaXMueS10aGlzLmhlaWdodC8yLCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCk7XHJcblx0dGhpcy5ncmFwaGljcy5lbmRGaWxsKCk7XHJcblx0Ly9EcmF3IHZhbHVlIG9mIGJhclxyXG5cdHZhciBwZXJjZW50YWdlID0gdGhpcy52YWx1ZSAvIHRoaXMubWF4VmFsdWU7XHJcblx0dmFyIGJhcldpZHRoID0gdGhpcy53aWR0aCAtIHRoaXMucGFkZGluZ0hvcml6O1xyXG5cdHZhciBiYXJIZWlnaHQgPSB0aGlzLmhlaWdodCAtIHRoaXMucGFkZGluZ1ZlcnQ7XHJcblx0dGhpcy5ncmFwaGljcy5saW5lU3R5bGUodGhpcy52YWx1ZUJvcmRlclNpemUsIHRoaXMudmFsdWVCb3JkZXJDb2xvciwgMSk7XHJcblx0dGhpcy5ncmFwaGljcy5iZWdpbkZpbGwodGhpcy52YWx1ZUNvbG9yKTtcclxuXHR0aGlzLmdyYXBoaWNzLmRyYXdSZWN0KHRoaXMueC0oYmFyV2lkdGgvMiksIHRoaXMueS0oYmFySGVpZ2h0LzIpLCBiYXJXaWR0aCpwZXJjZW50YWdlLCBiYXJIZWlnaHQpO1xyXG5cdHRoaXMuZ3JhcGhpY3MuZW5kRmlsbCgpO1xyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBQcm9ncmVzc0JhcjsiLCJ2YXIgR3JvdXBfTWFuYWdlciA9IHJlcXVpcmUoJy4vZ3JvdXBNYW5hZ2VyJyk7XHJcbnZhciBQZXJzb24gPSByZXF1aXJlKCcuL3BlcnNvbicpO1xyXG5cclxudmFyIEJhY2tncm91bmQgPSBmdW5jdGlvbiAoZ2FtZSwgYmFzZVgsIGJhc2VZLCBoUmF0aW8sIHZSYXRpbywgaW5jb21lLCB0eXBlLCBzdGF0ZSkge1xyXG4gICAgUGhhc2VyLlNwcml0ZS5jYWxsKHRoaXMsIGdhbWUsIChiYXNlWCAqIGhSYXRpbyAqIGdhbWUud2lkdGgpLCAoYmFzZVkgKiB2UmF0aW8gKiBnYW1lLmhlaWdodCkgKyAxMDAsICdiYWNrZ3JvdW5kJyk7XHJcbiAgICBnYW1lLmFkZC5leGlzdGluZyh0aGlzKTtcclxuICAgIHRoaXMuYmFzZVggPSBiYXNlWDtcclxuICAgIHRoaXMuYmFzZVkgPSBiYXNlWTtcclxuICAgIHRoaXMuaFJhdGlvID0gaFJhdGlvO1xyXG4gICAgdGhpcy52UmF0aW8gPSB2UmF0aW87XHJcbiAgICB0aGlzLm5ld0hSYXRpbyA9IGhSYXRpbztcclxuICAgIHRoaXMubmV3VlJhdGlvID0gdlJhdGlvO1xyXG4gICAgdGhpcy5taW5SYXRpbyA9IC4xO1xyXG4gICAgdGhpcy5tYXhSYXRpbyA9IC42O1xyXG4gICAgdGhpcy5ncm91cF9tYW5hZ2VyID0gbmV3IEdyb3VwX01hbmFnZXIodGhpcy5nYW1lLCBzdGF0ZSk7XHJcblx0dGhpcy5ncm91cF9tYW5hZ2VyLmJhY2tncm91bmQgPSB0aGlzO1xyXG4gICBcdHRoaXMudHlwZSA9IHR5cGU7XHJcbiAgICB0aGlzLmluY29tZUxldmVsID0gaW5jb21lO1xyXG5cdHRoaXMuc3RhdGUgPSBzdGF0ZVxyXG59O1xyXG5cclxuQmFja2dyb3VuZC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFBoYXNlci5TcHJpdGUucHJvdG90eXBlKTtcclxuQmFja2dyb3VuZC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBCYWNrZ3JvdW5kO1xyXG5cclxuQmFja2dyb3VuZC5wcm90b3R5cGUuZ2V0VmFycyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgLy9yZXR1cm4geCAmIHkgYW5kIHdpZHRoICYgaGVpZ2h0IG9mIHZpc2libGVcclxuICAgIHJldHVybiBbdGhpcy54LCB0aGlzLnksIHRoaXMuaFJhdGlvICogKHRoaXMuZ2FtZS53aWR0aCksIHRoaXMudlJhdGlvICogKHRoaXMuZ2FtZS5oZWlnaHQgLSB0aGlzLm15TWFuYWdlci5ib3JkZXIpXTtcclxufTtcclxuXHJcbkJhY2tncm91bmQucHJvdG90eXBlLmdldFZhcnNDZW50ZXIgPSBmdW5jdGlvbigpIHtcclxuICAgIC8vIC8vcmV0dXJuIHggJiB5IG9mIGNlbnRlciBhbmQgd2lkdGggJiBoZWlnaHQgb2YgdmlzaWJsZVxyXG4gICAgdmFyIHZpc1dpZHRoID0gdGhpcy5oUmF0aW8gKiAodGhpcy5nYW1lLndpZHRoKTtcclxuICAgIHZhciB2aXNIZWlnaHQgPSB0aGlzLnZSYXRpbyAqICh0aGlzLmdhbWUuaGVpZ2h0IC0gdGhpcy5teU1hbmFnZXIuYm9yZGVyKTtcclxuICAgIHJldHVybiB7d2lkdGggOiB2aXNXaWR0aCwgaGVpZ2h0IDogdmlzSGVpZ2h0LCBjZW50ZXIgOiB7eCA6IHRoaXMueCArIHZpc1dpZHRoIC8gMiwgeSA6IHRoaXMueSArIHZpc0hlaWdodCAvIDJ9fTtcclxufTtcclxuXHJcbkJhY2tncm91bmQucHJvdG90eXBlLm51bVBlb3BsZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIG51bSA9IHRoaXMuZ3JvdXBfbWFuYWdlci5udW1QZW9wbGUoKTtcclxuICAgIGlmIChudW0gPT09IDApIHJldHVybiAxO1xyXG4gICAgZWxzZSByZXR1cm4gbnVtO1xyXG59O1xyXG5cclxuQmFja2dyb3VuZC5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24oKSB7XHJcblx0aWYgKHRoaXMubmV3SFJhdGlvIDwgdGhpcy5taW5SYXRpbykgdGhpcy5uZXdIUmF0aW8gPSB0aGlzLm1pblJhdGlvO1xyXG4gICAgaWYgKHRoaXMubmV3VlJhdGlvIDwgdGhpcy5taW5SYXRpbykgdGhpcy5uZXdWUmF0aW8gPSB0aGlzLm1pblJhdGlvO1xyXG4gICAgaWYgKHRoaXMubmV3SFJhdGlvID4gdGhpcy5tYXhSYXRpbykgdGhpcy5uZXdIUmF0aW8gPSB0aGlzLm1heFJhdGlvO1xyXG4gICAgaWYgKHRoaXMubmV3VlJhdGlvID4gdGhpcy5tYXhSYXRpbykgdGhpcy5uZXdWUmF0aW8gPSB0aGlzLm1heFJhdGlvO1xyXG4gICAgaWYgKHRoaXMuaFJhdGlvICE9PSB0aGlzLm5ld0hSYXRpbykge1xyXG4gICAgICAgIGlmICh0aGlzLmhSYXRpbyArIC4wMSA8IHRoaXMubmV3SFJhdGlvKSB0aGlzLmhSYXRpbyArPSAuMDE7XHJcbiAgICAgICAgZWxzZSBpZiAodGhpcy5oUmF0aW8gLSAuMDEgPiB0aGlzLm5ld0hSYXRpbykgdGhpcy5oUmF0aW8gLT0gLjAxO1xyXG4gICAgICAgIGVsc2UgdGhpcy5oUmF0aW8gPSB0aGlzLm5ld0hSYXRpbztcclxuICAgIH1cclxuICAgIGlmICh0aGlzLnZSYXRpbyAhPT0gdGhpcy5uZXdWUmF0aW8pIHtcclxuICAgICAgICBpZiAodGhpcy52UmF0aW8gKyAuMDEgPCB0aGlzLm5ld1ZSYXRpbykgdGhpcy52UmF0aW8gKz0gLjAxO1xyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMudlJhdGlvIC0gLjAxID4gdGhpcy5uZXdWUmF0aW8pIHRoaXMudlJhdGlvIC09IC4wMTtcclxuICAgICAgICBlbHNlIHRoaXMudlJhdGlvID0gdGhpcy5uZXdWUmF0aW87XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy50eXBlID09PSAndW5lbXBsb3llZCcpXHJcbiAgICAgICAgdGhpcy5oUmF0aW8gPSAxO1xyXG4gICAgdGhpcy5ncm91cF9tYW5hZ2VyLnVwZGF0ZSgpO1xyXG59O1xyXG5cclxuXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IEJhY2tncm91bmQ7IiwiLy9Db250cm9scyBiYWNrZ3JvdW5kIGVsZW1lbnRzXHJcblxyXG52YXIgQmFja2dyb3VuZCA9IHJlcXVpcmUoJy4vYmFja2dyb3VuZCcpO1xyXG52YXIgUGVyc29uID0gcmVxdWlyZSgnLi9wZXJzb24nKTtcclxudmFyIHV0aWwgPSByZXF1aXJlKCcuLi91dGlscycpO1xyXG5cclxudmFyIEdyb3VwID0gcmVxdWlyZSgnLi9ncm91cCcpO1xyXG5cclxudmFyIEJhY2tncm91bmRfTWFuYWdlciA9IGZ1bmN0aW9uKGdhbWUsIHN0YXRlKSB7XHJcblx0dGhpcy5nYW1lID0gZ2FtZTtcclxuXHR0aGlzLnN0YXRlID0gc3RhdGU7XHJcblx0Ly9DcmVhdGUgYXJyYXkgb2YgYmFja2dyb3VuZHNcclxuXHR0aGlzLmJnQXJyYXkgPSBbXHJcblx0XHRuZXcgQmFja2dyb3VuZCh0aGlzLmdhbWUsIDAsIDAsIC4zMywgLjMzLCBQZXJzb24uRURVTEVWRUwubG93ICwgJ3dvcmsnICwgc3RhdGUpLFx0Ly8gdGhpcy5iZ0FycmF5WzBdID09IHdvcmtMb3dcclxuXHRcdG5ldyBCYWNrZ3JvdW5kKHRoaXMuZ2FtZSwgMSwgMCwgLjMzLCAuMzMsIFBlcnNvbi5FRFVMRVZFTC5taWQgLCAnd29yaycgLCBzdGF0ZSksXHQvLyB0aGlzLmJnQXJyYXlbMV0gPT0gd29ya01pZFxyXG5cdFx0bmV3IEJhY2tncm91bmQodGhpcy5nYW1lLCAyLCAwLCAuMzMsIC4zMywgUGVyc29uLkVEVUxFVkVMLmhpZ2gsICd3b3JrJyAsIHN0YXRlKSxcdC8vIHRoaXMuYmdBcnJheVsyXSA9PSB3b3JrTWlkXHJcblx0XHRuZXcgQmFja2dyb3VuZCh0aGlzLmdhbWUsIDAsIDEsIC4zMywgLjMzLCBQZXJzb24uRURVTEVWRUwubG93ICwgJ2hvdXNlJywgc3RhdGUpLFx0Ly8gdGhpcy5iZ0FycmF5WzNdID09IGhvdXNlTG93XHJcblx0XHRuZXcgQmFja2dyb3VuZCh0aGlzLmdhbWUsIDEsIDEsIC4zMywgLjMzLCBQZXJzb24uRURVTEVWRUwubWlkICwgJ2hvdXNlJywgc3RhdGUpLFx0Ly8gdGhpcy5iZ0FycmF5WzRdID09IGhvdXNlTWlkXHJcblx0XHRuZXcgQmFja2dyb3VuZCh0aGlzLmdhbWUsIDIsIDEsIC4zMywgLjMzLCBQZXJzb24uRURVTEVWRUwuaGlnaCwgJ2hvdXNlJywgc3RhdGUpLFx0Ly8gdGhpcy5iZ0FycmF5WzVdID09IGhvdXNlTWlkXHJcblx0XHRuZXcgQmFja2dyb3VuZCh0aGlzLmdhbWUsIDAsIDIsICAgMSwgLjMzLCAnJywgICAgICAgICAgICAgICd1bmVtcGxveWVkJywgc3RhdGUpXHRcdC8vIHRoaXMuYmdBcnJheVs2XSA9PSB1bmVtcGxveWVkXHJcblx0XTtcclxuXHRmb3IgKGJnIGluIHRoaXMuYmdBcnJheSkge1xyXG5cdFx0dGhpcy5iZ0FycmF5W2JnXS5teU1hbmFnZXIgPSB0aGlzO1xyXG5cdH1cclxuXHRcclxuXHRmb3IgKHZhciBpIGluIHRoaXMuYmdBcnJheSkge1xyXG5cdFx0aWYgKHRoaXMuYmdBcnJheVtpXS50eXBlID09ICd3b3JrJykge1xyXG5cdFx0XHRpZiAodGhpcy5iZ0FycmF5W2ldLmluY29tZUxldmVsID09PSBQZXJzb24uRURVTEVWRUwubG93KSB7XHJcblx0XHRcdFx0dGhpcy5iZ0FycmF5W2ldLnRpbnQgPSAweGVkNWM1YTtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIGlmICh0aGlzLmJnQXJyYXlbaV0uaW5jb21lTGV2ZWwgPT09IFBlcnNvbi5FRFVMRVZFTC5taWQpIHtcclxuXHRcdFx0XHR0aGlzLmJnQXJyYXlbaV0udGludCA9IDB4NmFlMjQ2O1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2UgaWYgKHRoaXMuYmdBcnJheVtpXS5pbmNvbWVMZXZlbCA9PT0gUGVyc29uLkVEVUxFVkVMLmhpZ2gpIHtcclxuXHRcdFx0XHR0aGlzLmJnQXJyYXlbaV0udGludCA9IDB4MmI1OWUyO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRlbHNlIGlmICh0aGlzLmJnQXJyYXlbaV0udHlwZSA9PSAnaG91c2UnKSB7XHJcblx0XHRcdGlmICh0aGlzLmJnQXJyYXlbaV0uaW5jb21lTGV2ZWwgPT09IFBlcnNvbi5FRFVMRVZFTC5sb3cpIHtcclxuXHRcdFx0XHR0aGlzLmJnQXJyYXlbaV0udGludCA9IDB4ZWQ4MTgwO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2UgaWYgKHRoaXMuYmdBcnJheVtpXS5pbmNvbWVMZXZlbCA9PT0gUGVyc29uLkVEVUxFVkVMLm1pZCkge1xyXG5cdFx0XHRcdHRoaXMuYmdBcnJheVtpXS50aW50ID0gMHg5NGVhNzk7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSBpZiAodGhpcy5iZ0FycmF5W2ldLmluY29tZUxldmVsID09PSBQZXJzb24uRURVTEVWRUwuaGlnaCkge1xyXG5cdFx0XHRcdHRoaXMuYmdBcnJheVtpXS50aW50ID0gMHg1NDc2ZGQ7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdGVsc2UgeyAvLyBVbmVtcGxveWVkIGJhY2tncm91bmRcclxuXHRcdFx0dGhpcy5iZ0FycmF5W2ldLnRpbnQgPSAweDgwODA4MDtcclxuXHRcdH1cclxuXHRcdHRoaXMuYm9yZGVyID0gMTAwO1xyXG5cdH1cclxuXHRcclxuXHQvLyB2YXIgdGVzdCA9IHRoaXMuYmdBcnJheVs2XS5ncm91cF9tYW5hZ2VyO1xyXG5cdC8vIHZhciB0ZXN0RmxvY2sgPSBuZXcgR3JvdXAodGhpcy5nYW1lLCB0aGlzLmdhbWUud2lkdGggLyAyICsgMTAwLCAodGhpcy5nYW1lLmhlaWdodCAtIHRoaXMuYm9yZGVyKSAvIDIgKyAxMDAsIHN0YXRlKTtcclxuIC8vICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMTA7IGkrKykge1xyXG4gLy8gICAgXHR2YXIgdGVzdFBlcnNvbiA9IG5ldyBQZXJzb24odGhpcy5nYW1lLCB0aGlzLmdhbWUud2lkdGggLyAyICsgaSAqIDE1LCAodGhpcy5nYW1lLmhlaWdodCAtIHRoaXMuYm9yZGVyKSAvIDIgKyBpICogMTUsIGkpO1xyXG4gLy8gICAgXHR0aGlzLmdhbWUuYWRkLmV4aXN0aW5nKHRlc3RQZXJzb24pO1xyXG4gLy8gICAgXHR0ZXN0RmxvY2suYWRkTWVtYmVyKHRlc3RQZXJzb24pO1xyXG4gLy8gICAgfVxyXG4gLy8gICAgdGVzdC5hZGRNZW1iZXIodGVzdEZsb2NrKTtcclxuXHQvLyB0ZXN0RmxvY2sgPSBuZXcgR3JvdXAodGhpcy5nYW1lLCB0aGlzLmdhbWUud2lkdGggLyAyIC0gMTAwLCAodGhpcy5nYW1lLmhlaWdodCAtIHRoaXMuYm9yZGVyKSAvIDIgKyAxMDAsIHN0YXRlKTtcclxuXHQvLyBmb3IgKHZhciBpID0gMDsgaSA8IDEwOyBpKyspIHtcclxuICAgIFx0Ly8gdmFyIHRlc3RQZXJzb24gPSBuZXcgUGVyc29uKHRoaXMuZ2FtZSwgdGhpcy5nYW1lLndpZHRoIC8gMiArIGkgKiAxNSAtIDEwMCwgKHRoaXMuZ2FtZS5oZWlnaHQgLSB0aGlzLmJvcmRlcikgLyAyICsgaSAqIDE1ICsgMTAwLCBpKTtcclxuICAgIFx0Ly8gdGhpcy5nYW1lLmFkZC5leGlzdGluZyh0ZXN0UGVyc29uKTtcclxuICAgIFx0Ly8gdGVzdEZsb2NrLmFkZE1lbWJlcih0ZXN0UGVyc29uKTtcclxuICAgIC8vIH1cclxuICAgIC8vIHRlc3QuYWRkTWVtYmVyKHRlc3RGbG9jayk7XHJcbn07XHJcblxyXG5CYWNrZ3JvdW5kX01hbmFnZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQmFja2dyb3VuZF9NYW5hZ2VyO1xyXG5cclxuLypCYWNrZ3JvdW5kX01hbmFnZXIuQkdOQU1FUyA9IHtcclxuXHRcdHdvcmtMb3cgICAgOiB0aGlzLmJnQXJyYXlbMF0sXHJcblx0XHR3b3JrTWlkICAgIDogdGhpcy5iZ0FycmF5WzFdLFxyXG5cdFx0d29ya0hpZ2ggICA6IHRoaXMuYmdBcnJheVsyXSxcclxuXHRcdGhvdXNlTG93ICAgOiB0aGlzLmJnQXJyYXlbM10sXHJcblx0XHRob3VzZU1pZCAgIDogdGhpcy5iZ0FycmF5WzRdLFxyXG5cdFx0aG91c2VIaWdoICA6IHRoaXMuYmdBcnJheVs1XSxcclxuXHRcdHVuZW1wbG95ZWQgOiB0aGlzLmJnQXJyYXlbNl1cclxufTsqL1xyXG5cclxuQmFja2dyb3VuZF9NYW5hZ2VyLnByb3RvdHlwZS5zZW5kVG8gPSBmdW5jdGlvbihzb3VyY2UsIGRlc3RpbmF0aW9uLCBncm91cCkge1xyXG5cdC8vIGNvbnNvbGUubG9nKCdzZW5kIHRvJywgc291cmNlLCBkZXN0aW5hdGlvbiwgZ3JvdXApO1xyXG5cdC8vIGNvbnNvbGUubG9nKGRlc3RpbmF0aW9uKTtcclxuXHQvLyBjb25zb2xlLmxvZyhzb3VyY2UsIGRlc3RpbmF0aW9uKTtcclxuXHRpZiAoZGVzdGluYXRpb24gPT09IG51bGwpIHtcclxuXHRcdHJldHVybjtcclxuXHR9XHJcblx0dmFyIHRyYW5zVHlwZSA9IHRoaXMudHJhbnNmZXJUeXBlKHNvdXJjZSwgZGVzdGluYXRpb24sIGdyb3VwKVxyXG5cdC8vIGNvbnNvbGUubG9nKHNvdXJjZSwgZGVzdGluYXRpb24sIGdyb3VwLCB0cmFuc1R5cGUpO1xyXG5cdGlmICh0cmFuc1R5cGUuY2FuKSB7XHQvLyBDaGVjayBpZiB0aGV5IGNhbiB0cmFuc2ZlciB1cFxyXG5cdFx0Ly8gY29uc29sZS5sb2coJ2NhbicpO1xyXG5cdFx0c291cmNlLmdyb3VwX21hbmFnZXIudHJhbnNmZXIoZGVzdGluYXRpb24uZ3JvdXBfbWFuYWdlciwgZ3JvdXAsIHRyYW5zVHlwZS5oYXBwaW5lc3MpO1xyXG5cdFx0aWYgKHRyYW5zVHlwZS5lZHVjYXRlKSB7XHJcblx0XHRcdGdyb3VwLnN0YXJ0RWR1Y2F0aW9uKCk7XHJcblx0XHR9XHJcblx0XHRpZiAoc291cmNlLmluY29tZUxldmVsICE9PSBkZXN0aW5hdGlvbi5pbmNvbWVMZXZlbCkge1xyXG5cdFx0XHR0aGlzLnVwZGF0ZVJhdGlvcyhkZXN0aW5hdGlvbik7XHJcblx0XHR9XHJcbiAgICAgICAgZ3JvdXAuaGFwcGluZXNzTW9kaWZpZXIgPSB0cmFuc1R5cGUuaGFwcGluZXNzTW9kaWZpZXI7XHJcblx0fVxyXG5cdC8vIGNvbnNvbGUubG9nKGdyb3VwLmhhcHBpbmVzc01vZGlmaWVyKTtcclxufTtcclxuQmFja2dyb3VuZF9NYW5hZ2VyLnByb3RvdHlwZS5udW1QZW9wbGUgPSBmdW5jdGlvbigpIHtcclxuXHR2YXIgY291bnQgPSAwO1xyXG5cdGZvciAodmFyIGkgaW4gdGhpcy5iZ0FycmF5KSB7XHJcblx0XHRjb3VudCArPSB0aGlzLmJnQXJyYXlbaV0uZ3JvdXBfbWFuYWdlci5udW1QZW9wbGUoKTtcclxuXHR9XHJcblx0cmV0dXJuIGNvdW50O1xyXG59O1xyXG5CYWNrZ3JvdW5kX01hbmFnZXIucHJvdG90eXBlLnRyYW5zZmVyVHlwZSA9IGZ1bmN0aW9uKHNvdXJjZSwgZGVzdGluYXRpb24sIGdyb3VwKSB7XHJcbiAgICBpZiAoZGVzdGluYXRpb24gPT0gbnVsbCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHR2YXIgZ3JvdXBFZHUgPSBncm91cC5tZW1iZXJzWzBdLmVkdUxldmVsO1xyXG5cdHZhciBjYW4gPSB0aGlzLmNhblRyYW5zZmVyKHNvdXJjZSwgZGVzdGluYXRpb24sIGdyb3VwKTtcclxuXHQvLyBjb25zb2xlLmxvZyhkZXN0aW5hdGlvbik7XHJcblx0Ly8gY29uc29sZS5sb2coZGVzdGluYXRpb24udHlwZSwgZGVzdGluYXRpb24uaW5jb21lTGV2ZWwpO1xyXG5cdHZhciBlZHVjYXRlID0gKGRlc3RpbmF0aW9uLnR5cGUgPT09ICdob3VzZScgJiYgZGVzdGluYXRpb24uaW5jb21lTGV2ZWwpID4gZ3JvdXBFZHU7XHJcbiAgICB2YXIgaGFwcGluZXNzTW9kaWZpZXIgPSAwO1xyXG4gICAgaWYgKHRoaXMuc3RhdGUuY3VyTW9uZXkgPCAwKSB7XHJcbiAgICBcdGhhcHBpbmVzc01vZGlmaWVyIC09IDE7XHJcbiAgICBcdHRoaXMubmVnTW9uZXkgPSB0cnVlO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodGhpcy5uZWdNb25leSl7XHJcbiAgICBcdGhhcHBpbmVzc01vZGlmaWVyICs9IDE7XHJcbiAgICB9XHJcbiAgICBpZiAoZGVzdGluYXRpb24udHlwZSA9PSAndW5lbXBsb3llZCcgJiYgc291cmNlLnR5cGUgIT0gJ3VuZW1wbG95ZWQnKSB7XHJcbiAgICBcdC8vIGNvbnNvbGUubG9nKCd1bmVtcGxveW1lbnQnKTtcclxuICAgICAgICBoYXBwaW5lc3NNb2RpZmllciAtPSAxO1xyXG4gICAgfVxyXG4gICAgaWYgKGRlc3RpbmF0aW9uLmluY29tZUxldmVsIDwgZ3JvdXBFZHUpIHtcclxuICAgIFx0Ly8gY29uc29sZS5sb2coJ2VkdWNhdGlvbicpO1xyXG4gICAgICAgIGhhcHBpbmVzc01vZGlmaWVyIC09IGdyb3VwRWR1IC0gZGVzdGluYXRpb24uaW5jb21lTGV2ZWw7XHJcbiAgICB9XHJcbiAgICBpZiAoZGVzdGluYXRpb24udHlwZSA9PSAnaG91c2UnKSB7XHJcbiAgICBcdC8vIGNvbnNvbGUubG9nKCdob3VzaW5nJyk7XHJcbiAgICBcdGhhcHBpbmVzc01vZGlmaWVyICs9IDE7XHJcbiAgICB9XHJcbiAgICBpZiAoZGVzdGluYXRpb24udHlwZSA9PSAnd29yaycpIHtcclxuICAgIFx0Ly8gY29uc29sZS5sb2coJ3RheCcsIGRlc3RpbmF0aW9uLmluY29tZUxldmVsLCB0aGlzLnN0YXRlLnRheE1vZC5sb3cpO1xyXG4gICAgXHRpZiAoZGVzdGluYXRpb24uaW5jb21lTGV2ZWwgPT0gMCkge1xyXG5cdCAgICBcdGlmICh0aGlzLnN0YXRlLnRheE1vZC5sb3cgPT0gLjUpIHtcclxuXHQgICAgXHRcdGhhcHBpbmVzc01vZGlmaWVyICs9IDE7XHJcblx0ICAgIFx0fSBlbHNlIGlmICh0aGlzLnN0YXRlLnRheE1vZC5sb3cgPT0gMSkge1xyXG5cdCAgICBcdFx0XHJcblx0ICAgIFx0fSBlbHNlIGlmICh0aGlzLnN0YXRlLnRheE1vZC5sb3cgPT0gMS41KSB7XHJcblx0ICAgIFx0XHRoYXBwaW5lc3NNb2RpZmllciAtPSAxO1xyXG5cdCAgICBcdH1cclxuICAgIFx0fSBlbHNlIGlmIChkZXN0aW5hdGlvbi5pbmNvbWVMZXZlbCA9PSAxKSB7XHJcblx0ICAgIFx0aWYgKHRoaXMuc3RhdGUudGF4TW9kLm1pZCA9PSAuNSkge1xyXG5cdCAgICBcdFx0aGFwcGluZXNzTW9kaWZpZXIgKz0gMTtcclxuXHQgICAgXHR9IGVsc2UgaWYgKHRoaXMuc3RhdGUudGF4TW9kLm1pZCA9PSAxKSB7XHJcblx0ICAgIFx0XHRcclxuXHQgICAgXHR9IGVsc2UgaWYgKHRoaXMuc3RhdGUudGF4TW9kLm1pZCA9PSAxLjUpIHtcclxuXHQgICAgXHRcdGhhcHBpbmVzc01vZGlmaWVyIC09IDE7XHJcblx0ICAgIFx0fVxyXG4gICAgXHR9IGVsc2UgaWYgKGRlc3RpbmF0aW9uLmluY29tZUxldmVsID09IDIpIHtcclxuXHQgICAgXHRpZiAodGhpcy5zdGF0ZS50YXhNb2QuaGlnaCA9PSAuNSkge1xyXG5cdCAgICBcdFx0aGFwcGluZXNzTW9kaWZpZXIgKz0gMTtcclxuXHQgICAgXHR9IGVsc2UgaWYgKHRoaXMuc3RhdGUudGF4TW9kLmhpZ2ggPT0gMSkge1xyXG5cclxuXHQgICAgXHR9IGVsc2UgaWYgKHRoaXMuc3RhdGUudGF4TW9kLmhpZ2ggPT0gMS41KSB7XHJcblx0ICAgIFx0XHRoYXBwaW5lc3NNb2RpZmllciAtPSAxO1xyXG5cdCAgICBcdH1cclxuICAgIFx0fVxyXG4gXHR9XHJcbiBcdC8vIGNvbnNvbGUubG9nKGhhcHBpbmVzc01vZGlmaWVyLCBncm91cC5oYXBwaW5lc3NNb2RpZmllcik7XHJcbiAgICB2YXIgaGFwcGluZXNzQ2hhbmdlID0gaGFwcGluZXNzTW9kaWZpZXIgLSBncm91cC5oYXBwaW5lc3NNb2RpZmllcjtcclxuICAgIC8vIGNvbnNvbGUubG9nKGhhcHBpbmVzc0NoYW5nZSwgaGFwcGluZXNzTW9kaWZpZXIsIGdyb3VwLmhhcHBpbmVzc01vZGlmaWVyKTtcclxuICAgIHZhciBpbmNvbWVDaGFuZ2UgPSAwO1xyXG4gICAgdmFyIGJhc2VJbmNvbWUgPSBncm91cC5pbmNvbWUoKTtcclxuICAgIHZhciBuZXdJbmNvbWUgPSAwO1xyXG4gICAgdmFyIG51bVBlb3BsZSA9IGdyb3VwLm51bVBlb3BsZSgpO1xyXG4gICAgaWYgKGRlc3RpbmF0aW9uLnR5cGUgPT0gJ3dvcmsnKSB7XHJcbiAgICBcdC8vIGNvbnNvbGUubG9nKCd0YXgnLCBkZXN0aW5hdGlvbi5pbmNvbWVMZXZlbCwgdGhpcy5zdGF0ZS50YXhNb2QubG93KTtcclxuICAgIFx0aWYgKGRlc3RpbmF0aW9uLmluY29tZUxldmVsID09IDApIHtcclxuXHQgICAgXHRuZXdJbmNvbWUgKz0gbnVtUGVvcGxlICogUGVyc29uLklOQ09NRVMubG93ICogdGhpcy5zdGF0ZS50YXhNb2QubG93O1xyXG4gICAgXHR9IGVsc2UgaWYgKGRlc3RpbmF0aW9uLmluY29tZUxldmVsID09IDEpIHtcclxuXHQgICAgXHRuZXdJbmNvbWUgKz0gbnVtUGVvcGxlICogUGVyc29uLklOQ09NRVMubWlkICogdGhpcy5zdGF0ZS50YXhNb2QubWlkO1xyXG4gICAgXHR9IGVsc2UgaWYgKGRlc3RpbmF0aW9uLmluY29tZUxldmVsID09IDIpIHtcclxuXHQgICAgXHRuZXdJbmNvbWUgKz0gbnVtUGVvcGxlICogUGVyc29uLklOQ09NRVMuaGlnaCAqIHRoaXMuc3RhdGUudGF4TW9kLmhpZ2g7XHJcbiAgICBcdH1cclxuIFx0fSBlbHNlIGlmIChkZXN0aW5hdGlvbi50eXBlID09ICdob21lJykge1xyXG4gXHRcdGlmIChkZXN0aW5hdGlvbi5pbmNvbWVMZXZlbCA9PSAwKSB7XHJcblx0ICAgIFx0bmV3SW5jb21lIC09IG51bVBlb3BsZSAqIFBlcnNvbi5JTkNPTUVTLmxvdztcclxuICAgIFx0fSBlbHNlIGlmIChkZXN0aW5hdGlvbi5pbmNvbWVMZXZlbCA9PSAxKSB7XHJcblx0ICAgIFx0bmV3SW5jb21lIC09IG51bVBlb3BsZSAqIFBlcnNvbi5JTkNPTUVTLm1pZDtcclxuICAgIFx0fSBlbHNlIGlmIChkZXN0aW5hdGlvbi5pbmNvbWVMZXZlbCA9PSAyKSB7XHJcblx0ICAgIFx0bmV3SW5jb21lIC09IG51bVBlb3BsZSAqIFBlcnNvbi5JTkNPTUVTLmhpZ2g7XHJcbiAgICBcdH1cclxuIFx0fVxyXG4gXHQvLyBjb25zb2xlLmxvZyhuZXdJbmNvbWUsIGJhc2VJbmNvbWUpXHJcbiBcdHZhciBpbmNvbWVDaGFuZ2UgPSBuZXdJbmNvbWUgLSBiYXNlSW5jb21lO1xyXG4gXHQvLyBjb25zb2xlLmxvZyhoYXBwaW5lc3NNb2RpZmllcik7XHJcblx0cmV0dXJuIHtjYW4gOiBjYW4sIGVkdWNhdGUgOiBlZHVjYXRlLCBoYXBwaW5lc3NDaGFuZ2UgOiBoYXBwaW5lc3NDaGFuZ2UsIGluY29tZUNoYW5nZSA6IGluY29tZUNoYW5nZSwgaGFwcGluZXNzTW9kaWZpZXIgOiBoYXBwaW5lc3NNb2RpZmllcn07XHJcbn07XHJcbkJhY2tncm91bmRfTWFuYWdlci5wcm90b3R5cGUuY2FuVHJhbnNmZXIgPSBmdW5jdGlvbihzb3VyY2UsIGRlc3RpbmF0aW9uLCBncm91cCkge1xyXG5cdC8vIGNvbnNvbGUubG9nKHNvdXJjZSwgZGVzdGluYXRpb24sIGdyb3VwKTtcclxuXHRpZiAoc291cmNlID09PSBudWxsIHx8IGRlc3RpbmF0aW9uID09PSBudWxsKSByZXR1cm4gZmFsc2U7XHJcblx0aWYgKHNvdXJjZS50eXBlID09IGRlc3RpbmF0aW9uLnR5cGUgJiYgc291cmNlLmluY29tZUxldmVsID09IGRlc3RpbmF0aW9uLmluY29tZUxldmVsKSB7XHJcblx0XHRyZXR1cm4gZmFsc2U7XHJcblx0fVxyXG5cdHZhciBzb3VyY2VFZHUgPSBncm91cC5tZW1iZXJzWzBdLmVkdUxldmVsO1xyXG5cdGlmIChkZXN0aW5hdGlvbi50eXBlID09PSAndW5lbXBsb3llZCcpIHtcclxuXHRcdHJldHVybiB0cnVlO1xyXG5cdH1cclxuXHRpZiAoc291cmNlRWR1ID09PSBQZXJzb24uRURVTEVWRUwudW5lbXBsb3llZCkge1xyXG5cdFx0aWYgKGRlc3RpbmF0aW9uLmluY29tZUxldmVsID09PSBQZXJzb24uRURVTEVWRUwubG93ICYmIGRlc3RpbmF0aW9uLnR5cGUgPT09ICdob3VzZScpIHtcclxuXHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHR9XHJcblx0fSBlbHNlIGlmIChzb3VyY2VFZHUgPT09IFBlcnNvbi5FRFVMRVZFTC5sb3cpIHtcclxuXHRcdGlmIChkZXN0aW5hdGlvbi5pbmNvbWVMZXZlbCA9PT0gUGVyc29uLkVEVUxFVkVMLmxvdykge1xyXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdH0gZWxzZSBpZiAoZGVzdGluYXRpb24uaW5jb21lTGV2ZWwgPT09IFBlcnNvbi5FRFVMRVZFTC5taWQpIHtcclxuXHRcdFx0aWYgKGRlc3RpbmF0aW9uLnR5cGUgPT09ICdob3VzZScpIHtcclxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH0gZWxzZSBpZiAoc291cmNlRWR1ID09PSBQZXJzb24uRURVTEVWRUwubWlkKSB7XHJcblx0XHRpZiAoZGVzdGluYXRpb24uaW5jb21lTGV2ZWwgPT09IFBlcnNvbi5FRFVMRVZFTC5sb3cpIHtcclxuXHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHR9IGVsc2UgaWYgKGRlc3RpbmF0aW9uLmluY29tZUxldmVsID09PSBQZXJzb24uRURVTEVWRUwubWlkKSB7XHJcblx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0fSBlbHNlIGlmIChkZXN0aW5hdGlvbi5pbmNvbWVMZXZlbCA9PT0gUGVyc29uLkVEVUxFVkVMLmhpZ2gpIHtcclxuXHRcdFx0aWYgKGRlc3RpbmF0aW9uLnR5cGUgPT09ICdob3VzZScpIHtcclxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH0gZWxzZSBpZiAoc291cmNlRWR1ID09PSBQZXJzb24uRURVTEVWRUwuaGlnaCkge1xyXG5cdFx0cmV0dXJuIHRydWU7XHJcblx0fVxyXG5cdHJldHVybiBmYWxzZTtcclxufTtcclxuQmFja2dyb3VuZF9NYW5hZ2VyLnByb3RvdHlwZS5iYWNrZ3JvdW5kQnkgPSBmdW5jdGlvbih0eXBlLCBpbmNvbWVMZXZlbCkge1xyXG5cdGZvciAodmFyIGJnIGluIHRoaXMuYmdBcnJheSkge1xyXG5cdFx0YmcgPSB0aGlzLmJnQXJyYXlbYmddO1xyXG5cdFx0aWYgKGJnLnR5cGUgPT0gdHlwZSAmJiBiZy5pbmNvbWVMZXZlbCA9PSBpbmNvbWVMZXZlbCkge1xyXG5cdFx0XHRyZXR1cm4gYmc7XHJcblx0XHR9XHJcblx0fVxyXG5cdHJldHVybiBudWxsO1xyXG59O1xyXG5cclxuQmFja2dyb3VuZF9NYW5hZ2VyLnByb3RvdHlwZS53aGVyZUNsaWNrZWQgPSBmdW5jdGlvbigpIHtcclxuXHRmb3IgKHZhciBpIGluIHRoaXMuYmdBcnJheSkge1xyXG5cdFx0dmFyIGN1ckRpbWVuc2lvbnMgPSB0aGlzLmJnQXJyYXlbaV0uZ2V0VmFycygpO1xyXG5cdFx0dmFyIG1vdXNlWCA9IHRoaXMuZ2FtZS5pbnB1dC54O1xyXG5cdFx0dmFyIG1vdXNlWSA9IHRoaXMuZ2FtZS5pbnB1dC55O1xyXG5cdFx0Ly8gaWYoaSA9PSA2KSBjb25zb2xlLmxvZygnY3VyRGltZW5zaW9uczogJyArIGN1ckRpbWVuc2lvbnMpO1xyXG5cdFx0aWYgKG1vdXNlWCA+IGN1ckRpbWVuc2lvbnNbMF0gJiYgbW91c2VYIDw9IGN1ckRpbWVuc2lvbnNbMF0gKyBjdXJEaW1lbnNpb25zWzJdKSB7XHJcblx0XHRcdGlmIChtb3VzZVkgPiBjdXJEaW1lbnNpb25zWzFdICYmIG1vdXNlWSA8PSBjdXJEaW1lbnNpb25zWzFdICsgY3VyRGltZW5zaW9uc1szXSkge1xyXG5cdFx0XHRcdHJldHVybiB0aGlzLmJnQXJyYXlbaV07XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblx0cmV0dXJuIG51bGw7XHJcbn07XHJcblxyXG5CYWNrZ3JvdW5kX01hbmFnZXIucHJvdG90eXBlLmZpbmRPdGhlciA9IGZ1bmN0aW9uKHNvdXJjZSwgZGVzdGluYXRpb24pIHtcclxuXHRpZiAoc291cmNlLnR5cGUgPT09ICd3b3JrJyAmJiBkZXN0aW5hdGlvbi50eXBlID09PSAnd29yaycpIHtcclxuXHRcdGlmIChzb3VyY2UuaW5jb21lTGV2ZWwgPT09IFBlcnNvbi5FRFVMRVZFTC5sb3cpIHtcclxuXHRcdFx0aWYgKGRlc3RpbmF0aW9uLmluY29tZUxldmVsID09PSBQZXJzb24uRURVTEVWRUwubWlkKSByZXR1cm4gdGhpcy5iZ0FycmF5WzJdO1xyXG5cdFx0XHRlbHNlIGlmIChkZXN0aW5hdGlvbi5pbmNvbWVMZXZlbCA9PT0gUGVyc29uLkVEVUxFVkVMLmhpZ2gpIHJldHVybiB0aGlzLmJnQXJyYXlbMV07XHJcblx0XHR9XHJcblx0XHRlbHNlIGlmIChzb3VyY2UuaW5jb21lTGV2ZWwgPT09IFBlcnNvbi5FRFVMRVZFTC5taWQpIHtcclxuXHRcdFx0aWYgKGRlc3RpbmF0aW9uLmluY29tZUxldmVsID09PSBQZXJzb24uRURVTEVWRUwubG93KSByZXR1cm4gdGhpcy5iZ0FycmF5WzJdO1xyXG5cdFx0XHRlbHNlIGlmIChkZXN0aW5hdGlvbi5pbmNvbWVMZXZlbCA9PT0gUGVyc29uLkVEVUxFVkVMLmhpZ2gpIHJldHVybiB0aGlzLmJnQXJyYXlbMF07XHJcblx0XHR9XHJcblx0XHRlbHNlIGlmIChzb3VyY2UuaW5jb21lTGV2ZWwgPT09IFBlcnNvbi5FRFVMRVZFTC5oaWdoKSB7XHJcblx0XHRcdGlmIChkZXN0aW5hdGlvbi5pbmNvbWVMZXZlbCA9PT0gUGVyc29uLkVEVUxFVkVMLmxvdykgcmV0dXJuIHRoaXMuYmdBcnJheVsxXTtcclxuXHRcdFx0ZWxzZSBpZiAoZGVzdGluYXRpb24uaW5jb21lTGV2ZWwgPT09IFBlcnNvbi5FRFVMRVZFTC5taWQpIHJldHVybiB0aGlzLmJnQXJyYXlbMF07XHJcblx0XHR9XHJcblx0fVxyXG5cdGVsc2UgaWYgKHNvdXJjZS50eXBlID09PSAnaG91c2UnICYmIGRlc3RpbmF0aW9uLnR5cGUgPT09ICdob3VzZScpIHtcclxuXHRcdGlmIChzb3VyY2UuaW5jb21lTGV2ZWwgPT09IFBlcnNvbi5FRFVMRVZFTC5sb3cpIHtcclxuXHRcdFx0aWYgKGRlc3RpbmF0aW9uLmluY29tZUxldmVsID09PSBQZXJzb24uRURVTEVWRUwubWlkKSByZXR1cm4gdGhpcy5iZ0FycmF5WzVdO1xyXG5cdFx0XHRlbHNlIGlmIChkZXN0aW5hdGlvbi5pbmNvbWVMZXZlbCA9PT0gUGVyc29uLkVEVUxFVkVMLmhpZ2gpIHJldHVybiB0aGlzLmJnQXJyYXlbNF07XHJcblx0XHR9XHJcblx0XHRlbHNlIGlmIChzb3VyY2UuaW5jb21lTGV2ZWwgPT09IFBlcnNvbi5FRFVMRVZFTC5taWQpIHtcclxuXHRcdFx0aWYgKGRlc3RpbmF0aW9uLmluY29tZUxldmVsID09PSBQZXJzb24uRURVTEVWRUwubG93KSByZXR1cm4gdGhpcy5iZ0FycmF5WzVdO1xyXG5cdFx0XHRlbHNlIGlmIChkZXN0aW5hdGlvbi5pbmNvbWVMZXZlbCA9PT0gUGVyc29uLkVEVUxFVkVMLmhpZ2gpIHJldHVybiB0aGlzLmJnQXJyYXlbM107XHJcblx0XHR9XHJcblx0XHRlbHNlIGlmIChzb3VyY2UuaW5jb21lTGV2ZWwgPT09IFBlcnNvbi5FRFVMRVZFTC5oaWdoKSB7XHJcblx0XHRcdGlmIChkZXN0aW5hdGlvbi5pbmNvbWVMZXZlbCA9PT0gUGVyc29uLkVEVUxFVkVMLmxvdykgcmV0dXJuIHRoaXMuYmdBcnJheVs0XTtcclxuXHRcdFx0ZWxzZSBpZiAoZGVzdGluYXRpb24uaW5jb21lTGV2ZWwgPT09IFBlcnNvbi5FRFVMRVZFTC5taWQpIHJldHVybiB0aGlzLmJnQXJyYXlbM107XHJcblx0XHR9XHJcblx0fVxyXG59O1xyXG5cclxuQmFja2dyb3VuZF9NYW5hZ2VyLnByb3RvdHlwZS51cGRhdGVSYXRpb3MgPSBmdW5jdGlvbihkZXN0aW5hdGlvbikge1xyXG5cdGlmIChkZXN0aW5hdGlvbi50eXBlID09PSAnd29yaycpIHtcclxuXHRcdHZhciBoUmF0aW9zID0gdXRpbC5yYXRpbyh0aGlzLmJnQXJyYXlbMF0ubnVtUGVvcGxlKCksIHRoaXMuYmdBcnJheVsxXS5udW1QZW9wbGUoKSwgdGhpcy5iZ0FycmF5WzJdLm51bVBlb3BsZSgpKTtcclxuXHR9XHJcblx0ZWxzZXtcclxuXHRcdHZhciBoUmF0aW9zID0gdXRpbC5yYXRpbyh0aGlzLmJnQXJyYXlbM10ubnVtUGVvcGxlKCksIHRoaXMuYmdBcnJheVs0XS5udW1QZW9wbGUoKSwgdGhpcy5iZ0FycmF5WzVdLm51bVBlb3BsZSgpKTtcclxuXHR9XHJcblx0dmFyIGVtcGxveWVkID0gMDtcclxuXHRmb3IgKHZhciBqID0gMDsgaiA8IDY7IGorKylcclxuXHRcdGVtcGxveWVkICs9IHRoaXMuYmdBcnJheVtqXS5udW1QZW9wbGUoKTtcclxuXHR2YXIgdlJhdGlvcyA9IHV0aWwucmF0aW8odGhpcy5iZ0FycmF5WzZdLm51bVBlb3BsZSgpLCBlbXBsb3llZCk7XHJcblx0Zm9yICh2YXIgaSA9IDAgaW4gdGhpcy5iZ0FycmF5KSB7XHJcblx0XHRpZiAoaSAhPT0gNikge1x0XHQvLyBJZiBub3QgdW5lbXBsb3llZCBiZ1xyXG5cdFx0XHRpZiAoaSA8IDMpIHtcdC8vIElmIHdvcmsgYmdcclxuXHRcdFx0XHR0aGlzLmJnQXJyYXlbaV0ubmV3SFJhdGlvID0gaFJhdGlvc1tpXTtcclxuXHRcdFx0XHR0aGlzLmJnQXJyYXlbaV0ubmV3VlJhdGlvID0gdlJhdGlvc1sxXSAvIDI7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSB7XHRcdFx0Ly8gSWYgaG91c2UgYmdcclxuXHRcdFx0XHR0aGlzLmJnQXJyYXlbaV0ubmV3SFJhdGlvID0gaFJhdGlvc1tpIC0gM107XHJcblx0XHRcdFx0dGhpcy5iZ0FycmF5W2ldLm5ld1ZSYXRpbyA9IHZSYXRpb3NbMV0gLyAyO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRlbHNlIGJnQXJyYXlbaV0ubmV3VlJhdGlvID0gdlJhdGlvc1swXTsgLy8gVW5lbXBsb3llZCBiZ1xyXG5cdH1cclxuXHQvLyBjb25zb2xlLmxvZyh2UmF0aW9zKTtcclxuXHRmb3IgKHZhciBiZyBpbiB0aGlzLmJnQXJyYXkpIHtcclxuXHRcdGJnID0gdGhpcy5iZ0FycmF5W2JnXTtcclxuXHRcdGJnLmdyb3VwX21hbmFnZXIudXBkYXRlVmFycygpO1xyXG5cdH1cclxufTtcclxuXHJcbkJhY2tncm91bmRfTWFuYWdlci5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24oKSB7XHJcblx0Zm9yICh2YXIgaSBpbiB0aGlzLmJnQXJyYXkpIHtcclxuICAgIFx0aWYgKHRoaXMuYmdBcnJheVtpXS5pbmNvbWVMZXZlbCA9PT0gUGVyc29uLkVEVUxFVkVMLm1pZCkge1xyXG4gICAgXHRcdHRoaXMuYmdBcnJheVtpXS54ID0gdGhpcy5iZ0FycmF5WzBdLmdldFZhcnMoKVsyXTtcclxuICAgIFx0fVxyXG4gICAgXHRlbHNlIGlmICh0aGlzLmJnQXJyYXlbaV0uaW5jb21lTGV2ZWwgPT09IFBlcnNvbi5FRFVMRVZFTC5oaWdoKSB7XHJcbiAgICBcdCAgICB0aGlzLmJnQXJyYXlbaV0ueCA9IHRoaXMuYmdBcnJheVsxXS5nZXRWYXJzKClbMF0gKyB0aGlzLmJnQXJyYXlbMV0uZ2V0VmFycygpWzJdO1xyXG4gICAgXHR9XHJcbiAgICBcdHRoaXMuYmdBcnJheVtpXS55ID0gKHRoaXMuYmdBcnJheVtpXS5iYXNlWSAqIHRoaXMuYmdBcnJheVtpXS52UmF0aW8gKiAodGhpcy5nYW1lLmhlaWdodCAtIHRoaXMuYm9yZGVyKSkgKyB0aGlzLmJvcmRlcjtcclxuXHRcdHRoaXMuYmdBcnJheVtpXS51cGRhdGUoKTtcclxuXHR9XHJcblx0dmFyIHRlc3QgPSB0aGlzLmJnQXJyYXlbM10uZ2V0VmFyc0NlbnRlcigpO1xyXG59O1xyXG5cclxuQmFja2dyb3VuZF9NYW5hZ2VyLnByb3RvdHlwZS5lbmRRdWl0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICB0aGlzLmp1c3RRdWl0ID0gZmFsc2U7XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IEJhY2tncm91bmRfTWFuYWdlcjsiLCIvL2NvbnRyb2xzIGZsb2NraW5nIGZvciBhIGdyb3VwIG9mIHBlcnNvbiBvYmplY3RzXHJcbnZhciB1dGlsID0gcmVxdWlyZSgnLi4vdXRpbHMnKTtcclxuXHJcbnZhciBHcm91cCA9IGZ1bmN0aW9uIChnYW1lLCBjZW50ZXJYLCBjZW50ZXJZLCBzdGF0ZSkge1xyXG5cdHRoaXMuZ2FtZSA9IGdhbWU7XHJcblx0dGhpcy5tZW1iZXJzID0gW107XHJcblx0dGhpcy5taW5EaXN0ID0gMjA7XHJcblx0Ly90aGlzLm5vaXNlID0gMTA7XHJcblx0dGhpcy5jZW50ZXIgPSB7eCA6IGNlbnRlclgsIHkgOiBjZW50ZXJZfTtcclxuXHR0aGlzLmNsaWNrRGlzdCA9IDUwO1xyXG5cdHRoaXMuc2VsZWN0ZWQgPSBmYWxzZTtcclxuXHR0aGlzLnNlbGVjdGlvbiA9IHRoaXMuZ2FtZS5hZGQuc3ByaXRlKHRoaXMuY2VudGVyLngsIHRoaXMuY2VudGVyLnksICdzZWxlY3Rpb24nKTtcclxuXHR0aGlzLnNlbGVjdGlvbi5hbmNob3Iuc2V0VG8oMC41LCAwLjUpO1xyXG5cdHRoaXMuc2VsZWN0aW9uLndpZHRoID0gMTAwO1xyXG5cdHRoaXMuc2VsZWN0aW9uLmhlaWdodCA9IDEwMDtcclxuXHR0aGlzLnNlbGVjdGlvbi52aXNpYmxlID0gZmFsc2U7XHJcblx0dGhpcy52ZWxvY2l0eSA9IHt4IDogMCwgeSA6IDB9O1xyXG5cdHRoaXMuc3BlZWQgPSAuMDU7XHJcblx0dGhpcy5zdGF0ZSA9IHN0YXRlO1xyXG5cdHRoaXMuYm9vayA9IHRoaXMuZ2FtZS5hZGQuc3ByaXRlKHRoaXMuY2VudGVyLngsIHRoaXMuY2VudGVyLnksICdib29rJyk7XHJcblx0dGhpcy5ib29rLmFuY2hvci5zZXRUbygwLjUsIDAuNSk7XHJcblx0dGhpcy5ib29rLnZpc2libGUgPSBmYWxzZTtcclxuXHR0aGlzLmxlYXJuaW5nVGltZSA9IC4wMTtcclxuICAgIHRoaXMuaG92ZXIgPSBmYWxzZTtcclxuICAgIHRoaXMubG9jayA9IHRoaXMuZ2FtZS5hZGQuc3ByaXRlKHRoaXMuY2VudGVyLngsIHRoaXMuY2VudGVyLnksICdsb2NrJyk7XHJcblx0dGhpcy5sb2NrLmFuY2hvci5zZXRUbygwLjUsIDAuNSk7XHJcblx0dGhpcy5sb2NrLndpZHRoID0gMjU7XHJcblx0dGhpcy5sb2NrLmhlaWdodCA9IDM1O1xyXG5cdHRoaXMubG9jay52aXNpYmxlID0gZmFsc2U7XHJcblx0dGhpcy5sb2NrVGltZSA9IDU7XHJcblx0dGhpcy5oYXBwaW5lc3NNb2RpZmllciA9IDA7XHJcblx0dGhpcy5zZWxlY3Rpb25XZWlnaHQgPSAyLjU7XHJcblx0dGhpcy5taW5TZWxlY3Rpb25TaXplID0gNDA7XHJcblx0XHJcblx0dGhpcy5zdGF0ZS5pbnB1dC5vbkRvd24uYWRkKHRoaXMub25JbnB1dERvd24sIHRoaXMpO1xyXG4gICAgdGhpcy5zdGF0ZS5pbnB1dC5hZGRNb3ZlQ2FsbGJhY2sodGhpcy5vbk1vdmUsIHRoaXMpO1xyXG59O1xyXG5Hcm91cC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBHcm91cDtcclxuR3JvdXAucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uKCkge1xyXG5cdC8vIGNvbnNvbGUubG9nKHRoaXMuY2VudGVyKTtcclxuXHQvL3VwZGF0ZSBjZW50ZXJcclxuXHR2YXIgbmV3WCA9IHRoaXMuY2VudGVyLnggKyB0aGlzLnZlbG9jaXR5LnggKiB0aGlzLnNwZWVkO1xyXG5cdHZhciBuZXdZID0gdGhpcy5jZW50ZXIueSArIHRoaXMudmVsb2NpdHkueSAqIHRoaXMuc3BlZWQ7XHJcblx0dGhpcy5jaGFuZ2VDZW50ZXIoe3ggOiBuZXdYLCB5IDogbmV3WX0pO1xyXG5cdGZvciAodmFyIG1lbWJlciBpbiB0aGlzLm1lbWJlcnMpIHtcclxuXHRcdG1lbWJlciA9IHRoaXMubWVtYmVyc1ttZW1iZXJdO1xyXG5cdFx0dmFyIHZlbG9jaXR5ID0ge3g6MCwgeTowfTtcclxuXHRcdHZhciBkaWZmID0ge3g6MCwgeTowfTtcclxuXHRcdGRpZmYueCA9IHRoaXMuY2VudGVyLnggLSBtZW1iZXIueDtcclxuXHRcdGRpZmYueSA9IHRoaXMuY2VudGVyLnkgLSBtZW1iZXIueTtcclxuXHRcdHZlbG9jaXR5LnggKz0gZGlmZi54O1xyXG5cdFx0dmVsb2NpdHkueSArPSBkaWZmLnk7XHJcblx0XHRmb3IgKHZhciBvdGhlciBpbiB0aGlzLm1lbWJlcnMpIHtcclxuXHRcdFx0b3RoZXIgPSB0aGlzLm1lbWJlcnNbb3RoZXJdO1xyXG5cdFx0XHQvL2lnbm9yZSBzZWxmXHJcblx0XHRcdGlmIChvdGhlciA9PT0gbWVtYmVyKSB7XHJcblx0XHRcdFx0Y29udGludWU7XHJcblx0XHRcdH1cclxuXHRcdFx0dmFyIG9EaWZmID0ge3g6MCwgeTowfTtcclxuXHRcdFx0b0RpZmYueCA9IG90aGVyLnggLSBtZW1iZXIueDtcclxuXHRcdFx0b0RpZmYueSA9IG90aGVyLnkgLSBtZW1iZXIueTtcclxuXHRcdFx0dmFyIHRvdGFsRGlzdCA9IHV0aWwuaHlwb3RlbnVzZShvRGlmZi54LCBvRGlmZi55KTtcclxuXHRcdFx0aWYgKHRvdGFsRGlzdCA8PSB0aGlzLm1pbkRpc3QpIHtcclxuXHRcdFx0XHR2ZWxvY2l0eS54ID0gLTEgKiBvRGlmZi54O1xyXG5cdFx0XHRcdHZlbG9jaXR5LnkgPSAtMSAqIG9EaWZmLnk7XHJcblx0XHRcdFx0Ly8gdmVsb2NpdHkueCAtPSBvRGlmZi54O1xyXG5cdFx0XHRcdC8vIHZlbG9jaXR5LnkgLT0gb0RpZmYueTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0Ly8gaWYgKHV0aWwuaHlwb3RlbnVzZSh2ZWxvY2l0eS54LCB2ZWxvY2l0eS55KSA8IHRoaXMubWluVmVsb2NpdHkpIHtcclxuXHRcdFx0Ly8gdmVsb2NpdHkueCA9IHZlbG9jaXR5LnkgPSAwO1xyXG5cdFx0Ly8gfVxyXG5cdFx0bWVtYmVyLnZlbG9jaXR5ID0gdmVsb2NpdHk7XHJcblx0fVxyXG5cclxuXHQvLyB2YXIgYXZlcmFnZSA9IDA7XHJcblx0Ly8gZm9yICh2YXIgbWVtYmVyIGluIHRoaXMubWVtYmVycykge1xyXG5cdC8vIFx0bWVtYmVyID0gdGhpcy5tZW1iZXJzW21lbWJlcl07XHJcblx0Ly8gXHR2YXIgZGlzdCA9IHV0aWwuaHlwb3RlbnVzZSh0aGlzLmNlbnRlci54IC0gbWVtYmVyLngsIHRoaXMuY2VudGVyLnkgLSBtZW1iZXIueSk7XHJcblx0Ly8gXHQvLyBpZiAoZGlzdCA+IGZ1cnRoZXN0KSB7XHJcblx0Ly8gXHQvLyBcdGZ1cnRoZXN0ID0gZGlzdDtcclxuXHQvLyBcdC8vIH1cclxuXHQvLyBcdGF2ZXJhZ2UgKz0gZGlzdDtcclxuXHQvLyB9XHJcblx0Ly8gYXZlcmFnZSAvPSB0aGlzLm1lbWJlcnMubGVuZ3RoO1xyXG5cdC8vIC8vIGNvbnNvbGUubG9nKHRoaXMuc2VsZWN0aW9uV2VpZ2h0KTtcclxuXHQvLyB2YXIgbmV3U2VsZWN0aW9uU2l6ZSA9IGF2ZXJhZ2UgKiB0aGlzLnNlbGVjdGlvbldlaWdodDtcclxuXHQvLyBpZiAobmV3U2VsZWN0aW9uU2l6ZSA8PSB0aGlzLm1pblNlbGVjdGlvblNpemUpIHtcclxuXHQvLyBcdC8vIGNvbnNvbGUubG9nKCdhJyk7XHJcblx0Ly8gXHRuZXdTZWxlY3Rpb25TaXplID0gdGhpcy5taW5TZWxlY3Rpb25TaXplO1xyXG5cdC8vIH1cclxuXHR2YXIgbmV3U2VsZWN0aW9uU2l6ZSA9IHRoaXMubWluU2VsZWN0aW9uU2l6ZSArIHRoaXMubWVtYmVycy5sZW5ndGggKiB0aGlzLnNlbGVjdGlvbldlaWdodDtcclxuXHR0aGlzLnNlbGVjdGlvbi53aWR0aCA9IG5ld1NlbGVjdGlvblNpemU7XHJcblx0dGhpcy5zZWxlY3Rpb24uaGVpZ2h0ID0gbmV3U2VsZWN0aW9uU2l6ZTtcclxufTtcclxuR3JvdXAucHJvdG90eXBlLmFkZE1lbWJlciA9IGZ1bmN0aW9uKG1lbWJlcikge1xyXG5cdHRoaXMubWVtYmVycy5wdXNoKG1lbWJlcik7XHJcblx0bWVtYmVyLmdyb3VwID0gdGhpcztcclxuXHQvLyBjb25zb2xlLmxvZyh0aGlzLm1lbWJlcnMpO1xyXG59O1xyXG5Hcm91cC5wcm90b3R5cGUub25JbnB1dERvd24gPSBmdW5jdGlvbigpIHtcclxuXHQvLyBjb25zb2xlLmxvZygnYScpO1xyXG5cdGlmICh0aGlzLnNlbGVjdGVkKSB7XHJcblx0XHR2YXIgYmcgPSB0aGlzLm15TWFuYWdlci5iYWNrZ3JvdW5kLm15TWFuYWdlci53aGVyZUNsaWNrZWQoKTtcclxuXHRcdHRoaXMubXlNYW5hZ2VyLmJhY2tncm91bmQubXlNYW5hZ2VyLnNlbmRUbyh0aGlzLm15TWFuYWdlci5iYWNrZ3JvdW5kLCBiZywgdGhpcyk7XHJcblx0XHR0aGlzLnNldFNlbGVjdGVkKGZhbHNlKTtcclxuXHR9IGVsc2UgaWYgKHRoaXMuY2xpY2tlZCgpKSB7XHJcblx0XHR0aGlzLmNsaWNrKCk7XHJcblx0fVxyXG59O1xyXG5Hcm91cC5wcm90b3R5cGUuc3RhcnRFZHVjYXRpb24gPSBmdW5jdGlvbigpIHtcclxuXHR0aGlzLmxlYXJuaW5nID0gZmFsc2U7XHJcblx0dGhpcy5ib29rLnZpc2libGUgPSB0cnVlO1xyXG5cdHRoaXMuc3RhdGUuZ2FtZS50aW1lLmV2ZW50cy5hZGQoUGhhc2VyLlRpbWVyLlNFQ09ORCAqIHRoaXMubGVhcm5pbmdUaW1lLCB0aGlzLmVuZEVkdWNhdGlvbiwgdGhpcyk7XHJcbn07XHJcbkdyb3VwLnByb3RvdHlwZS5lbmRFZHVjYXRpb24gPSBmdW5jdGlvbigpIHtcclxuXHRmb3IgKHZhciBtZW1iZXIgaW4gdGhpcy5tZW1iZXJzKSB7XHJcblx0XHR0aGlzLm1lbWJlcnNbbWVtYmVyXS5lZHVMZXZlbCArPSAxO1xyXG5cdH1cclxuXHR0aGlzLmxlYXJuaW5nID0gZmFsc2U7XHJcblx0dGhpcy5ib29rLnZpc2libGUgPSBmYWxzZTtcclxufTtcclxuR3JvdXAucHJvdG90eXBlLmNsaWNrZWQgPSBmdW5jdGlvbigpIHtcclxuICAgIGlmICh0aGlzLm1lbWJlcnMubGVuZ3RoID09IDApIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblx0dmFyIG1vdXNlWCA9IHRoaXMuZ2FtZS5pbnB1dC54O1xyXG5cdHZhciBtb3VzZVkgPSB0aGlzLmdhbWUuaW5wdXQueTtcclxuXHR2YXIgZGlmZlggPSBtb3VzZVggLSB0aGlzLmNlbnRlci54O1xyXG5cdHZhciBkaWZmWSA9IG1vdXNlWSAtIHRoaXMuY2VudGVyLnk7XHJcblx0dmFyIHRvdGFsRGlmZiA9IHV0aWwuaHlwb3RlbnVzZShkaWZmWCwgZGlmZlkpO1xyXG5cdGlmICh0b3RhbERpZmYgPD0gdGhpcy5jbGlja0Rpc3QpIHtcclxuXHRcdHJldHVybiB0cnVlO1xyXG5cdH1cclxuXHRyZXR1cm4gZmFsc2U7XHJcbn07XHJcbkdyb3VwLnByb3RvdHlwZS5jbGljayA9IGZ1bmN0aW9uKCkge1xyXG5cdGlmICh0aGlzLnNlbGVjdGVkKSB7XHJcbiAgICAgICAgLy8gdGhpcy5zdGF0ZS5obS5ncm91cFNlbGVjdGVkID0gZmFsc2U7XHJcblx0XHR0aGlzLnNldFNlbGVjdGVkKGZhbHNlKTtcclxuXHR9IGVsc2UgaWYgKCF0aGlzLmxvY2tlZCkge1xyXG4gICAgICAgIC8vIHRoaXMuc3RhdGUuaG0uZ3JvdXBTZWxlY3RlZCA9IHRydWU7XHJcblx0XHR0aGlzLnNldFNlbGVjdGVkKHRydWUpO1xyXG5cdH1cclxufTtcclxuR3JvdXAucHJvdG90eXBlLnNldFNlbGVjdGVkID0gZnVuY3Rpb24obmV3U2VsZWN0ZWQpIHtcclxuXHR0aGlzLnNlbGVjdGVkID0gbmV3U2VsZWN0ZWQ7XHJcblx0dGhpcy5zZWxlY3Rpb24udmlzaWJsZSA9IG5ld1NlbGVjdGVkO1xyXG4gICAgaWYgKG5ld1NlbGVjdGVkID09IHRydWUpIHtcclxuICAgICAgICB0aGlzLnN0YXRlLmhtLmdyb3VwU2VsZWN0ZWQgPSB0aGlzO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5obS5ncm91cFNlbGVjdGVkID09IHRoaXMpIHtcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5obS5ncm91cFNlbGVjdGVkID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcbkdyb3VwLnByb3RvdHlwZS5jaGFuZ2VDZW50ZXIgPSBmdW5jdGlvbihuZXdDZW50ZXIpIHtcclxuXHR0aGlzLnNlbGVjdGlvbi54ID0gbmV3Q2VudGVyLng7XHJcblx0dGhpcy5zZWxlY3Rpb24ueSA9IG5ld0NlbnRlci55O1xyXG5cdHRoaXMuYm9vay54ID0gbmV3Q2VudGVyLng7XHJcblx0dGhpcy5ib29rLnkgPSBuZXdDZW50ZXIueTtcclxuXHR0aGlzLmxvY2sueCA9IG5ld0NlbnRlci54O1xyXG5cdHRoaXMubG9jay55ID0gbmV3Q2VudGVyLnk7XHJcblx0dGhpcy5jZW50ZXIgPSBuZXdDZW50ZXI7XHJcbn07XHJcbkdyb3VwLnByb3RvdHlwZS5udW1QZW9wbGUgPSBmdW5jdGlvbigpIHtcclxuXHRyZXR1cm4gdGhpcy5tZW1iZXJzLmxlbmd0aDtcclxufTtcclxuR3JvdXAucHJvdG90eXBlLmxvd2VzdEVkdWNhdGlvbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIGxvd2VzdCA9IDM7XHJcbiAgICBmb3IgKHZhciBtZW1iZXIgaW4gdGhpcy5tZW1iZXJzKSB7XHJcbiAgICAgICAgbWVtYmVyID0gdGhpcy5tZW1iZXJzW21lbWJlcl07XHJcbiAgICAgICAgaWYgKG1lbWJlci5lZHVMZXZlbCA8IGxvd2VzdCkge1xyXG4gICAgICAgICAgICBsb3dlc3QgPSBtZW1iZXIuZWR1TGV2ZWw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGxvd2VzdDtcclxufTtcclxuR3JvdXAucHJvdG90eXBlLmF2ZXJhZ2VIYXBwaW5lc3MgPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBoYXBwaW5lc3MgPSAwO1xyXG4gICAgZm9yICh2YXIgbWVtYmVyIGluIHRoaXMubWVtYmVycykge1xyXG4gICAgICAgIG1lbWJlciA9IHRoaXMubWVtYmVyc1ttZW1iZXJdO1xyXG4gICAgICAgIGhhcHBpbmVzcyArPSBtZW1iZXIuaGFwcGluZXNzO1xyXG4gICAgfVxyXG4gICAgaGFwcGluZXNzIC89IHRoaXMubWVtYmVycy5sZW5ndGg7XHJcbiAgICByZXR1cm4gaGFwcGluZXNzO1xyXG59O1xyXG5Hcm91cC5wcm90b3R5cGUuYXZlcmFnZUZhdGlndWUgPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBmYXRpZ3VlID0gMDtcclxuICAgIGZvciAodmFyIG1lbWJlciBpbiB0aGlzLm1lbWJlcnMpIHtcclxuICAgICAgICBtZW1iZXIgPSB0aGlzLm1lbWJlcnNbbWVtYmVyXTtcclxuICAgICAgICBmYXRpZ3VlICs9IG1lbWJlci5mYXRpZ3VlO1xyXG4gICAgfVxyXG4gICAgZmF0aWd1ZSAvPSB0aGlzLm1lbWJlcnMubGVuZ3RoO1xyXG4gICAgcmV0dXJuIGZhdGlndWU7XHJcbn07XHJcbkdyb3VwLnByb3RvdHlwZS5pbmNvbWUgPSBmdW5jdGlvbigpIHtcclxuICAgIHZhciBpbmNvbWUgPSAwO1xyXG4gICAgZm9yICh2YXIgbWVtYmVyIGluIHRoaXMubWVtYmVycykge1xyXG4gICAgICAgIG1lbWJlciA9IHRoaXMubWVtYmVyc1ttZW1iZXJdO1xyXG4gICAgICAgIGluY29tZSArPSBtZW1iZXIuZ2V0VGF4KCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gaW5jb21lO1xyXG59O1xyXG4vLyBHcm91cC5wcm90b3R5cGUuaGFwcGluZXNzQ2hhbmdlID0gZnVuY3Rpb24oKSB7XHJcbiAgICBcclxuLy8gfTtcclxuLy8gR3JvdXAucHJvdG90eXBlLmluY29tZUNoYW5nZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgXHJcbi8vIH07XHJcbi8vIEdyb3VwLnByb3RvdHlwZS5tb3VzZURvd24gPSBmdW5jdGlvbigpIHtcclxuXHRcclxuLy8gfTtcclxuR3JvdXAucHJvdG90eXBlLm9uTW92ZSA9IGZ1bmN0aW9uKCkge1xyXG4gICAgaWYgKHRoaXMubWVtYmVycy5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHR2YXIgbW91c2VYID0gdGhpcy5nYW1lLmlucHV0Lng7XHJcblx0dmFyIG1vdXNlWSA9IHRoaXMuZ2FtZS5pbnB1dC55O1xyXG4gICAgdmFyIGRpc3QgPSB1dGlsLmh5cG90ZW51c2UodGhpcy5jZW50ZXIueCAtIG1vdXNlWCwgdGhpcy5jZW50ZXIueSAtIG1vdXNlWSk7XHJcbiAgICBpZiAoZGlzdCA8PSB0aGlzLmNsaWNrRGlzdCkge1xyXG4gICAgICAgIGlmICghdGhpcy5zdGF0ZS5obS5ncm91cFNlbGVjdGVkIHx8IHRoaXMuc3RhdGUuaG0uZ3JvdXBTZWxlY3RlZCA9PSB0aGlzKSB7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdhJyk7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuaGFwcGluZXNzTW9kaWZpZXIpO1xyXG4gICAgICAgICAgICB0aGlzLnN0YXRlLmhtLnNob3dTdGF0aWMoe3Blb3BsZSA6IHRoaXMubnVtUGVvcGxlKCksIGVkdWNhdGlvbiA6IHRoaXMubG93ZXN0RWR1Y2F0aW9uKCksIGhhcHBpbmVzcyA6IHRoaXMuYXZlcmFnZUhhcHBpbmVzcygpLCBmYXRpZ3VlIDogdGhpcy5hdmVyYWdlRmF0aWd1ZSgpLCBpbmNvbWUgOiB0aGlzLmluY29tZSgpLCBoYXBwaW5lc3NNb2RpZmllciA6IHRoaXMuaGFwcGluZXNzTW9kaWZpZXJ9LCB0aGlzLmNlbnRlci54LCB0aGlzLmNlbnRlci55IC0gNTAsIDEwMCk7XHJcbiAgICAgICAgICAgIHRoaXMuaG92ZXIgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaG92ZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5ob3ZlciA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLnN0YXRlLmhtLmhpZGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuaG0uZ3JvdXBTZWxlY3RlZCA9PSB0aGlzICYmIHRoaXMubXlNYW5hZ2VyLmJhY2tncm91bmQubXlNYW5hZ2VyLndoZXJlQ2xpY2tlZCgpICE9IHRoaXMubXlNYW5hZ2VyLmJhY2tncm91bmRcclxuICAgICAgICAgICAgJiYgdGhpcy5teU1hbmFnZXIuYmFja2dyb3VuZC5teU1hbmFnZXIuY2FuVHJhbnNmZXIodGhpcy5teU1hbmFnZXIuYmFja2dyb3VuZCwgdGhpcy5teU1hbmFnZXIuYmFja2dyb3VuZC5teU1hbmFnZXIud2hlcmVDbGlja2VkKCksIHRoaXMpKSB7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdhJyk7XHJcbiAgICAgICAgICAgIHZhciBiZ01hbmFnZXIgPSB0aGlzLm15TWFuYWdlci5iYWNrZ3JvdW5kLm15TWFuYWdlclxyXG4gICAgICAgICAgICB2YXIgdHJhbnNmZXJUeXBlID0gYmdNYW5hZ2VyLnRyYW5zZmVyVHlwZSh0aGlzLm15TWFuYWdlci5iYWNrZ3JvdW5kLCBiZ01hbmFnZXIud2hlcmVDbGlja2VkKCksIHRoaXMpO1xyXG4gICAgICAgICAgICB0aGlzLnN0YXRlLmhtLnNob3dDaGFuZ2UodHJhbnNmZXJUeXBlLmNhbiwge2hhcHBpbmVzc0NoYW5nZSA6IHRyYW5zZmVyVHlwZS5oYXBwaW5lc3NDaGFuZ2UsIGluY29tZUNoYW5nZSA6IHRyYW5zZmVyVHlwZS5pbmNvbWVDaGFuZ2V9LCBtb3VzZVgsIG1vdXNlWSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2InKTtcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5obS5oaWRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59O1xyXG4vLyBHcm91cC5wcm90b3R5cGUuaGFwcGluZXNzTW9kaWZpZXIgPSBmdW5jdGlvbigpIHtcclxuLy8gICAgIHJldHVybiB0aGlzLmhhcHBpbmVzc01vZGlmaWVyO1xyXG4vLyB9O1xyXG5Hcm91cC5wcm90b3R5cGUuYXBwbHlIYXBwaW5lc3MgPSBmdW5jdGlvbigpIHtcclxuXHQvLyBjb25zb2xlLmxvZygnYXBwbHknKTtcclxuXHR2YXIgZmxhZyA9IGZhbHNlO1xyXG5cdGZvciAodmFyIG1lbWJlciBpbiB0aGlzLm1lbWJlcnMpIHtcclxuXHRcdG1lbWJlciA9IHRoaXMubWVtYmVyc1ttZW1iZXJdO1xyXG5cdFx0Ly8gY29uc29sZS5sb2cobWVtYmVyLmhhcHBpbmVzcywgdGhpcy5oYXBwaW5lc3NNb2RpZmllcik7XHJcblx0XHQvLyBjb25zb2xlLmxvZ3FtZW1iZXIuaGFwcGluZXNzLCB0aGlzLmhhcHBpbmVzc01vZGlmaWVyKTtcclxuXHRcdG1lbWJlci5oYXBwaW5lc3MgKz0gdGhpcy5oYXBwaW5lc3NNb2RpZmllcjtcclxuXHRcdC8vIG1lbWJlci5oYXBwaW5lc3MgLT0gNTA7XHJcblx0XHRpZiAobWVtYmVyLmhhcHBpbmVzcyA+IDEwMCkge1xyXG5cdFx0XHRtZW1iZXIuaGFwcGluZXNzID0gMTAwO1xyXG5cdFx0fSBlbHNlIGlmIChtZW1iZXIuaGFwcGluZXNzIDw9IDApIHtcclxuXHRcdFx0bWVtYmVyLmhhcHBpbmVzcyA9IDA7XHJcblx0XHRcdGZsYWcgPSB0cnVlO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRpZiAoZmxhZykge1xyXG5cdFx0dGhpcy5nZXRPdXRPZlRvd24oKTtcclxuXHR9XHJcbn07XHJcbkdyb3VwLnByb3RvdHlwZS5hZGRGYXRpZ3VlID0gZnVuY3Rpb24oYW10KSB7XHJcblx0Ly8gY29uc29sZS5sb2coYW10KTtcclxuXHRpZiAodGhpcy5tZW1iZXJzWzBdLmZhdGlndWUgPD0gMCAmJiBhbXQgPD0gMCkge1xyXG5cdFx0cmV0dXJuO1xyXG5cdH1cclxuXHR2YXIgZmxhZyA9IGZhbHNlO1xyXG5cdGZvciAodmFyIG1lbWJlciBpbiB0aGlzLm1lbWJlcnMpIHtcclxuXHRcdHRoaXMubWVtYmVyc1ttZW1iZXJdLmZhdGlndWUgKz0gYW10O1xyXG5cdFx0aWYgKHRoaXMubWVtYmVyc1ttZW1iZXJdLmZhdGlndWUgPj0gMTAwKSB7XHJcblx0XHRcdGZsYWcgPSB0cnVlO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRpZiAoZmxhZykge1xyXG5cdFx0Ly8gY29uc29sZS5sb2codGhpcyk7XHJcblx0XHR0aGlzLmdldE91dE9mVG93bigpO1xyXG5cdFx0Ly9jb25zb2xlLmxvZygnZmF0aWd1ZSB0b28gZGFtIGhpZ2gnKTtcclxuXHR9XHJcbn07XHJcbkdyb3VwLnByb3RvdHlwZS5nZXRPdXRPZlRvd24gPSBmdW5jdGlvbigpIHtcclxuXHR2YXIgbmV3QkcgPSB0aGlzLm15TWFuYWdlci5iYWNrZ3JvdW5kLm15TWFuYWdlci5iYWNrZ3JvdW5kQnkoJ2hvdXNlJywgdGhpcy5teU1hbmFnZXIuYmFja2dyb3VuZC5pbmNvbWVMZXZlbCk7XHJcblx0aWYgKCFuZXdCRykge1xyXG5cdFx0Y29uc29sZS5sb2coJ0VSUk9SJyk7XHJcblx0XHRyZXR1cm47XHJcblx0fVxyXG5cdHRoaXMubXlNYW5hZ2VyLmJhY2tncm91bmQubXlNYW5hZ2VyLnNlbmRUbyh0aGlzLm15TWFuYWdlci5iYWNrZ3JvdW5kLCBuZXdCRywgdGhpcyk7XHJcblx0dGhpcy5sb2NrSXQoKTtcclxufVxyXG5Hcm91cC5wcm90b3R5cGUubG9ja0l0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICB0aGlzLmxvY2tlZCA9IHRydWU7XHJcbiAgICB0aGlzLmxvY2sudmlzaWJsZSA9IHRydWU7XHJcblx0dGhpcy5zdGF0ZS5nYW1lLnRpbWUuZXZlbnRzLmFkZChQaGFzZXIuVGltZXIuU0VDT05EICogdGhpcy5sb2NrVGltZSwgdGhpcy5lbmRMb2NrLCB0aGlzKTtcclxufTtcclxuR3JvdXAucHJvdG90eXBlLmVuZExvY2sgPSBmdW5jdGlvbigpIHtcclxuICAgIHRoaXMubG9ja2VkID0gZmFsc2U7XHJcbiAgICB0aGlzLmxvY2sudmlzaWJsZSA9IGZhbHNlO1xyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBHcm91cDtcclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuIiwidmFyIFV0aWwgPSByZXF1aXJlKCcuLi91dGlscycpO1xyXG52YXIgR3JvdXAgPSByZXF1aXJlKCcuL2dyb3VwJyk7XHJcblxyXG52YXIgR3JvdXBNYW5hZ2VyID0gZnVuY3Rpb24gKGdhbWUsIHN0YXRlKSB7XHJcblx0dGhpcy5nYW1lID0gZ2FtZTtcclxuXHR0aGlzLm1lbWJlcnMgPSBbXTtcclxuXHR0aGlzLnN0YXRlID0gc3RhdGU7XHJcblx0dGhpcy5zcGxpdENoYW5jZSA9IDAuMTtcclxuXHR0aGlzLm1heFNpemUgPSA4O1xyXG5cdHRoaXMubWFyZ2luID0gNTA7XHJcbn07XHJcbkdyb3VwTWFuYWdlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBHcm91cE1hbmFnZXI7XHJcbkdyb3VwTWFuYWdlci5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24oKSB7XHJcblx0Ly8gY29uc29sZS5sb2codGhpcy5tZW1iZXJzKTtcclxuXHQvLyBjb25zb2xlLmxvZyh0aGlzLmNlbnRlcik7XHJcblx0Ly91cGRhdGUgYm91bmRzXHJcblx0aWYgKHRoaXMuYmFja2dyb3VuZCkge1xyXG5cdFx0dmFyIHZhcnMgPSB0aGlzLmJhY2tncm91bmQuZ2V0VmFyc0NlbnRlcigpO1xyXG5cdFx0dGhpcy53aWR0aCA9IHZhcnMud2lkdGg7XHJcblx0XHR0aGlzLmhlaWdodCA9IHZhcnMuaGVpZ2h0O1xyXG5cdFx0dGhpcy5jZW50ZXIgPSB2YXJzLmNlbnRlcjtcclxuXHRcdC8vIGNvbnNvbGUubG9nKHZhcnMpO1xyXG5cdH0gZWxzZSB7XHJcblx0XHRyZXR1cm47XHJcblx0fVxyXG5cdC8vdXBkYXRlIGludGVyLWdyb3VwIG1vdmVtZW50XHJcblx0Ly8gY29uc29sZS5sb2coTWF0aC5yYW5kb20oKSk7XHJcblx0dmFyIGxhcmdlc3QgPSBudWxsO1xyXG5cdHZhciBsYXJnZXN0U2l6ZSA9IDA7XHJcblx0Zm9yICh2YXIgbWVtYmVyIGluIHRoaXMubWVtYmVycykge1xyXG5cdFx0bWVtYmVyID0gdGhpcy5tZW1iZXJzW21lbWJlcl07XHJcblx0XHR2YXIgc2l6ZSA9IG1lbWJlci5udW1QZW9wbGUoKTtcclxuXHRcdGlmIChzaXplID49IGxhcmdlc3RTaXplKSB7XHJcblx0XHRcdGxhcmdlc3RTaXplID0gc2l6ZTtcclxuXHRcdFx0bGFyZ2VzdCA9IG1lbWJlcjtcclxuXHRcdH1cclxuXHR9XHJcblx0aWYgKGxhcmdlc3RTaXplID49IHRoaXMubWF4U2l6ZSkge1xyXG5cdFx0Ly8gY29uc29sZS5sb2coJ3NwbGl0Jyk7XHJcblx0XHR2YXIgbmV3R3JvdXAgPSBuZXcgR3JvdXAodGhpcy5nYW1lLCB0aGlzLmNlbnRlci54LCB0aGlzLmNlbnRlci55LCB0aGlzLnN0YXRlKTtcclxuXHRcdHRoaXMuYWRkTWVtYmVyKG5ld0dyb3VwKTtcclxuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgbGFyZ2VzdFNpemUgLyAyOyBpKyspIHtcclxuXHRcdFx0dGhpcy50cmFuc2ZlclBlb3BsZShsYXJnZXN0LCBuZXdHcm91cCwgbGFyZ2VzdC5tZW1iZXJzWzBdKTtcclxuXHRcdH1cclxuXHR9XHJcblx0Ly91cGRhdGUgbWVtYmVyIHZlbG9jaXR5XHJcblx0Ly8gZm9yICh2YXIgbWVtYmVyIGluIHRoaXMubWVtYmVycykge1xyXG5cdC8vIFx0bWVtYmVyID0gdGhpcy5tZW1iZXJzW21lbWJlcl07XHJcblx0Ly8gXHR2YXIgdmVsb2NpdHkgPSB7eCA6IDAsIHkgOiAwfTtcclxuXHQvLyBcdC8vIGNvbnNvbGUubG9nKHRoaXMuY2VudGVyLCBtZW1iZXIuY2VudGVyKTtcclxuXHQvLyBcdHZhciBkaWZmWCA9IHRoaXMuY2VudGVyLnggLSBtZW1iZXIuY2VudGVyLng7XHJcblx0Ly8gXHR2YXIgZGlmZlkgPSB0aGlzLmNlbnRlci55IC0gbWVtYmVyLmNlbnRlci55O1xyXG5cdC8vIFx0dmVsb2NpdHkueCA9IGRpZmZYO1xyXG5cdC8vIFx0dmVsb2NpdHkueSA9IGRpZmZZO1xyXG5cdC8vIFx0Zm9yICh2YXIgb3RoZXIgaW4gdGhpcy5tZW1iZXJzKSB7XHJcblx0Ly8gXHRcdG90aGVyID0gdGhpcy5tZW1iZXJzW290aGVyXTtcclxuXHQvLyBcdFx0aWYgKG90aGVyID09PSBtZW1iZXIpIHtcclxuXHQvLyBcdFx0XHRjb250aW51ZTtcclxuXHQvLyBcdFx0fVxyXG5cdC8vIFx0XHR2YXIgb0RpZmZ4ID0gb3RoZXIuY2VudGVyLnggLSBtZW1iZXIuY2VudGVyLng7XHJcblx0Ly8gXHRcdHZhciBvRGlmZnkgPSBvdGhlci5jZW50ZXIueSAtIG1lbWJlci5jZW50ZXIueTtcclxuXHQvLyBcdFx0dmFyIGh5cCA9IFV0aWwuaHlwb3RlbnVzZShvRGlmZngsIG9EaWZmeSk7XHJcblx0Ly8gXHRcdC8vY29uc29sZS5sb2coaHlwKTtcclxuXHQvLyBcdFx0aWYgKGh5cCA8PSB0aGlzLm1pbkRpc3QpIHtcclxuXHQvLyBcdFx0XHQvLyBjb25zb2xlLmxvZygnYicsIGh5cCk7XHJcblx0Ly8gXHRcdFx0dmVsb2NpdHkueCA9IC0xICogb0RpZmZ4O1xyXG5cdC8vIFx0XHRcdHZlbG9jaXR5LnkgPSAtMSAqIG9EaWZmeTtcclxuXHQvLyBcdFx0XHQvLyBjb25zb2xlLmxvZyh2ZWxvY2l0eSk7XHJcblx0Ly8gXHRcdFx0aWYgKHZlbG9jaXR5LnggPD0gMCAmJiB2ZWxvY2l0eS55IDw9IDApIHtcclxuXHQvLyBcdFx0XHRcdC8vIGNvbnNvbGUubG9nKCdjMycpO1xyXG5cdC8vIFx0XHRcdFx0Ly8gdmVsb2NpdHkueCA9IDEwICogTWF0aC5yYW5kb20gLSA1O1xyXG5cdC8vIFx0XHRcdFx0Ly8gdmVsb2NpdHkueSA9IDEwICogTWF0aC5yYW5kb20gLSA1O1xyXG5cdC8vIFx0XHRcdFx0bWVtYmVyLmNlbnRlci54ICs9IDUwICogTWF0aC5yYW5kb20oKSAtIDI1O1xyXG5cdC8vIFx0XHRcdFx0bWVtYmVyLmNlbnRlci55ICs9IDUwICogTWF0aC5yYW5kb20oKSAtIDI1O1xyXG5cdC8vIFx0XHRcdH1cclxuXHQvLyBcdFx0XHRicmVhaztcclxuXHQvLyBcdFx0fSBlbHNlIHtcclxuXHQvLyBcdFx0XHQvLyBjb25zb2xlLmxvZygnYScpO1xyXG5cdC8vIFx0XHR9XHJcblx0Ly8gXHR9XHJcblx0Ly8gXHRtZW1iZXIudmVsb2NpdHkgPSB2ZWxvY2l0eTtcclxuXHQvLyB9XHJcblx0Ly91cGRhdGUgbWVtYmVyc1xyXG5cdGZvciAobWVtYmVyIGluIHRoaXMubWVtYmVycykge1xyXG5cdFx0dGhpcy5tZW1iZXJzW21lbWJlcl0udXBkYXRlKCk7XHJcblx0fVxyXG59O1xyXG5Hcm91cE1hbmFnZXIucHJvdG90eXBlLnVwZGF0ZVZhcnMgPSBmdW5jdGlvbigpIHtcclxuXHR2YXIgdmFycyA9IHRoaXMuYmFja2dyb3VuZC5nZXRWYXJzQ2VudGVyKCk7XHJcblx0dGhpcy53aWR0aCA9IHZhcnMud2lkdGg7XHJcblx0dGhpcy5oZWlnaHQgPSB2YXJzLmhlaWdodDtcclxuXHR0aGlzLmNlbnRlciA9IHZhcnMuY2VudGVyO1xyXG5cdGZvciAodmFyIG1lbWJlciBpbiB0aGlzLm1lbWJlcnMpIHtcclxuXHRcdG1lbWJlciA9IHRoaXMubWVtYmVyc1ttZW1iZXJdO1xyXG5cdFx0bWVtYmVyLmNlbnRlci54ID0gdGhpcy5jZW50ZXIueCAtIHRoaXMud2lkdGggLyAyICsgdGhpcy5tYXJnaW4gKyAodGhpcy53aWR0aCAtIHRoaXMubWFyZ2luKSAqIE1hdGgucmFuZG9tKCk7XHJcblx0XHRtZW1iZXIuY2VudGVyLnkgPSB0aGlzLmNlbnRlci55IC0gdGhpcy5oZWlnaHQgLyAyICsgdGhpcy5tYXJnaW4gKyAodGhpcy5oZWlnaHQgLSB0aGlzLm1hcmdpbikgKiBNYXRoLnJhbmRvbSgpO1xyXG5cdH1cclxufTtcclxuR3JvdXBNYW5hZ2VyLnByb3RvdHlwZS50cmFuc2ZlciA9IGZ1bmN0aW9uKG90aGVyR00sIG15TWVtYmVyKSB7XHJcblx0Ly8gdmFyIHRlc3RWYWxzID0gb3RoZXJHTS5iYWNrZ3JvdW5kLmdldFZhcnNDZW50ZXIoKTtcclxuXHQvLyBjb25zb2xlLmxvZygndHJhbnNmZXIgdG8nLCBvdGhlckdNLmJhY2tncm91bmQudHlwZSwgb3RoZXJHTS5iYWNrZ3JvdW5kLmluY29tZUxldmVsLCB0ZXN0VmFscy5jZW50ZXIueSwgdGVzdFZhbHMueSwgdGVzdFZhbHMudmlzSGVpZ2h0LCB0ZXN0VmFscy52UmF0aW8pO1xyXG5cdHZhciBpbmRleCA9IHRoaXMubWVtYmVycy5pbmRleE9mKG15TWVtYmVyKTtcclxuXHR0aGlzLm1lbWJlcnMuc3BsaWNlKGluZGV4LCAxKTtcclxuXHRvdGhlckdNLmFkZE1lbWJlcihteU1lbWJlcik7XHJcbn07XHJcbkdyb3VwTWFuYWdlci5wcm90b3R5cGUudHJhbnNmZXJQZW9wbGUgPSBmdW5jdGlvbihzb3VyY2UsIGRlc3RpbmF0aW9uLCB0UGVyc29uKSB7XHJcblx0dmFyIGluZGV4ID0gc291cmNlLm1lbWJlcnMuaW5kZXhPZih0UGVyc29uKTtcclxuXHRzb3VyY2UubWVtYmVycy5zcGxpY2UoaW5kZXgsIDEpO1xyXG5cdGRlc3RpbmF0aW9uLmFkZE1lbWJlcih0UGVyc29uKTtcclxufTtcclxuR3JvdXBNYW5hZ2VyLnByb3RvdHlwZS5hZGRNZW1iZXIgPSBmdW5jdGlvbihtZW1iZXIpIHtcclxuXHR0aGlzLm1lbWJlcnMucHVzaChtZW1iZXIpO1xyXG5cdG1lbWJlci5teU1hbmFnZXIgPSB0aGlzO1xyXG5cdG1lbWJlci5jZW50ZXIueCA9IHRoaXMuY2VudGVyLnggLSB0aGlzLndpZHRoIC8gMiArIHRoaXMubWFyZ2luICsgKHRoaXMud2lkdGggLSB0aGlzLm1hcmdpbikgKiBNYXRoLnJhbmRvbSgpO1xyXG5cdG1lbWJlci5jZW50ZXIueSA9IHRoaXMuY2VudGVyLnkgLSB0aGlzLmhlaWdodCAvIDIgKyB0aGlzLm1hcmdpbiArICh0aGlzLmhlaWdodCAtIHRoaXMubWFyZ2luKSAqIE1hdGgucmFuZG9tKCk7XHJcblx0Ly8gdmFyIHNtYWxsZXIgPSAodGhpcy53aWR0aCA8IHRoaXMuaGVpZ2h0KSA/IHRoaXMud2lkdGggOiB0aGlzLmhlaWdodDtcclxuXHQvLyB0aGlzLm1pbkRpc3QgPSBzbWFsbGVyIC8gdGhpcy5tZW1iZXJzLmxlbmd0aDtcclxuXHQvLyB0aGlzLm1pbkRpc3QgPSBzbWFsbGVyIC8gMjtcclxuXHQvLyBjb25zb2xlLmxvZyh0aGlzLm1pbkRpc3QpO1xyXG5cdC8vIGNvbnNvbGUubG9nKHRoaXMubWluRGlzdCk7XHJcbn07XHJcbkdyb3VwTWFuYWdlci5wcm90b3R5cGUuYWRkUGVyc29uID0gZnVuY3Rpb24obmV3UGVyc29uKSB7XHJcblx0aWYgKHRoaXMubWVtYmVycy5sZW5ndGggPT0gMCkge1xyXG5cdFx0Ly8gY29uc29sZS5sb2codGhpcy5jZW50ZXIpO1xyXG5cdFx0dGhpcy5hZGRNZW1iZXIobmV3IEdyb3VwKHRoaXMuZ2FtZSwgdGhpcy5jZW50ZXIueCwgdGhpcy5jZW50ZXIueSwgdGhpcy5zdGF0ZSkpO1xyXG5cdFx0Ly8gY29uc29sZS5sb2coJ25ldyBncm91cCcpO1xyXG5cdH1cclxuXHR0aGlzLm1lbWJlcnNbMF0uYWRkTWVtYmVyKG5ld1BlcnNvbik7XHJcbn07XHJcbkdyb3VwTWFuYWdlci5wcm90b3R5cGUubnVtUGVvcGxlID0gZnVuY3Rpb24oKSB7XHJcblx0dmFyIGNvdW50ID0gMDtcclxuXHRmb3IgKHZhciBtZW1iZXIgaW4gdGhpcy5tZW1iZXJzKSB7XHJcblx0XHRtZW1iZXIgPSB0aGlzLm1lbWJlcnNbbWVtYmVyXTtcclxuXHRcdGNvdW50ICs9IG1lbWJlci5udW1QZW9wbGUoKTtcclxuXHR9XHJcblx0cmV0dXJuIGNvdW50O1xyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBHcm91cE1hbmFnZXI7XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuIiwidmFyIEhvdmVyTWVudSA9IGZ1bmN0aW9uIChnYW1lLCB4LCB5LCBzdGF0ZSkge1xyXG5cdFBoYXNlci5TcHJpdGUuY2FsbCh0aGlzLCBnYW1lLCB4LCB5LCAnYm9yZGVyZWQnKTtcclxuXHRnYW1lLmFkZC5leGlzdGluZyh0aGlzKTtcclxuXHR0aGlzLnggPSB4O1xyXG5cdHRoaXMueSA9IHk7XHJcbiAgICB0aGlzLmdyb3VwU2VsZWN0ZWQgPSBudWxsO1xyXG5cdHRoaXMud2lkdGggPSAyNTY7XHJcblx0dGhpcy5oZWlnaHQgPSAxMjg7XHJcbiAgICB0aGlzLnN0YXRpY1dpZHRoID0gMjU2O1xyXG4gICAgdGhpcy5zdGF0aWNIZWlnaHQgPSAxMjg7XHJcbiAgICB0aGlzLmNoYW5nZVdpZHRoID0gMjI0O1xyXG4gICAgdGhpcy5jaGFuZ2VIZWlnaHQgPSA2NDtcclxuICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcclxuXHRcclxuXHR0aGlzLnN0YXRpY1RleHQgPSB0aGlzLmdhbWUuYWRkLmdyb3VwKCk7XHJcblx0dGhpcy5jaGFuZ2VUZXh0ID0gdGhpcy5nYW1lLmFkZC5ncm91cCgpO1xyXG4gICAgdGhpcy52aXNpYmxlID0gZmFsc2U7XHJcblxyXG4gICAgdGhpcy5jaGV2cm9uID0gdGhpcy5nYW1lLmFkZC5zcHJpdGUodGhpcy54LCB0aGlzLnksICdjaGV2cm9ucycpO1xyXG4gICAgdGhpcy5jaGV2cm9uLmFuY2hvci5zZXRUbygwLjUsIDAuNSk7XHJcbiAgICB0aGlzLmNoZXZyb24uZnJhbWUgPSAzO1xyXG4gICAgdGhpcy5jaGV2cm9uLnkgLT0gdGhpcy5oZWlnaHQ7XHJcbiAgICB0aGlzLmNoZXZyb24ueCArPSAyNTtcclxuICAgIFxyXG4gICAgLy8gdGhpcy5zdGF0ZS5pbnB1dC5hZGRNb3ZlQ2FsbGJhY2sodGhpcy5vbklucHV0TW92ZSwgdGhpcyk7XHJcblx0XHJcblx0dGhpcy5wZW9wbGUgPSB0aGlzLmdhbWUuYWRkLnRleHQoMTAsIDEwLCAnUGVvcGxlOiAwJyk7XHJcblx0dGhpcy5wZW9wbGUuZm9udCA9ICdSb2JvdG8nO1xyXG5cdHRoaXMucGVvcGxlLmZvbnRTaXplID0gMTg7XHJcblx0dGhpcy5wZW9wbGUuZmlsbCA9ICcjMDAwMDAwJztcclxuXHRcclxuXHR0aGlzLmVkdWNhdGlvbiA9IHRoaXMuZ2FtZS5hZGQudGV4dCgxMCwgMTAsICdFZHVjYXRpb246IExvdycpO1xyXG5cdHRoaXMuZWR1Y2F0aW9uLmZvbnQgPSAnUm9ib3RvJztcclxuXHR0aGlzLmVkdWNhdGlvbi5mb250U2l6ZSA9IDE4O1xyXG5cdHRoaXMuZWR1Y2F0aW9uLmZpbGwgPSAnIzAwMDAwMCc7XHJcblx0XHJcblx0dGhpcy5oYXBwaW5lc3MgPSB0aGlzLmdhbWUuYWRkLnRleHQoMTAsIDEwLCAnSGFwcGluZXNzOiAlMTAwJyk7XHJcblx0dGhpcy5oYXBwaW5lc3MuZm9udCA9ICdSb2JvdG8nO1xyXG5cdHRoaXMuaGFwcGluZXNzLmZvbnRTaXplID0gMTg7XHJcblx0dGhpcy5oYXBwaW5lc3MuZmlsbCA9ICcjMDAwMDAwJztcclxuXHRcclxuXHR0aGlzLmZhdGlndWUgPSB0aGlzLmdhbWUuYWRkLnRleHQoMTAsIDEwLCAnRmF0aWd1ZTogJTAnKTtcclxuXHR0aGlzLmZhdGlndWUuZm9udCA9ICdSb2JvdG8nO1xyXG5cdHRoaXMuZmF0aWd1ZS5mb250U2l6ZSA9IDE4O1xyXG5cdHRoaXMuZmF0aWd1ZS5maWxsID0gJyMwMDAwMDAnO1xyXG5cdFxyXG4gICAgdGhpcy5pbmNvbWUgPSB0aGlzLmdhbWUuYWRkLnRleHQoMTAsIDEwLCAnSW5jb21lOiAkMCcpO1xyXG5cdHRoaXMuaW5jb21lLmZvbnQgPSAnUm9ib3RvJztcclxuXHR0aGlzLmluY29tZS5mb250U2l6ZSA9IDE4O1xyXG5cdHRoaXMuaW5jb21lLmZpbGwgPSAnIzAwMDAwMCc7XHJcbiAgICBcclxuXHR0aGlzLnN0YXRpY1RleHQuYWRkKHRoaXMucGVvcGxlKTtcclxuXHR0aGlzLnN0YXRpY1RleHQuYWRkKHRoaXMuZWR1Y2F0aW9uKTtcclxuICAgIHRoaXMuZWR1Y2F0aW9uLnkgKz0gMjIgKiAxO1xyXG5cdHRoaXMuc3RhdGljVGV4dC5hZGQodGhpcy5oYXBwaW5lc3MpO1xyXG4gICAgdGhpcy5oYXBwaW5lc3MueSArPSAyMiAqIDI7XHJcblx0dGhpcy5zdGF0aWNUZXh0LmFkZCh0aGlzLmZhdGlndWUpO1xyXG4gICAgdGhpcy5mYXRpZ3VlLnkgKz0gMjIgKiAzO1xyXG5cdHRoaXMuc3RhdGljVGV4dC5hZGQodGhpcy5pbmNvbWUpO1xyXG4gICAgdGhpcy5pbmNvbWUueSArPSAyMiAqIDQ7XHJcbiAgICB0aGlzLnN0YXRpY1RleHQuYWRkKHRoaXMuY2hldnJvbik7XHJcbiAgICB0aGlzLnN0YXRpY1RleHQudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgdGhpcy5zdGF0aWNUZXh0LnggPSB0aGlzLng7XHJcbiAgICB0aGlzLnN0YXRpY1RleHQueSA9IHRoaXMueTtcclxuXHRcclxuXHR0aGlzLmhhcHBpbmVzc0NoYW5nZSA9IHRoaXMuZ2FtZS5hZGQudGV4dCgxMCwgMTAsICdIYXBwaW5lc3MgPScpO1xyXG5cdHRoaXMuaGFwcGluZXNzQ2hhbmdlLmZvbnQgPSAnUm9ib3RvJztcclxuXHR0aGlzLmhhcHBpbmVzc0NoYW5nZS5mb250U2l6ZSA9IDE4O1xyXG5cdHRoaXMuaGFwcGluZXNzQ2hhbmdlLmZpbGwgPSAnIzAwMDAwMCc7XHJcblx0XHJcblx0dGhpcy5pbmNvbWVDaGFuZ2UgPSB0aGlzLmdhbWUuYWRkLnRleHQoMTAsIDEwLCAnSW5jb21lID0nKTtcclxuXHR0aGlzLmluY29tZUNoYW5nZS5mb250ID0gJ1JvYm90byc7XHJcblx0dGhpcy5pbmNvbWVDaGFuZ2UuZm9udFNpemUgPSAxODtcclxuXHR0aGlzLmluY29tZUNoYW5nZS5maWxsID0gJyMwMDAwMDAnO1xyXG4gICAgXHJcbiAgICB0aGlzLmNoYW5nZVRleHQuYWRkKHRoaXMuaGFwcGluZXNzQ2hhbmdlKTtcclxuICAgIHRoaXMuY2hhbmdlVGV4dC5hZGQodGhpcy5pbmNvbWVDaGFuZ2UpO1xyXG4gICAgdGhpcy5pbmNvbWVDaGFuZ2UueSArPSAyMiAqIDE7XHJcbiAgICB0aGlzLmNoYW5nZVRleHQudmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgdGhpcy5jaGFuZ2VUZXh0LnggPSB0aGlzLng7XHJcbiAgICB0aGlzLmNoYW5nZVRleHQueSA9IHRoaXMueTtcclxufTtcclxuSG92ZXJNZW51LnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoUGhhc2VyLlNwcml0ZS5wcm90b3R5cGUpO1xyXG5Ib3Zlck1lbnUucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gSG92ZXJNZW51O1xyXG5Ib3Zlck1lbnUucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uKCkge1xyXG5cdFxyXG59O1xyXG4vL3Blb3BsZSwgZWR1Y2F0aW9uLCBoYXBwaW5lc3MsIGZhdGlndWUsIGluY29tZVxyXG5Ib3Zlck1lbnUucHJvdG90eXBlLnNob3dTdGF0aWMgPSBmdW5jdGlvbihzdGF0ZSwgeCwgeSwgb3Zlcikge1xyXG4gICAgeCAtPSB0aGlzLndpZHRoIC8gMjtcclxuICAgIHkgLT0gdGhpcy5oZWlnaHQ7XHJcblx0dGhpcy5wZW9wbGUudGV4dCA9ICdQZW9wbGU6ICcgKyBzdGF0ZS5wZW9wbGU7XHJcbiAgICB0aGlzLmVkdWNhdGlvbi50ZXh0ID0gJ0VkdWNhdGlvbjogJyArIHN0YXRlLmVkdWNhdGlvbjtcclxuICAgIHRoaXMuaGFwcGluZXNzLnRleHQgPSAnSGFwcGluZXNzOiAlJyArIHN0YXRlLmhhcHBpbmVzcztcclxuICAgIHRoaXMuZmF0aWd1ZS50ZXh0ID0gJ0ZhdGlndWU6ICUnICsgc3RhdGUuZmF0aWd1ZTtcclxuICAgIHRoaXMuaW5jb21lLnRleHQgPSAnSW5jb21lOiAkJyArIHN0YXRlLmluY29tZTtcclxuICAgIHZhciBoYXBwaW5lc3NNb2RpZmllciA9IHN0YXRlLmhhcHBpbmVzc01vZGlmaWVyO1xyXG4gICAgaWYgKGhhcHBpbmVzc01vZGlmaWVyID09IC0zKSB7XHJcbiAgICAgICAgdGhpcy5jaGV2cm9uLmZyYW1lID0gMDtcclxuICAgIH0gZWxzZSBpZiAoaGFwcGluZXNzTW9kaWZpZXIgPT0gLTIpIHtcclxuICAgICAgICB0aGlzLmNoZXZyb24uZnJhbWUgPSAxO1xyXG4gICAgfSBlbHNlIGlmIChoYXBwaW5lc3NNb2RpZmllciA9PSAtMSkge1xyXG4gICAgICAgIHRoaXMuY2hldnJvbi5mcmFtZSA9IDI7XHJcbiAgICB9IGVsc2UgaWYgKGhhcHBpbmVzc01vZGlmaWVyID09IDApIHtcclxuICAgICAgICB0aGlzLmNoZXZyb24uZnJhbWUgPSAzO1xyXG4gICAgfSBlbHNlIGlmIChoYXBwaW5lc3NNb2RpZmllciA9PSAxKSB7XHJcbiAgICAgICAgdGhpcy5jaGV2cm9uLmZyYW1lID0gNDtcclxuICAgIH0gZWxzZSBpZiAoaGFwcGluZXNzTW9kaWZpZXIgPT0gMikge1xyXG4gICAgICAgIHRoaXMuY2hldnJvbi5mcmFtZSA9IDU7XHJcbiAgICB9IGVsc2UgaWYgKGhhcHBpbmVzc01vZGlmaWVyID09IDMpIHtcclxuICAgICAgICB0aGlzLmNoZXZyb24uZnJhbWUgPSA2O1xyXG4gICAgfVxyXG4gICAgdGhpcy5zdGF0aWNUZXh0LnZpc2libGUgPSB0cnVlO1xyXG4gICAgdGhpcy52aXNpYmxlID0gdHJ1ZTtcclxuICAgIHRoaXMud2lkdGggPSB0aGlzLnN0YXRpY1dpZHRoO1xyXG4gICAgdGhpcy5oZWlnaHQgPSB0aGlzLnN0YXRpY0hlaWdodDtcclxuICAgIHRoaXMueCA9IHg7XHJcbiAgICB0aGlzLnkgPSB5O1xyXG4gICAgdGhpcy5zdGF0aWNUZXh0LnggPSB4O1xyXG4gICAgdGhpcy5zdGF0aWNUZXh0LnkgPSB5O1xyXG4gICAgdGhpcy5hZGp1c3RTdGF0aWMob3Zlcik7XHJcbn07XHJcbi8vaGFwcGluZXNzQ2hhbmdlLCBpbmNvbWVDaGFuZ2VcclxuSG92ZXJNZW51LnByb3RvdHlwZS5zaG93Q2hhbmdlID0gZnVuY3Rpb24oY2FuLCBzdGF0ZSwgeCwgeSkge1xyXG4gICAgaWYgKCFjYW4pIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblx0dGhpcy5oYXBwaW5lc3NDaGFuZ2UudGV4dCA9ICdIYXBwaW5lc3MgY2hhbmdlOiAnICsgc3RhdGUuaGFwcGluZXNzQ2hhbmdlO1xyXG4gICAgdGhpcy5pbmNvbWVDaGFuZ2UudGV4dCA9ICdJbmNvbWUgY2hhbmdlOiAnICsgc3RhdGUuaW5jb21lQ2hhbmdlO1xyXG4gICAgdGhpcy5jaGFuZ2VUZXh0LnZpc2libGUgPSB0cnVlO1xyXG4gICAgdGhpcy52aXNpYmxlID0gdHJ1ZTtcclxuICAgIHRoaXMud2lkdGggPSB0aGlzLmNoYW5nZVdpZHRoO1xyXG4gICAgdGhpcy5oZWlnaHQgPSB0aGlzLmNoYW5nZUhlaWdodDtcclxuICAgIHkgLT0gdGhpcy5oZWlnaHQ7XHJcbiAgICB0aGlzLnggPSB4O1xyXG4gICAgdGhpcy55ID0geTtcclxuICAgIHRoaXMuY2hhbmdlVGV4dC54ID0geDtcclxuICAgIHRoaXMuY2hhbmdlVGV4dC55ID0geTtcclxuICAgIHRoaXMuYWRqdXN0Q2hhbmdlKCk7XHJcbn07XHJcbkhvdmVyTWVudS5wcm90b3R5cGUuYWRqdXN0U3RhdGljID0gZnVuY3Rpb24ob3Zlcikge1xyXG4gICAgdmFyIG1heFdpZHRoID0gdGhpcy5nYW1lLndpZHRoO1xyXG4gICAgdmFyIG1heEhlaWdodCA9IHRoaXMuZ2FtZS5oZWlnaHQ7XHJcbiAgICBpZiAodGhpcy55IC0gdGhpcy5oZWlnaHQgPD0gMCkgeyAvLyBvdmVyIHRvcCBvZiBzY3JlZW5cclxuICAgICAgICB0aGlzLnkgKz0gb3ZlcjtcclxuICAgICAgICB0aGlzLnkgKz0gdGhpcy5oZWlnaHQ7XHJcbiAgICAgICAgdGhpcy5zdGF0aWNUZXh0LnkgPSB0aGlzLnk7XHJcbiAgICAgICAgdGhpcy5jaGFuZ2VUZXh0LnkgPSB0aGlzLnk7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy54IC0gdGhpcy53aWR0aCAvIDIgPCAwKSB7IC8vIG92ZXIgbGVmdCBvZiBzY3JlZW5cclxuICAgICAgICB0aGlzLnggKz0gdGhpcy53aWR0aCAvIDI7XHJcbiAgICAgICAgdGhpcy5zdGF0aWNUZXh0LnggPSB0aGlzLng7XHJcbiAgICAgICAgdGhpcy5jaGFuZ2VUZXh0LnggPSB0aGlzLng7XHJcbiAgICB9IGVsc2UgaWYgKHRoaXMueCArIHRoaXMud2lkdGggLyAyID4gbWF4V2lkdGgpIHsgLy8gb3ZlciByaWdodCBvZiBzY3JlZW5cclxuICAgICAgICB0aGlzLnggLT0gdGhpcy53aWR0aCAvIDI7XHJcbiAgICAgICAgdGhpcy5zdGF0aWNUZXh0LnggPSB0aGlzLng7XHJcbiAgICAgICAgdGhpcy5jaGFuZ2VUZXh0LnggPSB0aGlzLng7XHJcbiAgICB9XHJcbn07XHJcbkhvdmVyTWVudS5wcm90b3R5cGUuYWRqdXN0Q2hhbmdlID0gZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgbWF4V2lkdGggPSB0aGlzLmdhbWUud2lkdGg7XHJcbiAgICB2YXIgbWF4SGVpZ2h0ID0gdGhpcy5nYW1lLmhlaWdodDtcclxuICAgIGlmICh0aGlzLnkgLSB0aGlzLmhlaWdodCA8PSAwKSB7IC8vIG92ZXIgdG9wIG9mIHNjcmVlblxyXG4gICAgICAgIHRoaXMueSArPSB0aGlzLmhlaWdodDtcclxuICAgICAgICB0aGlzLnN0YXRpY1RleHQueSA9IHRoaXMueTtcclxuICAgICAgICB0aGlzLmNoYW5nZVRleHQueSA9IHRoaXMueTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLnggKyB0aGlzLndpZHRoID4gbWF4V2lkdGgpIHsgLy8gb3ZlciByaWdodCBvZiBzY3JlZW5cclxuICAgICAgICB0aGlzLnggLT0gdGhpcy53aWR0aDtcclxuICAgICAgICB0aGlzLnN0YXRpY1RleHQueCA9IHRoaXMueDtcclxuICAgICAgICB0aGlzLmNoYW5nZVRleHQueCA9IHRoaXMueDtcclxuICAgIH1cclxufTtcclxuSG92ZXJNZW51LnByb3RvdHlwZS5oaWRlID0gZnVuY3Rpb24oKSB7XHJcblx0dGhpcy5zdGF0aWNUZXh0LnZpc2libGUgPSBmYWxzZTtcclxuICAgIHRoaXMuY2hhbmdlVGV4dC52aXNpYmxlID0gZmFsc2U7XHJcbiAgICB0aGlzLnZpc2libGUgPSBmYWxzZTtcclxufTtcclxuLy8gSG92ZXJNZW51LnByb3RvdHlwZS5vbklucHV0TW92ZSA9IGZ1bmN0aW9uKCkge1xyXG4gIC8vIGNvbnNvbGUubG9nKCdtb3ZlJyk7XHJcbiAgXHJcbi8vIH07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IEhvdmVyTWVudTtcclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuIiwidmFyIFBlcnNvbiA9IGZ1bmN0aW9uIChnYW1lLCB4LCB5LCBpZCkge1xyXG5cdFBoYXNlci5TcHJpdGUuY2FsbCh0aGlzLCBnYW1lLCB4LCB5LCAnYWdlcycpO1xyXG5cdHRoaXMuZnJhbWUgPSAyO1xyXG5cdHRoaXMudmVsb2NpdHkgPSB7eDowLCB5OjB9O1xyXG5cdHRoaXMud2lkdGggPSAxMDtcclxuXHR0aGlzLmhlaWdodCA9IDEwO1xyXG5cdHRoaXMuc3BlZWQgPSAuMDU7XHJcblx0dGhpcy5pZCA9IGlkO1xyXG5cdHRoaXMuZWR1TGV2ZWwgPSBQZXJzb24uRURVTEVWRUwudW5lbXBsb3llZDtcclxuXHR0aGlzLmhhcHBpbmVzcyA9IDEwMDtcclxuICAgIHRoaXMuZmF0aWd1ZSA9IDA7XHJcbiAgICB0aGlzLmhhcHBpbmVzc01vZGlmaWVyID0gMDtcclxuICAgIHRoaXMuYWdlID0gUGVyc29uLkFHRS55b3VuZztcclxuICAgIHRoaXMudHVybkNvdW50ID0gMDtcclxuICAgIHRoaXMuYWdlVGhyZXNob2xkID0gNTtcclxufTtcclxuUGVyc29uLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoUGhhc2VyLlNwcml0ZS5wcm90b3R5cGUpO1xyXG5QZXJzb24ucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gUGVyc29uO1xyXG5cclxuUGVyc29uLkVEVUxFVkVMID0ge1xyXG5cdHVuZW1wbG95ZWQgOiAtMSxcclxuXHRsb3cgIDogMCxcclxuXHRtaWQgIDogMSxcclxuXHRoaWdoIDogMlxyXG59O1xyXG5cclxuUGVyc29uLklOQ09NRVMgPSB7XHJcblx0bG93IDogMTAsXHJcblx0bWlkIDogMjAsXHJcblx0aGlnaCA6IDMwXHJcbn07XHJcblxyXG5QZXJzb24uQUdFID0ge1xyXG5cdHlvdW5nIDogMCxcclxuXHRhZHVsdCA6IDEsXHJcblx0b2xkIDogMlxyXG59O1xyXG5cclxuUGVyc29uLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbigpIHtcclxuXHR0aGlzLnggKz0gdGhpcy52ZWxvY2l0eS54ICogdGhpcy5zcGVlZDtcclxuXHR0aGlzLnkgKz0gdGhpcy52ZWxvY2l0eS55ICogdGhpcy5zcGVlZDtcclxuXHQvL2NvbnNvbGUubG9nKHRoaXMudmVsb2NpdHkpO1xyXG59O1xyXG5cclxuUGVyc29uLnByb3RvdHlwZS5hZ2VUaWNrID0gZnVuY3Rpb24oKSB7XHJcblx0Ly8gdGhpcy50dXJuQ291bnQgKz0gMTtcclxuXHQvLyBpZiAodGhpcy50dXJuQ291bnQgPj0gdGhpcy5hZ2VUaHJlc2hvbGQpIHtcclxuXHQvLyBcdC8vIGNvbnNvbGUubG9nKCdoYXBweSBiaXJ0aGRheScpO1xyXG5cdC8vIFx0aWYgKHRoaXMuYWdlID09IDApIHtcclxuXHQvLyBcdFx0dGhpcy5hZ2UgPSBQZXJzb24uQUdFLmFkdWx0O1xyXG5cdC8vIFx0XHR0aGlzLmZyYW1lID0gMztcclxuXHQvLyBcdH0gZWxzZSBpZiAodGhpcy5hZ2UgPT0gMSkge1xyXG5cdC8vIFx0XHR0aGlzLmFnZSA9IFBlcnNvbi5BR0Uub2xkO1xyXG5cdC8vIFx0XHR0aGlzLmZyYW1lID0gMTtcclxuXHQvLyBcdH0gZWxzZSBpZiAodGhpcy5hZ2UgPT0gMikge1xyXG5cclxuXHQvLyBcdH1cclxuXHQvLyB9XHJcbn07XHJcblxyXG5QZXJzb24ucHJvdG90eXBlLmdldFRheCA9IGZ1bmN0aW9uKCkge1xyXG5cdC8vIGNvbnNvbGUubG9nKCdnZXQgdGF4JywgdGhpcy5ncm91cC5teU1hbmFnZXIuYmFja2dyb3VuZC50eXBlKTtcclxuXHRpZiAodGhpcy5ncm91cC5teU1hbmFnZXIuYmFja2dyb3VuZC50eXBlID09PSAnaG91c2UnKSB7XHJcblx0XHRpZiAodGhpcy5ncm91cC5teU1hbmFnZXIuYmFja2dyb3VuZC5pbmNvbWVMZXZlbCA9PT0gUGVyc29uLkVEVUxFVkVMLmxvdykge1xyXG5cdFx0XHQvLyBjb25zb2xlLmxvZyh0aGlzLmdyb3VwLm15TWFuYWdlci5iYWNrZ3JvdW5kLm15TWFuYWdlci5zdGF0ZS50YXhNb2QubG93KTtcclxuXHRcdFx0cmV0dXJuIC0xICogUGVyc29uLklOQ09NRVMubG93O1xyXG5cdFx0fSBlbHNlIGlmICh0aGlzLmdyb3VwLm15TWFuYWdlci5iYWNrZ3JvdW5kLmluY29tZUxldmVsID09PSBQZXJzb24uRURVTEVWRUwubWlkKSB7XHJcblx0XHRcdHJldHVybiAtMiAqIFBlcnNvbi5JTkNPTUVTLm1pZDtcclxuXHRcdH0gZWxzZSBpZiAodGhpcy5ncm91cC5teU1hbmFnZXIuYmFja2dyb3VuZC5pbmNvbWVMZXZlbCA9PT0gUGVyc29uLkVEVUxFVkVMLmhpZ2gpIHtcclxuXHRcdFx0cmV0dXJuIC0zICogUGVyc29uLklOQ09NRVMuaGlnaDtcclxuXHRcdH1cclxuXHR9IGVsc2UgaWYgKHRoaXMuZ3JvdXAubXlNYW5hZ2VyLmJhY2tncm91bmQudHlwZSA9PT0gJ3dvcmsnKSB7XHJcblx0XHRpZiAodGhpcy5ncm91cC5teU1hbmFnZXIuYmFja2dyb3VuZC5pbmNvbWVMZXZlbCA9PT0gUGVyc29uLkVEVUxFVkVMLmxvdykge1xyXG5cdFx0XHR2YXIgb3ZlcmxvYWRNdWx0ID0gMTtcclxuXHRcdFx0aWYgKCh0aGlzLmdyb3VwLm15TWFuYWdlci5iYWNrZ3JvdW5kLm15TWFuYWdlci5iZ0FycmF5WzBdLmdyb3VwX21hbmFnZXIubnVtUGVvcGxlKCkgLyB0aGlzLmdyb3VwLm15TWFuYWdlci5iYWNrZ3JvdW5kLm15TWFuYWdlci5udW1QZW9wbGUoKSkgPiAuNSlcclxuXHRcdFx0XHRvdmVybG9hZE11bHQgPSAuMjU7XHJcblx0XHRcdHJldHVybiBvdmVybG9hZE11bHQgKiAoUGVyc29uLklOQ09NRVMubG93ICogdGhpcy5ncm91cC5teU1hbmFnZXIuYmFja2dyb3VuZC5teU1hbmFnZXIuc3RhdGUudGF4TW9kLmxvdyk7XHJcblx0XHR9IGVsc2UgaWYgKHRoaXMuZ3JvdXAubXlNYW5hZ2VyLmJhY2tncm91bmQuaW5jb21lTGV2ZWwgPT09IFBlcnNvbi5FRFVMRVZFTC5taWQpIHtcclxuXHRcdFx0dmFyIG92ZXJsb2FkTXVsdCA9IDE7XHJcblx0XHRcdGlmICgodGhpcy5ncm91cC5teU1hbmFnZXIuYmFja2dyb3VuZC5teU1hbmFnZXIuYmdBcnJheVsxXS5ncm91cF9tYW5hZ2VyLm51bVBlb3BsZSgpIC8gdGhpcy5ncm91cC5teU1hbmFnZXIuYmFja2dyb3VuZC5teU1hbmFnZXIubnVtUGVvcGxlKCkpID4gLjUpXHJcblx0XHRcdFx0b3ZlcmxvYWRNdWx0ID0gLjI1O1xyXG5cdFx0XHRyZXR1cm4gb3ZlcmxvYWRNdWx0ICogKFBlcnNvbi5JTkNPTUVTLm1pZCAqIHRoaXMuZ3JvdXAubXlNYW5hZ2VyLmJhY2tncm91bmQubXlNYW5hZ2VyLnN0YXRlLnRheE1vZC5taWQpO1xyXG5cdFx0fSBlbHNlIGlmICh0aGlzLmdyb3VwLm15TWFuYWdlci5iYWNrZ3JvdW5kLmluY29tZUxldmVsID09PSBQZXJzb24uRURVTEVWRUwuaGlnaCkge1xyXG5cdFx0XHR2YXIgb3ZlcmxvYWRNdWx0ID0gMTtcclxuXHRcdFx0aWYgKCh0aGlzLmdyb3VwLm15TWFuYWdlci5iYWNrZ3JvdW5kLm15TWFuYWdlci5iZ0FycmF5WzJdLmdyb3VwX21hbmFnZXIubnVtUGVvcGxlKCkgLyB0aGlzLmdyb3VwLm15TWFuYWdlci5iYWNrZ3JvdW5kLm15TWFuYWdlci5udW1QZW9wbGUoKSkgPiAuNSlcclxuXHRcdFx0XHRvdmVybG9hZE11bHQgPSAuMjU7XHJcblx0XHRcdHJldHVybiBvdmVybG9hZE11bHQgKiAoUGVyc29uLklOQ09NRVMuaGlnaCAqIHRoaXMuZ3JvdXAubXlNYW5hZ2VyLmJhY2tncm91bmQubXlNYW5hZ2VyLnN0YXRlLnRheE1vZC5oaWdoKTtcclxuXHRcdH1cclxuXHR9XHJcblx0cmV0dXJuIDA7XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFBlcnNvbjsiLCJ2YXIgUGxheWVyID0gZnVuY3Rpb24gKGdhbWUsIHgsIHkpIHtcclxuICAgIFBoYXNlci5TcHJpdGUuY2FsbCh0aGlzLCBnYW1lLCB4LCB5LCAndGVzdHNwcml0ZScpO1xyXG4gICAgZ2FtZS5hZGQuZXhpc3RpbmcodGhpcyk7XHJcblx0dGhpcy5zcGVlZCA9IDAuMTtcclxufVxyXG5cclxuUGxheWVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoUGhhc2VyLlNwcml0ZS5wcm90b3R5cGUpO1xyXG5QbGF5ZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gUGxheWVyO1xyXG5cclxuLyoqXHJcbiAqIEF1dG9tYXRpY2FsbHkgY2FsbGVkIGJ5IFdvcmxkLnVwZGF0ZVxyXG4gKi9cclxuUGxheWVyLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbigpIHtcclxuXHQvL3RoaXMueCArPSB0aGlzLnZlbG9jaXR5O1xyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBQbGF5ZXI7XHJcbiIsInZhciBQcm9ncmVzc0JhciA9IHJlcXVpcmUoJy4vUHJvZ3Jlc3NCYXInKTtcclxuXHJcbnZhciBVSUJ1aWxkZXIgPSBmdW5jdGlvbihzZXRHYW1lU3RhdGUpIHtcclxuXHQvL0Vuc3VyZSB0aGF0IGNhbm5vdCBjcmVhdGUgbXVsdGlwbGUgaW5zdGFuY2VzIG9mIHRoaXMgY2xhc3NcclxuXHRpZihVSUJ1aWxkZXIucHJvdG90eXBlLmV4aXN0cykge1xyXG5cdFx0cmV0dXJuIFVJQnVpbGRlci5wcm90b3R5cGUuZXhpc3RpbmdSZWZlcmVuY2U7XHJcblx0fVxyXG5cdFxyXG5cdHRoaXMuZ2FtZVN0YXRlID0gc2V0R2FtZVN0YXRlO1xyXG5cdHRoaXMucmVuZGVyYWJsZXMgPSBbXTtcclxuXHQvL0NyZWF0ZSBhbmQgc3RvcmUgYSBncmFwaGljcyBvYmplY3QgKHVzZWQgZm9yIHN0dWZmIGxpa2UgZHJhd2luZyByZWN0YW5nbGVzKVxyXG5cdFVJQnVpbGRlci5wcm90b3R5cGUuZXhpc3RzID0gdHJ1ZTtcclxuXHRVSUJ1aWxkZXIucHJvdG90eXBlLmV4aXN0aW5nUmVmZXJlbmNlID0gdGhpcztcclxufTtcclxuXHJcblVJQnVpbGRlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBVSUJ1aWxkZXI7XHJcbi8vVGhlc2UgdmFyJ3MgaGVscCBjcmVhdGUgdGhlIHNpbmdsZXRvbiBmdW5jdGlvbmFsaXR5XHJcblVJQnVpbGRlci5wcm90b3R5cGUuZXhpc3RzID0gZmFsc2U7XHJcblVJQnVpbGRlci5wcm90b3R5cGUuZXhpc3RpbmdSZWZlcmVuY2UgPSBudWxsO1xyXG5cclxuLy9Vc2UgdGhpcyBmdW5jdGlvbiB0byBjcmVhdGUgYSBwcm9ncmVzcyBiYXJcclxuLy9Vc2FnZTogdHlwZTogY2FuIGJlIFwiZ3Jvd2luZ1wiIG9yIFwic2hyaW5raW5nXCIsIHRoaXMgd2lsbCBlZmZlY3QgaWYgYmFyIHN0YXJ0cyBhdCAwIGFuZCBnb2VzIHVwIG9yIHZpcyB2ZXJzYVxyXG4vL1x0XHQgbWF4VmFsdWU6IHNldHMgdGhlIG1heCB2YWx1ZSBvZiB0aGUgcHJvZ3Jlc3MgYmFyLCBpLmUuIHVzaW5nIDEwMCBjcmVhdGVzIGEgYmFyIGZyb20gMCB0byAxMDBcclxuLy9cdFx0IHgseTogc2V0cyBsb2NhdGlvblxyXG4vL1x0XHQgRE9OJ1QgRk9SR0VUIHRvIG92ZXJ3cml0ZSB0aGUgb25FdmVudCgpIGZ1bmN0aW9uIGZvciB0aGUgcHJvZ3Jlc3MgYmFyIGFmdGVyIGNyZWF0aW5nIGl0XHJcbi8vXHRcdFx0LW9uRXZlbnQoKSBpcyBhdXRvbWF0aWNhbGx5IGNhbGxlZCB3aGVuIGJhciBmaWxscy9zaHJpbmtzIHBhc3QgbGltaXQgKGRlcGVuZGluZyBvbiBiYXIgdHlwZSlcclxuVUlCdWlsZGVyLnByb3RvdHlwZS5idWlsZFByb2dyZXNzQmFyID0gZnVuY3Rpb24odHlwZSwgeCwgeSwgd2lkdGgsIGhlaWdodCwgbWF4VmFsdWUpIHtcclxuXHQvL2NyZWF0ZSBhbmQgZm9ybWF0IG5ldyBwcm9nIGJhclxyXG5cdHZhciBncmFwaGljcyA9IHRoaXMuZ2FtZVN0YXRlLmdhbWUuYWRkLmdyYXBoaWNzKDAsMCk7XHJcblx0dmFyIG5ld1Byb2dCYXIgPSBuZXcgUHJvZ3Jlc3NCYXIodHlwZSwgbWF4VmFsdWUsIGdyYXBoaWNzLCB0aGlzLnJlbmRlcmFibGVzKTtcclxuXHRuZXdQcm9nQmFyLnNldExvY2F0aW9uKHgseSk7XHJcblx0bmV3UHJvZ0Jhci5zZXRTaXplKHdpZHRoLCBoZWlnaHQpO1xyXG5cdC8vc3Vic2NyaWJlIHRvICdyZW5kZXJhYmxlcycgc28gdGhhdCByZW5kZXIoKSBpcyBjYWxsZWQgYXV0b21hdGljYWxseVxyXG5cdC8vIHRoaXMucmVuZGVyYWJsZXMuc3Vic2NyaWJlKG5ld1Byb2dCYXIpO1xyXG5cdHRoaXMucmVuZGVyYWJsZXMucHVzaChuZXdQcm9nQmFyKTtcclxuXHRyZXR1cm4gbmV3UHJvZ0JhcjtcclxufTtcclxuVUlCdWlsZGVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbigpIHtcclxuXHRmb3IgKHJlbmRlcmFibGUgaW4gdGhpcy5yZW5kZXJhYmxlcykge1xyXG5cdFx0dGhpcy5yZW5kZXJhYmxlc1tyZW5kZXJhYmxlXS5yZW5kZXIoKTtcclxuXHR9XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFVJQnVpbGRlcjsiLCIndXNlIHN0cmljdCc7XHJcblxyXG52YXIgZ2FtZSA9IG5ldyBQaGFzZXIuR2FtZSg4MDAsIDYwMCwgUGhhc2VyLkFVVE8sICctZ2FtZScpO1xyXG5cclxud2luZG93LlV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xyXG53aW5kb3cucGxheWVyU3RhdGUgPSB7XHJcbiAgICBjdXJyZW50TGV2ZWw6ICdHYW1lJ1xyXG59O1xyXG5cclxuXHJcbmdhbWUuc3RhdGUuYWRkKCdCb290JywgcmVxdWlyZSgnLi9zdGF0ZXMvYm9vdCcpKTtcclxuZ2FtZS5zdGF0ZS5hZGQoJ1NwbGFzaCcsIHJlcXVpcmUoJy4vc3RhdGVzL3NwbGFzaCcpKTtcclxuZ2FtZS5zdGF0ZS5hZGQoJ1ByZWxvYWRlcicsIHJlcXVpcmUoJy4vc3RhdGVzL3ByZWxvYWRlcicpKTtcclxuZ2FtZS5zdGF0ZS5hZGQoJ01lbnUnLCByZXF1aXJlKCcuL3N0YXRlcy9tZW51JykpO1xyXG5nYW1lLnN0YXRlLmFkZCgnR2FtZScsIHJlcXVpcmUoJy4vc3RhdGVzL2dhbWUnKSk7XHJcbmdhbWUuc3RhdGUuYWRkKCdHYW1lX092ZXInLCByZXF1aXJlKCcuL3N0YXRlcy9nYW1lX292ZXInKSk7XHJcblxyXG5nYW1lLnN0YXRlLnN0YXJ0KCdCb290Jyk7XHJcblxyXG4vL2dhbWUuc3RhZ2UuYmFja2dyb3VuZENvbG9yID0gXCIjZmZmZmZmXCI7XHJcbiIsInZhciBCb290ID0gZnVuY3Rpb24gKCkge307XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IEJvb3Q7XHJcblxyXG5Cb290LnByb3RvdHlwZSA9IHtcclxuXHJcbiAgcHJlbG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgdGhpcy5sb2FkLmltYWdlKCdwcmVsb2FkZXInLCAnYXNzZXRzL3ByZWxvYWRlci5naWYnKTtcclxuICB9LFxyXG5cclxuICBjcmVhdGU6IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMuZ2FtZS5pbnB1dC5tYXhQb2ludGVycyA9IDE7XHJcblxyXG4gICAgaWYgKHRoaXMuZ2FtZS5kZXZpY2UuZGVza3RvcCkge1xyXG4gICAgICB0aGlzLmdhbWUuc3RhZ2Uuc2NhbGUucGFnZUFsaWduSG9yaXpvbnRhbGx5ID0gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuZ2FtZS5zY2FsZS5zY2FsZU1vZGUgPSBQaGFzZXIuU2NhbGVNYW5hZ2VyLlNIT1dfQUxMO1xyXG4gICAgICB0aGlzLmdhbWUuc2NhbGUubWluV2lkdGggPSAgNDgwO1xyXG4gICAgICB0aGlzLmdhbWUuc2NhbGUubWluSGVpZ2h0ID0gMjYwO1xyXG4gICAgICB0aGlzLmdhbWUuc2NhbGUubWF4V2lkdGggPSA2NDA7XHJcbiAgICAgIHRoaXMuZ2FtZS5zY2FsZS5tYXhIZWlnaHQgPSA0ODA7XHJcbiAgICAgIHRoaXMuZ2FtZS5zY2FsZS5mb3JjZUxhbmRzY2FwZSA9IHRydWU7XHJcbiAgICAgIHRoaXMuZ2FtZS5zY2FsZS5wYWdlQWxpZ25Ib3Jpem9udGFsbHkgPSB0cnVlO1xyXG4gICAgICB0aGlzLmdhbWUuc2NhbGUuc2V0U2NyZWVuU2l6ZSh0cnVlKTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmdhbWUuc3RhdGUuc3RhcnQoJ1ByZWxvYWRlcicpO1xyXG4gIH1cclxufTtcclxuIiwidmFyIFBsYXllciA9IHJlcXVpcmUoJy4uL2VudGl0aWVzL3BsYXllcicpO1xyXG52YXIgQmFja2dyb3VuZF9NYW5hZ2VyID0gcmVxdWlyZSgnLi4vZW50aXRpZXMvYmFja2dyb3VuZF9tYW5hZ2VyJyk7XHJcbnZhciBQZXJzb24gPSByZXF1aXJlKCcuLi9lbnRpdGllcy9wZXJzb24nKTtcclxudmFyIEdyb3VwID0gcmVxdWlyZSgnLi4vZW50aXRpZXMvZ3JvdXAnKTtcclxudmFyIEdyb3VwTWFuYWdlciA9IHJlcXVpcmUoJy4uL2VudGl0aWVzL2dyb3VwTWFuYWdlcicpO1xyXG52YXIgVUlCdWlsZGVyID0gcmVxdWlyZSgnLi4vZW50aXRpZXMvdWlCdWlsZGVyJyk7XHJcbnZhciBIb3Zlck1lbnUgPSByZXF1aXJlKCcuLi9lbnRpdGllcy9ob3Zlck1lbnUnKTtcclxuXHJcbnZhciBHYW1lID0gZnVuY3Rpb24gKCkge1xyXG4gIHRoaXMudGVzdGVudGl0eSA9IG51bGw7XHJcbiAgLy90aGlzLmZsb2NrcyA9IFtdO1xyXG4gIHRoaXMuYmdfbWcgPSBudWxsO1xyXG4gIC8vIHRoaXMuc2VsZWN0ZWRHcm91cCA9IG51bGw7XHJcbiAgdGhpcy5tb25leSA9IG51bGw7XHJcbiAgdGhpcy5tb25leVZhbCA9IDA7XHJcbiAgdGhpcy5jdXJNb25leSA9IDIwMDA7XHJcbiAgdGhpcy5tb25leVVwZGF0ZURlbGF5ID0gMC4wMDE7XHJcbiAgdGhpcy5tb25leUluY3JlbWVudGluZyA9IGZhbHNlO1xyXG4gIHRoaXMuaGFwcGluZXNzVmFsID0gMDtcclxuICB0aGlzLmN1ckhhcHBpbmVzcyA9IDA7XHJcbiAgdGhpcy5oYXBwaW5lc3NVcGRhdGVEZWxheSA9IDAuMDAxO1xyXG4gIHRoaXMuaGFwcGluZXNzSW5jcmVtZW50aW5nID0gZmFsc2U7XHJcbiAgdGhpcy50YXhUaW1lID0gNTtcclxuICB0aGlzLnRheE1vZCA9IHtsb3c6IDEsIG1pZDogMSwgaGlnaDogMX07XHJcbiAgdGhpcy5taW5IYXBwaW5lc3MgPSA1MDtcclxuXHR0aGlzLmZhdGlndWVQZXJUaWNrID0gMTA7XHJcblx0Ly8gdGhpcy5tb25leUNoYW5nZUZhZGluZyA9IGZhbHNlO1xyXG5cdHRoaXMubW9uZXlDaGFuZ2VGYWRlRGVsYXkgPSAwLjAxO1xyXG5cdHRoaXMubW9uZXlDaGFuZ2VGYWRlUmF0ZSA9IDAuMDI1O1xyXG5cdHRoaXMubW9uZXlDaGFuZ2VIb2xkRGVsYXkgPSAxO1xyXG5cdHRoaXMubWlncmFudERlbGF5ID0gNTtcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gR2FtZTtcclxuXHJcbkdhbWUucHJvdG90eXBlID0ge1xyXG5cclxuICBjcmVhdGU6IGZ1bmN0aW9uICgpIHtcclxuICBcdC8vIGNvbnNvbGUubG9nKCdmb281Jyk7XHJcblx0ICAvLyBjb25zb2xlLmxvZyh0aGlzKTtcclxuICAgIHRoaXMuZ2FtZS5zdGFnZS5iYWNrZ3JvdW5kQ29sb3IgPSBcIiNlZGVkZWRcIjtcclxuICAgIHRoaXMubWVudV9iZyA9IHRoaXMuZ2FtZS5hZGQuaW1hZ2UoMCwgMCwgJ21lbnVfYmcnKTsgIFxyXG4gICAgdmFyIHggPSAodGhpcy5nYW1lLndpZHRoIC8gMikgLSAxMDA7XHJcbiAgICB2YXIgeSA9ICh0aGlzLmdhbWUuaGVpZ2h0IC8gMikgLSA1MDtcclxuXHJcbiAgICB0aGlzLmJnX21nID0gbmV3IEJhY2tncm91bmRfTWFuYWdlcih0aGlzLmdhbWUsIHRoaXMpO1xyXG5cdFxyXG4gICAgdGhpcy5pbnB1dC5vbkRvd24uYWRkKHRoaXMub25JbnB1dERvd24sIHRoaXMpO1xyXG5cdFxyXG5cdHRoaXMubW9uZXkgPSB0aGlzLmdhbWUuYWRkLnRleHQoMjAsIDE1LCAnJDAnKTtcclxuXHR0aGlzLm1vbmV5LmZvbnQgPSBcIlJvYm90b1wiO1xyXG5cdHRoaXMubW9uZXkuZm9udFNpemUgPSAyNDtcclxuXHR0aGlzLm1vbmV5LmZpbGwgPSAnIzAwMDAwMCc7XHJcblx0dGhpcy5tb25leS50ZXh0ID0gJyQwJztcclxuXHJcblx0dGhpcy5tb25leUNoYW5nZSA9IHRoaXMuZ2FtZS5hZGQudGV4dCgxMjAsIDE1LCAnJDAnKTtcclxuXHR0aGlzLm1vbmV5Q2hhbmdlLmZvbnQgPSBcIlJvYm90b1wiO1xyXG5cdHRoaXMubW9uZXlDaGFuZ2UuZm9udFNpemUgPSAyNDtcclxuXHR0aGlzLm1vbmV5Q2hhbmdlLmZpbGwgPSAnIzAwMDAwMCc7XHJcblx0dGhpcy5tb25leUNoYW5nZS50ZXh0ID0gJyskMCc7XHJcblx0dGhpcy5tb25leUNoYW5nZS5hbHBoYSA9IDA7XHJcblxyXG5cdHRoaXMudWliID0gbmV3IFVJQnVpbGRlcih0aGlzKTtcclxuXHR0aGlzLmJhciA9IHRoaXMudWliLmJ1aWxkUHJvZ3Jlc3NCYXIoXCJncm93aW5nXCIsIHRoaXMuZ2FtZS53aWR0aCAvIDIsIDI1LCAzMDAsIDE2LCAxMDAgLSB0aGlzLm1pbkhhcHBpbmVzcyk7XHJcblx0Ly90aGlzLmJhci5hZGRWYWx1ZSgxMDApO1xyXG5cdHRoaXMuaGFwcHkgPSB0aGlzLmdhbWUuYWRkLnNwcml0ZSh0aGlzLmdhbWUud2lkdGggKiAuMjksIDI1LCAnaGFwcHlmYWNlJyk7XHJcblx0dGhpcy5oYXBweS5hbmNob3Iuc2V0VG8oMC41LCAwLjUpO1xyXG5cclxuICAvLyBUYXggYnV0dG9uc1xyXG4gIHRoaXMucmVkVGF4TG93ICAgPSB0aGlzLmdhbWUuYWRkLmJ1dHRvbih0aGlzLmJnX21nLmJnQXJyYXlbMF0uZ2V0VmFyc0NlbnRlcigpLmNlbnRlci54IC0gMTUsIDc1LCAndGF4UmVkdWNlJywgdGhpcy5kZWNUYXhMb3csIHRoaXMpO1xyXG4gIHRoaXMudGV4dFRheExvdyAgPSB0aGlzLmdhbWUuYWRkLnRleHQodGhpcy5iZ19tZy5iZ0FycmF5WzBdLmdldFZhcnMoKVswXSwgNzgsICckJCcpO1xyXG4gIHRoaXMudGV4dFRheExvdy5mb250ID0gXCJSb2JvdG9cIjtcclxuICB0aGlzLnRleHRUYXhMb3cuZm9udFNpemUgPSAxODtcclxuICB0aGlzLmFkZFRheExvdyAgID0gdGhpcy5nYW1lLmFkZC5idXR0b24odGhpcy5iZ19tZy5iZ0FycmF5WzBdLmdldFZhcnNDZW50ZXIoKS5jZW50ZXIueCArIDE1LCA3NSwgJ3RheEFkZCcsIHRoaXMuaW5jVGF4TG93LCB0aGlzKTtcclxuICB0aGlzLnJlZFRheExvdy5hbmNob3Iuc2V0VG8oLjUsIC41KTtcclxuICB0aGlzLnRleHRUYXhMb3cuYW5jaG9yLnNldFRvKDAsIC41KTtcclxuICB0aGlzLmFkZFRheExvdy5hbmNob3Iuc2V0VG8oLjUsIC41KTtcclxuICB0aGlzLnJlZFRheE1pZCAgID0gdGhpcy5nYW1lLmFkZC5idXR0b24odGhpcy5iZ19tZy5iZ0FycmF5WzFdLmdldFZhcnNDZW50ZXIoKS5jZW50ZXIueCAtIDE1LCA3NSwgJ3RheFJlZHVjZScsIHRoaXMuZGVjVGF4TWlkLCB0aGlzKTtcclxuICB0aGlzLnRleHRUYXhNaWQgID0gdGhpcy5nYW1lLmFkZC50ZXh0KHRoaXMuYmdfbWcuYmdBcnJheVsxXS5nZXRWYXJzQ2VudGVyKCkuY2VudGVyLngsIDc4LCAnJCQnKTtcclxuICB0aGlzLnRleHRUYXhNaWQuZm9udCA9IFwiUm9ib3RvXCI7XHJcbiAgdGhpcy50ZXh0VGF4TWlkLmZvbnRTaXplID0gMTg7XHJcbiAgdGhpcy5hZGRUYXhNaWQgICA9IHRoaXMuZ2FtZS5hZGQuYnV0dG9uKHRoaXMuYmdfbWcuYmdBcnJheVsxXS5nZXRWYXJzQ2VudGVyKCkuY2VudGVyLnggKyAxNSwgNzUsICd0YXhBZGQnLCB0aGlzLmluY1RheE1pZCwgdGhpcyk7XHJcbiAgdGhpcy5yZWRUYXhNaWQuYW5jaG9yLnNldFRvKC41LCAuNSk7XHJcbiAgdGhpcy50ZXh0VGF4TWlkLmFuY2hvci5zZXRUbygwLCAuNSk7XHJcbiAgdGhpcy5hZGRUYXhNaWQuYW5jaG9yLnNldFRvKC41LCAuNSk7XHJcbiAgdGhpcy5yZWRUYXhIaWdoICA9IHRoaXMuZ2FtZS5hZGQuYnV0dG9uKHRoaXMuYmdfbWcuYmdBcnJheVsyXS5nZXRWYXJzQ2VudGVyKCkuY2VudGVyLnggLSAxNSwgNzUsICd0YXhSZWR1Y2UnLCB0aGlzLmRlY1RheEhpZ2gsIHRoaXMpO1xyXG4gIHRoaXMudGV4dFRheEhpZ2ggPSB0aGlzLmdhbWUuYWRkLnRleHQodGhpcy5iZ19tZy5iZ0FycmF5WzFdLmdldFZhcnNDZW50ZXIoKS5jZW50ZXIueCwgNzgsICckJCcpO1xyXG4gIHRoaXMudGV4dFRheEhpZ2guZm9udCA9IFwiUm9ib3RvXCI7XHJcbiAgdGhpcy50ZXh0VGF4SGlnaC5mb250U2l6ZSA9IDE4O1xyXG4gIHRoaXMuYWRkVGF4SGlnaCAgPSB0aGlzLmdhbWUuYWRkLmJ1dHRvbih0aGlzLmJnX21nLmJnQXJyYXlbMl0uZ2V0VmFyc0NlbnRlcigpLmNlbnRlci54ICsgMTUsIDc1LCAndGF4QWRkJywgdGhpcy5pbmNUYXhIaWdoLCB0aGlzKTtcclxuICB0aGlzLnJlZFRheEhpZ2guYW5jaG9yLnNldFRvKC41LCAuNSk7XHJcbiAgdGhpcy50ZXh0VGF4SGlnaC5hbmNob3Iuc2V0VG8oMCwgLjUpO1xyXG4gIHRoaXMuYWRkVGF4SGlnaC5hbmNob3Iuc2V0VG8oLjUsIC41KTtcclxuXHJcblx0dGhpcy5nYW1lLnRpbWUuZXZlbnRzLmFkZChQaGFzZXIuVGltZXIuU0VDT05EICogdGhpcy50YXhUaW1lLCB0aGlzLmNvbGxlY3RUYXgsIHRoaXMpO1xyXG4gICAgdGhpcy5obSA9IG5ldyBIb3Zlck1lbnUodGhpcy5nYW1lLCAyMDAsIDIwMCwgdGhpcyk7XHJcbiAgICAvLyB0aGlzLmhtLmFuY2hvci5zZXRUbygwLjUsIDEpO1xyXG5cdC8vIHRoaXMuaG0udmlzaWJsZSA9IGZhbHNlO1xyXG5cdHRoaXMuZ2FtZS50aW1lLmV2ZW50cy5hZGQoUGhhc2VyLlRpbWVyLlNFQ09ORCAqIHRoaXMubW9uZXlDaGFuZ2VGYWRlRGVsYXksIHRoaXMuZmFkZU1vbmV5Q2hhbmdlLCB0aGlzKTtcclxuXHR0aGlzLmdhbWUudGltZS5ldmVudHMuYWRkKFBoYXNlci5UaW1lci5TRUNPTkQgKiB0aGlzLm1pZ3JhbnREZWxheSwgdGhpcy5zcGF3bk1pZ3JhbnQsIHRoaXMpO1xyXG4gIH0sXHJcblxyXG4gIHVwZGF0ZTogZnVuY3Rpb24gKCkge1xyXG5cdHRoaXMuYmdfbWcudXBkYXRlKCk7XHJcblx0Ly90aGlzLmdtLnVwZGF0ZSgpO1xyXG5cdHRoaXMudWliLnJlbmRlcigpO1xyXG5cdHZhciBoYXBwaW5lc3MgPSAwO1xyXG5cdCAgZm9yICh2YXIgYmcgaW4gdGhpcy5iZ19tZy5iZ0FycmF5KSB7XHJcblx0XHQgIGZvciAodmFyIGdyb3VwIGluIHRoaXMuYmdfbWcuYmdBcnJheVtiZ10uZ3JvdXBfbWFuYWdlci5tZW1iZXJzKSB7XHJcblx0XHRcdCAgZm9yICh2YXIgcGVyc29uIGluIHRoaXMuYmdfbWcuYmdBcnJheVtiZ10uZ3JvdXBfbWFuYWdlci5tZW1iZXJzW2dyb3VwXS5tZW1iZXJzKSB7XHJcblx0XHRcdFx0ICBoYXBwaW5lc3MgKz0gdGhpcy5iZ19tZy5iZ0FycmF5W2JnXS5ncm91cF9tYW5hZ2VyLm1lbWJlcnNbZ3JvdXBdLm1lbWJlcnNbcGVyc29uXS5oYXBwaW5lc3M7XHJcblx0XHRcdCAgfVxyXG5cdFx0ICB9XHJcblx0ICB9XHJcblx0ICBoYXBwaW5lc3MgLz0gdGhpcy5iZ19tZy5udW1QZW9wbGUoKTtcclxuXHQgIHRoaXMuc2V0SGFwcGluZXNzKGhhcHBpbmVzcyk7XHJcblx0ICBoYXBwaW5lc3MgLT0gdGhpcy5taW5IYXBwaW5lc3M7XHJcblx0ICAvLyBjb25zb2xlLmxvZyhoYXBwaW5lc3MpO1xyXG5cdCAgLy8gY29uc29sZS5sb2coaGFwcGluZXNzKTtcclxuICAgIHRoaXMucmVkVGF4TG93LnggICA9IHRoaXMuYmdfbWcuYmdBcnJheVswXS5nZXRWYXJzQ2VudGVyKCkuY2VudGVyLnggLSAzMDtcclxuICAgIHRoaXMudGV4dFRheExvdy54ICA9IHRoaXMuYmdfbWcuYmdBcnJheVswXS5nZXRWYXJzQ2VudGVyKCkuY2VudGVyLnggLSAxNTtcclxuICAgIHRoaXMuYWRkVGF4TG93LnggICA9IHRoaXMuYmdfbWcuYmdBcnJheVswXS5nZXRWYXJzQ2VudGVyKCkuY2VudGVyLnggKyAzMDtcclxuICAgIHRoaXMucmVkVGF4TWlkLnggICA9IHRoaXMuYmdfbWcuYmdBcnJheVsxXS5nZXRWYXJzQ2VudGVyKCkuY2VudGVyLnggLSAzMDtcclxuICAgIHRoaXMudGV4dFRheE1pZC54ICA9IHRoaXMuYmdfbWcuYmdBcnJheVsxXS5nZXRWYXJzQ2VudGVyKCkuY2VudGVyLnggLSAxNTtcclxuICAgIHRoaXMuYWRkVGF4TWlkLnggICA9IHRoaXMuYmdfbWcuYmdBcnJheVsxXS5nZXRWYXJzQ2VudGVyKCkuY2VudGVyLnggKyAzMDtcclxuICAgIHRoaXMucmVkVGF4SGlnaC54ICA9IHRoaXMuYmdfbWcuYmdBcnJheVsyXS5nZXRWYXJzQ2VudGVyKCkuY2VudGVyLnggLSAzMDtcclxuICAgIHRoaXMudGV4dFRheEhpZ2gueCA9IHRoaXMuYmdfbWcuYmdBcnJheVsyXS5nZXRWYXJzQ2VudGVyKCkuY2VudGVyLnggLSAxNTtcclxuICAgIHRoaXMuYWRkVGF4SGlnaC54ICA9IHRoaXMuYmdfbWcuYmdBcnJheVsyXS5nZXRWYXJzQ2VudGVyKCkuY2VudGVyLnggKyAzMDtcclxuXHJcbiAgICBpZiAodGhpcy5jdXJIYXBwaW5lc3MgPCB0aGlzLm1pbkhhcHBpbmVzcykge1xyXG4gICAgICB0aGlzLmdhbWUuc3RhdGUuc3RhcnQoJ0dhbWVfT3ZlcicpO1xyXG4gIFx0fVxyXG4gIFx0Ly8gY29uc29sZS5sb2codGhpcy5tb25leUNoYW5nZS5hbHBoYSk7XHJcbiAgfSxcclxuXHJcbiAgb25JbnB1dERvd246IGZ1bmN0aW9uICgpIHtcclxuXHQgLy8gY29uc29sZS5sb2codGhpcy5nYW1lLndpZHRoLCB0aGlzLmdhbWUuaGVpZ2h0KTtcclxuICB9LFxyXG4gIHNwYXduTWlncmFudDogZnVuY3Rpb24gKCkge1xyXG4gIFx0Ly8gY29uc29sZS5sb2coJ3NwYXduJyk7XHJcbiAgXHQvLyB2YXIgbmV3TWlncmFudCA9IG5ldyBQZXJzb24odGhpcy5nYW1lLCB0aGlzLmdhbWUud2lkdGggLyAyLCB0aGlzLmdhbWUuaGVpZ2h0ICsgMTUpO1xyXG4gIFx0dmFyIG5ld01pZ3JhbnQgPSBuZXcgUGVyc29uKHRoaXMuZ2FtZSwgdGhpcy5nYW1lLndpZHRoIC8gMiArIE1hdGgucmFuZG9tKCkgKiA4MDAgLSA0MDAsIHRoaXMuZ2FtZS5oZWlnaHQgKyAxNSk7XHJcbiAgXHR0aGlzLmdhbWUuYWRkLmV4aXN0aW5nKG5ld01pZ3JhbnQpO1xyXG4gIFx0dmFyIGJnID0gdGhpcy5iZ19tZy5iZ0FycmF5WzZdO1xyXG4gIFx0YmcuZ3JvdXBfbWFuYWdlci5hZGRQZXJzb24obmV3TWlncmFudCk7XHJcbiAgXHR0aGlzLmdhbWUudGltZS5ldmVudHMuYWRkKFBoYXNlci5UaW1lci5TRUNPTkQgKiB0aGlzLm1pZ3JhbnREZWxheSwgdGhpcy5zcGF3bk1pZ3JhbnQsIHRoaXMpO1xyXG4gIFx0Ly8gY29uc29sZS5sb2coYmcpXHJcbiAgfSxcclxuICBjb2xsZWN0VGF4OiBmdW5jdGlvbiAoKSB7XHJcblx0ICAvLyBjb25zb2xlLmxvZygnY29sbGVjdCB0YXgnKTtcclxuXHQgIHZhciB0YXhlcyA9IDA7XHJcblx0ICBmb3IgKHZhciBiZyBpbiB0aGlzLmJnX21nLmJnQXJyYXkpIHtcclxuXHRcdCAgZm9yICh2YXIgZ3JvdXAgaW4gdGhpcy5iZ19tZy5iZ0FycmF5W2JnXS5ncm91cF9tYW5hZ2VyLm1lbWJlcnMpIHtcclxuXHQgIFx0XHQvLyBjb25zb2xlLmxvZyh0aGlzLmJnX21nLmJnQXJyYXlbYmddLmdyb3VwX21hbmFnZXIubWVtYmVyc1tncm91cF0sIHRoaXMuYmdfbWcuYmdBcnJheVtiZ10uZ3JvdXBfbWFuYWdlci5tZW1iZXJzW2dyb3VwXS5oYXBwaW5lc3NNb2RpZmllcik7XHJcblx0XHRcdCAgZm9yICh2YXIgcGVyc29uIGluIHRoaXMuYmdfbWcuYmdBcnJheVtiZ10uZ3JvdXBfbWFuYWdlci5tZW1iZXJzW2dyb3VwXS5tZW1iZXJzKSB7XHJcblx0XHRcdFx0ICB0YXhlcyArPSB0aGlzLmJnX21nLmJnQXJyYXlbYmddLmdyb3VwX21hbmFnZXIubWVtYmVyc1tncm91cF0ubWVtYmVyc1twZXJzb25dLmdldFRheCgpO1xyXG5cdFx0XHRcdCAgdGhpcy5iZ19tZy5iZ0FycmF5W2JnXS5ncm91cF9tYW5hZ2VyLm1lbWJlcnNbZ3JvdXBdLm1lbWJlcnNbcGVyc29uXS5hZ2VUaWNrKCk7XHJcblx0XHRcdCAgfVxyXG5cdFx0XHQgIGlmICh0aGlzLmJnX21nLmJnQXJyYXlbYmddLmdyb3VwX21hbmFnZXIuYmFja2dyb3VuZC50eXBlID09ICd3b3JrJykge1xyXG5cdFx0XHQgIFx0dGhpcy5iZ19tZy5iZ0FycmF5W2JnXS5ncm91cF9tYW5hZ2VyLm1lbWJlcnNbZ3JvdXBdLmFkZEZhdGlndWUodGhpcy5mYXRpZ3VlUGVyVGljayk7XHJcblx0XHRcdCAgfSBlbHNlIHtcclxuXHRcdFx0ICBcdHRoaXMuYmdfbWcuYmdBcnJheVtiZ10uZ3JvdXBfbWFuYWdlci5tZW1iZXJzW2dyb3VwXS5hZGRGYXRpZ3VlKC0xICogdGhpcy5mYXRpZ3VlUGVyVGljayk7XHJcblx0XHRcdCAgfVxyXG5cdFx0XHQgIGlmICh0aGlzLmJnX21nLmJnQXJyYXlbYmddLmdyb3VwX21hbmFnZXIubWVtYmVyc1tncm91cF0pIHtcclxuXHRcdFx0ICBcdC8vIGNvbnNvbGUubG9nKCdhJyk7XHJcblx0XHRcdCAgXHQvLyBjb25zb2xlLmxvZyh0aGlzLmJnX21nLmJnQXJyYXlbYmddLmdyb3VwX21hbmFnZXIubWVtYmVyc1tncm91cF0sIHRoaXMuYmdfbWcuYmdBcnJheVtiZ10uZ3JvdXBfbWFuYWdlci5tZW1iZXJzW2dyb3VwXS5oYXBwaW5lc3NNb2RpZmllcik7XHJcblx0XHRcdCAgXHR0aGlzLmJnX21nLmJnQXJyYXlbYmddLmdyb3VwX21hbmFnZXIubWVtYmVyc1tncm91cF0uYXBwbHlIYXBwaW5lc3MoKTtcclxuXHRcdFx0ICB9XHJcblx0XHQgIH1cclxuXHQgIH1cclxuXHQgIHRoaXMuYWRkTW9uZXkodGF4ZXMpO1xyXG5cdCAgdGhpcy5tb25leUNoYW5nZS50ZXh0ID0gKCh0YXhlcyA+PSAwKSA/ICcrJyA6ICctJykgKyAnJCcgKyB0YXhlcztcclxuXHQgIHRoaXMubW9uZXlDaGFuZ2UuZmlsbCA9ICh0YXhlcyA+PSAwKSA/ICcjMTZmYjA0JyA6ICcjZmYwMDAwJztcclxuXHQgIHRoaXMubW9uZXlDaGFuZ2UuYWxwaGEgPSAxO1xyXG5cdCAgdGhpcy5tb25leUNoYW5nZUhvbGQgPSB0cnVlO1xyXG5cclxuXHQgIHRoaXMuZ2FtZS50aW1lLmV2ZW50cy5hZGQoUGhhc2VyLlRpbWVyLlNFQ09ORCAqIHRoaXMudGF4VGltZSwgdGhpcy5jb2xsZWN0VGF4LCB0aGlzKTtcclxuICB9LFxyXG4gIGZhZGVNb25leUNoYW5nZTogZnVuY3Rpb24gKCkge1xyXG4gIFx0XHQvLyBjb25zb2xlLmxvZyh0aGlzLm1vbmV5Q2hhbmdlLmFscGhhKTtcclxuICBcdFx0aWYgKHRoaXMubW9uZXlDaGFuZ2VIb2xkKSB7XHJcbiAgXHRcdFx0dGhpcy5tb25leUNoYW5nZUhvbGQgPSBmYWxzZTtcclxuICBcdFx0XHR0aGlzLmdhbWUudGltZS5ldmVudHMuYWRkKFBoYXNlci5UaW1lci5TRUNPTkQgKiB0aGlzLm1vbmV5Q2hhbmdlSG9sZERlbGF5LCB0aGlzLmZhZGVNb25leUNoYW5nZSwgdGhpcyk7XHJcbiAgXHRcdH0gZWxzZSB7XHJcblx0ICBcdFx0dGhpcy5tb25leUNoYW5nZS5hbHBoYSAtPSB0aGlzLm1vbmV5Q2hhbmdlRmFkZVJhdGU7XHJcblx0ICBcdFx0dGhpcy5nYW1lLnRpbWUuZXZlbnRzLmFkZChQaGFzZXIuVGltZXIuU0VDT05EICogdGhpcy5tb25leUNoYW5nZUZhZGVEZWxheSwgdGhpcy5mYWRlTW9uZXlDaGFuZ2UsIHRoaXMpO1xyXG5cdCAgXHR9XHJcbiAgfSxcclxuICBzZXRIYXBwaW5lc3M6IGZ1bmN0aW9uIChhbXQpIHtcclxuXHQgIHRoaXMuY3VySGFwcGluZXNzID0gYW10O1xyXG5cdCAgaWYgKCF0aGlzLmhhcHBpbmVzc0luY3JlbWVudGluZykge1xyXG5cdFx0ICB0aGlzLmdhbWUudGltZS5ldmVudHMuYWRkKFBoYXNlci5UaW1lci5TRUNPTkQgKiB0aGlzLmhhcHBpbmVzc1VwZGF0ZURlbGF5LCB0aGlzLmluY3JlbWVudEhhcHBpbmVzcywgdGhpcyk7XHJcblx0XHQgIHRoaXMuaGFwcGluZXNzSW5jcmVtZW50aW5nID0gdHJ1ZTtcclxuXHQgIH1cclxuICB9LFxyXG4gIGluY3JlbWVudEhhcHBpbmVzczogZnVuY3Rpb24gKCkge1xyXG5cdGlmICh0aGlzLmhhcHBpbmVzc1ZhbCA9PT0gdGhpcy5jdXJIYXBwaW5lc3MpIHtcclxuXHRcdHRoaXMuaGFwcGluZXNzSW5jcmVtZW50aW5nID0gZmFsc2U7XHJcblx0XHRyZXR1cm47XHJcblx0fVxyXG5cdGlmICh0aGlzLmN1ckhhcHBpbmVzcyA+IHRoaXMuaGFwcGluZXNzVmFsKSB7XHJcblx0XHR0aGlzLmJhci5hZGRWYWx1ZSgxKTtcclxuXHRcdHRoaXMuaGFwcGluZXNzVmFsICs9IDE7XHJcblx0fSBlbHNlIGlmICh0aGlzLmN1ckhhcHBpbmVzcyA8IHRoaXMuaGFwcGluZXNzVmFsKSB7XHJcblx0XHR0aGlzLmJhci5hZGRWYWx1ZSgtMSk7XHJcblx0XHR0aGlzLmhhcHBpbmVzc1ZhbCAtPSAxO1xyXG5cdH1cclxuXHR0aGlzLmdhbWUudGltZS5ldmVudHMuYWRkKFBoYXNlci5UaW1lci5TRUNPTkQgKiB0aGlzLmhhcHBpbmVzc1VwZGF0ZURlbGF5LCB0aGlzLmluY3JlbWVudEhhcHBpbmVzcywgdGhpcyk7XHJcbiAgfSxcclxuICBhZGRNb25leTogZnVuY3Rpb24gKGFtdCkge1xyXG5cdCAgdGhpcy5jdXJNb25leSArPSBhbXQ7XHJcblx0ICAvL3RoaXMubW9uZXkudGV4dCA9ICckJyArIG5ld01vbmV5O1xyXG5cdCAgaWYgKCF0aGlzLm1vbmV5SW5jcmVtZW50aW5nKSB7XHJcblx0XHR0aGlzLmdhbWUudGltZS5ldmVudHMuYWRkKFBoYXNlci5UaW1lci5TRUNPTkQgKiB0aGlzLm1vbmV5VXBkYXRlRGVsYXksIHRoaXMuaW5jcmVtZW50TW9uZXksIHRoaXMpO1xyXG5cdFx0dGhpcy5tb25leUluY3JlbWVudGluZyA9IHRydWU7XHJcblx0ICB9XHJcbiAgfSxcclxuICBpbmNyZW1lbnRNb25leTogZnVuY3Rpb24gKCkge1xyXG5cdGlmICh0aGlzLm1vbmV5VmFsID09PSB0aGlzLmN1ck1vbmV5KSB7XHJcblx0XHR0aGlzLm1vbmV5SW5jcmVtZW50aW5nID0gZmFsc2U7XHJcblx0XHRyZXR1cm47XHJcblx0fVxyXG5cdGlmICh0aGlzLmN1ck1vbmV5ID4gdGhpcy5tb25leVZhbCkge1xyXG5cdFx0dGhpcy5tb25leVZhbCArPSAxMDtcclxuXHR9IGVsc2UgaWYgKHRoaXMuY3VyTW9uZXkgPCB0aGlzLm1vbmV5VmFsKSB7XHJcblx0XHR0aGlzLm1vbmV5VmFsIC09IDEwO1xyXG5cdH1cclxuXHR0aGlzLm1vbmV5LnRleHQgPSAnJCcgKyB0aGlzLm1vbmV5VmFsO1xyXG5cdHRoaXMuZ2FtZS50aW1lLmV2ZW50cy5hZGQoUGhhc2VyLlRpbWVyLlNFQ09ORCAqIHRoaXMubW9uZXlVcGRhdGVEZWxheSwgdGhpcy5pbmNyZW1lbnRNb25leSwgdGhpcyk7XHJcbiAgfSxcclxuICBkZWNUYXhMb3c6IGZ1bmN0aW9uICgpIHtcclxuICAgIGlmICh0aGlzLnRheE1vZC5sb3cgPT0gMSkge1xyXG4gICAgICB0aGlzLnRheE1vZC5sb3cgPSAuNTtcclxuICAgICAgdGhpcy50ZXh0VGF4TG93LnRleHQgPSAnJCc7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICh0aGlzLnRheE1vZC5sb3cgPT0gMS41KSB7XHJcbiAgICAgIHRoaXMudGF4TW9kLmxvdyA9IDE7XHJcbiAgICAgIHRoaXMudGV4dFRheExvdy50ZXh0ID0gJyQkJztcclxuICAgIH1cclxuICB9LFxyXG4gIGluY1RheExvdzogZnVuY3Rpb24gKCkge1xyXG4gICAgaWYgKHRoaXMudGF4TW9kLmxvdyA9PSAuNSkge1xyXG4gICAgICB0aGlzLnRheE1vZC5sb3cgPSAxO1xyXG4gICAgICB0aGlzLnRleHRUYXhMb3cudGV4dCA9ICckJCc7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICh0aGlzLnRheE1vZC5sb3cgPT0gMSkge1xyXG4gICAgICB0aGlzLnRheE1vZC5sb3cgPSAxLjU7XHJcbiAgICAgIHRoaXMudGV4dFRheExvdy50ZXh0ID0gJyQkJCc7XHJcbiAgICB9XHJcbiAgfSxcclxuICBkZWNUYXhNaWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgIGlmICh0aGlzLnRheE1vZC5taWQgPT0gMSkge1xyXG4gICAgICB0aGlzLnRheE1vZC5taWQgPSAuNTtcclxuICAgICAgdGhpcy50ZXh0VGF4TWlkLnRleHQgPSAnJCc7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICh0aGlzLnRheE1vZC5taWQgPT0gMS41KSB7XHJcbiAgICAgIHRoaXMudGF4TW9kLm1pZCA9IDE7XHJcbiAgICAgIHRoaXMudGV4dFRheE1pZC50ZXh0ID0gJyQkJztcclxuICAgIH1cclxuICB9LFxyXG4gIGluY1RheE1pZDogZnVuY3Rpb24gKCkge1xyXG4gICAgaWYgKHRoaXMudGF4TW9kLm1pZCA9PSAuNSkge1xyXG4gICAgICB0aGlzLnRheE1vZC5taWQgPSAxO1xyXG4gICAgICB0aGlzLnRleHRUYXhNaWQudGV4dCA9ICckJCc7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICh0aGlzLnRheE1vZC5taWQgPT0gMSkge1xyXG4gICAgICB0aGlzLnRheE1vZC5taWQgPSAxLjU7XHJcbiAgICAgIHRoaXMudGV4dFRheE1pZC50ZXh0ID0gJyQkJCc7XHJcbiAgICB9XHJcbiAgfSxcclxuICBkZWNUYXhIaWdoOiBmdW5jdGlvbiAoKSB7XHJcbiAgICBpZiAodGhpcy50YXhNb2QuaGlnaCA9PSAxKSB7XHJcbiAgICAgIHRoaXMudGF4TW9kLmhpZ2ggPSAuNTtcclxuICAgICAgdGhpcy50ZXh0VGF4SGlnaC50ZXh0ID0gJyQnO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodGhpcy50YXhNb2QuaGlnaCA9PSAxLjUpIHtcclxuICAgICAgdGhpcy50YXhNb2QuaGlnaCA9IDE7XHJcbiAgICAgIHRoaXMudGV4dFRheEhpZ2gudGV4dCA9ICckJCc7XHJcbiAgICB9XHJcbiAgfSxcclxuICBpbmNUYXhIaWdoOiBmdW5jdGlvbiAoKSB7XHJcbiAgICBpZiAodGhpcy50YXhNb2QuaGlnaCA9PSAuNSkge1xyXG4gICAgICB0aGlzLnRheE1vZC5oaWdoID0gMTtcclxuICAgICAgdGhpcy50ZXh0VGF4SGlnaC50ZXh0ID0gJyQkJztcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHRoaXMudGF4TW9kLmhpZ2ggPT0gMSkge1xyXG4gICAgICB0aGlzLnRheE1vZC5oaWdoID0gMS41O1xyXG4gICAgICB0aGlzLnRleHRUYXhIaWdoLnRleHQgPSAnJCQkJztcclxuICAgIH1cclxuICB9XHJcbn07XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG4iLCJ2YXIgR2FtZV9PdmVyID0gZnVuY3Rpb24gKCkge1xyXG4gIHRoaXMudGV4dCA9IG51bGw7XHJcbiAgdGhpcy50ZXh0U21hbGwgPSBudWxsO1xyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBHYW1lX092ZXI7XHJcblxyXG5HYW1lX092ZXIucHJvdG90eXBlID0ge1xyXG5cclxuICBjcmVhdGU6IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciB4ID0gdGhpcy5nYW1lLndpZHRoIC8gMjtcclxuICAgIHZhciB5ID0gdGhpcy5nYW1lLmhlaWdodCAvIDI7XHJcblxyXG4gICAgdmFyIHN0eWxlID0geyBmb250OiBcIlJvYm90b1wiLCBmb250U2l6ZTogNjQsIGZpbGw6IFwiIzAwMDAwMFwiLCBhbGlnbjogXCJjZW50ZXJcIiB9O1xyXG4gICAgdmFyIHNtYWxsU3R5bGUgPSB7IGZvbnQ6IFwiUm9ib3RvXCIsIGZvbnRTaXplOiAzMiwgZmlsbDogXCIjMDAwMDAwXCIsIGFsaWduOiBcImxlZnRcIiB9O1xyXG5cclxuICAgIHRoaXMudGV4dCA9IHRoaXMuYWRkLnRleHQoeCAtIDMwMCwgeSAtIDIwMCwgXCJHYW1lIE92ZXJcIiwgc3R5bGUpO1xyXG4gICAgdGhpcy50ZXh0U21hbGwgPSB0aGlzLmFkZC50ZXh0KHggLSAzMDAsIHkgLSAxMDAsIFwieW91ciBoYXBwaW5lc3Mgd2VudCB1bmRlciA1MCVcXG5cIiArIFwiY2xpY2sgdG8gY29udGludWVcIiwgc21hbGxTdHlsZSk7XHJcbiAgICB0aGlzLmdhbWUudGltZS5ldmVudHMuYWRkKFBoYXNlci5UaW1lci5TRUNPTkQgKiAzLCB0aGlzLmRvVGhpbmcsIHRoaXMpO1xyXG4gIH0sXHJcblxyXG4gIHVwZGF0ZTogZnVuY3Rpb24gKCkge1xyXG5cclxuICB9LFxyXG5cclxuICBkb1RoaW5nOiBmdW5jdGlvbigpIHtcclxuICAgIHRoaXMuaW5wdXQub25Eb3duLmFkZCh0aGlzLm9uRG93biwgdGhpcyk7XHJcbiAgfSxcclxuXHJcbiAgb25Eb3duOiBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLmdhbWUuc3RhdGUuc3RhcnQoJ01lbnUnKTtcclxuICB9XHJcbn07IiwidmFyIE1lbnUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgdGhpcy50ZXh0ID0gbnVsbDtcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gTWVudTtcclxuXHJcbk1lbnUucHJvdG90eXBlID0ge1xyXG5cclxuICBjcmVhdGU6IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciB4ID0gdGhpcy5nYW1lLndpZHRoIC8gMjtcclxuICAgIHZhciB5ID0gdGhpcy5nYW1lLmhlaWdodCAvIDI7XHJcblxyXG4gICAgdmFyIHN0eWxlID0geyBmb250OiBcIlJvYm90b1wiLCBmb250U2l6ZTogNjQsIGZpbGw6IFwiIzAwMDAwMFwiLCBhbGlnbjogXCJjZW50ZXJcIiB9O1xyXG5cclxuICAgIHRoaXMudGV4dCA9IHRoaXMuYWRkLnRleHQoeCwgeSwgXCJDbGljayB0byBTdGFydFwiLCBzdHlsZSk7XHJcbiAgICB0aGlzLnRleHQuYW5jaG9yLnNldFRvKC41LCAuNSk7XHJcbiAgICB0aGlzLmlucHV0Lm9uRG93bi5hZGQodGhpcy5vbkRvd24sIHRoaXMpO1xyXG4gIH0sXHJcblxyXG4gIHVwZGF0ZTogZnVuY3Rpb24gKCkge1xyXG4gIH0sXHJcblxyXG4gIG9uRG93bjogZnVuY3Rpb24gKCkge1xyXG4gICAgdGhpcy5nYW1lLnN0YXRlLnN0YXJ0KHBsYXllclN0YXRlLmN1cnJlbnRMZXZlbCk7XHJcbiAgfVxyXG59O1xyXG4iLCJ2YXIgUHJlbG9hZGVyID0gZnVuY3Rpb24gKGdhbWUpIHtcclxuICB0aGlzLmFzc2V0ID0gbnVsbDtcclxuICB0aGlzLnJlYWR5ID0gZmFsc2U7XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFByZWxvYWRlcjtcclxuXHJcblByZWxvYWRlci5wcm90b3R5cGUgPSB7XHJcblxyXG4gIHByZWxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMuYXNzZXQgPSB0aGlzLmFkZC5zcHJpdGUoMzIwLCAyNDAsICdwcmVsb2FkZXInKTtcclxuICAgIHRoaXMuYXNzZXQuYW5jaG9yLnNldFRvKDAuNSwgMC41KTtcclxuXHJcbiAgICB0aGlzLmxvYWQub25Mb2FkQ29tcGxldGUuYWRkT25jZSh0aGlzLm9uTG9hZENvbXBsZXRlLCB0aGlzKTtcclxuICAgIHRoaXMubG9hZC5zZXRQcmVsb2FkU3ByaXRlKHRoaXMuYXNzZXQpO1xyXG4gICAgdGhpcy5sb2FkLmltYWdlKCd0ZXN0c3ByaXRlJywgJ2Fzc2V0cy90ZXN0LnBuZycpO1xyXG4gICAgdGhpcy5sb2FkLmltYWdlKCdtZW51X2JnJywgJ2Fzc2V0cy9tZW51X2JnLnBuZycpO1xyXG4gICAgdGhpcy5sb2FkLmltYWdlKCdiYWNrZ3JvdW5kJywgJ2Fzc2V0cy9zZWN0b3JCRy5wbmcnKVxyXG4gICAgdGhpcy5sb2FkLmltYWdlKCdwZXJzb24nLCAnYXNzZXRzL3BlcnNvbi5wbmcnKTtcclxuICAgIHRoaXMubG9hZC5pbWFnZSgnc2VsZWN0aW9uJywgJ2Fzc2V0cy9zZWxlY3Rpb24ucG5nJyk7XHJcbiAgICB0aGlzLmxvYWQuaW1hZ2UoJ2Jvb2snLCAnYXNzZXRzL2Jvb2sucG5nJyk7XHJcbiAgICB0aGlzLmxvYWQuaW1hZ2UoJ3lvdW5nJywgJ2Fzc2V0cy95b3VuZy5wbmcnKTtcclxuICAgIHRoaXMubG9hZC5pbWFnZSgnYWR1bHQnLCAnYXNzZXRzL2FkdWx0LnBuZycpO1xyXG4gICAgdGhpcy5sb2FkLmltYWdlKCdvbGQnLCAnYXNzZXRzL29sZC5wbmcnKTtcclxuICAgIHRoaXMubG9hZC5pbWFnZSgndGF4UmVkdWNlJywgJ2Fzc2V0cy90YXhSZWR1Y2UucG5nJyk7XHJcbiAgICB0aGlzLmxvYWQuaW1hZ2UoJ3RheEFkZCcsICdhc3NldHMvdGF4QWRkLnBuZycpO1xyXG4gICAgdGhpcy5sb2FkLmltYWdlKCdsb2NrJywgJ2Fzc2V0cy9sb2NrLnBuZycpO1xyXG4gICAgdGhpcy5sb2FkLnNwcml0ZXNoZWV0KCdjaGV2cm9ucycsICdhc3NldHMvY2hldnJvbl9zaGVldC5wbmcnLCA0MCwgNTApO1xyXG4gICAgLy8gdGhpcy5sb2FkLmF0bGFzSlNPTkhhc2goJ2NoZXZyb25zJywgJ2Fzc2V0cy9jaGV2cm9ucy5wbmcnLCAnYXNzZXRzL2NoZXZyb25zLmpzb24nKTtcclxuICAgIHRoaXMubG9hZC5hdGxhc0pTT05IYXNoKCdhZ2VzJywgJ2Fzc2V0cy9hZ2VzLnBuZycsICdhc3NldHMvYWdlcy5qc29uJyk7XHJcbiAgICB0aGlzLmxvYWQuaW1hZ2UoJ2hhcHB5ZmFjZScsICdhc3NldHMvaGFwcHlmYWNlX2JldHRlci5wbmcnKTtcclxuICAgIHRoaXMubG9hZC5pbWFnZSgnYm9yZGVyZWQnLCAnYXNzZXRzL2JvcmRlcmVkLnBuZycpO1xyXG4gICAgdGhpcy5sb2FkLmltYWdlKCdsb3dfZG9sbGFyJywgJ2Fzc2V0cy9sb3dfZG9sbGFyLnBuZycpO1xyXG4gICAgdGhpcy5sb2FkLmltYWdlKCdtZWRfZG9sbGFyJywgJ2Fzc2V0cy9tZWRfZG9sbGFyLnBuZycpO1xyXG4gICAgdGhpcy5sb2FkLmltYWdlKCdoaWdoX2RvbGxhcicsICdhc3NldHMvaGlnaF9kb2xsYXIucG5nJyk7XHJcbiAgICB0aGlzLmxvYWQuc2NyaXB0KCd3ZWJmb250JywgJy8vYWpheC5nb29nbGVhcGlzLmNvbS9hamF4L2xpYnMvd2ViZm9udC8xLjQuNy93ZWJmb250LmpzJyk7XHJcbiAgfSxcclxuXHJcbiAgY3JlYXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLmFzc2V0LmNyb3BFbmFibGVkID0gZmFsc2U7XHJcbiAgfSxcclxuXHJcbiAgdXBkYXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICBpZiAoISF0aGlzLnJlYWR5KSB7XHJcbiAgICAgIHRoaXMuZ2FtZS5zdGF0ZS5zdGFydCgnR2FtZScpO1xyXG4gICAgfVxyXG4gIH0sXHJcblxyXG4gIG9uTG9hZENvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICB0aGlzLnJlYWR5ID0gdHJ1ZTtcclxuICB9XHJcbn07XHJcbiIsInZhciBTcGxhc2ggPSBmdW5jdGlvbiAoKSB7XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFNwbGFzaDtcclxuXHJcblNwbGFzaC5wcm90b3R5cGUgPSB7XHJcbiAgY3JlYXRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgfVxyXG59OyIsInZhciBVdGlscyA9IHtcclxuICAgIGNvbnRhaW5zT2JqZWN0OiBmdW5jdGlvbihvYmosIGxpc3QpIHtcclxuICAgICAgICB2YXIgaTtcclxuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAobGlzdFtpXSA9PT0gb2JqKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfSxcclxuXHRoeXBvdGVudXNlOiBmdW5jdGlvbihhLCBiKSB7XHJcblx0XHRyZXR1cm4gTWF0aC5zcXJ0KE1hdGgucG93KGEsIDIpICsgTWF0aC5wb3coYiwgMikpO1xyXG5cdH0sXHJcblx0cmF0aW86IGZ1bmN0aW9uKGEsIGIsIGMpIHtcclxuXHRcdGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxKSB7XHJcblx0XHRcdHJldHVybiBbYSAvIGFdO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMikge1xyXG5cdFx0XHRyZXR1cm4gW2EgLyAoYSArIGIpLCBiIC8gKGEgKyBiKV07XHJcblx0XHR9XHJcblx0XHRlbHNlIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAzKSB7XHJcblx0XHRcdHJldHVybiBbYSAvIChhICsgYiArIGMpLCBiIC8gKGEgKyBiICsgYyksIGMgLyAoYSArIGIgKyBjKV07XHJcblx0XHR9XHJcblx0XHRlbHNlIHtcclxuXHRcdFx0cmV0dXJuIFtdO1xyXG5cdFx0fVxyXG5cdH1cclxufTtcclxuXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IFV0aWxzOyJdfQ==
>>>>>>> 1f3ac272f7ca9f833fe9d59fb87f75f685ff6709
>>>>>>> 6b049f972310c557449681233c40bb620fca75da
>>>>>>> f782f706fca34ea9aca89014e6eae699b1eb0f15
